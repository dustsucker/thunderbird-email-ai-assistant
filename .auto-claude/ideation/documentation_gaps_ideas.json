{
  "documentation_gaps": [
    {
      "id": "doc-001",
      "type": "documentation_gaps",
      "title": "Create Architecture Documentation with Clean Architecture Diagram",
      "description": "The codebase follows a well-structured Clean Architecture pattern with domain/, application/, infrastructure/, and interfaces/ layers, but this architecture is not documented anywhere. The src/ directory has clear separation of concerns with domain entities, use cases, providers, and UI adapters, but developers need to reverse-engineer this structure from the code.",
      "rationale": "New contributors and maintainers need to understand the architectural decisions (dependency injection with TSyringe, event-driven patterns, provider abstraction) to contribute effectively. The project uses sophisticated patterns that aren't immediately obvious.",
      "category": "architecture",
      "targetAudience": "contributors",
      "affectedAreas": [
        "src/domain/",
        "src/application/",
        "src/infrastructure/",
        "src/interfaces/"
      ],
      "currentDocumentation": "Only README.md with usage instructions; no architecture documentation exists",
      "proposedContent": "Create docs/ARCHITECTURE.md with: 1) High-level diagram showing layers (domain, application, infrastructure, interfaces), 2) Data flow diagram for email analysis pipeline, 3) Dependency injection patterns and tokens, 4) Event bus system explanation, 5) Provider abstraction and factory pattern",
      "priority": "high",
      "estimatedEffort": "medium"
    },
    {
      "id": "doc-002",
      "type": "documentation_gaps",
      "title": "Add JSDoc Documentation to Provider Implementations",
      "description": "Provider implementations have inconsistent documentation. OllamaProvider.ts has only 1 documented method (listModels) out of 7, while other providers like ClaudeProvider, MistralProvider, GeminiProvider, OpenAIProvider, and DeepseekProvider follow similar patterns but lack comprehensive JSDoc comments explaining their configuration, API interaction, and error handling.",
      "rationale": "Providers are the core integration points with external AI services. Developers extending or debugging providers need to understand: required settings, API endpoints, request/response formats, error handling strategies, and rate limiting considerations.",
      "category": "api_docs",
      "targetAudience": "developers",
      "affectedAreas": [
        "src/infrastructure/providers/impl/OllamaProvider.ts",
        "src/infrastructure/providers/impl/ClaudeProvider.ts",
        "src/infrastructure/providers/impl/OpenAIProvider.ts",
        "src/infrastructure/providers/impl/MistralProvider.ts",
        "src/infrastructure/providers/impl/GeminiProvider.ts",
        "src/infrastructure/providers/impl/DeepseekProvider.ts"
      ],
      "currentDocumentation": "Only listModels() has JSDoc; other methods like validateSettings(), buildRequestBody(), parseResponse() are undocumented",
      "proposedContent": "Add JSDoc to all provider methods: 1) Class-level documentation explaining provider purpose and API requirements, 2) Method documentation with @param, @returns, @throws, 3) Configuration examples in @example blocks, 4) Document provider-specific quirks and requirements",
      "priority": "high",
      "estimatedEffort": "medium"
    },
    {
      "id": "doc-003",
      "type": "documentation_gaps",
      "title": "Create CONTRIBUTING.md with Provider Extension Guide",
      "description": "The project lacks contributing guidelines and documentation on how to extend the system. There's no guidance on: coding standards, PR requirements, testing expectations, or how to add new AI providers. The codebase supports 8 providers (OpenAI, Claude, Gemini, Mistral, Ollama, DeepSeek, ZAI-PaaS, ZAI-Coding) but adding new ones requires reading existing implementations.",
      "rationale": "Open source contributors and team members need clear guidance on contribution workflow. Adding new AI providers is a common extension point but currently requires reverse-engineering BaseProvider and provider registration patterns.",
      "category": "readme",
      "targetAudience": "contributors",
      "affectedAreas": [
        "src/infrastructure/providers/BaseProvider.ts",
        "src/infrastructure/providers/ProviderFactory.ts",
        "src/infrastructure/interfaces/IProvider.ts"
      ],
      "currentDocumentation": "No CONTRIBUTING.md exists; README only covers installation and usage",
      "proposedContent": "Create CONTRIBUTING.md with: 1) Development setup instructions, 2) Coding standards and linting rules, 3) Testing requirements (unit/e2e), 4) PR process and review expectations, 5) Step-by-step guide to add a new AI provider including: implementing BaseProvider, registering with ProviderFactory, adding settings UI, and writing tests",
      "priority": "high",
      "estimatedEffort": "medium"
    },
    {
      "id": "doc-004",
      "type": "documentation_gaps",
      "title": "Add Troubleshooting Section to README with Common Issues",
      "description": "The README lacks troubleshooting guidance for end users. The comprehensive troubleshooting section in docs/E2E-TESTING.md (written in German) covers testing issues but not common user-facing problems like: API connection failures, tag not appearing, permission errors, or extension not processing emails.",
      "rationale": "End users installing from Thunderbird Add-ons may encounter configuration issues. Common problems include: API key validation failures, permission requests being denied, emails not being tagged, and Ollama connection issues. Currently users must search issues or read source code.",
      "category": "troubleshooting",
      "targetAudience": "users",
      "affectedAreas": [
        "README.md"
      ],
      "currentDocumentation": "README has setup instructions but no troubleshooting; E2E-TESTING.md has testing troubleshooting only",
      "proposedContent": "Add README Troubleshooting section with: 1) 'Extension not tagging emails' - check provider settings, API key validity, 2) 'Permission denied' - explain permission request flow and origins, 3) 'Ollama not connecting' - localhost URL validation, CORS issues, 4) 'Tags not visible in Thunderbird' - tag sync and filter setup, 5) Debug mode and console logging instructions",
      "priority": "medium",
      "estimatedEffort": "low"
    },
    {
      "id": "doc-005",
      "type": "documentation_gaps",
      "title": "Document Test Helpers and Fixtures with Usage Examples",
      "description": "The test/ directory contains helper utilities (test-helpers.ts, fixture-loader.ts, MockProvider.ts) that lack JSDoc documentation. Functions like runTaggingTest(), expectValidResponse(), and loadEmailFixture() are used throughout tests but have no documentation explaining their purpose, parameters, or usage patterns.",
      "rationale": "Contributors writing new tests need to understand the testing infrastructure. The existing test helpers enable consistent testing patterns but their capabilities aren't documented. This leads to duplicated test code or inconsistent testing approaches.",
      "category": "api_docs",
      "targetAudience": "contributors",
      "affectedAreas": [
        "test/test-helpers.ts",
        "test/fixtures/fixture-loader.ts",
        "test/mocks/MockProvider.ts",
        "test/test-config.ts"
      ],
      "currentDocumentation": "No JSDoc on test utilities; only code inspection reveals usage patterns",
      "proposedContent": "Add JSDoc to test utilities: 1) test-helpers.ts - document runTaggingTest() params and return value, expectValidResponse() assertions, MOCK_SETTINGS usage, 2) fixture-loader.ts - document loadEmailFixture() and available fixtures, 3) MockProvider.ts - explain mock behavior and customization, 4) test-config.ts - document getTestConfig() and hasValidZaiConfig() for conditional E2E tests",
      "priority": "medium",
      "estimatedEffort": "low"
    }
  ],
  "metadata": {
    "filesAnalyzed": 67,
    "documentedFunctions": 45,
    "undocumentedFunctions": 32,
    "readmeLastUpdated": "Unknown",
    "existingDocs": [
      "README.md",
      "docs/E2E-TESTING.md"
    ],
    "jsDocCoverage": {
      "excellent": [
        "src/infrastructure/providers/ProviderFactory.ts",
        "src/application/use-cases/AnalyzeEmail.ts",
        "src/infrastructure/interfaces/IProvider.ts",
        "src/interfaces/options/SettingsForm.ts"
      ],
      "partial": [
        "src/domain/entities/Email.ts",
        "src/domain/entities/Tag.ts"
      ],
      "minimal": [
        "src/infrastructure/providers/impl/OllamaProvider.ts",
        "src/infrastructure/providers/impl/ClaudeProvider.ts",
        "test/test-helpers.ts"
      ]
    },
    "generatedAt": "2025-12-28T18:15:00Z"
  }
}
