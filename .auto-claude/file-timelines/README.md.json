{
  "file_path": "README.md",
  "main_branch_history": [],
  "task_views": {
    "003-confidence-score-display-and-threshold-configurati": {
      "task_id": "003-confidence-score-display-and-threshold-configurati",
      "branch_point": {
        "commit_hash": "f6a57e8f6ff34822855d2c5f711f425bd9bc6897",
        "content": "# Thunderbird Email AI Assistant\n\n> AI-powered, multi-provider mail tagging and classification engine for Thunderbird.\n\nPlugin page: https://addons.thunderbird.net/eN-US/thunderbird/addon/email-assistant/\n\nThis Thunderbird MailExtension provides a powerful and flexible framework for AI-powered email analysis. It automatically processes incoming emails, sends them to a language model of your choice for analysis, and then applies tags based on the model's response. This allows for sophisticated, automated email classification and sorting.\n\n## Key Features\n\n- **Multi-Provider LLM Support**: Integrates with local models via Ollama and cloud-based models from OpenAI, Google Gemini, Anthropic Claude, Mistral, and DeepSeek.\n- **Dynamic Email Analysis**: Intelligently extracts headers, text content (converting HTML to plain text), and attachment details for efficient and accurate analysis by the LLM.\n- **Fully Configurable Tagging**: Allows users to define their own custom tags, colors, and LLM prompts for a completely personalized email classification system.\n- **Privacy-Focused**: Gives users the choice between maximum privacy with a local Ollama instance or the power of cloud-based models, with clear privacy notices for each.\n- **Secure Configuration**: Features a comprehensive options page for managing API keys and provider settings, using Thunderbird's runtime permissions API for security.\n\n## Configuration and Usage\n\nAfter installing the add-on, you can configure it by going to `Tools > Add-ons and Themes`, finding \"Mail Assistant\", and clicking the \"...\" button to select **Options**.\n\n### General Settings\n\nThe General tab allows you to select your preferred LLM provider and enter the necessary credentials (API Key or local URL).\n\n![Ollama Settings](doc/screenshots/settings-ollama.png)\n_Ollama provider settings, with fields for a local URL and model name._\n\n![Mistral Settings](doc/screenshots/settings-mistral.png)\n_Settings for a cloud provider like Mistral, requiring an API key._\n\n### Custom Tags\n\nThe Custom Tags tab is where you can define the categories for email analysis. You can add, edit, or delete tags. Each tag has a name, a unique key, a color, and a specific prompt instruction that tells the LLM what to check for.\n\n![Custom Tags](doc/screenshots/settings-tags.png)\n_The interface for managing custom tags._\n\n### Usage\n\nOnce configured, the extension will automatically process new incoming emails. It applies the tags generated by the AI analysis, which can then be used with Thunderbird's built-in Message Filters to organize your inbox.\n\n### Organizing emails\n\nOnce automated tagging is working, you may create filters that will move tagged messages to folders or take other actions. You should set those filters to run\nperiodically, as tagging is executed after initial filtering.\n\n![Tagged Message](doc/screenshots/tagged-message.png)\n_An example of an email that has been automatically tagged by the assistant._\n\n## Development\n\n### Prerequisites\n\n- **Node.js and npm**: Required for managing dependencies and running build scripts. You can download them from [nodejs.org](https://nodejs.org/).\n- **Thunderbird**: The application this extension is built for.\n\n### Build Instructions\n\n1.  **Clone the repository:**\n\n    ```bash\n    git clone https://github.com/mcj-kr/thunderbird-email-ai-assistant.git\n    cd thunderbird-email-ai-assistant\n    ```\n\n2.  **Install dependencies:**\n\n    ```bash\n    npm install\n    ```\n\n3.  **Build the extension:**\n    This command runs webpack to bundle the scripts and then uses `web-ext` to package everything into a `.zip` file located in the `web-ext-artifacts/` directory.\n    ```bash\n    ./build.bash\n    ```\n\n## Installation\n\n### Adding plugin\n\nInstall plugin from: https://addons.thunderbird.net/eN-US/thunderbird/addon/email-assistant/\n\n### Temporary Installation (for Development)\n\n1.  Build the extension using the instructions above.\n2.  In Thunderbird, go to `Tools > Add-ons and Themes`.\n3.  Click the gear icon, select `Debug Add-ons`, and then click `Load Temporary Add-on...`.\n4.  Select the generated `.zip` file from the `web-ext-artifacts/` directory.\n",
        "timestamp": "2026-01-05T14:48:03.044500"
      },
      "worktree_state": {
        "content": "# Thunderbird Email AI Assistant\n\n> AI-powered, multi-provider mail tagging and classification engine for Thunderbird.\n\nPlugin page: https://addons.thunderbird.net/eN-US/thunderbird/addon/email-assistant/\n\nThis Thunderbird MailExtension provides a powerful and flexible framework for AI-powered email analysis. It automatically processes incoming emails, sends them to a language model of your choice for analysis, and then applies tags based on the model's response. This allows for sophisticated, automated email classification and sorting.\n\n## Key Features\n\n- **Multi-Provider LLM Support**: Integrates with local models via Ollama and cloud-based models from OpenAI, Google Gemini, Anthropic Claude, Mistral, and DeepSeek.\n- **Dynamic Email Analysis**: Intelligently extracts headers, text content (converting HTML to plain text), and attachment details for efficient and accurate analysis by the LLM.\n- **Fully Configurable Tagging**: Allows users to define their own custom tags, colors, and LLM prompts for a completely personalized email classification system.\n- **Confidence Scores & Thresholds**: Displays AI confidence scores for each classification and allows configurable thresholds to control when tags are auto-applied vs. flagged for manual review. See [Confidence Scores Guide](docs/user-guide/confidence-scores.md) for details.\n- **Privacy-Focused**: Gives users the choice between maximum privacy with a local Ollama instance or the power of cloud-based models, with clear privacy notices for each.\n- **Secure Configuration**: Features a comprehensive options page for managing API keys and provider settings, using Thunderbird's runtime permissions API for security.\n\n## Configuration and Usage\n\nAfter installing the add-on, you can configure it by going to `Tools > Add-ons and Themes`, finding \"Mail Assistant\", and clicking the \"...\" button to select **Options**.\n\n### General Settings\n\nThe General tab allows you to select your preferred LLM provider and enter the necessary credentials (API Key or local URL).\n\n![Ollama Settings](doc/screenshots/settings-ollama.png)\n_Ollama provider settings, with fields for a local URL and model name._\n\n![Mistral Settings](doc/screenshots/settings-mistral.png)\n_Settings for a cloud provider like Mistral, requiring an API key._\n\n### Custom Tags\n\nThe Custom Tags tab is where you can define the categories for email analysis. You can add, edit, or delete tags. Each tag has a name, a unique key, a color, and a specific prompt instruction that tells the LLM what to check for.\n\n![Custom Tags](doc/screenshots/settings-tags.png)\n_The interface for managing custom tags._\n\n### Usage\n\nOnce configured, the extension will automatically process new incoming emails. It applies the tags generated by the AI analysis, which can then be used with Thunderbird's built-in Message Filters to organize your inbox.\n\n### Organizing emails\n\nOnce automated tagging is working, you may create filters that will move tagged messages to folders or take other actions. You should set those filters to run\nperiodically, as tagging is executed after initial filtering.\n\n![Tagged Message](doc/screenshots/tagged-message.png)\n_An example of an email that has been automatically tagged by the assistant._\n\n## Development\n\n### Prerequisites\n\n- **Node.js and npm**: Required for managing dependencies and running build scripts. You can download them from [nodejs.org](https://nodejs.org/).\n- **Thunderbird**: The application this extension is built for.\n\n### Build Instructions\n\n1.  **Clone the repository:**\n\n    ```bash\n    git clone https://github.com/mcj-kr/thunderbird-email-ai-assistant.git\n    cd thunderbird-email-ai-assistant\n    ```\n\n2.  **Install dependencies:**\n\n    ```bash\n    npm install\n    ```\n\n3.  **Build the extension:**\n    This command runs webpack to bundle the scripts and then uses `web-ext` to package everything into a `.zip` file located in the `web-ext-artifacts/` directory.\n    ```bash\n    ./build.bash\n    ```\n\n## Installation\n\n### Adding plugin\n\nInstall plugin from: https://addons.thunderbird.net/eN-US/thunderbird/addon/email-assistant/\n\n### Temporary Installation (for Development)\n\n1.  Build the extension using the instructions above.\n2.  In Thunderbird, go to `Tools > Add-ons and Themes`.\n3.  Click the gear icon, select `Debug Add-ons`, and then click `Load Temporary Add-on...`.\n4.  Select the generated `.zip` file from the `web-ext-artifacts/` directory.\n",
        "last_modified": "2026-01-05T19:59:00.189277"
      },
      "task_intent": {
        "title": "Confidence Score Display and Threshold Configuration",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    },
    "010-confidence-score-display-and-threshold-configurati": {
      "task_id": "010-confidence-score-display-and-threshold-configurati",
      "branch_point": {
        "commit_hash": "bdfad3eb512d2cde785819b3e597f39d954633f3",
        "content": "# Thunderbird Email AI Assistant\n\n> AI-powered, multi-provider mail tagging and classification engine for Thunderbird.\n\nPlugin page: https://addons.thunderbird.net/eN-US/thunderbird/addon/email-assistant/\n\nThis Thunderbird MailExtension provides a powerful and flexible framework for AI-powered email analysis. It automatically processes incoming emails, sends them to a language model of your choice for analysis, and then applies tags based on the model's response. This allows for sophisticated, automated email classification and sorting.\n\n## Key Features\n\n- **Multi-Provider LLM Support**: Integrates with local models via Ollama and cloud-based models from OpenAI, Google Gemini, Anthropic Claude, Mistral, and DeepSeek.\n- **Dynamic Email Analysis**: Intelligently extracts headers, text content (converting HTML to plain text), and attachment details for efficient and accurate analysis by the LLM.\n- **Fully Configurable Tagging**: Allows users to define their own custom tags, colors, and LLM prompts for a completely personalized email classification system.\n- **Privacy-Focused**: Gives users the choice between maximum privacy with a local Ollama instance or the power of cloud-based models, with clear privacy notices for each.\n- **Secure Configuration**: Features a comprehensive options page for managing API keys and provider settings, using Thunderbird's runtime permissions API for security.\n\n## Configuration and Usage\n\nAfter installing the add-on, you can configure it by going to `Tools > Add-ons and Themes`, finding \"Mail Assistant\", and clicking the \"...\" button to select **Options**.\n\n### General Settings\n\nThe General tab allows you to select your preferred LLM provider and enter the necessary credentials (API Key or local URL).\n\n![Ollama Settings](doc/screenshots/settings-ollama.png)\n_Ollama provider settings, with fields for a local URL and model name._\n\n![Mistral Settings](doc/screenshots/settings-mistral.png)\n_Settings for a cloud provider like Mistral, requiring an API key._\n\n### Custom Tags\n\nThe Custom Tags tab is where you can define the categories for email analysis. You can add, edit, or delete tags. Each tag has a name, a unique key, a color, and a specific prompt instruction that tells the LLM what to check for.\n\n![Custom Tags](doc/screenshots/settings-tags.png)\n_The interface for managing custom tags._\n\n### Usage\n\nOnce configured, the extension will automatically process new incoming emails. It applies the tags generated by the AI analysis, which can then be used with Thunderbird's built-in Message Filters to organize your inbox.\n\n### Organizing emails\n\nOnce automated tagging is working, you may create filters that will move tagged messages to folders or take other actions. You should set those filters to run\nperiodically, as tagging is executed after initial filtering.\n\n![Tagged Message](doc/screenshots/tagged-message.png)\n_An example of an email that has been automatically tagged by the assistant._\n\n## Development\n\n### Prerequisites\n\n- **Node.js and npm**: Required for managing dependencies and running build scripts. You can download them from [nodejs.org](https://nodejs.org/).\n- **Thunderbird**: The application this extension is built for.\n\n### Build Instructions\n\n1.  **Clone the repository:**\n\n    ```bash\n    git clone https://github.com/mcj-kr/thunderbird-email-ai-assistant.git\n    cd thunderbird-email-ai-assistant\n    ```\n\n2.  **Install dependencies:**\n\n    ```bash\n    npm install\n    ```\n\n3.  **Build the extension:**\n    This command runs webpack to bundle the scripts and then uses `web-ext` to package everything into a `.zip` file located in the `web-ext-artifacts/` directory.\n    ```bash\n    ./build.bash\n    ```\n\n## Installation\n\n### Adding plugin\n\nInstall plugin from: https://addons.thunderbird.net/eN-US/thunderbird/addon/email-assistant/\n\n### Temporary Installation (for Development)\n\n1.  Build the extension using the instructions above.\n2.  In Thunderbird, go to `Tools > Add-ons and Themes`.\n3.  Click the gear icon, select `Debug Add-ons`, and then click `Load Temporary Add-on...`.\n4.  Select the generated `.zip` file from the `web-ext-artifacts/` directory.\n",
        "timestamp": "2026-01-06T07:24:51.082736"
      },
      "worktree_state": {
        "content": "# Thunderbird Email AI Assistant\n\n> AI-powered, multi-provider mail tagging and classification engine for Thunderbird.\n\nPlugin page: https://addons.thunderbird.net/eN-US/thunderbird/addon/email-assistant/\n\nThis Thunderbird MailExtension provides a powerful and flexible framework for AI-powered email analysis. It automatically processes incoming emails, sends them to a language model of your choice for analysis, and then applies tags based on the model's response. This allows for sophisticated, automated email classification and sorting.\n\n## Key Features\n\n- **Multi-Provider LLM Support**: Integrates with local models via Ollama and cloud-based models from OpenAI, Google Gemini, Anthropic Claude, Mistral, and DeepSeek.\n- **Confidence Score Display**: Shows confidence scores (0-100%) alongside each tag suggestion, providing transparency into AI classification certainty.\n- **Configurable Confidence Thresholds**: Allows users to set global and per-tag minimum confidence thresholds, ensuring tags are only applied when the AI is sufficiently confident.\n- **Low-Confidence Flagging**: Flags emails with low-confidence classifications for manual review, giving users control over borderline cases.\n- **Dynamic Email Analysis**: Intelligently extracts headers, text content (converting HTML to plain text), and attachment details for efficient and accurate analysis by the LLM.\n- **Fully Configurable Tagging**: Allows users to define their own custom tags, colors, and LLM prompts for a completely personalized email classification system.\n- **Privacy-Focused**: Gives users the choice between maximum privacy with a local Ollama instance or the power of cloud-based models, with clear privacy notices for each.\n- **Secure Configuration**: Features a comprehensive options page for managing API keys and provider settings, using Thunderbird's runtime permissions API for security.\n\n## Configuration and Usage\n\nAfter installing the add-on, you can configure it by going to `Tools > Add-ons and Themes`, finding \"Mail Assistant\", and clicking the \"...\" button to select **Options**.\n\n### General Settings\n\nThe General tab allows you to select your preferred LLM provider and enter the necessary credentials (API Key or local URL).\n\n![Ollama Settings](doc/screenshots/settings-ollama.png)\n_Ollama provider settings, with fields for a local URL and model name._\n\n![Mistral Settings](doc/screenshots/settings-mistral.png)\n_Settings for a cloud provider like Mistral, requiring an API key._\n\n### Custom Tags\n\nThe Custom Tags tab is where you can define the categories for email analysis. You can add, edit, or delete tags. Each tag has a name, a unique key, a color, and a specific prompt instruction that tells the LLM what to check for.\n\n![Custom Tags](doc/screenshots/settings-tags.png)\n_The interface for managing custom tags._\n\n### Confidence Thresholds\n\nThe Confidence Thresholds settings allow you to control when tags are automatically applied based on the AI's certainty level. This feature helps prevent incorrect classifications by only applying tags when the AI is confident enough.\n\n**Global Threshold**: Set a default confidence threshold (0-100%) that applies to all tags. The default is 70%. Tags with confidence below this threshold will not be automatically applied.\n\n**Per-Tag Override**: Override the global threshold for specific tags. For example, you might require a higher confidence (e.g., 85%) for important tags like \"Urgent\" while allowing lower confidence (e.g., 60%) for less critical tags.\n\n**Visual Indicators**:\n- Green badge (\u226580%): High confidence\n- Yellow badge (70-79%): Medium confidence\n- Red badge (<70%): Low confidence\n\n**Manual Review**: Emails with tags below your confidence threshold are flagged for manual review. You can access these via the \"Manual Review\" (Manuelle \u00dcberpr\u00fcfung) tab in the options page, where you can choose to apply or dismiss each tag suggestion.\n\n### Usage\n\nOnce configured, the extension will automatically process new incoming emails. It applies the tags generated by the AI analysis, which can then be used with Thunderbird's built-in Message Filters to organize your inbox.\n\n### Organizing emails\n\nOnce automated tagging is working, you may create filters that will move tagged messages to folders or take other actions. You should set those filters to run\nperiodically, as tagging is executed after initial filtering.\n\n![Tagged Message](doc/screenshots/tagged-message.png)\n_An example of an email that has been automatically tagged by the assistant._\n\n## Development\n\n### Prerequisites\n\n- **Node.js and npm**: Required for managing dependencies and running build scripts. You can download them from [nodejs.org](https://nodejs.org/).\n- **Thunderbird**: The application this extension is built for.\n\n### Build Instructions\n\n1.  **Clone the repository:**\n\n    ```bash\n    git clone https://github.com/mcj-kr/thunderbird-email-ai-assistant.git\n    cd thunderbird-email-ai-assistant\n    ```\n\n2.  **Install dependencies:**\n\n    ```bash\n    npm install\n    ```\n\n3.  **Build the extension:**\n    This command runs webpack to bundle the scripts and then uses `web-ext` to package everything into a `.zip` file located in the `web-ext-artifacts/` directory.\n    ```bash\n    ./build.bash\n    ```\n\n## Installation\n\n### Adding plugin\n\nInstall plugin from: https://addons.thunderbird.net/eN-US/thunderbird/addon/email-assistant/\n\n### Temporary Installation (for Development)\n\n1.  Build the extension using the instructions above.\n2.  In Thunderbird, go to `Tools > Add-ons and Themes`.\n3.  Click the gear icon, select `Debug Add-ons`, and then click `Load Temporary Add-on...`.\n4.  Select the generated `.zip` file from the `web-ext-artifacts/` directory.\n",
        "last_modified": "2026-01-06T15:39:51.873877"
      },
      "task_intent": {
        "title": "010-confidence-score-display-and-threshold-configurati",
        "description": "# Confidence Score Display and Threshold Configuration\n\nDisplay confidence scores for AI classifications and allow users to configure minimum confidence thresholds. Tags are only applied when confidence exceeds the threshold.\n\n## Rationale\nAddresses market gap-5: lack of transparency in AI decisions. Gmail and SaneBox don't explain why emails are categorized (pain-3-3). Users need to understand AI certainty and control when tags are applied to avoid incorrect classifications.\n\n## User Stories\n- As a cautious user, I want to see confidence scores so that I can understand how certain the AI is about its classifications\n- As a power user, I want to set minimum confidence thresholds so that only high-confidence tags are applied automatically\n\n## Acceptance Criteria\n- [ ] Confidence score (0-100%) is displayed alongside each tag suggestion\n- [ ] Global confidence threshold setting in options (default: 70%)\n- [ ] Per-tag confidence threshold override option\n- [ ] Low-confidence classifications are flagged for manual review\n- [ ] Confidence scores are stored with analysis history\n",
        "from_plan": true
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-05T14:48:03.163441",
  "last_updated": "2026-01-06T07:24:51.104727"
}