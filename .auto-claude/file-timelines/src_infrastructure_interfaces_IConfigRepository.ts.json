{
  "file_path": "src/infrastructure/interfaces/IConfigRepository.ts",
  "main_branch_history": [],
  "task_views": {
    "003-confidence-score-display-and-threshold-configurati": {
      "task_id": "003-confidence-score-display-and-threshold-configurati",
      "branch_point": {
        "commit_hash": "f6a57e8f6ff34822855d2c5f711f425bd9bc6897",
        "content": "/**\n * Repository interface for persisting application configuration.\n *\n * Provides methods for managing provider settings, custom tags, and\n * application configuration using a persistent storage layer.\n */\n\n/**\n * Model-specific concurrency configuration.\n */\nexport interface IModelConcurrencyConfig {\n  /** Provider identifier (e.g., 'openai', 'ollama') */\n  provider: string;\n  /** Optional specific model name */\n  model?: string;\n  /** Maximum concurrent requests allowed */\n  concurrency: number;\n}\n\n/**\n * Provider-specific settings including credentials and endpoints.\n */\nexport interface IProviderSettings {\n  /** API authentication key for the provider */\n  apiKey: string;\n  /** Model identifier/name to use */\n  model: string;\n  /** Custom API base URL (optional) */\n  apiUrl?: string;\n  /** Additional provider-specific configuration */\n  additionalConfig?: Record<string, unknown>;\n}\n\n/**\n * Application configuration settings.\n */\nexport interface IAppConfig {\n  /** Default provider to use for analysis */\n  defaultProvider: string;\n  /** Enable notification for analysis results */\n  enableNotifications: boolean;\n  /** Enable detailed logging */\n  enableLogging: boolean;\n  /** Model-specific concurrency limits */\n  modelConcurrencyLimits?: IModelConcurrencyConfig[];\n}\n\n/**\n * Custom tag definition for email classification.\n */\nexport interface ICustomTag {\n  /** Unique tag key/identifier */\n  key: string;\n  /** Display name for the tag */\n  name: string;\n  /** Hex color code for tag display */\n  color: string;\n  /** Optional prompt description for AI analysis */\n  prompt?: string;\n}\n\n/**\n * Repository interface for configuration persistence.\n *\n * Provides CRUD operations for provider settings, custom tags,\n * and application-level configuration.\n */\nexport interface IConfigRepository {\n  /**\n   * Get settings for a specific provider.\n   *\n   * @param providerId - The provider identifier (e.g., 'openai', 'ollama')\n   * @returns Provider settings object\n   * @throws Error if provider settings not found\n   */\n  getProviderSettings(providerId: string): Promise<IProviderSettings>;\n\n  /**\n   * Save settings for a specific provider.\n   *\n   * @param providerId - The provider identifier\n   * @param settings - Provider settings to save\n   * @throws Error if save operation fails\n   */\n  setProviderSettings(providerId: string, settings: IProviderSettings): Promise<void>;\n\n  /**\n   * Get settings for all configured providers.\n   *\n   * @returns Record mapping provider IDs to their settings\n   */\n  getAllProviderSettings(): Promise<Record<string, IProviderSettings>>;\n\n  /**\n   * Get custom tags for email classification.\n   *\n   * @returns Array of custom tag definitions\n   */\n  getCustomTags(): Promise<ICustomTag[]>;\n\n  /**\n   * Save custom tags configuration.\n   *\n   * @param tags - Array of custom tags to save\n   * @throws Error if save operation fails\n   */\n  setCustomTags(tags: ICustomTag[]): Promise<void>;\n\n  /**\n   * Get application-level configuration.\n   *\n   * @returns Application configuration object\n   * @throws Error if app config not found\n   */\n  getAppConfig(): Promise<IAppConfig>;\n\n  /**\n   * Save application configuration.\n   *\n   * @param config - Application configuration to save\n   * @throws Error if save operation fails\n   */\n  setAppConfig(config: IAppConfig): Promise<void>;\n\n  /**\n   * Clear all configuration data.\n   *\n   * This will remove all provider settings, custom tags, and app config.\n   * Use with caution.\n   *\n   * @throws Error if clear operation fails\n   */\n  clearAll(): Promise<void>;\n}\n",
        "timestamp": "2026-01-05T14:48:03.044500"
      },
      "worktree_state": {
        "content": "/**\n * Repository interface for persisting application configuration.\n *\n * Provides methods for managing provider settings, custom tags, and\n * application configuration using a persistent storage layer.\n */\n\n/**\n * Model-specific concurrency configuration.\n */\nexport interface IModelConcurrencyConfig {\n  /** Provider identifier (e.g., 'openai', 'ollama') */\n  provider: string;\n  /** Optional specific model name */\n  model?: string;\n  /** Maximum concurrent requests allowed */\n  concurrency: number;\n}\n\n/**\n * Provider-specific settings including credentials and endpoints.\n */\nexport interface IProviderSettings {\n  /** API authentication key for the provider */\n  apiKey: string;\n  /** Model identifier/name to use */\n  model: string;\n  /** Custom API base URL (optional) */\n  apiUrl?: string;\n  /** Additional provider-specific configuration */\n  additionalConfig?: Record<string, unknown>;\n}\n\n/**\n * Application configuration settings.\n */\nexport interface IAppConfig {\n  /** Default provider to use for analysis */\n  defaultProvider: string;\n  /** Enable notification for analysis results */\n  enableNotifications: boolean;\n  /** Enable detailed logging */\n  enableLogging: boolean;\n  /** Model-specific concurrency limits */\n  modelConcurrencyLimits?: IModelConcurrencyConfig[];\n  /** Global confidence threshold for tag application (0-100) */\n  confidenceThreshold: number;\n}\n\n/**\n * Custom tag definition for email classification.\n */\nexport interface ICustomTag {\n  /** Unique tag key/identifier */\n  key: string;\n  /** Display name for the tag */\n  name: string;\n  /** Hex color code for tag display */\n  color: string;\n  /** Optional prompt description for AI analysis */\n  prompt?: string;\n  /** Optional confidence threshold override (0-100). If not set, uses global threshold */\n  thresholdOverride?: number;\n}\n\n/**\n * Repository interface for configuration persistence.\n *\n * Provides CRUD operations for provider settings, custom tags,\n * and application-level configuration.\n */\nexport interface IConfigRepository {\n  /**\n   * Get settings for a specific provider.\n   *\n   * @param providerId - The provider identifier (e.g., 'openai', 'ollama')\n   * @returns Provider settings object\n   * @throws Error if provider settings not found\n   */\n  getProviderSettings(providerId: string): Promise<IProviderSettings>;\n\n  /**\n   * Save settings for a specific provider.\n   *\n   * @param providerId - The provider identifier\n   * @param settings - Provider settings to save\n   * @throws Error if save operation fails\n   */\n  setProviderSettings(providerId: string, settings: IProviderSettings): Promise<void>;\n\n  /**\n   * Get settings for all configured providers.\n   *\n   * @returns Record mapping provider IDs to their settings\n   */\n  getAllProviderSettings(): Promise<Record<string, IProviderSettings>>;\n\n  /**\n   * Get custom tags for email classification.\n   *\n   * @returns Array of custom tag definitions\n   */\n  getCustomTags(): Promise<ICustomTag[]>;\n\n  /**\n   * Save custom tags configuration.\n   *\n   * @param tags - Array of custom tags to save\n   * @throws Error if save operation fails\n   */\n  setCustomTags(tags: ICustomTag[]): Promise<void>;\n\n  /**\n   * Get threshold override for a specific tag.\n   *\n   * @param tagKey - The tag key to get threshold for\n   * @returns Threshold value (0-100) or null if no override is set\n   * @throws Error if retrieval fails\n   */\n  getTagThreshold(tagKey: string): Promise<number | null>;\n\n  /**\n   * Set threshold override for a specific tag.\n   *\n   * @param tagKey - The tag key to set threshold for\n   * @param threshold - Threshold value (0-100), or null to remove override\n   * @throws Error if save operation fails\n   */\n  setTagThreshold(tagKey: string, threshold: number | null): Promise<void>;\n\n  /**\n   * Get all tag threshold overrides.\n   *\n   * @returns Record mapping tag keys to their threshold overrides\n   */\n  getAllTagThresholds(): Promise<Record<string, number>>;\n\n  /**\n   * Get application-level configuration.\n   *\n   * @returns Application configuration object\n   * @throws Error if app config not found\n   */\n  getAppConfig(): Promise<IAppConfig>;\n\n  /**\n   * Save application configuration.\n   *\n   * @param config - Application configuration to save\n   * @throws Error if save operation fails\n   */\n  setAppConfig(config: IAppConfig): Promise<void>;\n\n  /**\n   * Clear all configuration data.\n   *\n   * This will remove all provider settings, custom tags, and app config.\n   * Use with caution.\n   *\n   * @throws Error if clear operation fails\n   */\n  clearAll(): Promise<void>;\n}\n",
        "last_modified": "2026-01-05T19:59:00.206865"
      },
      "task_intent": {
        "title": "Confidence Score Display and Threshold Configuration",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 0,
      "status": "active",
      "merged_at": null
    },
    "008-implement-bayes-classifier-for-llm-credit-optimiza": {
      "task_id": "008-implement-bayes-classifier-for-llm-credit-optimiza",
      "branch_point": {
        "commit_hash": "bdfad3eb512d2cde785819b3e597f39d954633f3",
        "content": "/**\n * Repository interface for persisting application configuration.\n *\n * Provides methods for managing provider settings, custom tags, and\n * application configuration using a persistent storage layer.\n */\n\n/**\n * Model-specific concurrency configuration.\n */\nexport interface IModelConcurrencyConfig {\n  /** Provider identifier (e.g., 'openai', 'ollama') */\n  provider: string;\n  /** Optional specific model name */\n  model?: string;\n  /** Maximum concurrent requests allowed */\n  concurrency: number;\n}\n\n/**\n * Provider-specific settings including credentials and endpoints.\n */\nexport interface IProviderSettings {\n  /** API authentication key for the provider */\n  apiKey: string;\n  /** Model identifier/name to use */\n  model: string;\n  /** Custom API base URL (optional) */\n  apiUrl?: string;\n  /** Additional provider-specific configuration */\n  additionalConfig?: Record<string, unknown>;\n}\n\n/**\n * Application configuration settings.\n */\nexport interface IAppConfig {\n  /** Default provider to use for analysis */\n  defaultProvider: string;\n  /** Enable notification for analysis results */\n  enableNotifications: boolean;\n  /** Enable detailed logging */\n  enableLogging: boolean;\n  /** Model-specific concurrency limits */\n  modelConcurrencyLimits?: IModelConcurrencyConfig[];\n}\n\n/**\n * Custom tag definition for email classification.\n */\nexport interface ICustomTag {\n  /** Unique tag key/identifier */\n  key: string;\n  /** Display name for the tag */\n  name: string;\n  /** Hex color code for tag display */\n  color: string;\n  /** Optional prompt description for AI analysis */\n  prompt?: string;\n}\n\n/**\n * Repository interface for configuration persistence.\n *\n * Provides CRUD operations for provider settings, custom tags,\n * and application-level configuration.\n */\nexport interface IConfigRepository {\n  /**\n   * Get settings for a specific provider.\n   *\n   * @param providerId - The provider identifier (e.g., 'openai', 'ollama')\n   * @returns Provider settings object\n   * @throws Error if provider settings not found\n   */\n  getProviderSettings(providerId: string): Promise<IProviderSettings>;\n\n  /**\n   * Save settings for a specific provider.\n   *\n   * @param providerId - The provider identifier\n   * @param settings - Provider settings to save\n   * @throws Error if save operation fails\n   */\n  setProviderSettings(providerId: string, settings: IProviderSettings): Promise<void>;\n\n  /**\n   * Get settings for all configured providers.\n   *\n   * @returns Record mapping provider IDs to their settings\n   */\n  getAllProviderSettings(): Promise<Record<string, IProviderSettings>>;\n\n  /**\n   * Get custom tags for email classification.\n   *\n   * @returns Array of custom tag definitions\n   */\n  getCustomTags(): Promise<ICustomTag[]>;\n\n  /**\n   * Save custom tags configuration.\n   *\n   * @param tags - Array of custom tags to save\n   * @throws Error if save operation fails\n   */\n  setCustomTags(tags: ICustomTag[]): Promise<void>;\n\n  /**\n   * Get application-level configuration.\n   *\n   * @returns Application configuration object\n   * @throws Error if app config not found\n   */\n  getAppConfig(): Promise<IAppConfig>;\n\n  /**\n   * Save application configuration.\n   *\n   * @param config - Application configuration to save\n   * @throws Error if save operation fails\n   */\n  setAppConfig(config: IAppConfig): Promise<void>;\n\n  /**\n   * Clear all configuration data.\n   *\n   * This will remove all provider settings, custom tags, and app config.\n   * Use with caution.\n   *\n   * @throws Error if clear operation fails\n   */\n  clearAll(): Promise<void>;\n}\n",
        "timestamp": "2026-01-07T09:51:16.624929"
      },
      "worktree_state": {
        "content": "/**\n * Repository interface for persisting application configuration.\n *\n * Provides methods for managing provider settings, custom tags, and\n * application configuration using a persistent storage layer.\n */\n\n/**\n * Model-specific concurrency configuration.\n */\nexport interface IModelConcurrencyConfig {\n  /** Provider identifier (e.g., 'openai', 'ollama') */\n  provider: string;\n  /** Optional specific model name */\n  model?: string;\n  /** Maximum concurrent requests allowed */\n  concurrency: number;\n}\n\n/**\n * Provider-specific settings including credentials and endpoints.\n */\nexport interface IProviderSettings {\n  /** API authentication key for the provider */\n  apiKey: string;\n  /** Model identifier/name to use */\n  model: string;\n  /** Custom API base URL (optional) */\n  apiUrl?: string;\n  /** Additional provider-specific configuration */\n  additionalConfig?: Record<string, unknown>;\n}\n\n/**\n * Application configuration settings.\n */\nexport interface IAppConfig {\n  /** Default provider to use for analysis */\n  defaultProvider: string;\n  /** Enable notification for analysis results */\n  enableNotifications: boolean;\n  /** Enable detailed logging */\n  enableLogging: boolean;\n  /** Model-specific concurrency limits */\n  modelConcurrencyLimits?: IModelConcurrencyConfig[];\n}\n\n/**\n * Custom tag definition for email classification.\n */\nexport interface ICustomTag {\n  /** Unique tag key/identifier */\n  key: string;\n  /** Display name for the tag */\n  name: string;\n  /** Hex color code for tag display */\n  color: string;\n  /** Optional prompt description for AI analysis */\n  prompt?: string;\n}\n\n/**\n * Classifier training data for machine learning model optimization.\n */\nexport interface IClassifierTrainingData {\n  /** Email content for training */\n  content: string;\n  /** Expected classification label */\n  label: string;\n  /** Email sender/recipient information */\n  metadata?: Record<string, unknown>;\n  /** Training timestamp */\n  timestamp?: Date;\n}\n\n/**\n * Classifier performance metrics for model evaluation.\n */\nexport interface IClassifierMetrics {\n  /** Total number of classification attempts */\n  totalAttempts: number;\n  /** Number of successful classifications */\n  successfulClassifications: number;\n  /** Number of failed classifications */\n  failedClassifications: number;\n  /** Accuracy percentage (0-100) */\n  accuracy: number;\n  /** Average confidence score */\n  averageConfidence: number;\n  /** Last evaluation timestamp */\n  lastEvaluated?: Date;\n}\n\n/**\n * Repository interface for classifier data persistence.\n *\n * Provides methods for managing classifier training data,\n * performance metrics, and model optimization storage.\n */\nexport interface IClassifierStorage {\n  /**\n   * Save training data for classifier optimization.\n   *\n   * @param data - Training data to save\n   * @throws Error if save operation fails\n   */\n  saveTrainingData(data: IClassifierTrainingData): Promise<void>;\n\n  /**\n   * Get training data for a specific label or all training data.\n   *\n   * @param label - Optional label filter. If not provided, returns all training data.\n   * @returns Array of training data records\n   */\n  getTrainingData(label?: string): Promise<IClassifierTrainingData[]>;\n\n  /**\n   * Delete training data records.\n   *\n   * @param label - Optional label filter. If not provided, deletes all training data.\n   * @throws Error if deletion fails\n   */\n  deleteTrainingData(label?: string): Promise<void>;\n\n  /**\n   * Save classifier performance metrics.\n   *\n   * @param metrics - Performance metrics to save\n   * @throws Error if save operation fails\n   */\n  saveMetrics(metrics: IClassifierMetrics): Promise<void>;\n\n  /**\n   * Get classifier performance metrics.\n   *\n   * @returns Latest performance metrics\n   * @throws Error if metrics not found\n   */\n  getMetrics(): Promise<IClassifierMetrics>;\n\n  /**\n   * Clear all classifier data.\n   *\n   * This will remove all training data and performance metrics.\n   * Use with caution.\n   *\n   * @throws Error if clear operation fails\n   */\n  clearClassifierData(): Promise<void>;\n}\n\n/**\n * Repository interface for configuration persistence.\n *\n * Provides CRUD operations for provider settings, custom tags,\n * and application-level configuration.\n */\nexport interface IConfigRepository {\n  /**\n   * Get settings for a specific provider.\n   *\n   * @param providerId - The provider identifier (e.g., 'openai', 'ollama')\n   * @returns Provider settings object\n   * @throws Error if provider settings not found\n   */\n  getProviderSettings(providerId: string): Promise<IProviderSettings>;\n\n  /**\n   * Save settings for a specific provider.\n   *\n   * @param providerId - The provider identifier\n   * @param settings - Provider settings to save\n   * @throws Error if save operation fails\n   */\n  setProviderSettings(providerId: string, settings: IProviderSettings): Promise<void>;\n\n  /**\n   * Get settings for all configured providers.\n   *\n   * @returns Record mapping provider IDs to their settings\n   */\n  getAllProviderSettings(): Promise<Record<string, IProviderSettings>>;\n\n  /**\n   * Get custom tags for email classification.\n   *\n   * @returns Array of custom tag definitions\n   */\n  getCustomTags(): Promise<ICustomTag[]>;\n\n  /**\n   * Save custom tags configuration.\n   *\n   * @param tags - Array of custom tags to save\n   * @throws Error if save operation fails\n   */\n  setCustomTags(tags: ICustomTag[]): Promise<void>;\n\n  /**\n   * Get application-level configuration.\n   *\n   * @returns Application configuration object\n   * @throws Error if app config not found\n   */\n  getAppConfig(): Promise<IAppConfig>;\n\n  /**\n   * Save application configuration.\n   *\n   * @param config - Application configuration to save\n   * @throws Error if save operation fails\n   */\n  setAppConfig(config: IAppConfig): Promise<void>;\n\n  /**\n   * Clear all configuration data.\n   *\n   * This will remove all provider settings, custom tags, and app config.\n   * Use with caution.\n   *\n   * @throws Error if clear operation fails\n   */\n  clearAll(): Promise<void>;\n}\n",
        "last_modified": "2026-01-07T09:51:16.733522"
      },
      "task_intent": {
        "title": "008-implement-bayes-classifier-for-llm-credit-optimiza",
        "description": "",
        "from_plan": false
      },
      "commits_behind_main": 23,
      "status": "active",
      "merged_at": null
    }
  },
  "created_at": "2026-01-05T14:48:03.091851",
  "last_updated": "2026-01-07T09:51:16.690837"
}