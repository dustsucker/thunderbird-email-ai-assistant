{"version":3,"file":"background-bundle.js","mappings":"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,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,SAAU,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,UAAW,CAAC,EAAG,SAAU,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,GAAI,UAAW,CAAC,GAAI,WAAY,CAAC,GAAI,YAAa,CAAC,GAAI,WAAY,CAAC,IAAK,UAAW,CAAC,EAAG,WAAY,CAAC,GAAI,WAAY,CAAC,EAAG,oBAAqB,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,sBAAuB,CAAC,EAAG,WAAY,CAAC,GAAI,eAAgB,CAAC,IAAK,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,aAAc,CAAC,EAAG,UAAW,CAAC,EAAG,SAAU,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,QAAS,CAAC,EAAG,QAAS,CAAC,EAAG,QAAS,CAAC,EAAG,aAAc,CAAC,EAAG,QAAS,CAAC,EAAG,SAAU,CAAC,EAAG,WAAY,CAAC,EAAG,SAAU,CAAC,EAAG,aAAc,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,SAAU,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,YAAa,CAAC,EAAG,QAAS,CAAC,EAAG,QAAS,CAAC,EAAG,QAAS,CAAC,EAAG,aAAc,CAAC,EAAG,QAAS,CAAC,EAAG,SAAU,CAAC,EAAG,YAAa,CAAC,EAAG,WAAY,CAAC,EAAG,SAAU,CAAC,EAAG,UAAW,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,WAAY,CAAC,EAAG,cAAe,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,SAAU,CAAC,EAAG,YAAa,CAAC,EAAG,aAAc,CAAC,GAAI,YAAa,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,iBAAkB,CAAC,GAAI,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,YAAa,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,SAAU,CAAC,EAAG,YAAa,CAAC,EAAG,SAAU,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,SAAU,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,YAAa,CAAC,EAAG,YAAa,CAAC,EAAG,SAAU,CAAC,EAAG,YAAa,CAAC,EAAG,SAAU,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,YAAa,CAAC,EAAG,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,EAAG,WAAY,CAAC,EAAG,UAAW,CAAC,KAAM,UAAW,CAAC,EAAG,UAAW,CAAC,EAAG,YA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,IAAI3sC,IAAI,CACzD,CAAC,GAAI,SACL,CAAC,GAAI,QACL,CAAC,GAAI,QACL,CAAC,IAAK,aC7GH,IAAI4sC,GAOAC,IANX,SAAWD,GAEPA,EAAYA,EAAiB,IAAI,GAAK,MAEtCA,EAAYA,EAAkB,KAAI,GAAK,MAC1C,CALD,CAKGA,KAAgBA,GAAc,CAAC,IAElC,SAAWC,GAKPA,EAAaA,EAAmB,KAAI,GAAK,OAMzCA,EAAaA,EAAoB,MAAI,GAAK,QAK1CA,EAAaA,EAAwB,UAAI,GAAK,YAK9CA,EAAaA,EAAwB,UAAI,GAAK,YAK9CA,EAAaA,EAAmB,KAAI,GAAK,MAC5C,CA3BD,CA2BGA,KAAiBA,GAAe,CAAC,ICvC7B,MAAMC,GAAe,IAAI9sC,IAAI,CAChC,WACA,cACA,eACA,eACA,gBACA,mBACA,WACA,UACA,gBACA,sBACA,cACA,mBACA,oBACA,oBACA,iBACA,eACA,UACA,UACA,UACA,UACA,UACA,iBACA,UACA,UACA,cACA,eACA,WACA,eACA,qBACA,cACA,SACA,eACA,gBACA,WACA,iBACA,iBACA,YACFP,IAAKqM,GAAQ,CAACA,EAAIhI,cAAegI,KACtBihC,GAAiB,IAAI/sC,IAAI,CAClC,gBACA,gBACA,gBACA,gBACA,cACA,WACA,gBACA,kBACA,WACA,cACA,WACA,oBACA,gBACA,eACA,mBACA,YACA,aACA,WACA,eACA,oBACA,eACA,cACA,cACA,mBACA,YACA,aACA,aACA,sBACA,mBACA,eACA,YACA,YACA,YACA,gBACA,sBACA,iBACA,OACA,OACA,cACA,YACA,qBACA,mBACA,mBACA,mBACA,eACA,cACA,eACA,cACA,eACA,iBACA,cACA,UACA,UACA,aACA,UACA,aACA,mBACA,mBACA,cACFP,IAAKqM,GAAQ,CAACA,EAAIhI,cAAegI,KCvF7BkhC,GAAoB,IAAI3qC,IAAI,CAC9B,QACA,SACA,MACA,SACA,UACA,WACA,YACA,aAEJ,SAAS4qC,GAAc/uC,GACnB,OAAOA,EAAMohB,QAAQ,KAAM,SAC/B,CA+BA,MAAM4tB,GAAY,IAAI7qC,IAAI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","sources":["webpack://spam_filter/../../../../node_modules/reflect-metadata/Reflect.js","webpack://spam_filter/../../../../node_modules/deepmerge/dist/cjs.js","webpack://spam_filter/webpack/bootstrap","webpack://spam_filter/webpack/runtime/global","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/types/lifecycle.js","webpack://spam_filter/../../../../node_modules/tslib/tslib.es6.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/providers/class-provider.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/providers/factory-provider.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/lazy-helpers.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/providers/injection-token.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/providers/token-provider.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/providers/value-provider.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/registry-base.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/registry.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/resolution-context.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/interceptors.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/dependency-container.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/providers/provider.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/types/disposable.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/error-helpers.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/reflection-helpers.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/decorators/inject.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/decorators/injectable.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/decorators/singleton.js","webpack://spam_filter/../../../../node_modules/tsyringe/dist/esm5/index.js","webpack://spam_filter/./src/infrastructure/logger/ConsoleLogger.ts","webpack://spam_filter/./src/infrastructure/cache/MemoryCache.ts","webpack://spam_filter/./src/application/services/PriorityQueue.ts","webpack://spam_filter/./src/interfaces/adapters/ThunderbirdMailReader.ts","webpack://spam_filter/./core/config.ts","webpack://spam_filter/./src/interfaces/adapters/ThunderbirdTagManager.ts","webpack://spam_filter/./src/infrastructure/repositories/IndexedDBConfigRepository.ts","webpack://spam_filter/../../../../node_modules/domelementtype/lib/esm/index.js","webpack://spam_filter/../../../../node_modules/domhandler/lib/esm/node.js","webpack://spam_filter/../../../../node_modules/domhandler/lib/esm/index.js","webpack://spam_filter/../../../../node_modules/leac/lib/leac.mjs","webpack://spam_filter/../../../../node_modules/peberminta/lib/core.mjs","webpack://spam_filter/../../../../node_modules/parseley/lib/parseley.mjs","webpack://spam_filter/../../../../node_modules/selderee/lib/selderee.mjs","webpack://spam_filter/../../../../node_modules/@selderee/plugin-htmlparser2/lib/hp2-builder.mjs","webpack://spam_filter/../../../../node_modules/entities/lib/esm/generated/decode-data-html.js","webpack://spam_filter/../../../../node_modules/entities/lib/esm/generated/decode-data-xml.js","webpack://spam_filter/../../../../node_modules/entities/lib/esm/decode_codepoint.js","webpack://spam_filter/../../../../node_modules/entities/lib/esm/decode.js","webpack://spam_filter/../../../../node_modules/htmlparser2/lib/esm/Tokenizer.js","webpack://spam_filter/../../../../node_modules/htmlparser2/lib/esm/Parser.js","webpack://spam_filter/../../../../node_modules/entities/lib/esm/generated/encode-html.js","webpack://spam_filter/../../../../node_modules/entities/lib/esm/escape.js","webpack://spam_filter/../../../../node_modules/entities/lib/esm/index.js","webpack://spam_filter/../../../../node_modules/dom-serializer/lib/esm/foreignNames.js","webpack://spam_filter/../../../../node_modules/dom-serializer/lib/esm/index.js","webpack://spam_filter/../../../../node_modules/domutils/lib/esm/helpers.js","webpack://spam_filter/../../../../node_modules/html-to-text/lib/html-to-text.mjs","webpack://spam_filter/../../../../node_modules/htmlparser2/lib/esm/index.js","webpack://spam_filter/./src/domain/services/EmailContentExtractor.ts","webpack://spam_filter/./src/domain/services/TagService.ts","webpack://spam_filter/./src/shared/types/ProviderTypes.ts","webpack://spam_filter/./src/infrastructure/config/AppConfig.ts","webpack://spam_filter/./src/application/services/RateLimiterService.ts","webpack://spam_filter/./src/infrastructure/providers/BaseProviderAdapter.ts","webpack://spam_filter/./src/infrastructure/providers/ProviderUtils.ts","webpack://spam_filter/./src/infrastructure/providers/BaseProvider.ts","webpack://spam_filter/./core/analysis.ts","webpack://spam_filter/./src/infrastructure/providers/impl/OpenAIProvider.ts","webpack://spam_filter/./src/infrastructure/providers/impl/ClaudeProvider.ts","webpack://spam_filter/./src/infrastructure/providers/impl/GeminiProvider.ts","webpack://spam_filter/./src/infrastructure/providers/impl/MistralProvider.ts","webpack://spam_filter/./src/infrastructure/providers/impl/OllamaProvider.ts","webpack://spam_filter/./src/infrastructure/providers/impl/DeepseekProvider.ts","webpack://spam_filter/./src/infrastructure/providers/impl/ZaiPaaSProvider.ts","webpack://spam_filter/./src/infrastructure/providers/impl/ZaiCodingProvider.ts","webpack://spam_filter/./src/infrastructure/providers/ProviderFactory.ts","webpack://spam_filter/./src/domain/events/EventBus.ts","webpack://spam_filter/./src/domain/events/EmailAnalyzedEvent.ts","webpack://spam_filter/./src/domain/events/ProviderErrorEvent.ts","webpack://spam_filter/./src/application/use-cases/AnalyzeEmail.ts","webpack://spam_filter/./src/domain/events/TagCreatedEvent.ts","webpack://spam_filter/./src/application/use-cases/ApplyTagsToEmail.ts","webpack://spam_filter/./src/domain/events/TagAppliedEvent.ts","webpack://spam_filter/./src/application/use-cases/AnalyzeBatchEmails.ts","webpack://spam_filter/./src/domain/events/EmailReceivedEvent.ts","webpack://spam_filter/./src/interfaces/background/EmailEventListener.ts","webpack://spam_filter/./src/interfaces/background/MessageHandler.ts","webpack://spam_filter/./background.ts"],"sourcesContent":["/*! *****************************************************************************\nCopyright (C) Microsoft. All rights reserved.\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\nthis file except in compliance with the License. You may obtain a copy of the\nLicense at http://www.apache.org/licenses/LICENSE-2.0\n\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\nMERCHANTABLITY OR NON-INFRINGEMENT.\n\nSee the Apache Version 2.0 License for specific language governing permissions\nand limitations under the License.\n***************************************************************************** */\nvar Reflect;\n(function (Reflect) {\n    // Metadata Proposal\n    // https://rbuckton.github.io/reflect-metadata/\n    (function (factory) {\n        var root = typeof globalThis === \"object\" ? globalThis :\n            typeof global === \"object\" ? global :\n                typeof self === \"object\" ? self :\n                    typeof this === \"object\" ? this :\n                        sloppyModeThis();\n        var exporter = makeExporter(Reflect);\n        if (typeof root.Reflect !== \"undefined\") {\n            exporter = makeExporter(root.Reflect, exporter);\n        }\n        factory(exporter, root);\n        if (typeof root.Reflect === \"undefined\") {\n            root.Reflect = Reflect;\n        }\n        function makeExporter(target, previous) {\n            return function (key, value) {\n                Object.defineProperty(target, key, { configurable: true, writable: true, value: value });\n                if (previous)\n                    previous(key, value);\n            };\n        }\n        function functionThis() {\n            try {\n                return Function(\"return this;\")();\n            }\n            catch (_) { }\n        }\n        function indirectEvalThis() {\n            try {\n                return (void 0, eval)(\"(function() { return this; })()\");\n            }\n            catch (_) { }\n        }\n        function sloppyModeThis() {\n            return functionThis() || indirectEvalThis();\n        }\n    })(function (exporter, root) {\n        var hasOwn = Object.prototype.hasOwnProperty;\n        // feature test for Symbol support\n        var supportsSymbol = typeof Symbol === \"function\";\n        var toPrimitiveSymbol = supportsSymbol && typeof Symbol.toPrimitive !== \"undefined\" ? Symbol.toPrimitive : \"@@toPrimitive\";\n        var iteratorSymbol = supportsSymbol && typeof Symbol.iterator !== \"undefined\" ? Symbol.iterator : \"@@iterator\";\n        var supportsCreate = typeof Object.create === \"function\"; // feature test for Object.create support\n        var supportsProto = { __proto__: [] } instanceof Array; // feature test for __proto__ support\n        var downLevel = !supportsCreate && !supportsProto;\n        var HashMap = {\n            // create an object in dictionary mode (a.k.a. \"slow\" mode in v8)\n            create: supportsCreate\n                ? function () { return MakeDictionary(Object.create(null)); }\n                : supportsProto\n                    ? function () { return MakeDictionary({ __proto__: null }); }\n                    : function () { return MakeDictionary({}); },\n            has: downLevel\n                ? function (map, key) { return hasOwn.call(map, key); }\n                : function (map, key) { return key in map; },\n            get: downLevel\n                ? function (map, key) { return hasOwn.call(map, key) ? map[key] : undefined; }\n                : function (map, key) { return map[key]; },\n        };\n        // Load global or shim versions of Map, Set, and WeakMap\n        var functionPrototype = Object.getPrototypeOf(Function);\n        var _Map = typeof Map === \"function\" && typeof Map.prototype.entries === \"function\" ? Map : CreateMapPolyfill();\n        var _Set = typeof Set === \"function\" && typeof Set.prototype.entries === \"function\" ? Set : CreateSetPolyfill();\n        var _WeakMap = typeof WeakMap === \"function\" ? WeakMap : CreateWeakMapPolyfill();\n        var registrySymbol = supportsSymbol ? Symbol.for(\"@reflect-metadata:registry\") : undefined;\n        var metadataRegistry = GetOrCreateMetadataRegistry();\n        var metadataProvider = CreateMetadataProvider(metadataRegistry);\n        /**\n         * Applies a set of decorators to a property of a target object.\n         * @param decorators An array of decorators.\n         * @param target The target object.\n         * @param propertyKey (Optional) The property key to decorate.\n         * @param attributes (Optional) The property descriptor for the target key.\n         * @remarks Decorators are applied in reverse order.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Example = Reflect.decorate(decoratorsArray, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.decorate(decoratorsArray, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.decorate(decoratorsArray, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Object.defineProperty(Example, \"staticMethod\",\n         *         Reflect.decorate(decoratorsArray, Example, \"staticMethod\",\n         *             Object.getOwnPropertyDescriptor(Example, \"staticMethod\")));\n         *\n         *     // method (on prototype)\n         *     Object.defineProperty(Example.prototype, \"method\",\n         *         Reflect.decorate(decoratorsArray, Example.prototype, \"method\",\n         *             Object.getOwnPropertyDescriptor(Example.prototype, \"method\")));\n         *\n         */\n        function decorate(decorators, target, propertyKey, attributes) {\n            if (!IsUndefined(propertyKey)) {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsObject(attributes) && !IsUndefined(attributes) && !IsNull(attributes))\n                    throw new TypeError();\n                if (IsNull(attributes))\n                    attributes = undefined;\n                propertyKey = ToPropertyKey(propertyKey);\n                return DecorateProperty(decorators, target, propertyKey, attributes);\n            }\n            else {\n                if (!IsArray(decorators))\n                    throw new TypeError();\n                if (!IsConstructor(target))\n                    throw new TypeError();\n                return DecorateConstructor(decorators, target);\n            }\n        }\n        exporter(\"decorate\", decorate);\n        // 4.1.2 Reflect.metadata(metadataKey, metadataValue)\n        // https://rbuckton.github.io/reflect-metadata/#reflect.metadata\n        /**\n         * A default metadata decorator factory that can be used on a class, class member, or parameter.\n         * @param metadataKey The key for the metadata entry.\n         * @param metadataValue The value for the metadata entry.\n         * @returns A decorator function.\n         * @remarks\n         * If `metadataKey` is already defined for the target and target key, the\n         * metadataValue for that key will be overwritten.\n         * @example\n         *\n         *     // constructor\n         *     @Reflect.metadata(key, value)\n         *     class Example {\n         *     }\n         *\n         *     // property (on constructor, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticProperty;\n         *     }\n         *\n         *     // property (on prototype, TypeScript only)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         property;\n         *     }\n         *\n         *     // method (on constructor)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         static staticMethod() { }\n         *     }\n         *\n         *     // method (on prototype)\n         *     class Example {\n         *         @Reflect.metadata(key, value)\n         *         method() { }\n         *     }\n         *\n         */\n        function metadata(metadataKey, metadataValue) {\n            function decorator(target, propertyKey) {\n                if (!IsObject(target))\n                    throw new TypeError();\n                if (!IsUndefined(propertyKey) && !IsPropertyKey(propertyKey))\n                    throw new TypeError();\n                OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n            }\n            return decorator;\n        }\n        exporter(\"metadata\", metadata);\n        /**\n         * Define a unique metadata entry on the target.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param metadataValue A value that contains attached metadata.\n         * @param target The target object on which to define metadata.\n         * @param propertyKey (Optional) The property key for the target.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example);\n         *\n         *     // property (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     Reflect.defineMetadata(\"custom:annotation\", options, Example.prototype, \"method\");\n         *\n         *     // decorator factory as metadata-producing annotation.\n         *     function MyAnnotation(options): Decorator {\n         *         return (target, key?) => Reflect.defineMetadata(\"custom:annotation\", options, target, key);\n         *     }\n         *\n         */\n        function defineMetadata(metadataKey, metadataValue, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryDefineOwnMetadata(metadataKey, metadataValue, target, propertyKey);\n        }\n        exporter(\"defineMetadata\", defineMetadata);\n        /**\n         * Gets a value indicating whether the target object or its prototype chain has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object or its prototype chain; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasMetadata\", hasMetadata);\n        /**\n         * Gets a value indicating whether the target object has the provided metadata key defined.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata key was defined on the target object; otherwise, `false`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.hasOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function hasOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryHasOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"hasOwnMetadata\", hasOwnMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object or its prototype chain.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getMetadata\", getMetadata);\n        /**\n         * Gets the metadata value for the provided metadata key on the target object.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns The metadata value for the metadata key if found; otherwise, `undefined`.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryGetOwnMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"getOwnMetadata\", getOwnMetadata);\n        /**\n         * Gets the metadata keys defined on the target object or its prototype chain.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getMetadataKeys\", getMetadataKeys);\n        /**\n         * Gets the unique metadata keys defined on the target object.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns An array of unique metadata keys.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.getOwnMetadataKeys(Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.getOwnMetadataKeys(Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.getOwnMetadataKeys(Example.prototype, \"method\");\n         *\n         */\n        function getOwnMetadataKeys(target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            return OrdinaryOwnMetadataKeys(target, propertyKey);\n        }\n        exporter(\"getOwnMetadataKeys\", getOwnMetadataKeys);\n        /**\n         * Deletes the metadata entry from the target object with the provided key.\n         * @param metadataKey A key used to store and retrieve metadata.\n         * @param target The target object on which the metadata is defined.\n         * @param propertyKey (Optional) The property key for the target.\n         * @returns `true` if the metadata entry was found and deleted; otherwise, false.\n         * @example\n         *\n         *     class Example {\n         *         // property declarations are not part of ES6, though they are valid in TypeScript:\n         *         // static staticProperty;\n         *         // property;\n         *\n         *         constructor(p) { }\n         *         static staticMethod(p) { }\n         *         method(p) { }\n         *     }\n         *\n         *     // constructor\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example);\n         *\n         *     // property (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticProperty\");\n         *\n         *     // property (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"property\");\n         *\n         *     // method (on constructor)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example, \"staticMethod\");\n         *\n         *     // method (on prototype)\n         *     result = Reflect.deleteMetadata(\"custom:annotation\", Example.prototype, \"method\");\n         *\n         */\n        function deleteMetadata(metadataKey, target, propertyKey) {\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            if (!IsObject(target))\n                throw new TypeError();\n            if (!IsUndefined(propertyKey))\n                propertyKey = ToPropertyKey(propertyKey);\n            var provider = GetMetadataProvider(target, propertyKey, /*Create*/ false);\n            if (IsUndefined(provider))\n                return false;\n            return provider.OrdinaryDeleteMetadata(metadataKey, target, propertyKey);\n        }\n        exporter(\"deleteMetadata\", deleteMetadata);\n        function DecorateConstructor(decorators, target) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsConstructor(decorated))\n                        throw new TypeError();\n                    target = decorated;\n                }\n            }\n            return target;\n        }\n        function DecorateProperty(decorators, target, propertyKey, descriptor) {\n            for (var i = decorators.length - 1; i >= 0; --i) {\n                var decorator = decorators[i];\n                var decorated = decorator(target, propertyKey, descriptor);\n                if (!IsUndefined(decorated) && !IsNull(decorated)) {\n                    if (!IsObject(decorated))\n                        throw new TypeError();\n                    descriptor = decorated;\n                }\n            }\n            return descriptor;\n        }\n        // 3.1.1.1 OrdinaryHasMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasmetadata\n        function OrdinaryHasMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return true;\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryHasMetadata(MetadataKey, parent, P);\n            return false;\n        }\n        // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n        function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ false);\n            if (IsUndefined(provider))\n                return false;\n            return ToBoolean(provider.OrdinaryHasOwnMetadata(MetadataKey, O, P));\n        }\n        // 3.1.3.1 OrdinaryGetMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetmetadata\n        function OrdinaryGetMetadata(MetadataKey, O, P) {\n            var hasOwn = OrdinaryHasOwnMetadata(MetadataKey, O, P);\n            if (hasOwn)\n                return OrdinaryGetOwnMetadata(MetadataKey, O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (!IsNull(parent))\n                return OrdinaryGetMetadata(MetadataKey, parent, P);\n            return undefined;\n        }\n        // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n        function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ false);\n            if (IsUndefined(provider))\n                return;\n            return provider.OrdinaryGetOwnMetadata(MetadataKey, O, P);\n        }\n        // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n        function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n            var provider = GetMetadataProvider(O, P, /*Create*/ true);\n            provider.OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P);\n        }\n        // 3.1.6.1 OrdinaryMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinarymetadatakeys\n        function OrdinaryMetadataKeys(O, P) {\n            var ownKeys = OrdinaryOwnMetadataKeys(O, P);\n            var parent = OrdinaryGetPrototypeOf(O);\n            if (parent === null)\n                return ownKeys;\n            var parentKeys = OrdinaryMetadataKeys(parent, P);\n            if (parentKeys.length <= 0)\n                return ownKeys;\n            if (ownKeys.length <= 0)\n                return parentKeys;\n            var set = new _Set();\n            var keys = [];\n            for (var _i = 0, ownKeys_1 = ownKeys; _i < ownKeys_1.length; _i++) {\n                var key = ownKeys_1[_i];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            for (var _a = 0, parentKeys_1 = parentKeys; _a < parentKeys_1.length; _a++) {\n                var key = parentKeys_1[_a];\n                var hasKey = set.has(key);\n                if (!hasKey) {\n                    set.add(key);\n                    keys.push(key);\n                }\n            }\n            return keys;\n        }\n        // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n        // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n        function OrdinaryOwnMetadataKeys(O, P) {\n            var provider = GetMetadataProvider(O, P, /*create*/ false);\n            if (!provider) {\n                return [];\n            }\n            return provider.OrdinaryOwnMetadataKeys(O, P);\n        }\n        // 6 ECMAScript Data Types and Values\n        // https://tc39.github.io/ecma262/#sec-ecmascript-data-types-and-values\n        function Type(x) {\n            if (x === null)\n                return 1 /* Null */;\n            switch (typeof x) {\n                case \"undefined\": return 0 /* Undefined */;\n                case \"boolean\": return 2 /* Boolean */;\n                case \"string\": return 3 /* String */;\n                case \"symbol\": return 4 /* Symbol */;\n                case \"number\": return 5 /* Number */;\n                case \"object\": return x === null ? 1 /* Null */ : 6 /* Object */;\n                default: return 6 /* Object */;\n            }\n        }\n        // 6.1.1 The Undefined Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-undefined-type\n        function IsUndefined(x) {\n            return x === undefined;\n        }\n        // 6.1.2 The Null Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-null-type\n        function IsNull(x) {\n            return x === null;\n        }\n        // 6.1.5 The Symbol Type\n        // https://tc39.github.io/ecma262/#sec-ecmascript-language-types-symbol-type\n        function IsSymbol(x) {\n            return typeof x === \"symbol\";\n        }\n        // 6.1.7 The Object Type\n        // https://tc39.github.io/ecma262/#sec-object-type\n        function IsObject(x) {\n            return typeof x === \"object\" ? x !== null : typeof x === \"function\";\n        }\n        // 7.1 Type Conversion\n        // https://tc39.github.io/ecma262/#sec-type-conversion\n        // 7.1.1 ToPrimitive(input [, PreferredType])\n        // https://tc39.github.io/ecma262/#sec-toprimitive\n        function ToPrimitive(input, PreferredType) {\n            switch (Type(input)) {\n                case 0 /* Undefined */: return input;\n                case 1 /* Null */: return input;\n                case 2 /* Boolean */: return input;\n                case 3 /* String */: return input;\n                case 4 /* Symbol */: return input;\n                case 5 /* Number */: return input;\n            }\n            var hint = PreferredType === 3 /* String */ ? \"string\" : PreferredType === 5 /* Number */ ? \"number\" : \"default\";\n            var exoticToPrim = GetMethod(input, toPrimitiveSymbol);\n            if (exoticToPrim !== undefined) {\n                var result = exoticToPrim.call(input, hint);\n                if (IsObject(result))\n                    throw new TypeError();\n                return result;\n            }\n            return OrdinaryToPrimitive(input, hint === \"default\" ? \"number\" : hint);\n        }\n        // 7.1.1.1 OrdinaryToPrimitive(O, hint)\n        // https://tc39.github.io/ecma262/#sec-ordinarytoprimitive\n        function OrdinaryToPrimitive(O, hint) {\n            if (hint === \"string\") {\n                var toString_1 = O.toString;\n                if (IsCallable(toString_1)) {\n                    var result = toString_1.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            else {\n                var valueOf = O.valueOf;\n                if (IsCallable(valueOf)) {\n                    var result = valueOf.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n                var toString_2 = O.toString;\n                if (IsCallable(toString_2)) {\n                    var result = toString_2.call(O);\n                    if (!IsObject(result))\n                        return result;\n                }\n            }\n            throw new TypeError();\n        }\n        // 7.1.2 ToBoolean(argument)\n        // https://tc39.github.io/ecma262/2016/#sec-toboolean\n        function ToBoolean(argument) {\n            return !!argument;\n        }\n        // 7.1.12 ToString(argument)\n        // https://tc39.github.io/ecma262/#sec-tostring\n        function ToString(argument) {\n            return \"\" + argument;\n        }\n        // 7.1.14 ToPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-topropertykey\n        function ToPropertyKey(argument) {\n            var key = ToPrimitive(argument, 3 /* String */);\n            if (IsSymbol(key))\n                return key;\n            return ToString(key);\n        }\n        // 7.2 Testing and Comparison Operations\n        // https://tc39.github.io/ecma262/#sec-testing-and-comparison-operations\n        // 7.2.2 IsArray(argument)\n        // https://tc39.github.io/ecma262/#sec-isarray\n        function IsArray(argument) {\n            return Array.isArray\n                ? Array.isArray(argument)\n                : argument instanceof Object\n                    ? argument instanceof Array\n                    : Object.prototype.toString.call(argument) === \"[object Array]\";\n        }\n        // 7.2.3 IsCallable(argument)\n        // https://tc39.github.io/ecma262/#sec-iscallable\n        function IsCallable(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Call]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.4 IsConstructor(argument)\n        // https://tc39.github.io/ecma262/#sec-isconstructor\n        function IsConstructor(argument) {\n            // NOTE: This is an approximation as we cannot check for [[Construct]] internal method.\n            return typeof argument === \"function\";\n        }\n        // 7.2.7 IsPropertyKey(argument)\n        // https://tc39.github.io/ecma262/#sec-ispropertykey\n        function IsPropertyKey(argument) {\n            switch (Type(argument)) {\n                case 3 /* String */: return true;\n                case 4 /* Symbol */: return true;\n                default: return false;\n            }\n        }\n        function SameValueZero(x, y) {\n            return x === y || x !== x && y !== y;\n        }\n        // 7.3 Operations on Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-objects\n        // 7.3.9 GetMethod(V, P)\n        // https://tc39.github.io/ecma262/#sec-getmethod\n        function GetMethod(V, P) {\n            var func = V[P];\n            if (func === undefined || func === null)\n                return undefined;\n            if (!IsCallable(func))\n                throw new TypeError();\n            return func;\n        }\n        // 7.4 Operations on Iterator Objects\n        // https://tc39.github.io/ecma262/#sec-operations-on-iterator-objects\n        function GetIterator(obj) {\n            var method = GetMethod(obj, iteratorSymbol);\n            if (!IsCallable(method))\n                throw new TypeError(); // from Call\n            var iterator = method.call(obj);\n            if (!IsObject(iterator))\n                throw new TypeError();\n            return iterator;\n        }\n        // 7.4.4 IteratorValue(iterResult)\n        // https://tc39.github.io/ecma262/2016/#sec-iteratorvalue\n        function IteratorValue(iterResult) {\n            return iterResult.value;\n        }\n        // 7.4.5 IteratorStep(iterator)\n        // https://tc39.github.io/ecma262/#sec-iteratorstep\n        function IteratorStep(iterator) {\n            var result = iterator.next();\n            return result.done ? false : result;\n        }\n        // 7.4.6 IteratorClose(iterator, completion)\n        // https://tc39.github.io/ecma262/#sec-iteratorclose\n        function IteratorClose(iterator) {\n            var f = iterator[\"return\"];\n            if (f)\n                f.call(iterator);\n        }\n        // 9.1 Ordinary Object Internal Methods and Internal Slots\n        // https://tc39.github.io/ecma262/#sec-ordinary-object-internal-methods-and-internal-slots\n        // 9.1.1.1 OrdinaryGetPrototypeOf(O)\n        // https://tc39.github.io/ecma262/#sec-ordinarygetprototypeof\n        function OrdinaryGetPrototypeOf(O) {\n            var proto = Object.getPrototypeOf(O);\n            if (typeof O !== \"function\" || O === functionPrototype)\n                return proto;\n            // TypeScript doesn't set __proto__ in ES5, as it's non-standard.\n            // Try to determine the superclass constructor. Compatible implementations\n            // must either set __proto__ on a subclass constructor to the superclass constructor,\n            // or ensure each class has a valid `constructor` property on its prototype that\n            // points back to the constructor.\n            // If this is not the same as Function.[[Prototype]], then this is definately inherited.\n            // This is the case when in ES6 or when using __proto__ in a compatible browser.\n            if (proto !== functionPrototype)\n                return proto;\n            // If the super prototype is Object.prototype, null, or undefined, then we cannot determine the heritage.\n            var prototype = O.prototype;\n            var prototypeProto = prototype && Object.getPrototypeOf(prototype);\n            if (prototypeProto == null || prototypeProto === Object.prototype)\n                return proto;\n            // If the constructor was not a function, then we cannot determine the heritage.\n            var constructor = prototypeProto.constructor;\n            if (typeof constructor !== \"function\")\n                return proto;\n            // If we have some kind of self-reference, then we cannot determine the heritage.\n            if (constructor === O)\n                return proto;\n            // we have a pretty good guess at the heritage.\n            return constructor;\n        }\n        // Global metadata registry\n        // - Allows `import \"reflect-metadata\"` and `import \"reflect-metadata/no-conflict\"` to interoperate.\n        // - Uses isolated metadata if `Reflect` is frozen before the registry can be installed.\n        /**\n         * Creates a registry used to allow multiple `reflect-metadata` providers.\n         */\n        function CreateMetadataRegistry() {\n            var fallback;\n            if (!IsUndefined(registrySymbol) &&\n                typeof root.Reflect !== \"undefined\" &&\n                !(registrySymbol in root.Reflect) &&\n                typeof root.Reflect.defineMetadata === \"function\") {\n                // interoperate with older version of `reflect-metadata` that did not support a registry.\n                fallback = CreateFallbackProvider(root.Reflect);\n            }\n            var first;\n            var second;\n            var rest;\n            var targetProviderMap = new _WeakMap();\n            var registry = {\n                registerProvider: registerProvider,\n                getProvider: getProvider,\n                setProvider: setProvider,\n            };\n            return registry;\n            function registerProvider(provider) {\n                if (!Object.isExtensible(registry)) {\n                    throw new Error(\"Cannot add provider to a frozen registry.\");\n                }\n                switch (true) {\n                    case fallback === provider: break;\n                    case IsUndefined(first):\n                        first = provider;\n                        break;\n                    case first === provider: break;\n                    case IsUndefined(second):\n                        second = provider;\n                        break;\n                    case second === provider: break;\n                    default:\n                        if (rest === undefined)\n                            rest = new _Set();\n                        rest.add(provider);\n                        break;\n                }\n            }\n            function getProviderNoCache(O, P) {\n                if (!IsUndefined(first)) {\n                    if (first.isProviderFor(O, P))\n                        return first;\n                    if (!IsUndefined(second)) {\n                        if (second.isProviderFor(O, P))\n                            return first;\n                        if (!IsUndefined(rest)) {\n                            var iterator = GetIterator(rest);\n                            while (true) {\n                                var next = IteratorStep(iterator);\n                                if (!next) {\n                                    return undefined;\n                                }\n                                var provider = IteratorValue(next);\n                                if (provider.isProviderFor(O, P)) {\n                                    IteratorClose(iterator);\n                                    return provider;\n                                }\n                            }\n                        }\n                    }\n                }\n                if (!IsUndefined(fallback) && fallback.isProviderFor(O, P)) {\n                    return fallback;\n                }\n                return undefined;\n            }\n            function getProvider(O, P) {\n                var providerMap = targetProviderMap.get(O);\n                var provider;\n                if (!IsUndefined(providerMap)) {\n                    provider = providerMap.get(P);\n                }\n                if (!IsUndefined(provider)) {\n                    return provider;\n                }\n                provider = getProviderNoCache(O, P);\n                if (!IsUndefined(provider)) {\n                    if (IsUndefined(providerMap)) {\n                        providerMap = new _Map();\n                        targetProviderMap.set(O, providerMap);\n                    }\n                    providerMap.set(P, provider);\n                }\n                return provider;\n            }\n            function hasProvider(provider) {\n                if (IsUndefined(provider))\n                    throw new TypeError();\n                return first === provider || second === provider || !IsUndefined(rest) && rest.has(provider);\n            }\n            function setProvider(O, P, provider) {\n                if (!hasProvider(provider)) {\n                    throw new Error(\"Metadata provider not registered.\");\n                }\n                var existingProvider = getProvider(O, P);\n                if (existingProvider !== provider) {\n                    if (!IsUndefined(existingProvider)) {\n                        return false;\n                    }\n                    var providerMap = targetProviderMap.get(O);\n                    if (IsUndefined(providerMap)) {\n                        providerMap = new _Map();\n                        targetProviderMap.set(O, providerMap);\n                    }\n                    providerMap.set(P, provider);\n                }\n                return true;\n            }\n        }\n        /**\n         * Gets or creates the shared registry of metadata providers.\n         */\n        function GetOrCreateMetadataRegistry() {\n            var metadataRegistry;\n            if (!IsUndefined(registrySymbol) && IsObject(root.Reflect) && Object.isExtensible(root.Reflect)) {\n                metadataRegistry = root.Reflect[registrySymbol];\n            }\n            if (IsUndefined(metadataRegistry)) {\n                metadataRegistry = CreateMetadataRegistry();\n            }\n            if (!IsUndefined(registrySymbol) && IsObject(root.Reflect) && Object.isExtensible(root.Reflect)) {\n                Object.defineProperty(root.Reflect, registrySymbol, {\n                    enumerable: false,\n                    configurable: false,\n                    writable: false,\n                    value: metadataRegistry\n                });\n            }\n            return metadataRegistry;\n        }\n        function CreateMetadataProvider(registry) {\n            // [[Metadata]] internal slot\n            // https://rbuckton.github.io/reflect-metadata/#ordinary-object-internal-methods-and-internal-slots\n            var metadata = new _WeakMap();\n            var provider = {\n                isProviderFor: function (O, P) {\n                    var targetMetadata = metadata.get(O);\n                    if (IsUndefined(targetMetadata))\n                        return false;\n                    return targetMetadata.has(P);\n                },\n                OrdinaryDefineOwnMetadata: OrdinaryDefineOwnMetadata,\n                OrdinaryHasOwnMetadata: OrdinaryHasOwnMetadata,\n                OrdinaryGetOwnMetadata: OrdinaryGetOwnMetadata,\n                OrdinaryOwnMetadataKeys: OrdinaryOwnMetadataKeys,\n                OrdinaryDeleteMetadata: OrdinaryDeleteMetadata,\n            };\n            metadataRegistry.registerProvider(provider);\n            return provider;\n            function GetOrCreateMetadataMap(O, P, Create) {\n                var targetMetadata = metadata.get(O);\n                var createdTargetMetadata = false;\n                if (IsUndefined(targetMetadata)) {\n                    if (!Create)\n                        return undefined;\n                    targetMetadata = new _Map();\n                    metadata.set(O, targetMetadata);\n                    createdTargetMetadata = true;\n                }\n                var metadataMap = targetMetadata.get(P);\n                if (IsUndefined(metadataMap)) {\n                    if (!Create)\n                        return undefined;\n                    metadataMap = new _Map();\n                    targetMetadata.set(P, metadataMap);\n                    if (!registry.setProvider(O, P, provider)) {\n                        targetMetadata.delete(P);\n                        if (createdTargetMetadata) {\n                            metadata.delete(O);\n                        }\n                        throw new Error(\"Wrong provider for target.\");\n                    }\n                }\n                return metadataMap;\n            }\n            // 3.1.2.1 OrdinaryHasOwnMetadata(MetadataKey, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinaryhasownmetadata\n            function OrdinaryHasOwnMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return false;\n                return ToBoolean(metadataMap.has(MetadataKey));\n            }\n            // 3.1.4.1 OrdinaryGetOwnMetadata(MetadataKey, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinarygetownmetadata\n            function OrdinaryGetOwnMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return undefined;\n                return metadataMap.get(MetadataKey);\n            }\n            // 3.1.5.1 OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinarydefineownmetadata\n            function OrdinaryDefineOwnMetadata(MetadataKey, MetadataValue, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ true);\n                metadataMap.set(MetadataKey, MetadataValue);\n            }\n            // 3.1.7.1 OrdinaryOwnMetadataKeys(O, P)\n            // https://rbuckton.github.io/reflect-metadata/#ordinaryownmetadatakeys\n            function OrdinaryOwnMetadataKeys(O, P) {\n                var keys = [];\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return keys;\n                var keysObj = metadataMap.keys();\n                var iterator = GetIterator(keysObj);\n                var k = 0;\n                while (true) {\n                    var next = IteratorStep(iterator);\n                    if (!next) {\n                        keys.length = k;\n                        return keys;\n                    }\n                    var nextValue = IteratorValue(next);\n                    try {\n                        keys[k] = nextValue;\n                    }\n                    catch (e) {\n                        try {\n                            IteratorClose(iterator);\n                        }\n                        finally {\n                            throw e;\n                        }\n                    }\n                    k++;\n                }\n            }\n            function OrdinaryDeleteMetadata(MetadataKey, O, P) {\n                var metadataMap = GetOrCreateMetadataMap(O, P, /*Create*/ false);\n                if (IsUndefined(metadataMap))\n                    return false;\n                if (!metadataMap.delete(MetadataKey))\n                    return false;\n                if (metadataMap.size === 0) {\n                    var targetMetadata = metadata.get(O);\n                    if (!IsUndefined(targetMetadata)) {\n                        targetMetadata.delete(P);\n                        if (targetMetadata.size === 0) {\n                            metadata.delete(targetMetadata);\n                        }\n                    }\n                }\n                return true;\n            }\n        }\n        function CreateFallbackProvider(reflect) {\n            var defineMetadata = reflect.defineMetadata, hasOwnMetadata = reflect.hasOwnMetadata, getOwnMetadata = reflect.getOwnMetadata, getOwnMetadataKeys = reflect.getOwnMetadataKeys, deleteMetadata = reflect.deleteMetadata;\n            var metadataOwner = new _WeakMap();\n            var provider = {\n                isProviderFor: function (O, P) {\n                    var metadataPropertySet = metadataOwner.get(O);\n                    if (!IsUndefined(metadataPropertySet) && metadataPropertySet.has(P)) {\n                        return true;\n                    }\n                    if (getOwnMetadataKeys(O, P).length) {\n                        if (IsUndefined(metadataPropertySet)) {\n                            metadataPropertySet = new _Set();\n                            metadataOwner.set(O, metadataPropertySet);\n                        }\n                        metadataPropertySet.add(P);\n                        return true;\n                    }\n                    return false;\n                },\n                OrdinaryDefineOwnMetadata: defineMetadata,\n                OrdinaryHasOwnMetadata: hasOwnMetadata,\n                OrdinaryGetOwnMetadata: getOwnMetadata,\n                OrdinaryOwnMetadataKeys: getOwnMetadataKeys,\n                OrdinaryDeleteMetadata: deleteMetadata,\n            };\n            return provider;\n        }\n        /**\n         * Gets the metadata provider for an object. If the object has no metadata provider and this is for a create operation,\n         * then this module's metadata provider is assigned to the object.\n         */\n        function GetMetadataProvider(O, P, Create) {\n            var registeredProvider = metadataRegistry.getProvider(O, P);\n            if (!IsUndefined(registeredProvider)) {\n                return registeredProvider;\n            }\n            if (Create) {\n                if (metadataRegistry.setProvider(O, P, metadataProvider)) {\n                    return metadataProvider;\n                }\n                throw new Error(\"Illegal state.\");\n            }\n            return undefined;\n        }\n        // naive Map shim\n        function CreateMapPolyfill() {\n            var cacheSentinel = {};\n            var arraySentinel = [];\n            var MapIterator = /** @class */ (function () {\n                function MapIterator(keys, values, selector) {\n                    this._index = 0;\n                    this._keys = keys;\n                    this._values = values;\n                    this._selector = selector;\n                }\n                MapIterator.prototype[\"@@iterator\"] = function () { return this; };\n                MapIterator.prototype[iteratorSymbol] = function () { return this; };\n                MapIterator.prototype.next = function () {\n                    var index = this._index;\n                    if (index >= 0 && index < this._keys.length) {\n                        var result = this._selector(this._keys[index], this._values[index]);\n                        if (index + 1 >= this._keys.length) {\n                            this._index = -1;\n                            this._keys = arraySentinel;\n                            this._values = arraySentinel;\n                        }\n                        else {\n                            this._index++;\n                        }\n                        return { value: result, done: false };\n                    }\n                    return { value: undefined, done: true };\n                };\n                MapIterator.prototype.throw = function (error) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    throw error;\n                };\n                MapIterator.prototype.return = function (value) {\n                    if (this._index >= 0) {\n                        this._index = -1;\n                        this._keys = arraySentinel;\n                        this._values = arraySentinel;\n                    }\n                    return { value: value, done: true };\n                };\n                return MapIterator;\n            }());\n            var Map = /** @class */ (function () {\n                function Map() {\n                    this._keys = [];\n                    this._values = [];\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                }\n                Object.defineProperty(Map.prototype, \"size\", {\n                    get: function () { return this._keys.length; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Map.prototype.has = function (key) { return this._find(key, /*insert*/ false) >= 0; };\n                Map.prototype.get = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    return index >= 0 ? this._values[index] : undefined;\n                };\n                Map.prototype.set = function (key, value) {\n                    var index = this._find(key, /*insert*/ true);\n                    this._values[index] = value;\n                    return this;\n                };\n                Map.prototype.delete = function (key) {\n                    var index = this._find(key, /*insert*/ false);\n                    if (index >= 0) {\n                        var size = this._keys.length;\n                        for (var i = index + 1; i < size; i++) {\n                            this._keys[i - 1] = this._keys[i];\n                            this._values[i - 1] = this._values[i];\n                        }\n                        this._keys.length--;\n                        this._values.length--;\n                        if (SameValueZero(key, this._cacheKey)) {\n                            this._cacheKey = cacheSentinel;\n                            this._cacheIndex = -2;\n                        }\n                        return true;\n                    }\n                    return false;\n                };\n                Map.prototype.clear = function () {\n                    this._keys.length = 0;\n                    this._values.length = 0;\n                    this._cacheKey = cacheSentinel;\n                    this._cacheIndex = -2;\n                };\n                Map.prototype.keys = function () { return new MapIterator(this._keys, this._values, getKey); };\n                Map.prototype.values = function () { return new MapIterator(this._keys, this._values, getValue); };\n                Map.prototype.entries = function () { return new MapIterator(this._keys, this._values, getEntry); };\n                Map.prototype[\"@@iterator\"] = function () { return this.entries(); };\n                Map.prototype[iteratorSymbol] = function () { return this.entries(); };\n                Map.prototype._find = function (key, insert) {\n                    if (!SameValueZero(this._cacheKey, key)) {\n                        this._cacheIndex = -1;\n                        for (var i = 0; i < this._keys.length; i++) {\n                            if (SameValueZero(this._keys[i], key)) {\n                                this._cacheIndex = i;\n                                break;\n                            }\n                        }\n                    }\n                    if (this._cacheIndex < 0 && insert) {\n                        this._cacheIndex = this._keys.length;\n                        this._keys.push(key);\n                        this._values.push(undefined);\n                    }\n                    return this._cacheIndex;\n                };\n                return Map;\n            }());\n            return Map;\n            function getKey(key, _) {\n                return key;\n            }\n            function getValue(_, value) {\n                return value;\n            }\n            function getEntry(key, value) {\n                return [key, value];\n            }\n        }\n        // naive Set shim\n        function CreateSetPolyfill() {\n            var Set = /** @class */ (function () {\n                function Set() {\n                    this._map = new _Map();\n                }\n                Object.defineProperty(Set.prototype, \"size\", {\n                    get: function () { return this._map.size; },\n                    enumerable: true,\n                    configurable: true\n                });\n                Set.prototype.has = function (value) { return this._map.has(value); };\n                Set.prototype.add = function (value) { return this._map.set(value, value), this; };\n                Set.prototype.delete = function (value) { return this._map.delete(value); };\n                Set.prototype.clear = function () { this._map.clear(); };\n                Set.prototype.keys = function () { return this._map.keys(); };\n                Set.prototype.values = function () { return this._map.keys(); };\n                Set.prototype.entries = function () { return this._map.entries(); };\n                Set.prototype[\"@@iterator\"] = function () { return this.keys(); };\n                Set.prototype[iteratorSymbol] = function () { return this.keys(); };\n                return Set;\n            }());\n            return Set;\n        }\n        // naive WeakMap shim\n        function CreateWeakMapPolyfill() {\n            var UUID_SIZE = 16;\n            var keys = HashMap.create();\n            var rootKey = CreateUniqueKey();\n            return /** @class */ (function () {\n                function WeakMap() {\n                    this._key = CreateUniqueKey();\n                }\n                WeakMap.prototype.has = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.has(table, this._key) : false;\n                };\n                WeakMap.prototype.get = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? HashMap.get(table, this._key) : undefined;\n                };\n                WeakMap.prototype.set = function (target, value) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ true);\n                    table[this._key] = value;\n                    return this;\n                };\n                WeakMap.prototype.delete = function (target) {\n                    var table = GetOrCreateWeakMapTable(target, /*create*/ false);\n                    return table !== undefined ? delete table[this._key] : false;\n                };\n                WeakMap.prototype.clear = function () {\n                    // NOTE: not a real clear, just makes the previous data unreachable\n                    this._key = CreateUniqueKey();\n                };\n                return WeakMap;\n            }());\n            function CreateUniqueKey() {\n                var key;\n                do\n                    key = \"@@WeakMap@@\" + CreateUUID();\n                while (HashMap.has(keys, key));\n                keys[key] = true;\n                return key;\n            }\n            function GetOrCreateWeakMapTable(target, create) {\n                if (!hasOwn.call(target, rootKey)) {\n                    if (!create)\n                        return undefined;\n                    Object.defineProperty(target, rootKey, { value: HashMap.create() });\n                }\n                return target[rootKey];\n            }\n            function FillRandomBytes(buffer, size) {\n                for (var i = 0; i < size; ++i)\n                    buffer[i] = Math.random() * 0xff | 0;\n                return buffer;\n            }\n            function GenRandomBytes(size) {\n                if (typeof Uint8Array === \"function\") {\n                    var array = new Uint8Array(size);\n                    if (typeof crypto !== \"undefined\") {\n                        crypto.getRandomValues(array);\n                    }\n                    else if (typeof msCrypto !== \"undefined\") {\n                        msCrypto.getRandomValues(array);\n                    }\n                    else {\n                        FillRandomBytes(array, size);\n                    }\n                    return array;\n                }\n                return FillRandomBytes(new Array(size), size);\n            }\n            function CreateUUID() {\n                var data = GenRandomBytes(UUID_SIZE);\n                // mark as random - RFC 4122  4.4\n                data[6] = data[6] & 0x4f | 0x40;\n                data[8] = data[8] & 0xbf | 0x80;\n                var result = \"\";\n                for (var offset = 0; offset < UUID_SIZE; ++offset) {\n                    var byte = data[offset];\n                    if (offset === 4 || offset === 6 || offset === 8)\n                        result += \"-\";\n                    if (byte < 16)\n                        result += \"0\";\n                    result += byte.toString(16).toLowerCase();\n                }\n                return result;\n            }\n        }\n        // uses a heuristic used by v8 and chakra to force an object into dictionary mode.\n        function MakeDictionary(obj) {\n            obj.__ = undefined;\n            delete obj.__;\n            return obj;\n        }\n    });\n})(Reflect || (Reflect = {}));\n","'use strict';\n\nvar isMergeableObject = function isMergeableObject(value) {\n\treturn isNonNullObject(value)\n\t\t&& !isSpecial(value)\n};\n\nfunction isNonNullObject(value) {\n\treturn !!value && typeof value === 'object'\n}\n\nfunction isSpecial(value) {\n\tvar stringValue = Object.prototype.toString.call(value);\n\n\treturn stringValue === '[object RegExp]'\n\t\t|| stringValue === '[object Date]'\n\t\t|| isReactElement(value)\n}\n\n// see https://github.com/facebook/react/blob/b5ac963fb791d1298e7f396236383bc955f916c1/src/isomorphic/classic/element/ReactElement.js#L21-L25\nvar canUseSymbol = typeof Symbol === 'function' && Symbol.for;\nvar REACT_ELEMENT_TYPE = canUseSymbol ? Symbol.for('react.element') : 0xeac7;\n\nfunction isReactElement(value) {\n\treturn value.$$typeof === REACT_ELEMENT_TYPE\n}\n\nfunction emptyTarget(val) {\n\treturn Array.isArray(val) ? [] : {}\n}\n\nfunction cloneUnlessOtherwiseSpecified(value, options) {\n\treturn (options.clone !== false && options.isMergeableObject(value))\n\t\t? deepmerge(emptyTarget(value), value, options)\n\t\t: value\n}\n\nfunction defaultArrayMerge(target, source, options) {\n\treturn target.concat(source).map(function(element) {\n\t\treturn cloneUnlessOtherwiseSpecified(element, options)\n\t})\n}\n\nfunction getMergeFunction(key, options) {\n\tif (!options.customMerge) {\n\t\treturn deepmerge\n\t}\n\tvar customMerge = options.customMerge(key);\n\treturn typeof customMerge === 'function' ? customMerge : deepmerge\n}\n\nfunction getEnumerableOwnPropertySymbols(target) {\n\treturn Object.getOwnPropertySymbols\n\t\t? Object.getOwnPropertySymbols(target).filter(function(symbol) {\n\t\t\treturn Object.propertyIsEnumerable.call(target, symbol)\n\t\t})\n\t\t: []\n}\n\nfunction getKeys(target) {\n\treturn Object.keys(target).concat(getEnumerableOwnPropertySymbols(target))\n}\n\nfunction propertyIsOnObject(object, property) {\n\ttry {\n\t\treturn property in object\n\t} catch(_) {\n\t\treturn false\n\t}\n}\n\n// Protects from prototype poisoning and unexpected merging up the prototype chain.\nfunction propertyIsUnsafe(target, key) {\n\treturn propertyIsOnObject(target, key) // Properties are safe to merge if they don't exist in the target yet,\n\t\t&& !(Object.hasOwnProperty.call(target, key) // unsafe if they exist up the prototype chain,\n\t\t\t&& Object.propertyIsEnumerable.call(target, key)) // and also unsafe if they're nonenumerable.\n}\n\nfunction mergeObject(target, source, options) {\n\tvar destination = {};\n\tif (options.isMergeableObject(target)) {\n\t\tgetKeys(target).forEach(function(key) {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(target[key], options);\n\t\t});\n\t}\n\tgetKeys(source).forEach(function(key) {\n\t\tif (propertyIsUnsafe(target, key)) {\n\t\t\treturn\n\t\t}\n\n\t\tif (propertyIsOnObject(target, key) && options.isMergeableObject(source[key])) {\n\t\t\tdestination[key] = getMergeFunction(key, options)(target[key], source[key], options);\n\t\t} else {\n\t\t\tdestination[key] = cloneUnlessOtherwiseSpecified(source[key], options);\n\t\t}\n\t});\n\treturn destination\n}\n\nfunction deepmerge(target, source, options) {\n\toptions = options || {};\n\toptions.arrayMerge = options.arrayMerge || defaultArrayMerge;\n\toptions.isMergeableObject = options.isMergeableObject || isMergeableObject;\n\t// cloneUnlessOtherwiseSpecified is added to `options` so that custom arrayMerge()\n\t// implementations can use it. The caller may not replace it.\n\toptions.cloneUnlessOtherwiseSpecified = cloneUnlessOtherwiseSpecified;\n\n\tvar sourceIsArray = Array.isArray(source);\n\tvar targetIsArray = Array.isArray(target);\n\tvar sourceAndTargetTypesMatch = sourceIsArray === targetIsArray;\n\n\tif (!sourceAndTargetTypesMatch) {\n\t\treturn cloneUnlessOtherwiseSpecified(source, options)\n\t} else if (sourceIsArray) {\n\t\treturn options.arrayMerge(target, source, options)\n\t} else {\n\t\treturn mergeObject(target, source, options)\n\t}\n}\n\ndeepmerge.all = function deepmergeAll(array, options) {\n\tif (!Array.isArray(array)) {\n\t\tthrow new Error('first argument should be an array')\n\t}\n\n\treturn array.reduce(function(prev, next) {\n\t\treturn deepmerge(prev, next, options)\n\t}, {})\n};\n\nvar deepmerge_1 = deepmerge;\n\nmodule.exports = deepmerge_1;\n","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","var Lifecycle;\n(function (Lifecycle) {\n    Lifecycle[Lifecycle[\"Transient\"] = 0] = \"Transient\";\n    Lifecycle[Lifecycle[\"Singleton\"] = 1] = \"Singleton\";\n    Lifecycle[Lifecycle[\"ResolutionScoped\"] = 2] = \"ResolutionScoped\";\n    Lifecycle[Lifecycle[\"ContainerScoped\"] = 3] = \"ContainerScoped\";\n})(Lifecycle || (Lifecycle = {}));\nexport default Lifecycle;\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","export function isClassProvider(provider) {\n    return !!provider.useClass;\n}\n","export function isFactoryProvider(provider) {\n    return !!provider.useFactory;\n}\n","import { __read, __spread } from \"tslib\";\nvar DelayedConstructor = (function () {\n    function DelayedConstructor(wrap) {\n        this.wrap = wrap;\n        this.reflectMethods = [\n            \"get\",\n            \"getPrototypeOf\",\n            \"setPrototypeOf\",\n            \"getOwnPropertyDescriptor\",\n            \"defineProperty\",\n            \"has\",\n            \"set\",\n            \"deleteProperty\",\n            \"apply\",\n            \"construct\",\n            \"ownKeys\"\n        ];\n    }\n    DelayedConstructor.prototype.createProxy = function (createObject) {\n        var _this = this;\n        var target = {};\n        var init = false;\n        var value;\n        var delayedObject = function () {\n            if (!init) {\n                value = createObject(_this.wrap());\n                init = true;\n            }\n            return value;\n        };\n        return new Proxy(target, this.createHandler(delayedObject));\n    };\n    DelayedConstructor.prototype.createHandler = function (delayedObject) {\n        var handler = {};\n        var install = function (name) {\n            handler[name] = function () {\n                var args = [];\n                for (var _i = 0; _i < arguments.length; _i++) {\n                    args[_i] = arguments[_i];\n                }\n                args[0] = delayedObject();\n                var method = Reflect[name];\n                return method.apply(void 0, __spread(args));\n            };\n        };\n        this.reflectMethods.forEach(install);\n        return handler;\n    };\n    return DelayedConstructor;\n}());\nexport { DelayedConstructor };\nexport function delay(wrappedConstructor) {\n    if (typeof wrappedConstructor === \"undefined\") {\n        throw new Error(\"Attempt to `delay` undefined. Constructor must be wrapped in a callback\");\n    }\n    return new DelayedConstructor(wrappedConstructor);\n}\n","import { DelayedConstructor } from \"../lazy-helpers\";\nexport function isNormalToken(token) {\n    return typeof token === \"string\" || typeof token === \"symbol\";\n}\nexport function isTokenDescriptor(descriptor) {\n    return (typeof descriptor === \"object\" &&\n        \"token\" in descriptor &&\n        \"multiple\" in descriptor);\n}\nexport function isTransformDescriptor(descriptor) {\n    return (typeof descriptor === \"object\" &&\n        \"token\" in descriptor &&\n        \"transform\" in descriptor);\n}\nexport function isConstructorToken(token) {\n    return typeof token === \"function\" || token instanceof DelayedConstructor;\n}\n","export function isTokenProvider(provider) {\n    return !!provider.useToken;\n}\n","export function isValueProvider(provider) {\n    return provider.useValue != undefined;\n}\n","var RegistryBase = (function () {\n    function RegistryBase() {\n        this._registryMap = new Map();\n    }\n    RegistryBase.prototype.entries = function () {\n        return this._registryMap.entries();\n    };\n    RegistryBase.prototype.getAll = function (key) {\n        this.ensure(key);\n        return this._registryMap.get(key);\n    };\n    RegistryBase.prototype.get = function (key) {\n        this.ensure(key);\n        var value = this._registryMap.get(key);\n        return value[value.length - 1] || null;\n    };\n    RegistryBase.prototype.set = function (key, value) {\n        this.ensure(key);\n        this._registryMap.get(key).push(value);\n    };\n    RegistryBase.prototype.setAll = function (key, value) {\n        this._registryMap.set(key, value);\n    };\n    RegistryBase.prototype.has = function (key) {\n        this.ensure(key);\n        return this._registryMap.get(key).length > 0;\n    };\n    RegistryBase.prototype.clear = function () {\n        this._registryMap.clear();\n    };\n    RegistryBase.prototype.ensure = function (key) {\n        if (!this._registryMap.has(key)) {\n            this._registryMap.set(key, []);\n        }\n    };\n    return RegistryBase;\n}());\nexport default RegistryBase;\n","import { __extends } from \"tslib\";\nimport RegistryBase from \"./registry-base\";\nvar Registry = (function (_super) {\n    __extends(Registry, _super);\n    function Registry() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return Registry;\n}(RegistryBase));\nexport default Registry;\n","var ResolutionContext = (function () {\n    function ResolutionContext() {\n        this.scopedResolutions = new Map();\n    }\n    return ResolutionContext;\n}());\nexport default ResolutionContext;\n","import { __extends } from \"tslib\";\nimport RegistryBase from \"./registry-base\";\nvar PreResolutionInterceptors = (function (_super) {\n    __extends(PreResolutionInterceptors, _super);\n    function PreResolutionInterceptors() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PreResolutionInterceptors;\n}(RegistryBase));\nexport { PreResolutionInterceptors };\nvar PostResolutionInterceptors = (function (_super) {\n    __extends(PostResolutionInterceptors, _super);\n    function PostResolutionInterceptors() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    return PostResolutionInterceptors;\n}(RegistryBase));\nexport { PostResolutionInterceptors };\nvar Interceptors = (function () {\n    function Interceptors() {\n        this.preResolution = new PreResolutionInterceptors();\n        this.postResolution = new PostResolutionInterceptors();\n    }\n    return Interceptors;\n}());\nexport default Interceptors;\n","import { __awaiter, __generator, __read, __spread, __values } from \"tslib\";\nimport { isClassProvider, isFactoryProvider, isNormalToken, isTokenProvider, isValueProvider } from \"./providers\";\nimport { isProvider } from \"./providers/provider\";\nimport { isConstructorToken, isTokenDescriptor, isTransformDescriptor } from \"./providers/injection-token\";\nimport Registry from \"./registry\";\nimport Lifecycle from \"./types/lifecycle\";\nimport ResolutionContext from \"./resolution-context\";\nimport { formatErrorCtor } from \"./error-helpers\";\nimport { DelayedConstructor } from \"./lazy-helpers\";\nimport { isDisposable } from \"./types/disposable\";\nimport Interceptors from \"./interceptors\";\nexport var typeInfo = new Map();\nvar InternalDependencyContainer = (function () {\n    function InternalDependencyContainer(parent) {\n        this.parent = parent;\n        this._registry = new Registry();\n        this.interceptors = new Interceptors();\n        this.disposed = false;\n        this.disposables = new Set();\n    }\n    InternalDependencyContainer.prototype.register = function (token, providerOrConstructor, options) {\n        if (options === void 0) { options = { lifecycle: Lifecycle.Transient }; }\n        this.ensureNotDisposed();\n        var provider;\n        if (!isProvider(providerOrConstructor)) {\n            provider = { useClass: providerOrConstructor };\n        }\n        else {\n            provider = providerOrConstructor;\n        }\n        if (isTokenProvider(provider)) {\n            var path = [token];\n            var tokenProvider = provider;\n            while (tokenProvider != null) {\n                var currentToken = tokenProvider.useToken;\n                if (path.includes(currentToken)) {\n                    throw new Error(\"Token registration cycle detected! \" + __spread(path, [currentToken]).join(\" -> \"));\n                }\n                path.push(currentToken);\n                var registration = this._registry.get(currentToken);\n                if (registration && isTokenProvider(registration.provider)) {\n                    tokenProvider = registration.provider;\n                }\n                else {\n                    tokenProvider = null;\n                }\n            }\n        }\n        if (options.lifecycle === Lifecycle.Singleton ||\n            options.lifecycle == Lifecycle.ContainerScoped ||\n            options.lifecycle == Lifecycle.ResolutionScoped) {\n            if (isValueProvider(provider) || isFactoryProvider(provider)) {\n                throw new Error(\"Cannot use lifecycle \\\"\" + Lifecycle[options.lifecycle] + \"\\\" with ValueProviders or FactoryProviders\");\n            }\n        }\n        this._registry.set(token, { provider: provider, options: options });\n        return this;\n    };\n    InternalDependencyContainer.prototype.registerType = function (from, to) {\n        this.ensureNotDisposed();\n        if (isNormalToken(to)) {\n            return this.register(from, {\n                useToken: to\n            });\n        }\n        return this.register(from, {\n            useClass: to\n        });\n    };\n    InternalDependencyContainer.prototype.registerInstance = function (token, instance) {\n        this.ensureNotDisposed();\n        return this.register(token, {\n            useValue: instance\n        });\n    };\n    InternalDependencyContainer.prototype.registerSingleton = function (from, to) {\n        this.ensureNotDisposed();\n        if (isNormalToken(from)) {\n            if (isNormalToken(to)) {\n                return this.register(from, {\n                    useToken: to\n                }, { lifecycle: Lifecycle.Singleton });\n            }\n            else if (to) {\n                return this.register(from, {\n                    useClass: to\n                }, { lifecycle: Lifecycle.Singleton });\n            }\n            throw new Error('Cannot register a type name as a singleton without a \"to\" token');\n        }\n        var useClass = from;\n        if (to && !isNormalToken(to)) {\n            useClass = to;\n        }\n        return this.register(from, {\n            useClass: useClass\n        }, { lifecycle: Lifecycle.Singleton });\n    };\n    InternalDependencyContainer.prototype.resolve = function (token, context, isOptional) {\n        if (context === void 0) { context = new ResolutionContext(); }\n        if (isOptional === void 0) { isOptional = false; }\n        this.ensureNotDisposed();\n        var registration = this.getRegistration(token);\n        if (!registration && isNormalToken(token)) {\n            if (isOptional) {\n                return undefined;\n            }\n            throw new Error(\"Attempted to resolve unregistered dependency token: \\\"\" + token.toString() + \"\\\"\");\n        }\n        this.executePreResolutionInterceptor(token, \"Single\");\n        if (registration) {\n            var result = this.resolveRegistration(registration, context);\n            this.executePostResolutionInterceptor(token, result, \"Single\");\n            return result;\n        }\n        if (isConstructorToken(token)) {\n            var result = this.construct(token, context);\n            this.executePostResolutionInterceptor(token, result, \"Single\");\n            return result;\n        }\n        throw new Error(\"Attempted to construct an undefined constructor. Could mean a circular dependency problem. Try using `delay` function.\");\n    };\n    InternalDependencyContainer.prototype.executePreResolutionInterceptor = function (token, resolutionType) {\n        var e_1, _a;\n        if (this.interceptors.preResolution.has(token)) {\n            var remainingInterceptors = [];\n            try {\n                for (var _b = __values(this.interceptors.preResolution.getAll(token)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var interceptor = _c.value;\n                    if (interceptor.options.frequency != \"Once\") {\n                        remainingInterceptors.push(interceptor);\n                    }\n                    interceptor.callback(token, resolutionType);\n                }\n            }\n            catch (e_1_1) { e_1 = { error: e_1_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_1) throw e_1.error; }\n            }\n            this.interceptors.preResolution.setAll(token, remainingInterceptors);\n        }\n    };\n    InternalDependencyContainer.prototype.executePostResolutionInterceptor = function (token, result, resolutionType) {\n        var e_2, _a;\n        if (this.interceptors.postResolution.has(token)) {\n            var remainingInterceptors = [];\n            try {\n                for (var _b = __values(this.interceptors.postResolution.getAll(token)), _c = _b.next(); !_c.done; _c = _b.next()) {\n                    var interceptor = _c.value;\n                    if (interceptor.options.frequency != \"Once\") {\n                        remainingInterceptors.push(interceptor);\n                    }\n                    interceptor.callback(token, result, resolutionType);\n                }\n            }\n            catch (e_2_1) { e_2 = { error: e_2_1 }; }\n            finally {\n                try {\n                    if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n                }\n                finally { if (e_2) throw e_2.error; }\n            }\n            this.interceptors.postResolution.setAll(token, remainingInterceptors);\n        }\n    };\n    InternalDependencyContainer.prototype.resolveRegistration = function (registration, context) {\n        this.ensureNotDisposed();\n        if (registration.options.lifecycle === Lifecycle.ResolutionScoped &&\n            context.scopedResolutions.has(registration)) {\n            return context.scopedResolutions.get(registration);\n        }\n        var isSingleton = registration.options.lifecycle === Lifecycle.Singleton;\n        var isContainerScoped = registration.options.lifecycle === Lifecycle.ContainerScoped;\n        var returnInstance = isSingleton || isContainerScoped;\n        var resolved;\n        if (isValueProvider(registration.provider)) {\n            resolved = registration.provider.useValue;\n        }\n        else if (isTokenProvider(registration.provider)) {\n            resolved = returnInstance\n                ? registration.instance ||\n                    (registration.instance = this.resolve(registration.provider.useToken, context))\n                : this.resolve(registration.provider.useToken, context);\n        }\n        else if (isClassProvider(registration.provider)) {\n            resolved = returnInstance\n                ? registration.instance ||\n                    (registration.instance = this.construct(registration.provider.useClass, context))\n                : this.construct(registration.provider.useClass, context);\n        }\n        else if (isFactoryProvider(registration.provider)) {\n            resolved = registration.provider.useFactory(this);\n        }\n        else {\n            resolved = this.construct(registration.provider, context);\n        }\n        if (registration.options.lifecycle === Lifecycle.ResolutionScoped) {\n            context.scopedResolutions.set(registration, resolved);\n        }\n        return resolved;\n    };\n    InternalDependencyContainer.prototype.resolveAll = function (token, context, isOptional) {\n        var _this = this;\n        if (context === void 0) { context = new ResolutionContext(); }\n        if (isOptional === void 0) { isOptional = false; }\n        this.ensureNotDisposed();\n        var registrations = this.getAllRegistrations(token);\n        if (!registrations && isNormalToken(token)) {\n            if (isOptional) {\n                return [];\n            }\n            throw new Error(\"Attempted to resolve unregistered dependency token: \\\"\" + token.toString() + \"\\\"\");\n        }\n        this.executePreResolutionInterceptor(token, \"All\");\n        if (registrations) {\n            var result_1 = registrations.map(function (item) {\n                return _this.resolveRegistration(item, context);\n            });\n            this.executePostResolutionInterceptor(token, result_1, \"All\");\n            return result_1;\n        }\n        var result = [this.construct(token, context)];\n        this.executePostResolutionInterceptor(token, result, \"All\");\n        return result;\n    };\n    InternalDependencyContainer.prototype.isRegistered = function (token, recursive) {\n        if (recursive === void 0) { recursive = false; }\n        this.ensureNotDisposed();\n        return (this._registry.has(token) ||\n            (recursive &&\n                (this.parent || false) &&\n                this.parent.isRegistered(token, true)));\n    };\n    InternalDependencyContainer.prototype.reset = function () {\n        this.ensureNotDisposed();\n        this._registry.clear();\n        this.interceptors.preResolution.clear();\n        this.interceptors.postResolution.clear();\n    };\n    InternalDependencyContainer.prototype.clearInstances = function () {\n        var e_3, _a;\n        this.ensureNotDisposed();\n        try {\n            for (var _b = __values(this._registry.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = __read(_c.value, 2), token = _d[0], registrations = _d[1];\n                this._registry.setAll(token, registrations\n                    .filter(function (registration) { return !isValueProvider(registration.provider); })\n                    .map(function (registration) {\n                    registration.instance = undefined;\n                    return registration;\n                }));\n            }\n        }\n        catch (e_3_1) { e_3 = { error: e_3_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_3) throw e_3.error; }\n        }\n    };\n    InternalDependencyContainer.prototype.createChildContainer = function () {\n        var e_4, _a;\n        this.ensureNotDisposed();\n        var childContainer = new InternalDependencyContainer(this);\n        try {\n            for (var _b = __values(this._registry.entries()), _c = _b.next(); !_c.done; _c = _b.next()) {\n                var _d = __read(_c.value, 2), token = _d[0], registrations = _d[1];\n                if (registrations.some(function (_a) {\n                    var options = _a.options;\n                    return options.lifecycle === Lifecycle.ContainerScoped;\n                })) {\n                    childContainer._registry.setAll(token, registrations.map(function (registration) {\n                        if (registration.options.lifecycle === Lifecycle.ContainerScoped) {\n                            return {\n                                provider: registration.provider,\n                                options: registration.options\n                            };\n                        }\n                        return registration;\n                    }));\n                }\n            }\n        }\n        catch (e_4_1) { e_4 = { error: e_4_1 }; }\n        finally {\n            try {\n                if (_c && !_c.done && (_a = _b.return)) _a.call(_b);\n            }\n            finally { if (e_4) throw e_4.error; }\n        }\n        return childContainer;\n    };\n    InternalDependencyContainer.prototype.beforeResolution = function (token, callback, options) {\n        if (options === void 0) { options = { frequency: \"Always\" }; }\n        this.interceptors.preResolution.set(token, {\n            callback: callback,\n            options: options\n        });\n    };\n    InternalDependencyContainer.prototype.afterResolution = function (token, callback, options) {\n        if (options === void 0) { options = { frequency: \"Always\" }; }\n        this.interceptors.postResolution.set(token, {\n            callback: callback,\n            options: options\n        });\n    };\n    InternalDependencyContainer.prototype.dispose = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var promises;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.disposed = true;\n                        promises = [];\n                        this.disposables.forEach(function (disposable) {\n                            var maybePromise = disposable.dispose();\n                            if (maybePromise) {\n                                promises.push(maybePromise);\n                            }\n                        });\n                        return [4, Promise.all(promises)];\n                    case 1:\n                        _a.sent();\n                        return [2];\n                }\n            });\n        });\n    };\n    InternalDependencyContainer.prototype.getRegistration = function (token) {\n        if (this.isRegistered(token)) {\n            return this._registry.get(token);\n        }\n        if (this.parent) {\n            return this.parent.getRegistration(token);\n        }\n        return null;\n    };\n    InternalDependencyContainer.prototype.getAllRegistrations = function (token) {\n        if (this.isRegistered(token)) {\n            return this._registry.getAll(token);\n        }\n        if (this.parent) {\n            return this.parent.getAllRegistrations(token);\n        }\n        return null;\n    };\n    InternalDependencyContainer.prototype.construct = function (ctor, context) {\n        var _this = this;\n        if (ctor instanceof DelayedConstructor) {\n            return ctor.createProxy(function (target) {\n                return _this.resolve(target, context);\n            });\n        }\n        var instance = (function () {\n            var paramInfo = typeInfo.get(ctor);\n            if (!paramInfo || paramInfo.length === 0) {\n                if (ctor.length === 0) {\n                    return new ctor();\n                }\n                else {\n                    throw new Error(\"TypeInfo not known for \\\"\" + ctor.name + \"\\\"\");\n                }\n            }\n            var params = paramInfo.map(_this.resolveParams(context, ctor));\n            return new (ctor.bind.apply(ctor, __spread([void 0], params)))();\n        })();\n        if (isDisposable(instance)) {\n            this.disposables.add(instance);\n        }\n        return instance;\n    };\n    InternalDependencyContainer.prototype.resolveParams = function (context, ctor) {\n        var _this = this;\n        return function (param, idx) {\n            var _a, _b, _c;\n            try {\n                if (isTokenDescriptor(param)) {\n                    if (isTransformDescriptor(param)) {\n                        return param.multiple\n                            ? (_a = _this.resolve(param.transform)).transform.apply(_a, __spread([_this.resolveAll(param.token, new ResolutionContext(), param.isOptional)], param.transformArgs)) : (_b = _this.resolve(param.transform)).transform.apply(_b, __spread([_this.resolve(param.token, context, param.isOptional)], param.transformArgs));\n                    }\n                    else {\n                        return param.multiple\n                            ? _this.resolveAll(param.token, new ResolutionContext(), param.isOptional)\n                            : _this.resolve(param.token, context, param.isOptional);\n                    }\n                }\n                else if (isTransformDescriptor(param)) {\n                    return (_c = _this.resolve(param.transform, context)).transform.apply(_c, __spread([_this.resolve(param.token, context)], param.transformArgs));\n                }\n                return _this.resolve(param, context);\n            }\n            catch (e) {\n                throw new Error(formatErrorCtor(ctor, idx, e));\n            }\n        };\n    };\n    InternalDependencyContainer.prototype.ensureNotDisposed = function () {\n        if (this.disposed) {\n            throw new Error(\"This container has been disposed, you cannot interact with a disposed container\");\n        }\n    };\n    return InternalDependencyContainer;\n}());\nexport var instance = new InternalDependencyContainer();\nexport default instance;\n","import { isClassProvider } from \"./class-provider\";\nimport { isValueProvider } from \"./value-provider\";\nimport { isTokenProvider } from \"./token-provider\";\nimport { isFactoryProvider } from \"./factory-provider\";\nexport function isProvider(provider) {\n    return (isClassProvider(provider) ||\n        isValueProvider(provider) ||\n        isTokenProvider(provider) ||\n        isFactoryProvider(provider));\n}\n","export function isDisposable(value) {\n    if (typeof value.dispose !== \"function\")\n        return false;\n    var disposeFun = value.dispose;\n    if (disposeFun.length > 0) {\n        return false;\n    }\n    return true;\n}\n","import { __read, __spread } from \"tslib\";\nfunction formatDependency(params, idx) {\n    if (params === null) {\n        return \"at position #\" + idx;\n    }\n    var argName = params.split(\",\")[idx].trim();\n    return \"\\\"\" + argName + \"\\\" at position #\" + idx;\n}\nfunction composeErrorMessage(msg, e, indent) {\n    if (indent === void 0) { indent = \"    \"; }\n    return __spread([msg], e.message.split(\"\\n\").map(function (l) { return indent + l; })).join(\"\\n\");\n}\nexport function formatErrorCtor(ctor, paramIdx, error) {\n    var _a = __read(ctor.toString().match(/constructor\\(([\\w, ]+)\\)/) || [], 2), _b = _a[1], params = _b === void 0 ? null : _b;\n    var dep = formatDependency(params, paramIdx);\n    return composeErrorMessage(\"Cannot inject the dependency \" + dep + \" of \\\"\" + ctor.name + \"\\\" constructor. Reason:\", error);\n}\n","export var INJECTION_TOKEN_METADATA_KEY = \"injectionTokens\";\nexport function getParamInfo(target) {\n    var params = Reflect.getMetadata(\"design:paramtypes\", target) || [];\n    var injectionTokens = Reflect.getOwnMetadata(INJECTION_TOKEN_METADATA_KEY, target) || {};\n    Object.keys(injectionTokens).forEach(function (key) {\n        params[+key] = injectionTokens[key];\n    });\n    return params;\n}\nexport function defineInjectionTokenMetadata(data, transform) {\n    return function (target, _propertyKey, parameterIndex) {\n        var descriptors = Reflect.getOwnMetadata(INJECTION_TOKEN_METADATA_KEY, target) || {};\n        descriptors[parameterIndex] = transform\n            ? {\n                token: data,\n                transform: transform.transformToken,\n                transformArgs: transform.args || []\n            }\n            : data;\n        Reflect.defineMetadata(INJECTION_TOKEN_METADATA_KEY, descriptors, target);\n    };\n}\n","import { defineInjectionTokenMetadata } from \"../reflection-helpers\";\nfunction inject(token, options) {\n    var data = {\n        token: token,\n        multiple: false,\n        isOptional: options && options.isOptional\n    };\n    return defineInjectionTokenMetadata(data);\n}\nexport default inject;\n","import { getParamInfo } from \"../reflection-helpers\";\nimport { typeInfo } from \"../dependency-container\";\nimport { instance as globalContainer } from \"../dependency-container\";\nfunction injectable(options) {\n    return function (target) {\n        typeInfo.set(target, getParamInfo(target));\n        if (options && options.token) {\n            if (!Array.isArray(options.token)) {\n                globalContainer.register(options.token, target);\n            }\n            else {\n                options.token.forEach(function (token) {\n                    globalContainer.register(token, target);\n                });\n            }\n        }\n    };\n}\nexport default injectable;\n","import injectable from \"./injectable\";\nimport { instance as globalContainer } from \"../dependency-container\";\nfunction singleton() {\n    return function (target) {\n        injectable()(target);\n        globalContainer.registerSingleton(target);\n    };\n}\nexport default singleton;\n","if (typeof Reflect === \"undefined\" || !Reflect.getMetadata) {\n    throw new Error(\"tsyringe requires a reflect polyfill. Please add 'import \\\"reflect-metadata\\\"' to the top of your entry point.\");\n}\nexport { Lifecycle } from \"./types\";\nexport * from \"./decorators\";\nexport * from \"./factories\";\nexport * from \"./providers\";\nexport { delay } from \"./lazy-helpers\";\nexport { instance as container } from \"./dependency-container\";\n","/**\n * Console-based implementation of the ILogger interface.\n *\n * This logger outputs messages to the browser/Node.js console with appropriate\n * log levels and includes optional context information. It uses TSyringe for\n * dependency injection support.\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nimport { injectable } from 'tsyringe';\n/**\n * ConsoleLogger implementation.\n *\n * @remarks\n * This implementation is suitable for both browser extensions (console methods\n * available in extension contexts) and Node.js environments. Messages are\n * formatted with a [LOG] prefix to distinguish them from other console output.\n */\nlet ConsoleLogger = class ConsoleLogger {\n    /**\n     * Format a log message with optional context.\n     *\n     * @param message - The message to format\n     * @param context - Optional context object with additional metadata\n     * @returns Formatted message string\n     */\n    formatMessage(message, context) {\n        if (!context || Object.keys(context).length === 0) {\n            return `[LOG] ${message}`;\n        }\n        return `[LOG] ${message} ${JSON.stringify(context)}`;\n    }\n    /**\n     * Log a debug message to the console.\n     *\n     * @param message - The message to log\n     * @param context - Optional context object with additional metadata\n     */\n    debug(message, context) {\n        console.debug(this.formatMessage(message, context));\n    }\n    /**\n     * Log an informational message to the console.\n     *\n     * @param message - The message to log\n     * @param context - Optional context object with additional metadata\n     */\n    info(message, context) {\n        console.info(this.formatMessage(message, context));\n    }\n    /**\n     * Log a warning message to the console.\n     *\n     * @param message - The message to log\n     * @param context - Optional context object with additional metadata\n     */\n    warn(message, context) {\n        console.warn(this.formatMessage(message, context));\n    }\n    /**\n     * Log an error message to the console.\n     *\n     * @param message - The message to log\n     * @param context - Optional context object with additional metadata\n     */\n    error(message, context) {\n        console.error(this.formatMessage(message, context));\n    }\n    /**\n     * Mask an API key for safe logging.\n     *\n     * Returns the first 7 characters, ellipsis, and last 3 characters.\n     * This format allows partial identification without exposing the full key.\n     *\n     * @param key - The API key to mask (optional)\n     * @returns Masked API key string or \"not set\" if key is falsy\n     *\n     * @example\n     * maskApiKey(\"sk-proj-abc123def456\") // \"sk-proj-...456\"\n     * maskApiKey(\"\") // \"not set\"\n     * maskApiKey(undefined) // \"not set\"\n     */\n    maskApiKey(key) {\n        if (!key || typeof key !== 'string') {\n            return 'not set';\n        }\n        if (key.length <= 10) {\n            return '***';\n        }\n        return `${key.slice(0, 7)}...${key.slice(-3)}`;\n    }\n};\nConsoleLogger = __decorate([\n    injectable()\n], ConsoleLogger);\nexport { ConsoleLogger };\n","/**\n * In-memory cache implementation using Map and Web Crypto API\n * @module infrastructure/cache/MemoryCache\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { injectable } from 'tsyringe';\n// ============================================================================\n// CACHE CONFIGURATION\n// ============================================================================\n/**\n * Default TTL in milliseconds (24 hours)\n */\nconst DEFAULT_TTL = 24 * 60 * 60 * 1000;\n// ============================================================================\n// HASH FUNCTIONS\n// ============================================================================\n/**\n * Generates SHA-256 hash for cache key using Web Crypto API\n *\n * @param key - Original cache key string\n * @returns Promise resolving to hex string of SHA-256 hash\n *\n * @example\n * const hashedKey = await hashKey('user:123');\n * // Returns: 'a591a6d40bf420404a011733cfb7b190d62c65bf0bcda32b57b277d9ad9f146e'\n */\nasync function hashKey(key) {\n    const encoder = new TextEncoder();\n    const dataBuffer = encoder.encode(key);\n    const hashBuffer = await crypto.subtle.digest('SHA-256', dataBuffer);\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    return hashArray.map((b) => b.toString(16).padStart(2, '0')).join('');\n}\n// ============================================================================\n// MEMORY CACHE IMPLEMENTATION\n// ============================================================================\n/**\n * In-memory cache implementation with TTL support and statistics\n * Uses Map for storage and Web Crypto API for key hashing\n *\n * @template T - Type of cached values\n *\n * @example\n * ```typescript\n * const cache = new MemoryCache();\n * await cache.set('user:123', userData, 3600000); // 1 hour TTL\n * const user = await cache.get<User>('user:123');\n * const stats = await cache.getStats();\n * ```\n */\nlet MemoryCache = class MemoryCache {\n    /** ========================================================================\n     * CONSTRUCTOR\n     * ======================================================================== */\n    /**\n     * Creates new MemoryCache instance\n     */\n    constructor() {\n        this.cache = new Map();\n        this.hitCount = 0;\n        this.missCount = 0;\n    }\n    /** ========================================================================\n     * CACHE OPERATIONS\n     * ======================================================================== */\n    /**\n     * Retrieves a value from cache by key\n     *\n     * @template T - Type of value to retrieve\n     * @param key - Cache key\n     * @returns Promise resolving to cached value or null if not found/expired\n     */\n    async get(key) {\n        try {\n            const hashedKey = await hashKey(key);\n            const entry = this.cache.get(hashedKey);\n            if (!entry) {\n                this.missCount++;\n                return null;\n            }\n            // Check if entry has expired\n            const now = Date.now();\n            const expirationTime = entry.timestamp + (entry.ttl || DEFAULT_TTL);\n            const isExpired = now > expirationTime;\n            if (isExpired) {\n                this.missCount++;\n                // Delete expired entry\n                this.cache.delete(hashedKey);\n                return null;\n            }\n            this.hitCount++;\n            return entry.value;\n        }\n        catch {\n            // Return null on any error (graceful degradation)\n            this.missCount++;\n            return null;\n        }\n    }\n    /**\n     * Stores a value in cache with optional TTL\n     *\n     * @template T - Type of value to store\n     * @param key - Cache key\n     * @param value - Value to cache\n     * @param ttl - Time-to-live in milliseconds (default: 86400000ms = 24h)\n     * @returns Promise resolving when value is cached\n     */\n    async set(key, value, ttl) {\n        try {\n            const hashedKey = await hashKey(key);\n            const entry = {\n                key: hashedKey,\n                value,\n                timestamp: Date.now(),\n                ttl: ttl || DEFAULT_TTL,\n            };\n            this.cache.set(hashedKey, entry);\n        }\n        catch {\n            // Silently fail (graceful degradation)\n        }\n    }\n    /**\n     * Deletes a specific entry from cache\n     *\n     * @param key - Cache key to delete\n     * @returns Promise resolving when entry is deleted\n     */\n    async delete(key) {\n        try {\n            const hashedKey = await hashKey(key);\n            this.cache.delete(hashedKey);\n        }\n        catch {\n            // Silently fail (graceful degradation)\n        }\n    }\n    /**\n     * Clears all entries from cache\n     *\n     * @returns Promise resolving when cache is cleared\n     */\n    async clear() {\n        this.cache.clear();\n        this.hitCount = 0;\n        this.missCount = 0;\n        this.lastCleanup = undefined;\n    }\n    /**\n     * Checks if cache contains a non-expired entry\n     *\n     * @param key - Cache key to check\n     * @returns Promise resolving to true if entry exists and is valid\n     */\n    async has(key) {\n        try {\n            const hashedKey = await hashKey(key);\n            const entry = this.cache.get(hashedKey);\n            if (!entry) {\n                return false;\n            }\n            // Check if entry has expired\n            const now = Date.now();\n            const expirationTime = entry.timestamp + (entry.ttl || DEFAULT_TTL);\n            return now <= expirationTime;\n        }\n        catch {\n            return false;\n        }\n    }\n    /**\n     * Removes all expired entries from cache\n     *\n     * @returns Promise resolving to number of entries cleaned up\n     */\n    async cleanupExpired() {\n        try {\n            const now = Date.now();\n            let cleanedCount = 0;\n            const entries = Array.from(this.cache.entries());\n            for (const [key, entry] of entries) {\n                const expirationTime = entry.timestamp + (entry.ttl || DEFAULT_TTL);\n                if (now > expirationTime) {\n                    this.cache.delete(key);\n                    cleanedCount++;\n                }\n            }\n            this.lastCleanup = now;\n            return cleanedCount;\n        }\n        catch {\n            return 0;\n        }\n    }\n    /**\n     * Gets cache statistics for monitoring performance\n     *\n     * @returns Promise resolving to cache statistics\n     */\n    async getStats() {\n        const totalRequests = this.hitCount + this.missCount;\n        const hitRate = totalRequests > 0 ? (this.hitCount / totalRequests) * 100 : 0;\n        return {\n            totalEntries: this.cache.size,\n            hitRate: Math.round(hitRate * 100) / 100, // Round to 2 decimal places\n            lastCleanup: this.lastCleanup,\n        };\n    }\n};\nMemoryCache = __decorate([\n    injectable(),\n    __metadata(\"design:paramtypes\", [])\n], MemoryCache);\nexport { MemoryCache };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { injectable } from 'tsyringe';\n// ============================================================================\n// QUEUE CONFIGURATION\n// ============================================================================\n/**\n * Default priority for items without explicit priority\n */\nconst DEFAULT_PRIORITY = 1;\n// ============================================================================\n// PRIORITY QUEUE IMPLEMENTATION\n// ============================================================================\n/**\n * Priority Queue implementation based on priority values\n *\n * Features:\n * - Priority-based ordering (higher priority = processed first)\n * - Tracks items currently being processed\n * - Calculates average wait time for dequeued items\n * - Thread-safe operations (async methods)\n * - Uses @injectable() decorator for TSyringe DI\n *\n * @template T - Type of items stored in the queue\n */\nlet PriorityQueue = class PriorityQueue {\n    constructor() {\n        this.queue = [];\n        this.processing = new Set();\n        this.waitTimes = [];\n    }\n    // ========================================================================\n    // PUBLIC METHODS\n    // ========================================================================\n    /**\n     * Adds an item to the queue with optional priority\n     *\n     * @param item - Item to enqueue\n     * @param priority - Priority level (default: 1, higher = more important)\n     * @returns Promise that resolves when item is enqueued\n     */\n    async enqueue(item, priority = DEFAULT_PRIORITY) {\n        const queueItem = {\n            id: this.generateId(),\n            item,\n            priority: Math.max(0, priority), // Ensure non-negative\n            enqueuedAt: Date.now(),\n        };\n        this.queue.push(queueItem);\n        this.queue.sort((a, b) => b.priority - a.priority);\n    }\n    /**\n     * Removes and returns the highest priority item from the queue\n     *\n     * Item is added to the processing set and should be marked as completed\n     * when done using the dequeue mechanism.\n     *\n     * @returns Promise resolving to dequeued item or null if queue is empty\n     */\n    async dequeue() {\n        if (this.queue.length === 0) {\n            return null;\n        }\n        const queueItem = this.queue.shift();\n        // Track processing and calculate wait time\n        this.processing.add(queueItem.id);\n        const waitTime = Date.now() - queueItem.enqueuedAt;\n        this.waitTimes.push(waitTime);\n        return queueItem.item;\n    }\n    /**\n     * Returns the highest priority item without removing it\n     *\n     * @returns Promise resolving to peeked item or null if queue is empty\n     */\n    async peek() {\n        if (this.queue.length === 0) {\n            return null;\n        }\n        const queueItem = this.queue[0];\n        return queueItem.item;\n    }\n    /**\n     * Returns the total number of items (waiting + processing)\n     *\n     * @returns Promise resolving to total queue size\n     */\n    async size() {\n        return this.queue.length + this.processing.size;\n    }\n    /**\n     * Checks if the queue has no items (waiting or processing)\n     *\n     * @returns Promise resolving to true if queue is empty\n     */\n    async isEmpty() {\n        return this.queue.length === 0 && this.processing.size === 0;\n    }\n    /**\n     * Clears the queue and optionally cancels processing items\n     *\n     * @param cancelRunning - If true, clears processing set as well\n     * @returns Promise resolving to number of items cleared\n     */\n    async clear(cancelRunning = false) {\n        const clearedWaiting = this.queue.length;\n        const clearedProcessing = cancelRunning ? this.processing.size : 0;\n        this.queue.length = 0;\n        if (cancelRunning) {\n            this.processing.clear();\n        }\n        return clearedWaiting + clearedProcessing;\n    }\n    /**\n     * Returns statistics about the queue state\n     *\n     * @returns Promise resolving to queue statistics\n     */\n    async getStats() {\n        const waiting = this.queue.length;\n        const processing = this.processing.size;\n        // Calculate average wait time (in milliseconds)\n        let avgWaitTime = 0;\n        if (this.waitTimes.length > 0) {\n            const totalWaitTime = this.waitTimes.reduce((sum, time) => sum + time, 0);\n            avgWaitTime = totalWaitTime / this.waitTimes.length;\n        }\n        return {\n            size: waiting + processing,\n            waiting,\n            processing,\n            avgWaitTime,\n        };\n    }\n    // ========================================================================\n    // PRIVATE HELPERS\n    // ========================================================================\n    /**\n     * Generates a unique identifier for queue items\n     *\n     * @returns Unique string identifier\n     */\n    generateId() {\n        return `${Date.now()}-${Math.random().toString(36).substring(2, 9)}`;\n    }\n};\nPriorityQueue = __decorate([\n    injectable(),\n    __metadata(\"design:paramtypes\", [])\n], PriorityQueue);\nexport { PriorityQueue };\n","/**\n * Thunderbird Mail Reader Adapter\n *\n * Adapter implementation for reading email messages from Thunderbird's messenger API.\n * Implements the IMailReader interface using Thunderbird WebExtension API.\n *\n * This adapter:\n * - Fetches messages from Thunderbird via messenger.messages API\n * - Parses MIME message parts structure\n * - Extracts plain text and HTML bodies\n * - Handles attachment metadata extraction\n * - Provides typed interfaces for email operations\n *\n * @module interfaces/adapters/ThunderbirdMailReader\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\n// ============================================================================\n// Helper Functions\n// ============================================================================\n// ============================================================================\n// ThunderbirdMailReader Implementation\n// ============================================================================\n/**\n * Thunderbird Mail Reader Adapter\n *\n * Implements IMailReader interface using Thunderbird's messenger.messages API.\n * Provides type-safe email reading operations for the Thunderbird Email AI Assistant.\n *\n * @example\n * ```typescript\n * const mailReader = container.resolve<IMailReader>('IMailReader');\n *\n * // Get full message\n * const message = await mailReader.getFullMessage(12345);\n * console.log(message.subject, message.from);\n *\n * // Get attachments\n * const attachments = await mailReader.getAttachments(message);\n * for (const attachment of attachments) {\n *   console.log(`Attachment: ${attachment.name}`);\n * }\n * ```\n */\nlet ThunderbirdMailReader = class ThunderbirdMailReader {\n    // ==========================================================================\n    // Constructor\n    // ==========================================================================\n    constructor(logger) {\n        this.logger = logger;\n        this.logger.debug('ThunderbirdMailReader adapter initialized');\n    }\n    // ==========================================================================\n    // Public Methods - Message Retrieval\n    // ==========================================================================\n    /**\n     * @inheritdoc\n     */\n    async getFullMessage(messageId) {\n        this.logger.debug('Retrieving full message', { messageId });\n        try {\n            const thunderbirdMessage = await messenger.messages.getFull(messageId);\n            const messageDetails = await messenger.messages.get(messageId);\n            // Convert Thunderbird parts to IEmailPart\n            const parts = this.convertMessageParts(thunderbirdMessage.parts);\n            // Extract headers as Record<string, string> (join multi-value headers)\n            const headers = {};\n            for (const [key, values] of Object.entries(thunderbirdMessage.headers)) {\n                headers[key] = values.length > 0 ? values[0] : '';\n            }\n            const message = {\n                id: thunderbirdMessage.id,\n                folderId: messageDetails.folderId?.toString(),\n                accountId: messageDetails.folderAccountId,\n                headers,\n                parts,\n                subject: messageDetails.subject,\n                from: messageDetails.from,\n                to: messageDetails.to,\n                cc: messageDetails.cc,\n                date: messageDetails.date,\n                tags: messageDetails.tags,\n                attachments: this.extractAttachmentsFromParts(parts),\n            };\n            // Extract plain text body if available\n            const bodyPart = parts.find((p) => p.contentType === 'text/plain' && !p.isAttachment);\n            if (bodyPart) {\n                message.body = bodyPart.body;\n            }\n            this.logger.debug('Full message retrieved', {\n                messageId: message.id,\n                subject: message.subject,\n                from: message.from,\n                partsCount: parts.length,\n                attachmentsCount: message.attachments.length,\n            });\n            return message;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to retrieve full message', { messageId, error: errorMessage });\n            throw new Error(`Failed to retrieve message ${messageId}: ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async getMessageHeaders(messageId) {\n        this.logger.debug('Retrieving message headers', { messageId });\n        try {\n            const messageDetails = await messenger.messages.get(messageId);\n            // Get full message to extract headers\n            const thunderbirdMessage = await messenger.messages.getFull(messageId);\n            // Convert headers to Record<string, string>\n            const headers = {};\n            for (const [key, values] of Object.entries(thunderbirdMessage.headers)) {\n                headers[key] = values.length > 0 ? values[0] : '';\n            }\n            const headersOnly = {\n                id: messageDetails.id,\n                folderId: messageDetails.folderId?.toString(),\n                headers,\n                date: messageDetails.date,\n                subject: messageDetails.subject,\n                from: messageDetails.from,\n            };\n            this.logger.debug('Message headers retrieved', { messageId, subject: headersOnly.subject });\n            return headersOnly;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to retrieve message headers', { messageId, error: errorMessage });\n            throw new Error(`Failed to retrieve headers for message ${messageId}: ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async getRawMessage(messageId) {\n        this.logger.debug('Retrieving raw message', { messageId });\n        try {\n            const thunderbirdMessage = await messenger.messages.getFull(messageId);\n            // Thunderbird doesn't provide raw EML directly\n            // We'll return a string representation of the message\n            const raw = JSON.stringify(thunderbirdMessage);\n            this.logger.debug('Raw message retrieved', { messageId });\n            return raw;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to retrieve raw message', { messageId, error: errorMessage });\n            throw new Error(`Failed to retrieve raw message ${messageId}: ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async parseMessageParts(message) {\n        this.logger.debug('Parsing message parts', { messageId: message.id });\n        // Parts are already parsed in getFullMessage, just return them\n        if (message.parts) {\n            return message.parts;\n        }\n        // If no parts exist, try to get them again\n        const fullMessage = await messenger.messages.getFull(message.id);\n        const parts = this.convertMessageParts(fullMessage.parts);\n        this.logger.debug('Message parts parsed', { count: parts.length });\n        return parts;\n    }\n    /**\n     * @inheritdoc\n     */\n    async getPlainTextBody(message) {\n        this.logger.debug('Extracting plain text body', { messageId: message.id });\n        // If body is already extracted, return it\n        if (message.body) {\n            return message.body;\n        }\n        // Otherwise, extract from parts\n        const parts = message.parts || (await this.parseMessageParts(message));\n        const plainTextPart = parts.find((p) => p.contentType === 'text/plain' && !p.isAttachment);\n        if (!plainTextPart) {\n            this.logger.warn('No plain text body found', { messageId: message.id });\n            return '';\n        }\n        return plainTextPart.body;\n    }\n    /**\n     * @inheritdoc\n     */\n    async getHTMLTextBody(message) {\n        this.logger.debug('Extracting HTML body as text', { messageId: message.id });\n        const parts = message.parts || (await this.parseMessageParts(message));\n        const htmlPart = parts.find((p) => p.contentType === 'text/html' && !p.isAttachment);\n        if (!htmlPart) {\n            this.logger.warn('No HTML body found', { messageId: message.id });\n            return '';\n        }\n        // Simple HTML to text conversion (strip HTML tags)\n        // In production, use a proper library like html-to-text\n        const text = htmlPart.body\n            .replace(/<[^>]*>/g, ' ') // Remove HTML tags\n            .replace(/&nbsp;/g, ' ') // Convert non-breaking spaces\n            .replace(/\\s+/g, ' ') // Collapse whitespace\n            .trim();\n        return text;\n    }\n    /**\n     * @inheritdoc\n     */\n    async getAttachments(message) {\n        this.logger.debug('Extracting attachments', { messageId: message.id });\n        const parts = message.parts || (await this.parseMessageParts(message));\n        const attachments = this.extractAttachmentsFromParts(parts);\n        this.logger.debug('Attachments extracted', {\n            messageId: message.id,\n            count: attachments.length,\n        });\n        return attachments;\n    }\n    /**\n     * @inheritdoc\n     */\n    async getAttachmentContent(attachment, _decodeBase64 = false) {\n        this.logger.debug('Retrieving attachment content', {\n            name: attachment.name,\n            mimeType: attachment.mimeType,\n        });\n        try {\n            // Note: Thunderbird WebExtension API doesn't provide direct attachment content access\n            // In a full implementation, you would need to use a different approach\n            // For now, return empty content with metadata\n            const content = {\n                ...attachment,\n                content: '', // Thunderbird API limitation\n                encoding: 'base64',\n            };\n            this.logger.debug('Attachment content retrieved', {\n                name: attachment.name,\n                size: content.content.length,\n            });\n            return content;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to retrieve attachment content', {\n                name: attachment.name,\n                error: errorMessage,\n            });\n            throw new Error(`Failed to retrieve attachment '${attachment.name}': ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async getMessages(folderId, includeDeleted = false) {\n        this.logger.debug('Retrieving messages from folder', { folderId, includeDeleted });\n        try {\n            const result = await messenger.messages.list(folderId);\n            const messages = await Promise.all(result.messages.map(async (msg) => {\n                const messageDetails = await messenger.messages.get(msg.id);\n                // Get full message for headers\n                const thunderbirdMessage = await messenger.messages.getFull(msg.id);\n                const headers = {};\n                for (const [key, values] of Object.entries(thunderbirdMessage.headers)) {\n                    headers[key] = values.length > 0 ? values[0] : '';\n                }\n                return {\n                    id: messageDetails.id,\n                    folderId: messageDetails.folderId?.toString(),\n                    headers,\n                    date: messageDetails.date,\n                    subject: messageDetails.subject,\n                    from: messageDetails.from,\n                };\n            }));\n            this.logger.debug('Messages retrieved', {\n                folderId,\n                count: messages.length,\n            });\n            return messages;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to retrieve messages', {\n                folderId,\n                error: errorMessage,\n            });\n            throw new Error(`Failed to retrieve messages from folder '${folderId}': ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async queryMessages(query) {\n        this.logger.debug('Querying messages', { query });\n        // Thunderbird WebExtension API has limited query support\n        // For now, just return all messages from folder and filter in-memory\n        let messages = [];\n        try {\n            if (query.folderId) {\n                messages = await this.getMessages(query.folderId);\n            }\n            else {\n                // No folder specified - would need to iterate all folders\n                this.logger.warn('Query without folderId not fully supported');\n                return [];\n            }\n            // Apply in-memory filters (simplified implementation)\n            let filtered = messages;\n            if (query.subject) {\n                const subjectLower = query.subject.toLowerCase();\n                filtered = filtered.filter((m) => m.subject && m.subject.toLowerCase().includes(subjectLower));\n            }\n            if (query.from) {\n                const fromLower = query.from.toLowerCase();\n                filtered = filtered.filter((m) => m.from && m.from.toLowerCase().includes(fromLower));\n            }\n            if (query.dateAfter) {\n                filtered = filtered.filter((m) => m.date && m.date >= query.dateAfter);\n            }\n            if (query.dateBefore) {\n                filtered = filtered.filter((m) => m.date && m.date <= query.dateBefore);\n            }\n            if (query.limit) {\n                filtered = filtered.slice(0, query.limit);\n            }\n            this.logger.debug('Messages queried', {\n                total: messages.length,\n                filtered: filtered.length,\n            });\n            return filtered;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to query messages', { query, error: errorMessage });\n            throw new Error(`Failed to query messages: ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async parseEMLFile(fileContent) {\n        this.logger.debug('Parsing EML file', { length: fileContent.length });\n        try {\n            // Simplified EML parsing\n            // In production, use a proper EML parser library\n            const lines = fileContent.split('\\n');\n            const headers = {};\n            let body = '';\n            let inHeaders = true;\n            for (const line of lines) {\n                if (inHeaders && line.trim() === '') {\n                    inHeaders = false;\n                    continue;\n                }\n                if (inHeaders) {\n                    const match = line.match(/^([^:]+):\\s*(.*)$/);\n                    if (match) {\n                        headers[match[1].trim().toLowerCase()] = match[2].trim();\n                    }\n                }\n                else {\n                    body += line + '\\n';\n                }\n            }\n            const message = {\n                id: 0,\n                headers,\n                body: body.trim(),\n                attachments: [],\n                subject: headers.subject || '',\n                from: headers.from || '',\n            };\n            const result = {\n                message,\n                raw: fileContent,\n            };\n            this.logger.debug('EML file parsed', {\n                subject: message.subject,\n                from: message.from,\n            });\n            return result;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to parse EML file', { error: errorMessage });\n            throw new Error(`Failed to parse EML file: ${errorMessage}`);\n        }\n    }\n    // ==========================================================================\n    // Private Helper Methods\n    // ==========================================================================\n    /**\n     * Converts Thunderbird message parts to IEmailPart format.\n     *\n     * @param parts - Thunderbird message parts\n     * @returns Converted email parts\n     */\n    convertMessageParts(parts) {\n        const convert = (part) => {\n            // Map contentDisposition to valid types\n            const validDisposition = part.contentDisposition === 'inline'\n                ? 'inline'\n                : part.contentDisposition === 'attachment'\n                    ? 'attachment'\n                    : undefined;\n            const converted = {\n                contentType: part.contentType,\n                body: part.body,\n                isAttachment: part.isAttachment,\n                size: part.size,\n                name: part.name,\n                contentId: part.contentId,\n                contentDisposition: validDisposition,\n                charset: part.charset,\n            };\n            if (part.parts && part.parts.length > 0) {\n                converted.parts = part.parts.map(convert);\n            }\n            return converted;\n        };\n        return parts.map(convert);\n    }\n    /**\n     * Extracts attachment metadata from message parts.\n     *\n     * @param parts - Email parts\n     * @returns Array of attachment metadata\n     */\n    extractAttachmentsFromParts(parts) {\n        const attachments = [];\n        const extract = (part) => {\n            if (part.isAttachment && part.name) {\n                attachments.push({\n                    name: part.name,\n                    mimeType: part.contentType,\n                    size: part.size || 0,\n                    contentId: part.contentId,\n                    contentDisposition: part.contentDisposition,\n                });\n            }\n            // Recursively extract from nested parts\n            if (part.parts) {\n                for (const nested of part.parts) {\n                    extract(nested);\n                }\n            }\n        };\n        for (const part of parts) {\n            extract(part);\n        }\n        return attachments;\n    }\n};\nThunderbirdMailReader = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], ThunderbirdMailReader);\nexport { ThunderbirdMailReader };\n","// ============================================================================\n// Tag Configuration Types\n// ============================================================================\n// ============================================================================\n// Provider Configuration Types\n// ============================================================================\n/**\n * Supported AI providers\n */\nexport var Provider;\n(function (Provider) {\n    Provider[\"OLLAMA\"] = \"ollama\";\n    Provider[\"OPENAI\"] = \"openai\";\n    Provider[\"GEMINI\"] = \"gemini\";\n    Provider[\"CLAUDE\"] = \"claude\";\n    Provider[\"MISTRAL\"] = \"mistral\";\n    Provider[\"DEEPSEEK\"] = \"deepseek\";\n    Provider[\"ZAI_PAAS\"] = \"zai-paas\";\n    Provider[\"ZAI_CODING\"] = \"zai-coding\";\n})(Provider || (Provider = {}));\n// ============================================================================\n// Tag Key Constants\n// ============================================================================\nexport const TAG_KEY_PREFIX = '_ma_';\nexport const TAG_NAME_PREFIX = 'A:';\n// ============================================================================\n// Hardcoded Tags (readonly with const assertion)\n// ============================================================================\nexport const HARDCODED_TAGS = {\n    is_scam: { key: 'is_scam', name: 'Scam Alert', color: '#FF5722' },\n    spf_fail: { key: 'spf_fail', name: 'SPF Fail', color: '#E91E63' },\n    dkim_fail: { key: 'dkim_fail', name: 'DKIM Fail', color: '#E91E63' },\n    tagged: { key: 'tagged', name: 'Tagged', color: '#4f4f4f' },\n    email_ai_analyzed: { key: 'email_ai_analyzed', name: 'AI Analyzed', color: '#9E9E9E' },\n};\n// ============================================================================\n// Default Custom Tags (readonly array)\n// ============================================================================\nexport const DEFAULT_CUSTOM_TAGS = [\n    {\n        key: 'is_advertise',\n        name: 'Advertisement',\n        color: '#FFC107',\n        prompt: 'check if email is advertising something and contains an offer or someone is asking for contact to show the offer',\n    },\n    {\n        key: 'is_business_approach',\n        name: 'Business Ad',\n        color: '#2196F3',\n        prompt: 'check if email is a cold marketing/sales/business approach (or next message in the approach process where sender reply to self to refresh the approach in the mailbox). Consider typical sales and lead generation scenarios.',\n    },\n    {\n        key: 'is_personal',\n        name: 'Personal',\n        color: '#4CAF50',\n        prompt: 'check if this is non-sales scenario approach from someone who likes to contact in a non-business context.',\n    },\n    {\n        key: 'is_business',\n        name: 'Business',\n        color: '#af4c87',\n        prompt: 'check if this looks like work related email',\n    },\n    {\n        key: 'is_service_important',\n        name: 'Service Important',\n        color: '#F44336',\n        prompt: 'check if email contains important information related to already subscribed service (if this is subscription offer - ignore it): bill, password reset, login link, 2fa code, expiration notice. Consider common services like electricity, bank account, netflix, or similar subscription service.',\n    },\n    {\n        key: 'is_service_not_important',\n        name: 'Service Info',\n        color: '#9E9E9E',\n        prompt: 'check if email contains non critical information from already subscribed service (if this is subscription offer - ignore it) - like: daily posts update from linkedin, AWS invitation for conference, cross sale, tips how to use product, surveys, new offers',\n    },\n    {\n        key: 'is_bill',\n        name: 'Bill',\n        color: '#f4b136',\n        prompt: 'check if email contains bill or invoice information.',\n    },\n    {\n        key: 'has_calendar_invite',\n        name: 'Appointment',\n        color: '#7F07f2',\n        prompt: 'check if the mail has invitation to the call or meeting (with calendar appointment attached)',\n    },\n];\n// ============================================================================\n// Default Configuration\n// ============================================================================\nexport const DEFAULTS = {\n    provider: Provider.OLLAMA,\n    ollamaApiUrl: 'http://localhost:11434/api/generate',\n    ollamaModel: 'gemma3:27b',\n    openaiApiKey: '',\n    geminiApiKey: '',\n    claudeApiKey: '',\n    mistralApiKey: '',\n    deepseekApiKey: '',\n    zaiPaasApiKey: '',\n    zaiPaasModel: 'glm-4.5',\n    zaiCodingApiKey: '',\n    zaiCodingModel: 'glm-4.7',\n    customTags: DEFAULT_CUSTOM_TAGS,\n    enableNotifications: true,\n    enableLogging: true,\n    model: undefined,\n    modelConcurrencyLimits: undefined,\n    minConfidenceThreshold: 70,\n};\n// ============================================================================\n// Analysis Prompt Template\n// ============================================================================\nconst PROMPT_INSTRUCTIONS = [\n    'Hi, I like you to check and score an email based on the following structured data. Please respond as a single, clean JSON object with the specified properties.',\n    '',\n    '### Email Headers',\n    '```json',\n    '{headers}',\n    '```',\n    '',\n    '### Email Body (converted from HTML to plain text)',\n    '```text',\n    '{body}',\n    '```',\n    '',\n    '### Attachments',\n    '```json',\n    '{attachments}',\n    '```',\n    '',\n    '### DEFINED TAGS - YOU MUST USE ONLY THESE',\n    'You MUST ONLY use tags from the list below. Do NOT invent or create new tags!',\n    '',\n];\nexport const PROMPT_BASE = PROMPT_INSTRUCTIONS.join('\\n');\n// ============================================================================\n// Type Guards\n// ============================================================================\n/**\n * Type guard to check if a provider value is valid\n */\nexport function isValidProvider(provider) {\n    return Object.values(Provider).includes(provider);\n}\n/**\n * Type guard to check if a tag is a hardcoded tag\n */\nexport function isHardcodedTag(tag) {\n    return Object.keys(HARDCODED_TAGS).includes(tag.key);\n}\n/**\n * Type guard to check if a value is a valid tag color\n */\nexport function isValidColor(color) {\n    return /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color);\n}\n/**\n * Type guard to check if a confidence threshold value is valid\n */\nexport function isValidConfidenceThreshold(threshold) {\n    return Number.isInteger(threshold) && threshold >= 0 && threshold <= 100;\n}\nconst PROVIDER_DEFAULT_CONCURRENCY = {\n    [Provider.OLLAMA]: 5,\n    [Provider.OPENAI]: 10,\n    [Provider.GEMINI]: 5,\n    [Provider.CLAUDE]: 5,\n    [Provider.MISTRAL]: 10,\n    [Provider.DEEPSEEK]: 10,\n    [Provider.ZAI_PAAS]: 5,\n    [Provider.ZAI_CODING]: 5,\n};\nexport function getConcurrencyLimit(config, provider, model) {\n    if (!config.modelConcurrencyLimits) {\n        return PROVIDER_DEFAULT_CONCURRENCY[provider] ?? 5;\n    }\n    const modelConfig = config.modelConcurrencyLimits.find((c) => c.provider === provider && c.model === model);\n    if (modelConfig && modelConfig.concurrency > 0) {\n        return modelConfig.concurrency;\n    }\n    const providerConfig = config.modelConcurrencyLimits.find((c) => c.provider === provider && !c.model);\n    if (providerConfig && providerConfig.concurrency > 0) {\n        return providerConfig.concurrency;\n    }\n    return PROVIDER_DEFAULT_CONCURRENCY[provider] ?? 5;\n}\nexport function validateConcurrencyConfig(config) {\n    const errors = [];\n    for (const entry of config) {\n        if (!isValidProvider(entry.provider)) {\n            errors.push(`Invalid provider: ${entry.provider}`);\n        }\n        if (!entry.model && !entry.provider) {\n            errors.push('Either provider or model must be specified');\n        }\n        if (entry.concurrency !== undefined &&\n            (entry.concurrency < 1 || !Number.isInteger(entry.concurrency))) {\n            errors.push(`Invalid concurrency value for ${entry.provider}/${entry.model}: ${entry.concurrency}. Must be a positive integer.`);\n        }\n    }\n    return errors;\n}\n/**\n * Validates the confidence threshold configuration\n */\nexport function validateConfidenceThreshold(threshold) {\n    const errors = [];\n    if (!Number.isInteger(threshold)) {\n        errors.push(`Confidence threshold must be an integer, got: ${threshold}`);\n    }\n    if (threshold < 0 || threshold > 100) {\n        errors.push(`Confidence threshold must be between 0 and 100, got: ${threshold}`);\n    }\n    return errors;\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { HARDCODED_TAGS, TAG_KEY_PREFIX } from '../../../core/config';\n// ============================================================================\n// Type Guards for Thunderbird Tag Validation\n// ============================================================================\n/**\n * Type guard to check if a value is a valid ThunderbirdTag\n */\nfunction isThunderbirdTag(value) {\n    if (typeof value !== 'object' || value === null) {\n        return false;\n    }\n    const tag = value;\n    return (typeof tag.key === 'string' &&\n        tag.key.length > 0 &&\n        typeof tag.tag === 'string' &&\n        tag.tag.length > 0 &&\n        typeof tag.color === 'string' &&\n        /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(tag.color) &&\n        typeof tag.ordinal === 'string');\n}\n/**\n * Type guard to check if an array contains only valid ThunderbirdTag objects\n */\nfunction isThunderbirdTagArray(value) {\n    if (!Array.isArray(value)) {\n        return false;\n    }\n    return value.every(isThunderbirdTag);\n}\n// ============================================================================\n// Tag Key Mapping (Internal Keys with _ma_ Prefix)\n// ============================================================================\n/**\n * Map from defined tag keys to internal Thunderbird tag keys (with _ma_ prefix)\n * Thunderbird internally prefixes all tag keys with \"_ma_\", so we need to map\n * our defined keys to the internal keys for all operations.\n */\nconst TAG_KEY_MAP = {\n    is_scam: TAG_KEY_PREFIX + HARDCODED_TAGS.is_scam.key,\n    spf_fail: TAG_KEY_PREFIX + HARDCODED_TAGS.spf_fail.key,\n    dkim_fail: TAG_KEY_PREFIX + HARDCODED_TAGS.dkim_fail.key,\n    tagged: TAG_KEY_PREFIX + HARDCODED_TAGS.tagged.key,\n    email_ai_analyzed: TAG_KEY_PREFIX + HARDCODED_TAGS.email_ai_analyzed.key,\n};\n// ============================================================================\n// ThunderbirdTagManager Implementation\n// ============================================================================\n/**\n * Adapter implementation for managing Thunderbird message tags.\n *\n * Uses Thunderbird WebExtension API for tag CRUD operations and message tagging.\n * Designed for dependency injection using TSyringe.\n *\n * @example\n * ```typescript\n * const tagManager = container.resolve<ITagManager>('ThunderbirdTagManager');\n * const allTags = await tagManager.getAllTags();\n * await tagManager.ensureTagExists('mytag', 'My Tag', '#FF0000');\n * ```\n */\nlet ThunderbirdTagManager = class ThunderbirdTagManager {\n    // ==========================================================================\n    // Constructor\n    // ==========================================================================\n    constructor(logger) {\n        this.logger = logger;\n        this.logger.debug('ThunderbirdTagManager initialized');\n    }\n    // ==========================================================================\n    // Read Tags\n    // ==========================================================================\n    /**\n     * @inheritdoc\n     */\n    async getAllTags() {\n        this.logger.debug('Fetching all tags from Thunderbird');\n        try {\n            const tags = await messenger.messages.listTags();\n            if (!isThunderbirdTagArray(tags)) {\n                this.logger.error('Invalid tag list received from Thunderbird', { tags });\n                throw new Error('Invalid tag list received from Thunderbird API');\n            }\n            this.logger.debug(`Retrieved ${tags.length} tags`, { count: tags.length });\n            return tags;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to fetch tags from Thunderbird', { error: errorMessage });\n            throw new Error(`Failed to fetch tags: ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async getTag(key) {\n        this.logger.debug('Fetching tag by key', { key });\n        try {\n            const allTags = await this.getAllTags();\n            const tag = allTags.find((t) => t.key === key);\n            if (tag) {\n                this.logger.debug('Tag found', { key, name: tag.tag });\n            }\n            else {\n                this.logger.debug('Tag not found', { key });\n            }\n            return tag;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to fetch tag', { key, error: errorMessage });\n            throw new Error(`Failed to fetch tag '${key}': ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async getTagById(id) {\n        this.logger.debug('Fetching tag by ID', { id });\n        try {\n            const allTags = await this.getAllTags();\n            const tag = allTags.find((t) => t.key === id || t.tag === id || t.ordinal === id);\n            if (tag) {\n                this.logger.debug('Tag found by ID', { id, key: tag.key, name: tag.tag });\n            }\n            else {\n                this.logger.debug('Tag not found by ID', { id });\n            }\n            return tag;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to fetch tag by ID', { id, error: errorMessage });\n            throw new Error(`Failed to fetch tag by ID '${id}': ${errorMessage}`);\n        }\n    }\n    // ==========================================================================\n    // Create/Update/Delete Tags\n    // ==========================================================================\n    /**\n     * @inheritdoc\n     */\n    async createTag(name, color, sortKey) {\n        this.logger.debug('Creating new tag', { name, color, sortKey });\n        if (!name || name.trim().length === 0) {\n            throw new Error('Tag name is required');\n        }\n        if (color && !/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color)) {\n            throw new Error(`Invalid color format: ${color}. Must be hex color (e.g., #FF0000)`);\n        }\n        // Generate key from name if not provided\n        const baseKey = sortKey || name.toLowerCase().replace(/\\s+/g, '_');\n        // Use internal key with _ma_ prefix for Thunderbird API\n        const internalKey = TAG_KEY_PREFIX + baseKey;\n        this.logger.debug('[TAG-CREATE] Creating tag with parameters', {\n            baseKey,\n            internalKey,\n            name,\n            color,\n            sortKey,\n        });\n        try {\n            // Check if tag already exists to avoid duplicates\n            const existingTag = await this.getTag(internalKey);\n            if (existingTag) {\n                this.logger.warn('Tag already exists, returning existing', {\n                    internalKey,\n                    name: existingTag.tag,\n                });\n                return existingTag;\n            }\n            // Create tag with default color if not provided\n            const tagColor = color || '#9E9E9E';\n            const createdTag = await messenger.messages.tags.create(internalKey, name, tagColor);\n            this.logger.debug('[TAG-CREATE] Tag created from Thunderbird API', {\n                returnedKey: createdTag.key,\n                returnedName: createdTag.tag,\n                returnedColor: createdTag.color,\n            });\n            if (!isThunderbirdTag(createdTag)) {\n                throw new Error('Invalid tag object returned from Thunderbird API');\n            }\n            this.logger.info('Tag created successfully', {\n                baseKey,\n                internalKey: createdTag.key,\n                name,\n                color: tagColor,\n            });\n            return createdTag;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to create tag', { name, baseKey, error: errorMessage });\n            throw new Error(`Failed to create tag '${name}': ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async updateTag(id, updates) {\n        this.logger.debug('Updating tag', { id, updates });\n        try {\n            // Find the tag key if ID is not a key\n            const tag = await this.getTagById(id);\n            if (!tag) {\n                throw new Error(`Tag '${id}' not found`);\n            }\n            // Prepare update data\n            const updateData = {};\n            if (updates.color !== undefined) {\n                if (!/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(updates.color)) {\n                    throw new Error(`Invalid color format: ${updates.color}. Must be hex color (e.g., #FF0000)`);\n                }\n                updateData.color = updates.color;\n            }\n            if (updates.name !== undefined) {\n                if (updates.name.trim().length === 0) {\n                    throw new Error('Tag name cannot be empty');\n                }\n                updateData.tag = updates.name;\n            }\n            // Update the tag\n            const updatedTag = await messenger.messages.tags.update(tag.key, updateData);\n            if (!isThunderbirdTag(updatedTag)) {\n                throw new Error('Invalid tag object returned from Thunderbird API');\n            }\n            this.logger.info('Tag updated successfully', { key: tag.key, updates });\n            return updatedTag;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to update tag', { id, updates, error: errorMessage });\n            throw new Error(`Failed to update tag '${id}': ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async deleteTag(id) {\n        this.logger.debug('Deleting tag', { id });\n        try {\n            // Find the tag key if ID is not a key\n            const tag = await this.getTagById(id);\n            if (!tag) {\n                throw new Error(`Tag '${id}' not found`);\n            }\n            await messenger.messages.tags.delete(tag.key);\n            this.logger.info('Tag deleted successfully', { key: tag.key, name: tag.tag });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to delete tag', { id, error: errorMessage });\n            throw new Error(`Failed to delete tag '${id}': ${errorMessage}`);\n        }\n    }\n    // ==========================================================================\n    // Tag Messages (Single)\n    // ==========================================================================\n    /**\n     * @inheritdoc\n     */\n    async addTagToMessage(messageId, tagKey) {\n        this.logger.debug('Adding tag to message', { messageId, tagKey });\n        try {\n            // Convert defined key to internal key (with _ma_ prefix)\n            const internalKey = TAG_KEY_MAP[tagKey] || tagKey;\n            // Verify tag exists\n            const tagExists = await this.tagExists(internalKey);\n            if (!tagExists) {\n                throw new Error(`Tag '${tagKey}' does not exist`);\n            }\n            await messenger.messages.addTags([messageId], [internalKey]);\n            this.logger.debug('Tag added to message', { messageId, internalKey });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to add tag to message', { messageId, tagKey, error: errorMessage });\n            throw new Error(`Failed to add tag '${tagKey}' to message ${messageId}: ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async removeTagFromMessage(messageId, tagKey) {\n        this.logger.debug('Removing tag from message', { messageId, tagKey });\n        try {\n            // Convert defined key to internal key (with _ma_ prefix)\n            const internalKey = TAG_KEY_MAP[tagKey] || tagKey;\n            await messenger.messages.removeTags([messageId], [internalKey]);\n            this.logger.debug('Tag removed from message', { messageId, internalKey });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to remove tag from message', {\n                messageId,\n                tagKey,\n                error: errorMessage,\n            });\n            throw new Error(`Failed to remove tag '${tagKey}' from message ${messageId}: ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async setTagsOnMessage(messageId, tagKeys) {\n        this.logger.debug('Setting tags on message', { messageId, tagKeys });\n        try {\n            // Convert defined keys to internal keys (with _ma_ prefix)\n            const internalTagKeys = tagKeys.map((key) => TAG_KEY_MAP[key] || key);\n            this.logger.debug('[TAG-SET] Converting to internal keys', {\n                originalKeys: tagKeys,\n                internalKeys: internalTagKeys,\n            });\n            // Validate all tags exist\n            const allTags = await this.getAllTags();\n            const existingKeys = new Set(allTags.map((t) => t.key));\n            const invalidTags = internalTagKeys.filter((k) => !existingKeys.has(k));\n            this.logger.debug('[TAG-SET] Existing tags', {\n                count: allTags.length,\n                keys: allTags.map((t) => t.key).join(', '),\n            });\n            this.logger.debug('[TAG-SET] Tags to set', {\n                tagKeys: internalTagKeys,\n                count: internalTagKeys.length,\n            });\n            this.logger.debug('[TAG-SET] Invalid tags', { invalidTags, count: invalidTags.length });\n            if (invalidTags.length > 0) {\n                throw new Error(`Tags do not exist: ${invalidTags.join(', ')}`);\n            }\n            await messenger.messages.update(messageId, { tags: internalTagKeys });\n            this.logger.debug('Tags set on message', { messageId, tagKeys: internalTagKeys });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to set tags on message', {\n                messageId,\n                tagKeys,\n                error: errorMessage,\n            });\n            throw new Error(`Failed to set tags on message ${messageId}: ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async clearTagsFromMessage(messageId) {\n        this.logger.debug('Clearing tags from message', { messageId });\n        try {\n            await messenger.messages.update(messageId, { tags: [] });\n            this.logger.debug('Tags cleared from message', { messageId });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to clear tags from message', { messageId, error: errorMessage });\n            throw new Error(`Failed to clear tags from message ${messageId}: ${errorMessage}`);\n        }\n    }\n    // ==========================================================================\n    // Tag Validation\n    // ==========================================================================\n    /**\n     * @inheritdoc\n     */\n    async tagExists(key) {\n        this.logger.debug('Checking if tag exists', { key });\n        try {\n            const tag = await this.getTag(key);\n            const exists = tag !== undefined;\n            this.logger.debug('Tag existence check', { key, exists });\n            return exists;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to check tag existence', { key, error: errorMessage });\n            return false;\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async ensureTagExists(key, name, color) {\n        this.logger.debug('[TAG-CREATE] Looking for tag', { key, name, color });\n        try {\n            // Convert defined key to internal key (with _ma_ prefix) for checking\n            const internalKey = TAG_KEY_MAP[key] || key;\n            // Check if tag already exists\n            const existingTag = await this.getTag(internalKey);\n            if (existingTag) {\n                this.logger.debug('[TAG-CREATE] Tag already exists', {\n                    key,\n                    internalKey,\n                    existingKey: existingTag.key,\n                    existingName: existingTag.tag,\n                });\n                return existingTag;\n            }\n            // Create the tag\n            this.logger.debug('[TAG-CREATE] Tag not found, creating new tag', { key, name, color });\n            const newTag = await this.createTag(name, color, key);\n            this.logger.debug('[TAG-CREATE] Tag created result', {\n                newKey: newTag.key,\n                newName: newTag.tag,\n            });\n            this.logger.info('Tag ensured (created)', { key, name, color });\n            return newTag;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to ensure tag exists', { key, name, error: errorMessage });\n            throw new Error(`Failed to ensure tag '${key}' exists: ${errorMessage}`);\n        }\n    }\n    // ==========================================================================\n    // Batch Operations\n    // ==========================================================================\n    /**\n     * @inheritdoc\n     */\n    async addTagToMessages(messageIds, tagKey) {\n        this.logger.debug('Adding tag to multiple messages', { messageIds: messageIds.length, tagKey });\n        if (messageIds.length === 0) {\n            this.logger.debug('No message IDs provided, skipping');\n            return;\n        }\n        try {\n            // Convert defined key to internal key (with _ma_ prefix)\n            const internalKey = TAG_KEY_MAP[tagKey] || tagKey;\n            // Verify tag exists\n            const tagExists = await this.tagExists(internalKey);\n            if (!tagExists) {\n                throw new Error(`Tag '${tagKey}' does not exist`);\n            }\n            await messenger.messages.addTags(messageIds, [internalKey]);\n            this.logger.debug('Tag added to messages', { count: messageIds.length, internalKey });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to add tag to messages', {\n                count: messageIds.length,\n                tagKey,\n                error: errorMessage,\n            });\n            throw new Error(`Failed to add tag '${tagKey}' to ${messageIds.length} messages: ${errorMessage}`);\n        }\n    }\n    /**\n     * @inheritdoc\n     */\n    async setTagsOnMessages(messageIds, tagKeys) {\n        this.logger.debug('Setting tags on messages', { messageIds, tagKeys });\n        // Convert defined keys to internal keys (with _ma_ prefix)\n        const internalTagKeys = tagKeys.map((key) => TAG_KEY_MAP[key] || key);\n        // Validate all tags exist\n        const allTags = await this.getAllTags();\n        const existingKeys = new Set(allTags.map((t) => t.key));\n        const invalidTags = internalTagKeys.filter((k) => !existingKeys.has(k));\n        if (invalidTags.length > 0) {\n            throw new Error(`Tags do not exist: ${invalidTags.join(', ')}`);\n        }\n        // Use update() instead of setTags() for each message\n        for (const messageId of messageIds) {\n            await messenger.messages.update(messageId, { tags: internalTagKeys });\n        }\n        this.logger.debug('Tags set on messages', {\n            messageIds,\n            tagKeys: internalTagKeys,\n            count: messageIds.length,\n        });\n    }\n};\nThunderbirdTagManager = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], ThunderbirdTagManager);\nexport { ThunderbirdTagManager };\n","/**\n * IndexedDB-based configuration repository.\n *\n * Implements IConfigRepository using browser.storage.local (Chrome Storage API)\n * which is available in Thunderbird extensions and provides a Promise-based\n * interface for persistent configuration storage.\n *\n * Uses three storage namespaces (keys):\n * - 'providerSettings': Store for provider-specific settings\n * - 'customTags': Store for custom email classification tags\n * - 'appConfig': Store for application-level configuration\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\n// === Type Guards ===\n/**\n * Type guard to check if object has browser.storage API.\n */\nfunction hasBrowserStorage(obj) {\n    if (typeof obj !== 'object' || obj === null) {\n        return false;\n    }\n    const maybeStorage = obj;\n    if (typeof maybeStorage.storage !== 'object' || maybeStorage.storage === null) {\n        return false;\n    }\n    const storage = maybeStorage.storage;\n    if (typeof storage.local !== 'object' || storage.local === null) {\n        return false;\n    }\n    const local = storage.local;\n    return (typeof local.get === 'function' &&\n        typeof local.set === 'function' &&\n        typeof local.clear === 'function');\n}\n// === Constants ===\nconst STORAGE_KEYS = {\n    PROVIDER_SETTINGS: 'providerSettings',\n    CUSTOM_TAGS: 'customTags',\n    APP_CONFIG: 'appConfig',\n};\n// === Implementation ===\nlet IndexedDBConfigRepository = class IndexedDBConfigRepository {\n    constructor(logger) {\n        this.logger = logger;\n        // Use browser.storage.local if available (Thunderbird extension environment)\n        const browserApi = globalThis.browser;\n        const chromeApi = globalThis.chrome;\n        if (browserApi && hasBrowserStorage(browserApi)) {\n            this.storage = {\n                get: browserApi.storage.local.get.bind(browserApi.storage.local),\n                set: browserApi.storage.local.set.bind(browserApi.storage.local),\n                clear: browserApi.storage.local.clear.bind(browserApi.storage.local),\n            };\n            this.logger.info('Using browser.storage.local for configuration persistence');\n        }\n        else if (chromeApi && hasBrowserStorage(chromeApi)) {\n            this.storage = {\n                get: chromeApi.storage.local.get.bind(chromeApi.storage.local),\n                set: chromeApi.storage.local.set.bind(chromeApi.storage.local),\n                clear: chromeApi.storage.local.clear.bind(chromeApi.storage.local),\n            };\n            this.logger.info('Using chrome.storage.local for configuration persistence');\n        }\n        else {\n            throw new Error('browser.storage API not available. IndexedDBConfigRepository requires a Thunderbird extension environment.');\n        }\n    }\n    // === Provider Settings ===\n    async getProviderSettings(providerId) {\n        try {\n            const data = await this.storage.get(STORAGE_KEYS.PROVIDER_SETTINGS);\n            const providerSettings = data[STORAGE_KEYS.PROVIDER_SETTINGS];\n            if (!providerSettings || !(providerId in providerSettings)) {\n                throw new Error(`Provider settings not found for provider: ${providerId}`);\n            }\n            const settings = providerSettings[providerId];\n            this.logger.debug(`Retrieved provider settings for ${providerId}`, {\n                providerId,\n                hasApiKey: !!settings.apiKey,\n                model: settings.model,\n            });\n            return settings;\n        }\n        catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            this.logger.error(`Failed to get provider settings for ${providerId}`, {\n                providerId,\n                error: message,\n            });\n            throw new Error(`Failed to get provider settings for ${providerId}: ${message}`);\n        }\n    }\n    async setProviderSettings(providerId, settings) {\n        try {\n            const data = await this.storage.get(STORAGE_KEYS.PROVIDER_SETTINGS);\n            const providerSettings = data[STORAGE_KEYS.PROVIDER_SETTINGS] || {};\n            providerSettings[providerId] = settings;\n            await this.storage.set({ [STORAGE_KEYS.PROVIDER_SETTINGS]: providerSettings });\n            this.logger.debug(`Saved provider settings for ${providerId}`, {\n                providerId,\n                hasApiKey: !!settings.apiKey,\n                model: settings.model,\n            });\n        }\n        catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            this.logger.error(`Failed to save provider settings for ${providerId}`, {\n                providerId,\n                error: message,\n            });\n            throw new Error(`Failed to save provider settings for ${providerId}: ${message}`);\n        }\n    }\n    async getAllProviderSettings() {\n        try {\n            const data = await this.storage.get(STORAGE_KEYS.PROVIDER_SETTINGS);\n            const providerSettings = data[STORAGE_KEYS.PROVIDER_SETTINGS] || {};\n            this.logger.debug(`Retrieved settings for ${Object.keys(providerSettings).length} providers`);\n            return providerSettings;\n        }\n        catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to get all provider settings', { error: message });\n            throw new Error(`Failed to get all provider settings: ${message}`);\n        }\n    }\n    // === Custom Tags ===\n    async getCustomTags() {\n        try {\n            const data = await this.storage.get(STORAGE_KEYS.CUSTOM_TAGS);\n            const customTags = data[STORAGE_KEYS.CUSTOM_TAGS] || [];\n            this.logger.debug(`Retrieved ${customTags.length} custom tags`);\n            return customTags;\n        }\n        catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to get custom tags', { error: message });\n            throw new Error(`Failed to get custom tags: ${message}`);\n        }\n    }\n    async setCustomTags(tags) {\n        try {\n            await this.storage.set({ [STORAGE_KEYS.CUSTOM_TAGS]: tags });\n            this.logger.debug(`Saved ${tags.length} custom tags`);\n        }\n        catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to save custom tags', { error: message, tagCount: tags.length });\n            throw new Error(`Failed to save custom tags: ${message}`);\n        }\n    }\n    // === Application Configuration ===\n    async getAppConfig() {\n        try {\n            const data = await this.storage.get(STORAGE_KEYS.APP_CONFIG);\n            const appConfig = data[STORAGE_KEYS.APP_CONFIG];\n            if (!appConfig) {\n                throw new Error('Application configuration not found');\n            }\n            this.logger.debug('Retrieved application config', {\n                defaultProvider: appConfig.defaultProvider,\n                enableNotifications: appConfig.enableNotifications,\n                enableLogging: appConfig.enableLogging,\n            });\n            return appConfig;\n        }\n        catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to get application config', { error: message });\n            throw new Error(`Failed to get application config: ${message}`);\n        }\n    }\n    async setAppConfig(config) {\n        try {\n            await this.storage.set({ [STORAGE_KEYS.APP_CONFIG]: config });\n            this.logger.debug('Saved application config', {\n                defaultProvider: config.defaultProvider,\n                enableNotifications: config.enableNotifications,\n                enableLogging: config.enableLogging,\n            });\n        }\n        catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to save application config', { error: message });\n            throw new Error(`Failed to save application config: ${message}`);\n        }\n    }\n    // === Utility Methods ===\n    async clearAll() {\n        try {\n            await this.storage.clear();\n            this.logger.info('Cleared all configuration data');\n        }\n        catch (error) {\n            const message = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to clear configuration data', { error: message });\n            throw new Error(`Failed to clear configuration data: ${message}`);\n        }\n    }\n};\nIndexedDBConfigRepository = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], IndexedDBConfigRepository);\nexport { IndexedDBConfigRepository };\n","/** Types of elements found in htmlparser2's DOM */\nexport var ElementType;\n(function (ElementType) {\n    /** Type for the root element of a document */\n    ElementType[\"Root\"] = \"root\";\n    /** Type for Text */\n    ElementType[\"Text\"] = \"text\";\n    /** Type for <? ... ?> */\n    ElementType[\"Directive\"] = \"directive\";\n    /** Type for <!-- ... --> */\n    ElementType[\"Comment\"] = \"comment\";\n    /** Type for <script> tags */\n    ElementType[\"Script\"] = \"script\";\n    /** Type for <style> tags */\n    ElementType[\"Style\"] = \"style\";\n    /** Type for Any tag */\n    ElementType[\"Tag\"] = \"tag\";\n    /** Type for <![CDATA[ ... ]]> */\n    ElementType[\"CDATA\"] = \"cdata\";\n    /** Type for <!doctype ...> */\n    ElementType[\"Doctype\"] = \"doctype\";\n})(ElementType || (ElementType = {}));\n/**\n * Tests whether an element is a tag or not.\n *\n * @param elem Element to test\n */\nexport function isTag(elem) {\n    return (elem.type === ElementType.Tag ||\n        elem.type === ElementType.Script ||\n        elem.type === ElementType.Style);\n}\n// Exports for backwards compatibility\n/** Type for the root element of a document */\nexport const Root = ElementType.Root;\n/** Type for Text */\nexport const Text = ElementType.Text;\n/** Type for <? ... ?> */\nexport const Directive = ElementType.Directive;\n/** Type for <!-- ... --> */\nexport const Comment = ElementType.Comment;\n/** Type for <script> tags */\nexport const Script = ElementType.Script;\n/** Type for <style> tags */\nexport const Style = ElementType.Style;\n/** Type for Any tag */\nexport const Tag = ElementType.Tag;\n/** Type for <![CDATA[ ... ]]> */\nexport const CDATA = ElementType.CDATA;\n/** Type for <!doctype ...> */\nexport const Doctype = ElementType.Doctype;\n","import { ElementType, isTag as isTagRaw } from \"domelementtype\";\n/**\n * This object will be used as the prototype for Nodes when creating a\n * DOM-Level-1-compliant structure.\n */\nexport class Node {\n    constructor() {\n        /** Parent of the node */\n        this.parent = null;\n        /** Previous sibling */\n        this.prev = null;\n        /** Next sibling */\n        this.next = null;\n        /** The start index of the node. Requires `withStartIndices` on the handler to be `true. */\n        this.startIndex = null;\n        /** The end index of the node. Requires `withEndIndices` on the handler to be `true. */\n        this.endIndex = null;\n    }\n    // Read-write aliases for properties\n    /**\n     * Same as {@link parent}.\n     * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.\n     */\n    get parentNode() {\n        return this.parent;\n    }\n    set parentNode(parent) {\n        this.parent = parent;\n    }\n    /**\n     * Same as {@link prev}.\n     * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.\n     */\n    get previousSibling() {\n        return this.prev;\n    }\n    set previousSibling(prev) {\n        this.prev = prev;\n    }\n    /**\n     * Same as {@link next}.\n     * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.\n     */\n    get nextSibling() {\n        return this.next;\n    }\n    set nextSibling(next) {\n        this.next = next;\n    }\n    /**\n     * Clone this node, and optionally its children.\n     *\n     * @param recursive Clone child nodes as well.\n     * @returns A clone of the node.\n     */\n    cloneNode(recursive = false) {\n        return cloneNode(this, recursive);\n    }\n}\n/**\n * A node that contains some data.\n */\nexport class DataNode extends Node {\n    /**\n     * @param data The content of the data node\n     */\n    constructor(data) {\n        super();\n        this.data = data;\n    }\n    /**\n     * Same as {@link data}.\n     * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.\n     */\n    get nodeValue() {\n        return this.data;\n    }\n    set nodeValue(data) {\n        this.data = data;\n    }\n}\n/**\n * Text within the document.\n */\nexport class Text extends DataNode {\n    constructor() {\n        super(...arguments);\n        this.type = ElementType.Text;\n    }\n    get nodeType() {\n        return 3;\n    }\n}\n/**\n * Comments within the document.\n */\nexport class Comment extends DataNode {\n    constructor() {\n        super(...arguments);\n        this.type = ElementType.Comment;\n    }\n    get nodeType() {\n        return 8;\n    }\n}\n/**\n * Processing instructions, including doc types.\n */\nexport class ProcessingInstruction extends DataNode {\n    constructor(name, data) {\n        super(data);\n        this.name = name;\n        this.type = ElementType.Directive;\n    }\n    get nodeType() {\n        return 1;\n    }\n}\n/**\n * A `Node` that can have children.\n */\nexport class NodeWithChildren extends Node {\n    /**\n     * @param children Children of the node. Only certain node types can have children.\n     */\n    constructor(children) {\n        super();\n        this.children = children;\n    }\n    // Aliases\n    /** First child of the node. */\n    get firstChild() {\n        var _a;\n        return (_a = this.children[0]) !== null && _a !== void 0 ? _a : null;\n    }\n    /** Last child of the node. */\n    get lastChild() {\n        return this.children.length > 0\n            ? this.children[this.children.length - 1]\n            : null;\n    }\n    /**\n     * Same as {@link children}.\n     * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.\n     */\n    get childNodes() {\n        return this.children;\n    }\n    set childNodes(children) {\n        this.children = children;\n    }\n}\nexport class CDATA extends NodeWithChildren {\n    constructor() {\n        super(...arguments);\n        this.type = ElementType.CDATA;\n    }\n    get nodeType() {\n        return 4;\n    }\n}\n/**\n * The root node of the document.\n */\nexport class Document extends NodeWithChildren {\n    constructor() {\n        super(...arguments);\n        this.type = ElementType.Root;\n    }\n    get nodeType() {\n        return 9;\n    }\n}\n/**\n * An element within the DOM.\n */\nexport class Element extends NodeWithChildren {\n    /**\n     * @param name Name of the tag, eg. `div`, `span`.\n     * @param attribs Object mapping attribute names to attribute values.\n     * @param children Children of the node.\n     */\n    constructor(name, attribs, children = [], type = name === \"script\"\n        ? ElementType.Script\n        : name === \"style\"\n            ? ElementType.Style\n            : ElementType.Tag) {\n        super(children);\n        this.name = name;\n        this.attribs = attribs;\n        this.type = type;\n    }\n    get nodeType() {\n        return 1;\n    }\n    // DOM Level 1 aliases\n    /**\n     * Same as {@link name}.\n     * [DOM spec](https://dom.spec.whatwg.org)-compatible alias.\n     */\n    get tagName() {\n        return this.name;\n    }\n    set tagName(name) {\n        this.name = name;\n    }\n    get attributes() {\n        return Object.keys(this.attribs).map((name) => {\n            var _a, _b;\n            return ({\n                name,\n                value: this.attribs[name],\n                namespace: (_a = this[\"x-attribsNamespace\"]) === null || _a === void 0 ? void 0 : _a[name],\n                prefix: (_b = this[\"x-attribsPrefix\"]) === null || _b === void 0 ? void 0 : _b[name],\n            });\n        });\n    }\n}\n/**\n * @param node Node to check.\n * @returns `true` if the node is a `Element`, `false` otherwise.\n */\nexport function isTag(node) {\n    return isTagRaw(node);\n}\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `CDATA`, `false` otherwise.\n */\nexport function isCDATA(node) {\n    return node.type === ElementType.CDATA;\n}\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `Text`, `false` otherwise.\n */\nexport function isText(node) {\n    return node.type === ElementType.Text;\n}\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `Comment`, `false` otherwise.\n */\nexport function isComment(node) {\n    return node.type === ElementType.Comment;\n}\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `ProcessingInstruction`, `false` otherwise.\n */\nexport function isDirective(node) {\n    return node.type === ElementType.Directive;\n}\n/**\n * @param node Node to check.\n * @returns `true` if the node has the type `ProcessingInstruction`, `false` otherwise.\n */\nexport function isDocument(node) {\n    return node.type === ElementType.Root;\n}\n/**\n * @param node Node to check.\n * @returns `true` if the node has children, `false` otherwise.\n */\nexport function hasChildren(node) {\n    return Object.prototype.hasOwnProperty.call(node, \"children\");\n}\n/**\n * Clone a node, and optionally its children.\n *\n * @param recursive Clone child nodes as well.\n * @returns A clone of the node.\n */\nexport function cloneNode(node, recursive = false) {\n    let result;\n    if (isText(node)) {\n        result = new Text(node.data);\n    }\n    else if (isComment(node)) {\n        result = new Comment(node.data);\n    }\n    else if (isTag(node)) {\n        const children = recursive ? cloneChildren(node.children) : [];\n        const clone = new Element(node.name, { ...node.attribs }, children);\n        children.forEach((child) => (child.parent = clone));\n        if (node.namespace != null) {\n            clone.namespace = node.namespace;\n        }\n        if (node[\"x-attribsNamespace\"]) {\n            clone[\"x-attribsNamespace\"] = { ...node[\"x-attribsNamespace\"] };\n        }\n        if (node[\"x-attribsPrefix\"]) {\n            clone[\"x-attribsPrefix\"] = { ...node[\"x-attribsPrefix\"] };\n        }\n        result = clone;\n    }\n    else if (isCDATA(node)) {\n        const children = recursive ? cloneChildren(node.children) : [];\n        const clone = new CDATA(children);\n        children.forEach((child) => (child.parent = clone));\n        result = clone;\n    }\n    else if (isDocument(node)) {\n        const children = recursive ? cloneChildren(node.children) : [];\n        const clone = new Document(children);\n        children.forEach((child) => (child.parent = clone));\n        if (node[\"x-mode\"]) {\n            clone[\"x-mode\"] = node[\"x-mode\"];\n        }\n        result = clone;\n    }\n    else if (isDirective(node)) {\n        const instruction = new ProcessingInstruction(node.name, node.data);\n        if (node[\"x-name\"] != null) {\n            instruction[\"x-name\"] = node[\"x-name\"];\n            instruction[\"x-publicId\"] = node[\"x-publicId\"];\n            instruction[\"x-systemId\"] = node[\"x-systemId\"];\n        }\n        result = instruction;\n    }\n    else {\n        throw new Error(`Not implemented yet: ${node.type}`);\n    }\n    result.startIndex = node.startIndex;\n    result.endIndex = node.endIndex;\n    if (node.sourceCodeLocation != null) {\n        result.sourceCodeLocation = node.sourceCodeLocation;\n    }\n    return result;\n}\nfunction cloneChildren(childs) {\n    const children = childs.map((child) => cloneNode(child, true));\n    for (let i = 1; i < children.length; i++) {\n        children[i].prev = children[i - 1];\n        children[i - 1].next = children[i];\n    }\n    return children;\n}\n","import { ElementType } from \"domelementtype\";\nimport { Element, Text, Comment, CDATA, Document, ProcessingInstruction, } from \"./node.js\";\nexport * from \"./node.js\";\n// Default options\nconst defaultOpts = {\n    withStartIndices: false,\n    withEndIndices: false,\n    xmlMode: false,\n};\nexport class DomHandler {\n    /**\n     * @param callback Called once parsing has completed.\n     * @param options Settings for the handler.\n     * @param elementCB Callback whenever a tag is closed.\n     */\n    constructor(callback, options, elementCB) {\n        /** The elements of the DOM */\n        this.dom = [];\n        /** The root element for the DOM */\n        this.root = new Document(this.dom);\n        /** Indicated whether parsing has been completed. */\n        this.done = false;\n        /** Stack of open tags. */\n        this.tagStack = [this.root];\n        /** A data node that is still being written to. */\n        this.lastNode = null;\n        /** Reference to the parser instance. Used for location information. */\n        this.parser = null;\n        // Make it possible to skip arguments, for backwards-compatibility\n        if (typeof options === \"function\") {\n            elementCB = options;\n            options = defaultOpts;\n        }\n        if (typeof callback === \"object\") {\n            options = callback;\n            callback = undefined;\n        }\n        this.callback = callback !== null && callback !== void 0 ? callback : null;\n        this.options = options !== null && options !== void 0 ? options : defaultOpts;\n        this.elementCB = elementCB !== null && elementCB !== void 0 ? elementCB : null;\n    }\n    onparserinit(parser) {\n        this.parser = parser;\n    }\n    // Resets the handler back to starting state\n    onreset() {\n        this.dom = [];\n        this.root = new Document(this.dom);\n        this.done = false;\n        this.tagStack = [this.root];\n        this.lastNode = null;\n        this.parser = null;\n    }\n    // Signals the handler that parsing is done\n    onend() {\n        if (this.done)\n            return;\n        this.done = true;\n        this.parser = null;\n        this.handleCallback(null);\n    }\n    onerror(error) {\n        this.handleCallback(error);\n    }\n    onclosetag() {\n        this.lastNode = null;\n        const elem = this.tagStack.pop();\n        if (this.options.withEndIndices) {\n            elem.endIndex = this.parser.endIndex;\n        }\n        if (this.elementCB)\n            this.elementCB(elem);\n    }\n    onopentag(name, attribs) {\n        const type = this.options.xmlMode ? ElementType.Tag : undefined;\n        const element = new Element(name, attribs, undefined, type);\n        this.addNode(element);\n        this.tagStack.push(element);\n    }\n    ontext(data) {\n        const { lastNode } = this;\n        if (lastNode && lastNode.type === ElementType.Text) {\n            lastNode.data += data;\n            if (this.options.withEndIndices) {\n                lastNode.endIndex = this.parser.endIndex;\n            }\n        }\n        else {\n            const node = new Text(data);\n            this.addNode(node);\n            this.lastNode = node;\n        }\n    }\n    oncomment(data) {\n        if (this.lastNode && this.lastNode.type === ElementType.Comment) {\n            this.lastNode.data += data;\n            return;\n        }\n        const node = new Comment(data);\n        this.addNode(node);\n        this.lastNode = node;\n    }\n    oncommentend() {\n        this.lastNode = null;\n    }\n    oncdatastart() {\n        const text = new Text(\"\");\n        const node = new CDATA([text]);\n        this.addNode(node);\n        text.parent = node;\n        this.lastNode = text;\n    }\n    oncdataend() {\n        this.lastNode = null;\n    }\n    onprocessinginstruction(name, data) {\n        const node = new ProcessingInstruction(name, data);\n        this.addNode(node);\n    }\n    handleCallback(error) {\n        if (typeof this.callback === \"function\") {\n            this.callback(error, this.dom);\n        }\n        else if (error) {\n            throw error;\n        }\n    }\n    addNode(node) {\n        const parent = this.tagStack[this.tagStack.length - 1];\n        const previousSibling = parent.children[parent.children.length - 1];\n        if (this.options.withStartIndices) {\n            node.startIndex = this.parser.startIndex;\n        }\n        if (this.options.withEndIndices) {\n            node.endIndex = this.parser.endIndex;\n        }\n        parent.children.push(node);\n        if (previousSibling) {\n            node.prev = previousSibling;\n            previousSibling.next = node;\n        }\n        node.parent = parent;\n        this.lastNode = null;\n    }\n}\nexport default DomHandler;\n","const e=/\\n/g;function n(n){const o=[...n.matchAll(e)].map((e=>e.index||0));o.unshift(-1);const s=t(o,0,o.length);return e=>r(s,e)}function t(e,n,r){if(r-n==1)return{offset:e[n],index:n+1};const o=Math.ceil((n+r)/2),s=t(e,n,o),l=t(e,o,r);return{offset:s.offset,low:s,high:l}}function r(e,n){return function(e){return Object.prototype.hasOwnProperty.call(e,\"index\")}(e)?{line:e.index,column:n-e.offset}:r(e.high.offset<n?e.high:e.low,n)}function o(e,t=\"\",r={}){const o=\"string\"!=typeof t?t:r,l=\"string\"==typeof t?t:\"\",c=e.map(s),f=!!o.lineNumbers;return function(e,t=0){const r=f?n(e):()=>({line:0,column:0});let o=t;const s=[];e:for(;o<e.length;){let n=!1;for(const t of c){t.regex.lastIndex=o;const c=t.regex.exec(e);if(c&&c[0].length>0){if(!t.discard){const e=r(o),n=\"string\"==typeof t.replace?c[0].replace(new RegExp(t.regex.source,t.regex.flags),t.replace):c[0];s.push({state:l,name:t.name,text:n,offset:o,len:c[0].length,line:e.line,column:e.column})}if(o=t.regex.lastIndex,n=!0,t.push){const n=t.push(e,o);s.push(...n.tokens),o=n.offset}if(t.pop)break e;break}}if(!n)break}return{tokens:s,offset:o,complete:e.length<=o}}}function s(e,n){return{...e,regex:l(e,n)}}function l(e,n){if(0===e.name.length)throw new Error(`Rule #${n} has empty name, which is not allowed.`);if(function(e){return Object.prototype.hasOwnProperty.call(e,\"regex\")}(e))return function(e){if(e.global)throw new Error(`Regular expression /${e.source}/${e.flags} contains the global flag, which is not allowed.`);return e.sticky?e:new RegExp(e.source,e.flags+\"y\")}(e.regex);if(function(e){return Object.prototype.hasOwnProperty.call(e,\"str\")}(e)){if(0===e.str.length)throw new Error(`Rule #${n} (\"${e.name}\") has empty \"str\" property, which is not allowed.`);return new RegExp(c(e.str),\"y\")}return new RegExp(c(e.name),\"y\")}function c(e){return e.replace(/[-[\\]{}()*+!<=:?./\\\\^$|#\\s,]/g,\"\\\\$&\")}export{o as createLexer};\n","import { clamp, escapeWhitespace } from './util.mjs';\n\nfunction emit(value) {\n    return (data, i) => ({\n        matched: true,\n        position: i,\n        value: value\n    });\n}\nfunction make(\nf) {\n    return (data, i) => ({\n        matched: true,\n        position: i,\n        value: f(data, i)\n    });\n}\nfunction action(\nf) {\n    return (data, i) => {\n        f(data, i);\n        return {\n            matched: true,\n            position: i,\n            value: null\n        };\n    };\n}\nfunction fail(\ndata, i) {\n    return { matched: false };\n}\nfunction error(message) {\n    return (data, i) => {\n        throw new Error((message instanceof Function) ? message(data, i) : message);\n    };\n}\nfunction token(\nonToken,\nonEnd) {\n    return (data, i) => {\n        let position = i;\n        let value = undefined;\n        if (i < data.tokens.length) {\n            value = onToken(data.tokens[i], data, i);\n            if (value !== undefined) {\n                position++;\n            }\n        }\n        else {\n            onEnd?.(data, i);\n        }\n        return (value === undefined)\n            ? { matched: false }\n            : {\n                matched: true,\n                position: position,\n                value: value\n            };\n    };\n}\nfunction any(data, i) {\n    return (i < data.tokens.length)\n        ? {\n            matched: true,\n            position: i + 1,\n            value: data.tokens[i]\n        }\n        : { matched: false };\n}\nfunction satisfy(\ntest) {\n    return (data, i) => (i < data.tokens.length && test(data.tokens[i], data, i))\n        ? {\n            matched: true,\n            position: i + 1,\n            value: data.tokens[i]\n        }\n        : { matched: false };\n}\nfunction mapInner(r, f) {\n    return (r.matched) ? ({\n        matched: true,\n        position: r.position,\n        value: f(r.value, r.position)\n    }) : r;\n}\nfunction mapOuter(r, f) {\n    return (r.matched) ? f(r) : r;\n}\nfunction map(p, mapper) {\n    return (data, i) => mapInner(p(data, i), (v, j) => mapper(v, data, i, j));\n}\nfunction map1(p,\nmapper) {\n    return (data, i) => mapOuter(p(data, i), (m) => mapper(m, data, i));\n}\nfunction peek(p, f) {\n    return (data, i) => {\n        const r = p(data, i);\n        f(r, data, i);\n        return r;\n    };\n}\nfunction option(p, def) {\n    return (data, i) => {\n        const r = p(data, i);\n        return (r.matched)\n            ? r\n            : {\n                matched: true,\n                position: i,\n                value: def\n            };\n    };\n}\nfunction not(p) {\n    return (data, i) => {\n        const r = p(data, i);\n        return (r.matched)\n            ? { matched: false }\n            : {\n                matched: true,\n                position: i,\n                value: true\n            };\n    };\n}\nfunction choice(...ps) {\n    return (data, i) => {\n        for (const p of ps) {\n            const result = p(data, i);\n            if (result.matched) {\n                return result;\n            }\n        }\n        return { matched: false };\n    };\n}\nfunction otherwise(pa, pb) {\n    return (data, i) => {\n        const r1 = pa(data, i);\n        return (r1.matched)\n            ? r1\n            : pb(data, i);\n    };\n}\nfunction longest(...ps) {\n    return (data, i) => {\n        let match = undefined;\n        for (const p of ps) {\n            const result = p(data, i);\n            if (result.matched && (!match || match.position < result.position)) {\n                match = result;\n            }\n        }\n        return match || { matched: false };\n    };\n}\nfunction takeWhile(p,\ntest) {\n    return (data, i) => {\n        const values = [];\n        let success = true;\n        do {\n            const r = p(data, i);\n            if (r.matched && test(r.value, values.length + 1, data, i, r.position)) {\n                values.push(r.value);\n                i = r.position;\n            }\n            else {\n                success = false;\n            }\n        } while (success);\n        return {\n            matched: true,\n            position: i,\n            value: values\n        };\n    };\n}\nfunction takeUntil(p,\ntest) {\n    return takeWhile(p, (value, n, data, i, j) => !test(value, n, data, i, j));\n}\nfunction takeWhileP(pValue, pTest) {\n    return takeWhile(pValue, (value, n, data, i) => pTest(data, i).matched);\n}\nfunction takeUntilP(pValue, pTest) {\n    return takeWhile(pValue, (value, n, data, i) => !pTest(data, i).matched);\n}\nfunction many(p) {\n    return takeWhile(p, () => true);\n}\nfunction many1(p) {\n    return ab(p, many(p), (head, tail) => [head, ...tail]);\n}\nfunction ab(pa, pb, join) {\n    return (data, i) => mapOuter(pa(data, i), (ma) => mapInner(pb(data, ma.position), (vb, j) => join(ma.value, vb, data, i, j)));\n}\nfunction left(pa, pb) {\n    return ab(pa, pb, (va) => va);\n}\nfunction right(pa, pb) {\n    return ab(pa, pb, (va, vb) => vb);\n}\nfunction abc(pa, pb, pc, join) {\n    return (data, i) => mapOuter(pa(data, i), (ma) => mapOuter(pb(data, ma.position), (mb) => mapInner(pc(data, mb.position), (vc, j) => join(ma.value, mb.value, vc, data, i, j))));\n}\nfunction middle(pa, pb, pc) {\n    return abc(pa, pb, pc, (ra, rb) => rb);\n}\nfunction all(...ps) {\n    return (data, i) => {\n        const result = [];\n        let position = i;\n        for (const p of ps) {\n            const r1 = p(data, position);\n            if (r1.matched) {\n                result.push(r1.value);\n                position = r1.position;\n            }\n            else {\n                return { matched: false };\n            }\n        }\n        return {\n            matched: true,\n            position: position,\n            value: result\n        };\n    };\n}\nfunction skip(...ps) {\n    return map(all(...ps), () => null);\n}\nfunction flatten(...ps) {\n    return flatten1(all(...ps));\n}\nfunction flatten1(p) {\n    return map(p, (vs) => vs.flatMap((v) => v));\n}\nfunction sepBy1(pValue, pSep) {\n    return ab(pValue, many(right(pSep, pValue)), (head, tail) => [head, ...tail]);\n}\nfunction sepBy(pValue, pSep) {\n    return otherwise(sepBy1(pValue, pSep), emit([]));\n}\nfunction chainReduce(acc,\nf) {\n    return (data, i) => {\n        let loop = true;\n        let acc1 = acc;\n        let pos = i;\n        do {\n            const r = f(acc1, data, pos)(data, pos);\n            if (r.matched) {\n                acc1 = r.value;\n                pos = r.position;\n            }\n            else {\n                loop = false;\n            }\n        } while (loop);\n        return {\n            matched: true,\n            position: pos,\n            value: acc1\n        };\n    };\n}\nfunction reduceLeft(acc, p,\nreducer) {\n    return chainReduce(acc, (acc) => map(p, (v, data, i, j) => reducer(acc, v, data, i, j)));\n}\nfunction reduceRight(p, acc,\nreducer) {\n    return map(many(p), (vs, data, i, j) => vs.reduceRight((acc, v) => reducer(v, acc, data, i, j), acc));\n}\nfunction leftAssoc1(pLeft, pOper) {\n    return chain(pLeft, (v0) => reduceLeft(v0, pOper, (acc, f) => f(acc)));\n}\nfunction rightAssoc1(pOper, pRight) {\n    return ab(reduceRight(pOper, (y) => y, (f, acc) => (y) => f(acc(y))), pRight, (f, v) => f(v));\n}\nfunction leftAssoc2(pLeft, pOper, pRight) {\n    return chain(pLeft, (v0) => reduceLeft(v0, ab(pOper, pRight, (f, y) => [f, y]), (acc, [f, y]) => f(acc, y)));\n}\nfunction rightAssoc2(pLeft, pOper, pRight) {\n    return ab(reduceRight(ab(pLeft, pOper, (x, f) => [x, f]), (y) => y, ([x, f], acc) => (y) => f(x, acc(y))), pRight, (f, v) => f(v));\n}\nfunction condition(cond, pTrue, pFalse) {\n    return (data, i) => (cond(data, i))\n        ? pTrue(data, i)\n        : pFalse(data, i);\n}\nfunction decide(p) {\n    return (data, i) => mapOuter(p(data, i), (m1) => m1.value(data, m1.position));\n}\nfunction chain(p,\nf) {\n    return (data, i) => mapOuter(p(data, i), (m1) => f(m1.value, data, i, m1.position)(data, m1.position));\n}\nfunction ahead(p) {\n    return (data, i) => mapOuter(p(data, i), (m1) => ({\n        matched: true,\n        position: i,\n        value: m1.value\n    }));\n}\nfunction recursive(f) {\n    return function (data, i) {\n        return f()(data, i);\n    };\n}\nfunction start(data, i) {\n    return (i !== 0)\n        ? { matched: false }\n        : {\n            matched: true,\n            position: i,\n            value: true\n        };\n}\nfunction end(data, i) {\n    return (i < data.tokens.length)\n        ? { matched: false }\n        : {\n            matched: true,\n            position: i,\n            value: true\n        };\n}\nfunction remainingTokensNumber(data, i) {\n    return data.tokens.length - i;\n}\nfunction parserPosition(data, i, formatToken, contextTokens = 3) {\n    const len = data.tokens.length;\n    const lowIndex = clamp(0, i - contextTokens, len - contextTokens);\n    const highIndex = clamp(contextTokens, i + 1 + contextTokens, len);\n    const tokensSlice = data.tokens.slice(lowIndex, highIndex);\n    const lines = [];\n    const indexWidth = String(highIndex - 1).length + 1;\n    if (i < 0) {\n        lines.push(`${String(i).padStart(indexWidth)} >>`);\n    }\n    if (0 < lowIndex) {\n        lines.push('...'.padStart(indexWidth + 6));\n    }\n    for (let j = 0; j < tokensSlice.length; j++) {\n        const index = lowIndex + j;\n        lines.push(`${String(index).padStart(indexWidth)} ${(index === i ? '>' : ' ')} ${escapeWhitespace(formatToken(tokensSlice[j]))}`);\n    }\n    if (highIndex < len) {\n        lines.push('...'.padStart(indexWidth + 6));\n    }\n    if (len <= i) {\n        lines.push(`${String(i).padStart(indexWidth)} >>`);\n    }\n    return lines.join('\\n');\n}\nfunction parse(parser, tokens, options, formatToken = JSON.stringify) {\n    const data = { tokens: tokens, options: options };\n    const result = parser(data, 0);\n    if (!result.matched) {\n        throw new Error('No match');\n    }\n    if (result.position < data.tokens.length) {\n        throw new Error(`Partial match. Parsing stopped at:\\n${parserPosition(data, result.position, formatToken)}`);\n    }\n    return result.value;\n}\nfunction tryParse(parser, tokens, options) {\n    const result = parser({ tokens: tokens, options: options }, 0);\n    return (result.matched)\n        ? result.value\n        : undefined;\n}\nfunction match(matcher, tokens, options) {\n    const result = matcher({ tokens: tokens, options: options }, 0);\n    return result.value;\n}\n\nexport { ab, abc, action, ahead, all, all as and, any, chain, chainReduce, choice, condition, decide, skip as discard, otherwise as eitherOr, emit, end, end as eof, error, fail, flatten, flatten1, left, leftAssoc1, leftAssoc2, longest, ahead as lookAhead, make, many, many1, map, map1, match, middle, not, emit as of, option, choice as or, otherwise, parse, parserPosition, peek, recursive, reduceLeft, reduceRight, remainingTokensNumber, right, rightAssoc1, rightAssoc2, satisfy, sepBy, sepBy1, skip, many1 as some, start, takeUntil, takeUntilP, takeWhile, takeWhileP, token, tryParse };\n","import { createLexer } from 'leac';\nimport * as p from 'peberminta';\n\nvar ast = /*#__PURE__*/Object.freeze({\n    __proto__: null\n});\n\nconst ws = `(?:[ \\\\t\\\\r\\\\n\\\\f]*)`;\nconst nl = `(?:\\\\n|\\\\r\\\\n|\\\\r|\\\\f)`;\nconst nonascii = `[^\\\\x00-\\\\x7F]`;\nconst unicode = `(?:\\\\\\\\[0-9a-f]{1,6}(?:\\\\r\\\\n|[ \\\\n\\\\r\\\\t\\\\f])?)`;\nconst escape = `(?:\\\\\\\\[^\\\\n\\\\r\\\\f0-9a-f])`;\nconst nmstart = `(?:[_a-z]|${nonascii}|${unicode}|${escape})`;\nconst nmchar = `(?:[_a-z0-9-]|${nonascii}|${unicode}|${escape})`;\nconst name = `(?:${nmchar}+)`;\nconst ident = `(?:[-]?${nmstart}${nmchar}*)`;\nconst string1 = `'([^\\\\n\\\\r\\\\f\\\\\\\\']|\\\\\\\\${nl}|${nonascii}|${unicode}|${escape})*'`;\nconst string2 = `\"([^\\\\n\\\\r\\\\f\\\\\\\\\"]|\\\\\\\\${nl}|${nonascii}|${unicode}|${escape})*\"`;\nconst lexSelector = createLexer([\n    { name: 'ws', regex: new RegExp(ws) },\n    { name: 'hash', regex: new RegExp(`#${name}`, 'i') },\n    { name: 'ident', regex: new RegExp(ident, 'i') },\n    { name: 'str1', regex: new RegExp(string1, 'i') },\n    { name: 'str2', regex: new RegExp(string2, 'i') },\n    { name: '*' },\n    { name: '.' },\n    { name: ',' },\n    { name: '[' },\n    { name: ']' },\n    { name: '=' },\n    { name: '>' },\n    { name: '|' },\n    { name: '+' },\n    { name: '~' },\n    { name: '^' },\n    { name: '$' },\n]);\nconst lexEscapedString = createLexer([\n    { name: 'unicode', regex: new RegExp(unicode, 'i') },\n    { name: 'escape', regex: new RegExp(escape, 'i') },\n    { name: 'any', regex: new RegExp('[\\\\s\\\\S]', 'i') }\n]);\nfunction sumSpec([a0, a1, a2], [b0, b1, b2]) {\n    return [a0 + b0, a1 + b1, a2 + b2];\n}\nfunction sumAllSpec(ss) {\n    return ss.reduce(sumSpec, [0, 0, 0]);\n}\nconst unicodeEscapedSequence_ = p.token((t) => t.name === 'unicode' ? String.fromCodePoint(parseInt(t.text.slice(1), 16)) : undefined);\nconst escapedSequence_ = p.token((t) => t.name === 'escape' ? t.text.slice(1) : undefined);\nconst anyChar_ = p.token((t) => t.name === 'any' ? t.text : undefined);\nconst escapedString_ = p.map(p.many(p.or(unicodeEscapedSequence_, escapedSequence_, anyChar_)), (cs) => cs.join(''));\nfunction unescape(escapedString) {\n    const lexerResult = lexEscapedString(escapedString);\n    const result = escapedString_({ tokens: lexerResult.tokens, options: undefined }, 0);\n    return result.value;\n}\nfunction literal(name) {\n    return p.token((t) => t.name === name ? true : undefined);\n}\nconst whitespace_ = p.token((t) => t.name === 'ws' ? null : undefined);\nconst optionalWhitespace_ = p.option(whitespace_, null);\nfunction optionallySpaced(parser) {\n    return p.middle(optionalWhitespace_, parser, optionalWhitespace_);\n}\nconst identifier_ = p.token((t) => t.name === 'ident' ? unescape(t.text) : undefined);\nconst hashId_ = p.token((t) => t.name === 'hash' ? unescape(t.text.slice(1)) : undefined);\nconst string_ = p.token((t) => t.name.startsWith('str') ? unescape(t.text.slice(1, -1)) : undefined);\nconst namespace_ = p.left(p.option(identifier_, ''), literal('|'));\nconst qualifiedName_ = p.eitherOr(p.ab(namespace_, identifier_, (ns, name) => ({ name: name, namespace: ns })), p.map(identifier_, (name) => ({ name: name, namespace: null })));\nconst uniSelector_ = p.eitherOr(p.ab(namespace_, literal('*'), (ns) => ({ type: 'universal', namespace: ns, specificity: [0, 0, 0] })), p.map(literal('*'), () => ({ type: 'universal', namespace: null, specificity: [0, 0, 0] })));\nconst tagSelector_ = p.map(qualifiedName_, ({ name, namespace }) => ({\n    type: 'tag',\n    name: name,\n    namespace: namespace,\n    specificity: [0, 0, 1]\n}));\nconst classSelector_ = p.ab(literal('.'), identifier_, (fullstop, name) => ({\n    type: 'class',\n    name: name,\n    specificity: [0, 1, 0]\n}));\nconst idSelector_ = p.map(hashId_, (name) => ({\n    type: 'id',\n    name: name,\n    specificity: [1, 0, 0]\n}));\nconst attrModifier_ = p.token((t) => {\n    if (t.name === 'ident') {\n        if (t.text === 'i' || t.text === 'I') {\n            return 'i';\n        }\n        if (t.text === 's' || t.text === 'S') {\n            return 's';\n        }\n    }\n    return undefined;\n});\nconst attrValue_ = p.eitherOr(p.ab(string_, p.option(p.right(optionalWhitespace_, attrModifier_), null), (v, mod) => ({ value: v, modifier: mod })), p.ab(identifier_, p.option(p.right(whitespace_, attrModifier_), null), (v, mod) => ({ value: v, modifier: mod })));\nconst attrMatcher_ = p.choice(p.map(literal('='), () => '='), p.ab(literal('~'), literal('='), () => '~='), p.ab(literal('|'), literal('='), () => '|='), p.ab(literal('^'), literal('='), () => '^='), p.ab(literal('$'), literal('='), () => '$='), p.ab(literal('*'), literal('='), () => '*='));\nconst attrPresenceSelector_ = p.abc(literal('['), optionallySpaced(qualifiedName_), literal(']'), (lbr, { name, namespace }) => ({\n    type: 'attrPresence',\n    name: name,\n    namespace: namespace,\n    specificity: [0, 1, 0]\n}));\nconst attrValueSelector_ = p.middle(literal('['), p.abc(optionallySpaced(qualifiedName_), attrMatcher_, optionallySpaced(attrValue_), ({ name, namespace }, matcher, { value, modifier }) => ({\n    type: 'attrValue',\n    name: name,\n    namespace: namespace,\n    matcher: matcher,\n    value: value,\n    modifier: modifier,\n    specificity: [0, 1, 0]\n})), literal(']'));\nconst attrSelector_ = p.eitherOr(attrPresenceSelector_, attrValueSelector_);\nconst typeSelector_ = p.eitherOr(uniSelector_, tagSelector_);\nconst subclassSelector_ = p.choice(idSelector_, classSelector_, attrSelector_);\nconst compoundSelector_ = p.map(p.eitherOr(p.flatten(typeSelector_, p.many(subclassSelector_)), p.many1(subclassSelector_)), (ss) => {\n    return {\n        type: 'compound',\n        list: ss,\n        specificity: sumAllSpec(ss.map(s => s.specificity))\n    };\n});\nconst combinator_ = p.choice(p.map(literal('>'), () => '>'), p.map(literal('+'), () => '+'), p.map(literal('~'), () => '~'), p.ab(literal('|'), literal('|'), () => '||'));\nconst combinatorSeparator_ = p.eitherOr(optionallySpaced(combinator_), p.map(whitespace_, () => ' '));\nconst complexSelector_ = p.leftAssoc2(compoundSelector_, p.map(combinatorSeparator_, (c) => (left, right) => ({\n    type: 'compound',\n    list: [...right.list, { type: 'combinator', combinator: c, left: left, specificity: left.specificity }],\n    specificity: sumSpec(left.specificity, right.specificity)\n})), compoundSelector_);\nconst listSelector_ = p.leftAssoc2(p.map(complexSelector_, (s) => ({ type: 'list', list: [s] })), p.map(optionallySpaced(literal(',')), () => (acc, next) => ({ type: 'list', list: [...acc.list, next] })), complexSelector_);\nfunction parse_(parser, str) {\n    if (!(typeof str === 'string' || str instanceof String)) {\n        throw new Error('Expected a selector string. Actual input is not a string!');\n    }\n    const lexerResult = lexSelector(str);\n    if (!lexerResult.complete) {\n        throw new Error(`The input \"${str}\" was only partially tokenized, stopped at offset ${lexerResult.offset}!\\n` +\n            prettyPrintPosition(str, lexerResult.offset));\n    }\n    const result = optionallySpaced(parser)({ tokens: lexerResult.tokens, options: undefined }, 0);\n    if (!result.matched) {\n        throw new Error(`No match for \"${str}\" input!`);\n    }\n    if (result.position < lexerResult.tokens.length) {\n        const token = lexerResult.tokens[result.position];\n        throw new Error(`The input \"${str}\" was only partially parsed, stopped at offset ${token.offset}!\\n` +\n            prettyPrintPosition(str, token.offset, token.len));\n    }\n    return result.value;\n}\nfunction prettyPrintPosition(str, offset, len = 1) {\n    return `${str.replace(/(\\t)|(\\r)|(\\n)/g, (m, t, r) => t ? '\\u2409' : r ? '\\u240d' : '\\u240a')}\\n${''.padEnd(offset)}${'^'.repeat(len)}`;\n}\nfunction parse(str) {\n    return parse_(listSelector_, str);\n}\nfunction parse1(str) {\n    return parse_(complexSelector_, str);\n}\n\nfunction serialize(selector) {\n    if (!selector.type) {\n        throw new Error('This is not an AST node.');\n    }\n    switch (selector.type) {\n        case 'universal':\n            return _serNs(selector.namespace) + '*';\n        case 'tag':\n            return _serNs(selector.namespace) + _serIdent(selector.name);\n        case 'class':\n            return '.' + _serIdent(selector.name);\n        case 'id':\n            return '#' + _serIdent(selector.name);\n        case 'attrPresence':\n            return `[${_serNs(selector.namespace)}${_serIdent(selector.name)}]`;\n        case 'attrValue':\n            return `[${_serNs(selector.namespace)}${_serIdent(selector.name)}${selector.matcher}\"${_serStr(selector.value)}\"${(selector.modifier ? selector.modifier : '')}]`;\n        case 'combinator':\n            return serialize(selector.left) + selector.combinator;\n        case 'compound':\n            return selector.list.reduce((acc, node) => {\n                if (node.type === 'combinator') {\n                    return serialize(node) + acc;\n                }\n                else {\n                    return acc + serialize(node);\n                }\n            }, '');\n        case 'list':\n            return selector.list.map(serialize).join(',');\n    }\n}\nfunction _serNs(ns) {\n    return (ns || ns === '')\n        ? _serIdent(ns) + '|'\n        : '';\n}\nfunction _codePoint(char) {\n    return `\\\\${char.codePointAt(0).toString(16)} `;\n}\nfunction _serIdent(str) {\n    return str.replace(\n    /(^[0-9])|(^-[0-9])|(^-$)|([-0-9a-zA-Z_]|[^\\x00-\\x7F])|(\\x00)|([\\x01-\\x1f]|\\x7f)|([\\s\\S])/g, (m, d1, d2, hy, safe, nl, ctrl, other) => d1 ? _codePoint(d1) :\n        d2 ? '-' + _codePoint(d2.slice(1)) :\n            hy ? '\\\\-' :\n                safe ? safe :\n                    nl ? '\\ufffd' :\n                        ctrl ? _codePoint(ctrl) :\n                            '\\\\' + other);\n}\nfunction _serStr(str) {\n    return str.replace(\n    /(\")|(\\\\)|(\\x00)|([\\x01-\\x1f]|\\x7f)/g, (m, dq, bs, nl, ctrl) => dq ? '\\\\\"' :\n        bs ? '\\\\\\\\' :\n            nl ? '\\ufffd' :\n                _codePoint(ctrl));\n}\nfunction normalize(selector) {\n    if (!selector.type) {\n        throw new Error('This is not an AST node.');\n    }\n    switch (selector.type) {\n        case 'compound': {\n            selector.list.forEach(normalize);\n            selector.list.sort((a, b) => _compareArrays(_getSelectorPriority(a), _getSelectorPriority(b)));\n            break;\n        }\n        case 'combinator': {\n            normalize(selector.left);\n            break;\n        }\n        case 'list': {\n            selector.list.forEach(normalize);\n            selector.list.sort((a, b) => (serialize(a) < serialize(b)) ? -1 : 1);\n            break;\n        }\n    }\n    return selector;\n}\nfunction _getSelectorPriority(selector) {\n    switch (selector.type) {\n        case 'universal':\n            return [1];\n        case 'tag':\n            return [1];\n        case 'id':\n            return [2];\n        case 'class':\n            return [3, selector.name];\n        case 'attrPresence':\n            return [4, serialize(selector)];\n        case 'attrValue':\n            return [5, serialize(selector)];\n        case 'combinator':\n            return [15, serialize(selector)];\n    }\n}\nfunction compareSelectors(a, b) {\n    return _compareArrays(a.specificity, b.specificity);\n}\nfunction compareSpecificity(a, b) {\n    return _compareArrays(a, b);\n}\nfunction _compareArrays(a, b) {\n    if (!Array.isArray(a) || !Array.isArray(b)) {\n        throw new Error('Arguments must be arrays.');\n    }\n    const shorter = (a.length < b.length) ? a.length : b.length;\n    for (let i = 0; i < shorter; i++) {\n        if (a[i] === b[i]) {\n            continue;\n        }\n        return (a[i] < b[i]) ? -1 : 1;\n    }\n    return a.length - b.length;\n}\n\nexport { ast as Ast, compareSelectors, compareSpecificity, normalize, parse, parse1, serialize };\n","import * as parseley from 'parseley';\nimport { compareSpecificity } from 'parseley';\n\nvar Ast = /*#__PURE__*/Object.freeze({\n    __proto__: null\n});\n\nvar Types = /*#__PURE__*/Object.freeze({\n    __proto__: null\n});\n\nconst treeify = (nodes) => '\\n' + treeifyArray(nodes, thinLines);\nconst thinLines = [['', ' '], ['', '  ']];\nconst heavyLines = [['', ' '], ['', '  ']];\nconst doubleLines = [['', ' '], ['', '  ']];\nfunction treeifyArray(nodes, tpl = heavyLines) {\n    return prefixItems(tpl, nodes.map(n => treeifyNode(n)));\n}\nfunction treeifyNode(node) {\n    switch (node.type) {\n        case 'terminal': {\n            const vctr = node.valueContainer;\n            return ` #${vctr.index} ${JSON.stringify(vctr.specificity)} ${vctr.value}`;\n        }\n        case 'tagName':\n            return ` Tag name\\n${treeifyArray(node.variants, doubleLines)}`;\n        case 'attrValue':\n            return ` Attr value: ${node.name}\\n${treeifyArray(node.matchers, doubleLines)}`;\n        case 'attrPresence':\n            return ` Attr presence: ${node.name}\\n${treeifyArray(node.cont)}`;\n        case 'pushElement':\n            return ` Push element: ${node.combinator}\\n${treeifyArray(node.cont, thinLines)}`;\n        case 'popElement':\n            return ` Pop element\\n${treeifyArray(node.cont, thinLines)}`;\n        case 'variant':\n            return ` = ${node.value}\\n${treeifyArray(node.cont)}`;\n        case 'matcher':\n            return ` ${node.matcher} \"${node.value}\"${node.modifier || ''}\\n${treeifyArray(node.cont)}`;\n    }\n}\nfunction prefixItems(tpl, items) {\n    return items\n        .map((item, i, { length }) => prefixItem(tpl, item, i === length - 1))\n        .join('\\n');\n}\nfunction prefixItem(tpl, item, tail = true) {\n    const tpl1 = tpl[tail ? 1 : 0];\n    return tpl1[0] + item.split('\\n').join('\\n' + tpl1[1]);\n}\n\nvar TreeifyBuilder = /*#__PURE__*/Object.freeze({\n    __proto__: null,\n    treeify: treeify\n});\n\nclass DecisionTree {\n    constructor(input) {\n        this.branches = weave(toAstTerminalPairs(input));\n    }\n    build(builder) {\n        return builder(this.branches);\n    }\n}\nfunction toAstTerminalPairs(array) {\n    const len = array.length;\n    const results = new Array(len);\n    for (let i = 0; i < len; i++) {\n        const [selectorString, val] = array[i];\n        const ast = preprocess(parseley.parse1(selectorString));\n        results[i] = {\n            ast: ast,\n            terminal: {\n                type: 'terminal',\n                valueContainer: { index: i, value: val, specificity: ast.specificity }\n            }\n        };\n    }\n    return results;\n}\nfunction preprocess(ast) {\n    reduceSelectorVariants(ast);\n    parseley.normalize(ast);\n    return ast;\n}\nfunction reduceSelectorVariants(ast) {\n    const newList = [];\n    ast.list.forEach(sel => {\n        switch (sel.type) {\n            case 'class':\n                newList.push({\n                    matcher: '~=',\n                    modifier: null,\n                    name: 'class',\n                    namespace: null,\n                    specificity: sel.specificity,\n                    type: 'attrValue',\n                    value: sel.name,\n                });\n                break;\n            case 'id':\n                newList.push({\n                    matcher: '=',\n                    modifier: null,\n                    name: 'id',\n                    namespace: null,\n                    specificity: sel.specificity,\n                    type: 'attrValue',\n                    value: sel.name,\n                });\n                break;\n            case 'combinator':\n                reduceSelectorVariants(sel.left);\n                newList.push(sel);\n                break;\n            case 'universal':\n                break;\n            default:\n                newList.push(sel);\n                break;\n        }\n    });\n    ast.list = newList;\n}\nfunction weave(items) {\n    const branches = [];\n    while (items.length) {\n        const topKind = findTopKey(items, (sel) => true, getSelectorKind);\n        const { matches, nonmatches, empty } = breakByKind(items, topKind);\n        items = nonmatches;\n        if (matches.length) {\n            branches.push(branchOfKind(topKind, matches));\n        }\n        if (empty.length) {\n            branches.push(...terminate(empty));\n        }\n    }\n    return branches;\n}\nfunction terminate(items) {\n    const results = [];\n    for (const item of items) {\n        const terminal = item.terminal;\n        if (terminal.type === 'terminal') {\n            results.push(terminal);\n        }\n        else {\n            const { matches, rest } = partition(terminal.cont, (node) => node.type === 'terminal');\n            matches.forEach((node) => results.push(node));\n            if (rest.length) {\n                terminal.cont = rest;\n                results.push(terminal);\n            }\n        }\n    }\n    return results;\n}\nfunction breakByKind(items, selectedKind) {\n    const matches = [];\n    const nonmatches = [];\n    const empty = [];\n    for (const item of items) {\n        const simpsels = item.ast.list;\n        if (simpsels.length) {\n            const isMatch = simpsels.some(node => getSelectorKind(node) === selectedKind);\n            (isMatch ? matches : nonmatches).push(item);\n        }\n        else {\n            empty.push(item);\n        }\n    }\n    return { matches, nonmatches, empty };\n}\nfunction getSelectorKind(sel) {\n    switch (sel.type) {\n        case 'attrPresence':\n            return `attrPresence ${sel.name}`;\n        case 'attrValue':\n            return `attrValue ${sel.name}`;\n        case 'combinator':\n            return `combinator ${sel.combinator}`;\n        default:\n            return sel.type;\n    }\n}\nfunction branchOfKind(kind, items) {\n    if (kind === 'tag') {\n        return tagNameBranch(items);\n    }\n    if (kind.startsWith('attrValue ')) {\n        return attrValueBranch(kind.substring(10), items);\n    }\n    if (kind.startsWith('attrPresence ')) {\n        return attrPresenceBranch(kind.substring(13), items);\n    }\n    if (kind === 'combinator >') {\n        return combinatorBranch('>', items);\n    }\n    if (kind === 'combinator +') {\n        return combinatorBranch('+', items);\n    }\n    throw new Error(`Unsupported selector kind: ${kind}`);\n}\nfunction tagNameBranch(items) {\n    const groups = spliceAndGroup(items, (x) => x.type === 'tag', (x) => x.name);\n    const variants = Object.entries(groups).map(([name, group]) => ({\n        type: 'variant',\n        value: name,\n        cont: weave(group.items)\n    }));\n    return {\n        type: 'tagName',\n        variants: variants\n    };\n}\nfunction attrPresenceBranch(name, items) {\n    for (const item of items) {\n        spliceSimpleSelector(item, (x) => (x.type === 'attrPresence') && (x.name === name));\n    }\n    return {\n        type: 'attrPresence',\n        name: name,\n        cont: weave(items)\n    };\n}\nfunction attrValueBranch(name, items) {\n    const groups = spliceAndGroup(items, (x) => (x.type === 'attrValue') && (x.name === name), (x) => `${x.matcher} ${x.modifier || ''} ${x.value}`);\n    const matchers = [];\n    for (const group of Object.values(groups)) {\n        const sel = group.oneSimpleSelector;\n        const predicate = getAttrPredicate(sel);\n        const continuation = weave(group.items);\n        matchers.push({\n            type: 'matcher',\n            matcher: sel.matcher,\n            modifier: sel.modifier,\n            value: sel.value,\n            predicate: predicate,\n            cont: continuation\n        });\n    }\n    return {\n        type: 'attrValue',\n        name: name,\n        matchers: matchers\n    };\n}\nfunction getAttrPredicate(sel) {\n    if (sel.modifier === 'i') {\n        const expected = sel.value.toLowerCase();\n        switch (sel.matcher) {\n            case '=':\n                return (actual) => expected === actual.toLowerCase();\n            case '~=':\n                return (actual) => actual.toLowerCase().split(/[ \\t]+/).includes(expected);\n            case '^=':\n                return (actual) => actual.toLowerCase().startsWith(expected);\n            case '$=':\n                return (actual) => actual.toLowerCase().endsWith(expected);\n            case '*=':\n                return (actual) => actual.toLowerCase().includes(expected);\n            case '|=':\n                return (actual) => {\n                    const lower = actual.toLowerCase();\n                    return (expected === lower) || (lower.startsWith(expected) && lower[expected.length] === '-');\n                };\n        }\n    }\n    else {\n        const expected = sel.value;\n        switch (sel.matcher) {\n            case '=':\n                return (actual) => expected === actual;\n            case '~=':\n                return (actual) => actual.split(/[ \\t]+/).includes(expected);\n            case '^=':\n                return (actual) => actual.startsWith(expected);\n            case '$=':\n                return (actual) => actual.endsWith(expected);\n            case '*=':\n                return (actual) => actual.includes(expected);\n            case '|=':\n                return (actual) => (expected === actual) || (actual.startsWith(expected) && actual[expected.length] === '-');\n        }\n    }\n}\nfunction combinatorBranch(combinator, items) {\n    const groups = spliceAndGroup(items, (x) => (x.type === 'combinator') && (x.combinator === combinator), (x) => parseley.serialize(x.left));\n    const leftItems = [];\n    for (const group of Object.values(groups)) {\n        const rightCont = weave(group.items);\n        const leftAst = group.oneSimpleSelector.left;\n        leftItems.push({\n            ast: leftAst,\n            terminal: { type: 'popElement', cont: rightCont }\n        });\n    }\n    return {\n        type: 'pushElement',\n        combinator: combinator,\n        cont: weave(leftItems)\n    };\n}\nfunction spliceAndGroup(items, predicate, keyCallback) {\n    const groups = {};\n    while (items.length) {\n        const bestKey = findTopKey(items, predicate, keyCallback);\n        const bestKeyPredicate = (sel) => predicate(sel) && keyCallback(sel) === bestKey;\n        const hasBestKeyPredicate = (item) => item.ast.list.some(bestKeyPredicate);\n        const { matches, rest } = partition1(items, hasBestKeyPredicate);\n        let oneSimpleSelector = null;\n        for (const item of matches) {\n            const splicedNode = spliceSimpleSelector(item, bestKeyPredicate);\n            if (!oneSimpleSelector) {\n                oneSimpleSelector = splicedNode;\n            }\n        }\n        if (oneSimpleSelector == null) {\n            throw new Error('No simple selector is found.');\n        }\n        groups[bestKey] = { oneSimpleSelector: oneSimpleSelector, items: matches };\n        items = rest;\n    }\n    return groups;\n}\nfunction spliceSimpleSelector(item, predicate) {\n    const simpsels = item.ast.list;\n    const matches = new Array(simpsels.length);\n    let firstIndex = -1;\n    for (let i = simpsels.length; i-- > 0;) {\n        if (predicate(simpsels[i])) {\n            matches[i] = true;\n            firstIndex = i;\n        }\n    }\n    if (firstIndex == -1) {\n        throw new Error(`Couldn't find the required simple selector.`);\n    }\n    const result = simpsels[firstIndex];\n    item.ast.list = simpsels.filter((sel, i) => !matches[i]);\n    return result;\n}\nfunction findTopKey(items, predicate, keyCallback) {\n    const candidates = {};\n    for (const item of items) {\n        const candidates1 = {};\n        for (const node of item.ast.list.filter(predicate)) {\n            candidates1[keyCallback(node)] = true;\n        }\n        for (const key of Object.keys(candidates1)) {\n            if (candidates[key]) {\n                candidates[key]++;\n            }\n            else {\n                candidates[key] = 1;\n            }\n        }\n    }\n    let topKind = '';\n    let topCounter = 0;\n    for (const entry of Object.entries(candidates)) {\n        if (entry[1] > topCounter) {\n            topKind = entry[0];\n            topCounter = entry[1];\n        }\n    }\n    return topKind;\n}\nfunction partition(src, predicate) {\n    const matches = [];\n    const rest = [];\n    for (const x of src) {\n        if (predicate(x)) {\n            matches.push(x);\n        }\n        else {\n            rest.push(x);\n        }\n    }\n    return { matches, rest };\n}\nfunction partition1(src, predicate) {\n    const matches = [];\n    const rest = [];\n    for (const x of src) {\n        if (predicate(x)) {\n            matches.push(x);\n        }\n        else {\n            rest.push(x);\n        }\n    }\n    return { matches, rest };\n}\n\nclass Picker {\n    constructor(f) {\n        this.f = f;\n    }\n    pickAll(el) {\n        return this.f(el);\n    }\n    pick1(el, preferFirst = false) {\n        const results = this.f(el);\n        const len = results.length;\n        if (len === 0) {\n            return null;\n        }\n        if (len === 1) {\n            return results[0].value;\n        }\n        const comparator = (preferFirst)\n            ? comparatorPreferFirst\n            : comparatorPreferLast;\n        let result = results[0];\n        for (let i = 1; i < len; i++) {\n            const next = results[i];\n            if (comparator(result, next)) {\n                result = next;\n            }\n        }\n        return result.value;\n    }\n}\nfunction comparatorPreferFirst(acc, next) {\n    const diff = compareSpecificity(next.specificity, acc.specificity);\n    return diff > 0 || (diff === 0 && next.index < acc.index);\n}\nfunction comparatorPreferLast(acc, next) {\n    const diff = compareSpecificity(next.specificity, acc.specificity);\n    return diff > 0 || (diff === 0 && next.index > acc.index);\n}\n\nexport { Ast, DecisionTree, Picker, TreeifyBuilder as Treeify, Types };\n","import { isTag } from 'domhandler';\nimport { Picker } from 'selderee';\n\nfunction hp2Builder(nodes) {\n    return new Picker(handleArray(nodes));\n}\nfunction handleArray(nodes) {\n    const matchers = nodes.map(handleNode);\n    return (el, ...tail) => matchers.flatMap(m => m(el, ...tail));\n}\nfunction handleNode(node) {\n    switch (node.type) {\n        case 'terminal': {\n            const result = [node.valueContainer];\n            return (el, ...tail) => result;\n        }\n        case 'tagName':\n            return handleTagName(node);\n        case 'attrValue':\n            return handleAttrValueName(node);\n        case 'attrPresence':\n            return handleAttrPresenceName(node);\n        case 'pushElement':\n            return handlePushElementNode(node);\n        case 'popElement':\n            return handlePopElementNode(node);\n    }\n}\nfunction handleTagName(node) {\n    const variants = {};\n    for (const variant of node.variants) {\n        variants[variant.value] = handleArray(variant.cont);\n    }\n    return (el, ...tail) => {\n        const continuation = variants[el.name];\n        return (continuation) ? continuation(el, ...tail) : [];\n    };\n}\nfunction handleAttrPresenceName(node) {\n    const attrName = node.name;\n    const continuation = handleArray(node.cont);\n    return (el, ...tail) => (Object.prototype.hasOwnProperty.call(el.attribs, attrName))\n        ? continuation(el, ...tail)\n        : [];\n}\nfunction handleAttrValueName(node) {\n    const callbacks = [];\n    for (const matcher of node.matchers) {\n        const predicate = matcher.predicate;\n        const continuation = handleArray(matcher.cont);\n        callbacks.push((attr, el, ...tail) => (predicate(attr) ? continuation(el, ...tail) : []));\n    }\n    const attrName = node.name;\n    return (el, ...tail) => {\n        const attr = el.attribs[attrName];\n        return (attr || attr === '')\n            ? callbacks.flatMap(cb => cb(attr, el, ...tail))\n            : [];\n    };\n}\nfunction handlePushElementNode(node) {\n    const continuation = handleArray(node.cont);\n    const leftElementGetter = (node.combinator === '+')\n        ? getPrecedingElement\n        : getParentElement;\n    return (el, ...tail) => {\n        const next = leftElementGetter(el);\n        if (next === null) {\n            return [];\n        }\n        return continuation(next, el, ...tail);\n    };\n}\nconst getPrecedingElement = (el) => {\n    const prev = el.prev;\n    if (prev === null) {\n        return null;\n    }\n    return (isTag(prev)) ? prev : getPrecedingElement(prev);\n};\nconst getParentElement = (el) => {\n    const parent = el.parent;\n    return (parent && isTag(parent)) ? parent : null;\n};\nfunction handlePopElementNode(node) {\n    const continuation = handleArray(node.cont);\n    return (el, next, ...tail) => continuation(next, ...tail);\n}\n\nexport { hp2Builder };\n","// Generated using scripts/write-decode-map.ts\nexport default new Uint16Array(\n// prettier-ignore\n\"\\u1d41<\\xd5\\u0131\\u028a\\u049d\\u057b\\u05d0\\u0675\\u06de\\u07a2\\u07d6\\u080f\\u0a4a\\u0a91\\u0da1\\u0e6d\\u0f09\\u0f26\\u10ca\\u1228\\u12e1\\u1415\\u149d\\u14c3\\u14df\\u1525\\0\\0\\0\\0\\0\\0\\u156b\\u16cd\\u198d\\u1c12\\u1ddd\\u1f7e\\u2060\\u21b0\\u228d\\u23c0\\u23fb\\u2442\\u2824\\u2912\\u2d08\\u2e48\\u2fce\\u3016\\u32ba\\u3639\\u37ac\\u38fe\\u3a28\\u3a71\\u3ae0\\u3b2e\\u0800EMabcfglmnoprstu\\\\bfms\\x7f\\x84\\x8b\\x90\\x95\\x98\\xa6\\xb3\\xb9\\xc8\\xcflig\\u803b\\xc6\\u40c6P\\u803b&\\u4026cute\\u803b\\xc1\\u40c1reve;\\u4102\\u0100iyx}rc\\u803b\\xc2\\u40c2;\\u4410r;\\uc000\\ud835\\udd04rave\\u803b\\xc0\\u40c0pha;\\u4391acr;\\u4100d;\\u6a53\\u0100gp\\x9d\\xa1on;\\u4104f;\\uc000\\ud835\\udd38plyFunction;\\u6061ing\\u803b\\xc5\\u40c5\\u0100cs\\xbe\\xc3r;\\uc000\\ud835\\udc9cign;\\u6254ilde\\u803b\\xc3\\u40c3ml\\u803b\\xc4\\u40c4\\u0400aceforsu\\xe5\\xfb\\xfe\\u0117\\u011c\\u0122\\u0127\\u012a\\u0100cr\\xea\\xf2kslash;\\u6216\\u0176\\xf6\\xf8;\\u6ae7ed;\\u6306y;\\u4411\\u0180crt\\u0105\\u010b\\u0114ause;\\u6235noullis;\\u612ca;\\u4392r;\\uc000\\ud835\\udd05pf;\\uc000\\ud835\\udd39eve;\\u42d8c\\xf2\\u0113mpeq;\\u624e\\u0700HOacdefhilorsu\\u014d\\u0151\\u0156\\u0180\\u019e\\u01a2\\u01b5\\u01b7\\u01ba\\u01dc\\u0215\\u0273\\u0278\\u027ecy;\\u4427PY\\u803b\\xa9\\u40a9\\u0180cpy\\u015d\\u0162\\u017aute;\\u4106\\u0100;i\\u0167\\u0168\\u62d2talDifferentialD;\\u6145leys;\\u612d\\u0200aeio\\u0189\\u018e\\u0194\\u0198ron;\\u410cdil\\u803b\\xc7\\u40c7rc;\\u4108nint;\\u6230ot;\\u410a\\u0100dn\\u01a7\\u01adilla;\\u40b8terDot;\\u40b7\\xf2\\u017fi;\\u43a7rcle\\u0200DMPT\\u01c7\\u01cb\\u01d1\\u01d6ot;\\u6299inus;\\u6296lus;\\u6295imes;\\u6297o\\u0100cs\\u01e2\\u01f8kwiseContourIntegral;\\u6232eCurly\\u0100DQ\\u0203\\u020foubleQuote;\\u601duote;\\u6019\\u0200lnpu\\u021e\\u0228\\u0247\\u0255on\\u0100;e\\u0225\\u0226\\u6237;\\u6a74\\u0180git\\u022f\\u0236\\u023aruent;\\u6261nt;\\u622fourIntegral;\\u622e\\u0100fr\\u024c\\u024e;\\u6102oduct;\\u6210nterClockwiseContourIntegral;\\u6233oss;\\u6a2fcr;\\uc000\\ud835\\udc9ep\\u0100;C\\u0284\\u0285\\u62d3ap;\\u624d\\u0580DJSZacefios\\u02a0\\u02ac\\u02b0\\u02b4\\u02b8\\u02cb\\u02d7\\u02e1\\u02e6\\u0333\\u048d\\u0100;o\\u0179\\u02a5trahd;\\u6911cy;\\u4402cy;\\u4405cy;\\u440f\\u0180grs\\u02bf\\u02c4\\u02c7ger;\\u6021r;\\u61a1hv;\\u6ae4\\u0100ay\\u02d0\\u02d5ron;\\u410e;\\u4414l\\u0100;t\\u02dd\\u02de\\u6207a;\\u4394r;\\uc000\\ud835\\udd07\\u0100af\\u02eb\\u0327\\u0100cm\\u02f0\\u0322ritical\\u0200ADGT\\u0300\\u0306\\u0316\\u031ccute;\\u40b4o\\u0174\\u030b\\u030d;\\u42d9bleAcute;\\u42ddrave;\\u4060ilde;\\u42dcond;\\u62c4ferentialD;\\u6146\\u0470\\u033d\\0\\0\\0\\u0342\\u0354\\0\\u0405f;\\uc000\\ud835\\udd3b\\u0180;DE\\u0348\\u0349\\u034d\\u40a8ot;\\u60dcqual;\\u6250ble\\u0300CDLRUV\\u0363\\u0372\\u0382\\u03cf\\u03e2\\u03f8ontourIntegra\\xec\\u0239o\\u0274\\u0379\\0\\0\\u037b\\xbb\\u0349nArrow;\\u61d3\\u0100eo\\u0387\\u03a4ft\\u0180ART\\u0390\\u0396\\u03a1rrow;\\u61d0ightArrow;\\u61d4e\\xe5\\u02cang\\u0100LR\\u03ab\\u03c4eft\\u0100AR\\u03b3\\u03b9rrow;\\u67f8ightArrow;\\u67faightArrow;\\u67f9ight\\u0100AT\\u03d8\\u03derrow;\\u61d2ee;\\u62a8p\\u0241\\u03e9\\0\\0\\u03efrrow;\\u61d1ownArrow;\\u61d5erticalBar;\\u6225n\\u0300ABLRTa\\u0412\\u042a\\u0430\\u045e\\u047f\\u037crrow\\u0180;BU\\u041d\\u041e\\u0422\\u6193ar;\\u6913pArrow;\\u61f5reve;\\u4311eft\\u02d2\\u043a\\0\\u0446\\0\\u0450ightVector;\\u6950eeVector;\\u695eector\\u0100;B\\u0459\\u045a\\u61bdar;\\u6956ight\\u01d4\\u0467\\0\\u0471eeVector;\\u695fector\\u0100;B\\u047a\\u047b\\u61c1ar;\\u6957ee\\u0100;A\\u0486\\u0487\\u62a4rrow;\\u61a7\\u0100ct\\u0492\\u0497r;\\uc000\\ud835\\udc9frok;\\u4110\\u0800NTacdfglmopqstux\\u04bd\\u04c0\\u04c4\\u04cb\\u04de\\u04e2\\u04e7\\u04ee\\u04f5\\u0521\\u052f\\u0536\\u0552\\u055d\\u0560\\u0565G;\\u414aH\\u803b\\xd0\\u40d0cute\\u803b\\xc9\\u40c9\\u0180aiy\\u04d2\\u04d7\\u04dcron;\\u411arc\\u803b\\xca\\u40ca;\\u442dot;\\u4116r;\\uc000\\ud835\\udd08rave\\u803b\\xc8\\u40c8ement;\\u6208\\u0100ap\\u04fa\\u04fecr;\\u4112ty\\u0253\\u0506\\0\\0\\u0512mallSquare;\\u65fberySmallSquare;\\u65ab\\u0100gp\\u0526\\u052aon;\\u4118f;\\uc000\\ud835\\udd3csilon;\\u4395u\\u0100ai\\u053c\\u0549l\\u0100;T\\u0542\\u0543\\u6a75ilde;\\u6242librium;\\u61cc\\u0100ci\\u0557\\u055ar;\\u6130m;\\u6a73a;\\u4397ml\\u803b\\xcb\\u40cb\\u0100ip\\u056a\\u056fsts;\\u6203onentialE;\\u6147\\u0280cfios\\u0585\\u0588\\u058d\\u05b2\\u05ccy;\\u4424r;\\uc000\\ud835\\udd09lled\\u0253\\u0597\\0\\0\\u05a3mallSquare;\\u65fcerySmallSquare;\\u65aa\\u0370\\u05ba\\0\\u05bf\\0\\0\\u05c4f;\\uc000\\ud835\\udd3dAll;\\u6200riertrf;\\u6131c\\xf2\\u05cb\\u0600JTabcdfgorst\\u05e8\\u05ec\\u05ef\\u05fa\\u0600\\u0612\\u0616\\u061b\\u061d\\u0623\\u066c\\u0672cy;\\u4403\\u803b>\\u403emma\\u0100;d\\u05f7\\u05f8\\u4393;\\u43dcreve;\\u411e\\u0180eiy\\u0607\\u060c\\u0610dil;\\u4122rc;\\u411c;\\u4413ot;\\u4120r;\\uc000\\ud835\\udd0a;\\u62d9pf;\\uc000\\ud835\\udd3eeater\\u0300EFGLST\\u0635\\u0644\\u064e\\u0656\\u065b\\u0666qual\\u0100;L\\u063e\\u063f\\u6265ess;\\u62dbullEqual;\\u6267reater;\\u6aa2ess;\\u6277lantEqual;\\u6a7eilde;\\u6273cr;\\uc000\\ud835\\udca2;\\u626b\\u0400Aacfiosu\\u0685\\u068b\\u0696\\u069b\\u069e\\u06aa\\u06be\\u06caRDcy;\\u442a\\u0100ct\\u0690\\u0694ek;\\u42c7;\\u405eirc;\\u4124r;\\u610clbertSpace;\\u610b\\u01f0\\u06af\\0\\u06b2f;\\u610dizontalLine;\\u6500\\u0100ct\\u06c3\\u06c5\\xf2\\u06a9rok;\\u4126mp\\u0144\\u06d0\\u06d8ownHum\\xf0\\u012fqual;\\u624f\\u0700EJOacdfgmnostu\\u06fa\\u06fe\\u0703\\u0707\\u070e\\u071a\\u071e\\u0721\\u0728\\u0744\\u0778\\u078b\\u078f\\u0795cy;\\u4415lig;\\u4132cy;\\u4401cute\\u803b\\xcd\\u40cd\\u0100iy\\u0713\\u0718rc\\u803b\\xce\\u40ce;\\u4418ot;\\u4130r;\\u6111rave\\u803b\\xcc\\u40cc\\u0180;ap\\u0720\\u072f\\u073f\\u0100cg\\u0734\\u0737r;\\u412ainaryI;\\u6148lie\\xf3\\u03dd\\u01f4\\u0749\\0\\u0762\\u0100;e\\u074d\\u074e\\u622c\\u0100gr\\u0753\\u0758ral;\\u622bsection;\\u62c2isible\\u0100CT\\u076c\\u0772omma;\\u6063imes;\\u6062\\u0180gpt\\u077f\\u0783\\u0788on;\\u412ef;\\uc000\\ud835\\udd40a;\\u4399cr;\\u6110ilde;\\u4128\\u01eb\\u079a\\0\\u079ecy;\\u4406l\\u803b\\xcf\\u40cf\\u0280cfosu\\u07ac\\u07b7\\u07bc\\u07c2\\u07d0\\u0100iy\\u07b1\\u07b5rc;\\u4134;\\u4419r;\\uc000\\ud835\\udd0dpf;\\uc000\\ud835\\udd41\\u01e3\\u07c7\\0\\u07ccr;\\uc000\\ud835\\udca5rcy;\\u4408kcy;\\u4404\\u0380HJacfos\\u07e4\\u07e8\\u07ec\\u07f1\\u07fd\\u0802\\u0808cy;\\u4425cy;\\u440cppa;\\u439a\\u0100ey\\u07f6\\u07fbdil;\\u4136;\\u441ar;\\uc000\\ud835\\udd0epf;\\uc000\\ud835\\udd42cr;\\uc000\\ud835\\udca6\\u0580JTaceflmost\\u0825\\u0829\\u082c\\u0850\\u0863\\u09b3\\u09b8\\u09c7\\u09cd\\u0a37\\u0a47cy;\\u4409\\u803b<\\u403c\\u0280cmnpr\\u0837\\u083c\\u0841\\u0844\\u084dute;\\u4139bda;\\u439bg;\\u67ealacetrf;\\u6112r;\\u619e\\u0180aey\\u0857\\u085c\\u0861ron;\\u413ddil;\\u413b;\\u441b\\u0100fs\\u0868\\u0970t\\u0500ACDFRTUVar\\u087e\\u08a9\\u08b1\\u08e0\\u08e6\\u08fc\\u092f\\u095b\\u0390\\u096a\\u0100nr\\u0883\\u088fgleBracket;\\u67e8row\\u0180;BR\\u0899\\u089a\\u089e\\u6190ar;\\u61e4ightArrow;\\u61c6eiling;\\u6308o\\u01f5\\u08b7\\0\\u08c3bleBracket;\\u67e6n\\u01d4\\u08c8\\0\\u08d2eeVector;\\u6961ector\\u0100;B\\u08db\\u08dc\\u61c3ar;\\u6959loor;\\u630aight\\u0100AV\\u08ef\\u08f5rrow;\\u6194ector;\\u694e\\u0100er\\u0901\\u0917e\\u0180;AV\\u0909\\u090a\\u0910\\u62a3rrow;\\u61a4ector;\\u695aiangle\\u0180;BE\\u0924\\u0925\\u0929\\u62b2ar;\\u69cfqual;\\u62b4p\\u0180DTV\\u0937\\u0942\\u094cownVector;\\u6951eeVector;\\u6960ector\\u0100;B\\u0956\\u0957\\u61bfar;\\u6958ector\\u0100;B\\u0965\\u0966\\u61bcar;\\u6952ight\\xe1\\u039cs\\u0300EFGLST\\u097e\\u098b\\u0995\\u099d\\u09a2\\u09adqualGreater;\\u62daullEqual;\\u6266reater;\\u6276ess;\\u6aa1lantEqual;\\u6a7dilde;\\u6272r;\\uc000\\ud835\\udd0f\\u0100;e\\u09bd\\u09be\\u62d8ftarrow;\\u61daidot;\\u413f\\u0180npw\\u09d4\\u0a16\\u0a1bg\\u0200LRlr\\u09de\\u09f7\\u0a02\\u0a10eft\\u0100AR\\u09e6\\u09ecrrow;\\u67f5ightArrow;\\u67f7ightArrow;\\u67f6eft\\u0100ar\\u03b3\\u0a0aight\\xe1\\u03bfight\\xe1\\u03caf;\\uc000\\ud835\\udd43er\\u0100LR\\u0a22\\u0a2ceftArrow;\\u6199ightArrow;\\u6198\\u0180cht\\u0a3e\\u0a40\\u0a42\\xf2\\u084c;\\u61b0rok;\\u4141;\\u626a\\u0400acefiosu\\u0a5a\\u0a5d\\u0a60\\u0a77\\u0a7c\\u0a85\\u0a8b\\u0a8ep;\\u6905y;\\u441c\\u0100dl\\u0a65\\u0a6fiumSpace;\\u605flintrf;\\u6133r;\\uc000\\ud835\\udd10nusPlus;\\u6213pf;\\uc000\\ud835\\udd44c\\xf2\\u0a76;\\u439c\\u0480Jacefostu\\u0aa3\\u0aa7\\u0aad\\u0ac0\\u0b14\\u0b19\\u0d91\\u0d97\\u0d9ecy;\\u440acute;\\u4143\\u0180aey\\u0ab4\\u0ab9\\u0aberon;\\u4147dil;\\u4145;\\u441d\\u0180gsw\\u0ac7\\u0af0\\u0b0eative\\u0180MTV\\u0ad3\\u0adf\\u0ae8ediumSpace;\\u600bhi\\u0100cn\\u0ae6\\u0ad8\\xeb\\u0ad9eryThi\\xee\\u0ad9ted\\u0100GL\\u0af8\\u0b06reaterGreate\\xf2\\u0673essLes\\xf3\\u0a48Line;\\u400ar;\\uc000\\ud835\\udd11\\u0200Bnpt\\u0b22\\u0b28\\u0b37\\u0b3areak;\\u6060BreakingSpace;\\u40a0f;\\u6115\\u0680;CDEGHLNPRSTV\\u0b55\\u0b56\\u0b6a\\u0b7c\\u0ba1\\u0beb\\u0c04\\u0c5e\\u0c84\\u0ca6\\u0cd8\\u0d61\\u0d85\\u6aec\\u0100ou\\u0b5b\\u0b64ngruent;\\u6262pCap;\\u626doubleVerticalBar;\\u6226\\u0180lqx\\u0b83\\u0b8a\\u0b9bement;\\u6209ual\\u0100;T\\u0b92\\u0b93\\u6260ilde;\\uc000\\u2242\\u0338ists;\\u6204reater\\u0380;EFGLST\\u0bb6\\u0bb7\\u0bbd\\u0bc9\\u0bd3\\u0bd8\\u0be5\\u626fqual;\\u6271ullEqual;\\uc000\\u2267\\u0338reater;\\uc000\\u226b\\u0338ess;\\u6279lantEqual;\\uc000\\u2a7e\\u0338ilde;\\u6275ump\\u0144\\u0bf2\\u0bfdownHump;\\uc000\\u224e\\u0338qual;\\uc000\\u224f\\u0338e\\u0100fs\\u0c0a\\u0c27tTriangle\\u0180;BE\\u0c1a\\u0c1b\\u0c21\\u62eaar;\\uc000\\u29cf\\u0338qual;\\u62ecs\\u0300;EGLST\\u0c35\\u0c36\\u0c3c\\u0c44\\u0c4b\\u0c58\\u626equal;\\u6270reater;\\u6278ess;\\uc000\\u226a\\u0338lantEqual;\\uc000\\u2a7d\\u0338ilde;\\u6274ested\\u0100GL\\u0c68\\u0c79reaterGreater;\\uc000\\u2aa2\\u0338essLess;\\uc000\\u2aa1\\u0338recedes\\u0180;ES\\u0c92\\u0c93\\u0c9b\\u6280qual;\\uc000\\u2aaf\\u0338lantEqual;\\u62e0\\u0100ei\\u0cab\\u0cb9verseElement;\\u620cghtTriangle\\u0180;BE\\u0ccb\\u0ccc\\u0cd2\\u62ebar;\\uc000\\u29d0\\u0338qual;\\u62ed\\u0100qu\\u0cdd\\u0d0cuareSu\\u0100bp\\u0ce8\\u0cf9set\\u0100;E\\u0cf0\\u0cf3\\uc000\\u228f\\u0338qual;\\u62e2erset\\u0100;E\\u0d03\\u0d06\\uc000\\u2290\\u0338qual;\\u62e3\\u0180bcp\\u0d13\\u0d24\\u0d4eset\\u0100;E\\u0d1b\\u0d1e\\uc000\\u2282\\u20d2qual;\\u6288ceeds\\u0200;EST\\u0d32\\u0d33\\u0d3b\\u0d46\\u6281qual;\\uc000\\u2ab0\\u0338lantEqual;\\u62e1ilde;\\uc000\\u227f\\u0338erset\\u0100;E\\u0d58\\u0d5b\\uc000\\u2283\\u20d2qual;\\u6289ilde\\u0200;EFT\\u0d6e\\u0d6f\\u0d75\\u0d7f\\u6241qual;\\u6244ullEqual;\\u6247ilde;\\u6249erticalBar;\\u6224cr;\\uc000\\ud835\\udca9ilde\\u803b\\xd1\\u40d1;\\u439d\\u0700Eacdfgmoprstuv\\u0dbd\\u0dc2\\u0dc9\\u0dd5\\u0ddb\\u0de0\\u0de7\\u0dfc\\u0e02\\u0e20\\u0e22\\u0e32\\u0e3f\\u0e44lig;\\u4152cute\\u803b\\xd3\\u40d3\\u0100iy\\u0dce\\u0dd3rc\\u803b\\xd4\\u40d4;\\u441eblac;\\u4150r;\\uc000\\ud835\\udd12rave\\u803b\\xd2\\u40d2\\u0180aei\\u0dee\\u0df2\\u0df6cr;\\u414cga;\\u43a9cron;\\u439fpf;\\uc000\\ud835\\udd46enCurly\\u0100DQ\\u0e0e\\u0e1aoubleQuote;\\u601cuote;\\u6018;\\u6a54\\u0100cl\\u0e27\\u0e2cr;\\uc000\\ud835\\udcaaash\\u803b\\xd8\\u40d8i\\u016c\\u0e37\\u0e3cde\\u803b\\xd5\\u40d5es;\\u6a37ml\\u803b\\xd6\\u40d6er\\u0100BP\\u0e4b\\u0e60\\u0100ar\\u0e50\\u0e53r;\\u603eac\\u0100ek\\u0e5a\\u0e5c;\\u63deet;\\u63b4arenthesis;\\u63dc\\u0480acfhilors\\u0e7f\\u0e87\\u0e8a\\u0e8f\\u0e92\\u0e94\\u0e9d\\u0eb0\\u0efcrtialD;\\u6202y;\\u441fr;\\uc000\\ud835\\udd13i;\\u43a6;\\u43a0usMinus;\\u40b1\\u0100ip\\u0ea2\\u0eadncareplan\\xe5\\u069df;\\u6119\\u0200;eio\\u0eb9\\u0eba\\u0ee0\\u0ee4\\u6abbcedes\\u0200;EST\\u0ec8\\u0ec9\\u0ecf\\u0eda\\u627aqual;\\u6aaflantEqual;\\u627cilde;\\u627eme;\\u6033\\u0100dp\\u0ee9\\u0eeeuct;\\u620fortion\\u0100;a\\u0225\\u0ef9l;\\u621d\\u0100ci\\u0f01\\u0f06r;\\uc000\\ud835\\udcab;\\u43a8\\u0200Ufos\\u0f11\\u0f16\\u0f1b\\u0f1fOT\\u803b\\\"\\u4022r;\\uc000\\ud835\\udd14pf;\\u611acr;\\uc000\\ud835\\udcac\\u0600BEacefhiorsu\\u0f3e\\u0f43\\u0f47\\u0f60\\u0f73\\u0fa7\\u0faa\\u0fad\\u1096\\u10a9\\u10b4\\u10bearr;\\u6910G\\u803b\\xae\\u40ae\\u0180cnr\\u0f4e\\u0f53\\u0f56ute;\\u4154g;\\u67ebr\\u0100;t\\u0f5c\\u0f5d\\u61a0l;\\u6916\\u0180aey\\u0f67\\u0f6c\\u0f71ron;\\u4158dil;\\u4156;\\u4420\\u0100;v\\u0f78\\u0f79\\u611cerse\\u0100EU\\u0f82\\u0f99\\u0100lq\\u0f87\\u0f8eement;\\u620builibrium;\\u61cbpEquilibrium;\\u696fr\\xbb\\u0f79o;\\u43a1ght\\u0400ACDFTUVa\\u0fc1\\u0feb\\u0ff3\\u1022\\u1028\\u105b\\u1087\\u03d8\\u0100nr\\u0fc6\\u0fd2gleBracket;\\u67e9row\\u0180;BL\\u0fdc\\u0fdd\\u0fe1\\u6192ar;\\u61e5eftArrow;\\u61c4eiling;\\u6309o\\u01f5\\u0ff9\\0\\u1005bleBracket;\\u67e7n\\u01d4\\u100a\\0\\u1014eeVector;\\u695dector\\u0100;B\\u101d\\u101e\\u61c2ar;\\u6955loor;\\u630b\\u0100er\\u102d\\u1043e\\u0180;AV\\u1035\\u1036\\u103c\\u62a2rrow;\\u61a6ector;\\u695biangle\\u0180;BE\\u1050\\u1051\\u1055\\u62b3ar;\\u69d0qual;\\u62b5p\\u0180DTV\\u1063\\u106e\\u1078ownVector;\\u694feeVector;\\u695cector\\u0100;B\\u1082\\u1083\\u61bear;\\u6954ector\\u0100;B\\u1091\\u1092\\u61c0ar;\\u6953\\u0100pu\\u109b\\u109ef;\\u611dndImplies;\\u6970ightarrow;\\u61db\\u0100ch\\u10b9\\u10bcr;\\u611b;\\u61b1leDelayed;\\u69f4\\u0680HOacfhimoqstu\\u10e4\\u10f1\\u10f7\\u10fd\\u1119\\u111e\\u1151\\u1156\\u1161\\u1167\\u11b5\\u11bb\\u11bf\\u0100Cc\\u10e9\\u10eeHcy;\\u4429y;\\u4428FTcy;\\u442ccute;\\u415a\\u0280;aeiy\\u1108\\u1109\\u110e\\u1113\\u1117\\u6abcron;\\u4160dil;\\u415erc;\\u415c;\\u4421r;\\uc000\\ud835\\udd16ort\\u0200DLRU\\u112a\\u1134\\u113e\\u1149ownArrow\\xbb\\u041eeftArrow\\xbb\\u089aightArrow\\xbb\\u0fddpArrow;\\u6191gma;\\u43a3allCircle;\\u6218pf;\\uc000\\ud835\\udd4a\\u0272\\u116d\\0\\0\\u1170t;\\u621aare\\u0200;ISU\\u117b\\u117c\\u1189\\u11af\\u65a1ntersection;\\u6293u\\u0100bp\\u118f\\u119eset\\u0100;E\\u1197\\u1198\\u628fqual;\\u6291erset\\u0100;E\\u11a8\\u11a9\\u6290qual;\\u6292nion;\\u6294cr;\\uc000\\ud835\\udcaear;\\u62c6\\u0200bcmp\\u11c8\\u11db\\u1209\\u120b\\u0100;s\\u11cd\\u11ce\\u62d0et\\u0100;E\\u11cd\\u11d5qual;\\u6286\\u0100ch\\u11e0\\u1205eeds\\u0200;EST\\u11ed\\u11ee\\u11f4\\u11ff\\u627bqual;\\u6ab0lantEqual;\\u627dilde;\\u627fTh\\xe1\\u0f8c;\\u6211\\u0180;es\\u1212\\u1213\\u1223\\u62d1rset\\u0100;E\\u121c\\u121d\\u6283qual;\\u6287et\\xbb\\u1213\\u0580HRSacfhiors\\u123e\\u1244\\u1249\\u1255\\u125e\\u1271\\u1276\\u129f\\u12c2\\u12c8\\u12d1ORN\\u803b\\xde\\u40deADE;\\u6122\\u0100Hc\\u124e\\u1252cy;\\u440by;\\u4426\\u0100bu\\u125a\\u125c;\\u4009;\\u43a4\\u0180aey\\u1265\\u126a\\u126fron;\\u4164dil;\\u4162;\\u4422r;\\uc000\\ud835\\udd17\\u0100ei\\u127b\\u1289\\u01f2\\u1280\\0\\u1287efore;\\u6234a;\\u4398\\u0100cn\\u128e\\u1298kSpace;\\uc000\\u205f\\u200aSpace;\\u6009lde\\u0200;EFT\\u12ab\\u12ac\\u12b2\\u12bc\\u623cqual;\\u6243ullEqual;\\u6245ilde;\\u6248pf;\\uc000\\ud835\\udd4bipleDot;\\u60db\\u0100ct\\u12d6\\u12dbr;\\uc000\\ud835\\udcafrok;\\u4166\\u0ae1\\u12f7\\u130e\\u131a\\u1326\\0\\u132c\\u1331\\0\\0\\0\\0\\0\\u1338\\u133d\\u1377\\u1385\\0\\u13ff\\u1404\\u140a\\u1410\\u0100cr\\u12fb\\u1301ute\\u803b\\xda\\u40dar\\u0100;o\\u1307\\u1308\\u619fcir;\\u6949r\\u01e3\\u1313\\0\\u1316y;\\u440eve;\\u416c\\u0100iy\\u131e\\u1323rc\\u803b\\xdb\\u40db;\\u4423blac;\\u4170r;\\uc000\\ud835\\udd18rave\\u803b\\xd9\\u40d9acr;\\u416a\\u0100di\\u1341\\u1369er\\u0100BP\\u1348\\u135d\\u0100ar\\u134d\\u1350r;\\u405fac\\u0100ek\\u1357\\u1359;\\u63dfet;\\u63b5arenthesis;\\u63ddon\\u0100;P\\u1370\\u1371\\u62c3lus;\\u628e\\u0100gp\\u137b\\u137fon;\\u4172f;\\uc000\\ud835\\udd4c\\u0400ADETadps\\u1395\\u13ae\\u13b8\\u13c4\\u03e8\\u13d2\\u13d7\\u13f3rrow\\u0180;BD\\u1150\\u13a0\\u13a4ar;\\u6912ownArrow;\\u61c5ownArrow;\\u6195quilibrium;\\u696eee\\u0100;A\\u13cb\\u13cc\\u62a5rrow;\\u61a5own\\xe1\\u03f3er\\u0100LR\\u13de\\u13e8eftArrow;\\u6196ightArrow;\\u6197i\\u0100;l\\u13f9\\u13fa\\u43d2on;\\u43a5ing;\\u416ecr;\\uc000\\ud835\\udcb0ilde;\\u4168ml\\u803b\\xdc\\u40dc\\u0480Dbcdefosv\\u1427\\u142c\\u1430\\u1433\\u143e\\u1485\\u148a\\u1490\\u1496ash;\\u62abar;\\u6aeby;\\u4412ash\\u0100;l\\u143b\\u143c\\u62a9;\\u6ae6\\u0100er\\u1443\\u1445;\\u62c1\\u0180bty\\u144c\\u1450\\u147aar;\\u6016\\u0100;i\\u144f\\u1455cal\\u0200BLST\\u1461\\u1465\\u146a\\u1474ar;\\u6223ine;\\u407ceparator;\\u6758ilde;\\u6240ThinSpace;\\u600ar;\\uc000\\ud835\\udd19pf;\\uc000\\ud835\\udd4dcr;\\uc000\\ud835\\udcb1dash;\\u62aa\\u0280cefos\\u14a7\\u14ac\\u14b1\\u14b6\\u14bcirc;\\u4174dge;\\u62c0r;\\uc000\\ud835\\udd1apf;\\uc000\\ud835\\udd4ecr;\\uc000\\ud835\\udcb2\\u0200fios\\u14cb\\u14d0\\u14d2\\u14d8r;\\uc000\\ud835\\udd1b;\\u439epf;\\uc000\\ud835\\udd4fcr;\\uc000\\ud835\\udcb3\\u0480AIUacfosu\\u14f1\\u14f5\\u14f9\\u14fd\\u1504\\u150f\\u1514\\u151a\\u1520cy;\\u442fcy;\\u4407cy;\\u442ecute\\u803b\\xdd\\u40dd\\u0100iy\\u1509\\u150drc;\\u4176;\\u442br;\\uc000\\ud835\\udd1cpf;\\uc000\\ud835\\udd50cr;\\uc000\\ud835\\udcb4ml;\\u4178\\u0400Hacdefos\\u1535\\u1539\\u153f\\u154b\\u154f\\u155d\\u1560\\u1564cy;\\u4416cute;\\u4179\\u0100ay\\u1544\\u1549ron;\\u417d;\\u4417ot;\\u417b\\u01f2\\u1554\\0\\u155boWidt\\xe8\\u0ad9a;\\u4396r;\\u6128pf;\\u6124cr;\\uc000\\ud835\\udcb5\\u0be1\\u1583\\u158a\\u1590\\0\\u15b0\\u15b6\\u15bf\\0\\0\\0\\0\\u15c6\\u15db\\u15eb\\u165f\\u166d\\0\\u1695\\u169b\\u16b2\\u16b9\\0\\u16becute\\u803b\\xe1\\u40e1reve;\\u4103\\u0300;Ediuy\\u159c\\u159d\\u15a1\\u15a3\\u15a8\\u15ad\\u623e;\\uc000\\u223e\\u0333;\\u623frc\\u803b\\xe2\\u40e2te\\u80bb\\xb4\\u0306;\\u4430lig\\u803b\\xe6\\u40e6\\u0100;r\\xb2\\u15ba;\\uc000\\ud835\\udd1erave\\u803b\\xe0\\u40e0\\u0100ep\\u15ca\\u15d6\\u0100fp\\u15cf\\u15d4sym;\\u6135\\xe8\\u15d3ha;\\u43b1\\u0100ap\\u15dfc\\u0100cl\\u15e4\\u15e7r;\\u4101g;\\u6a3f\\u0264\\u15f0\\0\\0\\u160a\\u0280;adsv\\u15fa\\u15fb\\u15ff\\u1601\\u1607\\u6227nd;\\u6a55;\\u6a5clope;\\u6a58;\\u6a5a\\u0380;elmrsz\\u1618\\u1619\\u161b\\u161e\\u163f\\u164f\\u1659\\u6220;\\u69a4e\\xbb\\u1619sd\\u0100;a\\u1625\\u1626\\u6221\\u0461\\u1630\\u1632\\u1634\\u1636\\u1638\\u163a\\u163c\\u163e;\\u69a8;\\u69a9;\\u69aa;\\u69ab;\\u69ac;\\u69ad;\\u69ae;\\u69aft\\u0100;v\\u1645\\u1646\\u621fb\\u0100;d\\u164c\\u164d\\u62be;\\u699d\\u0100pt\\u1654\\u1657h;\\u6222\\xbb\\xb9arr;\\u637c\\u0100gp\\u1663\\u1667on;\\u4105f;\\uc000\\ud835\\udd52\\u0380;Eaeiop\\u12c1\\u167b\\u167d\\u1682\\u1684\\u1687\\u168a;\\u6a70cir;\\u6a6f;\\u624ad;\\u624bs;\\u4027rox\\u0100;e\\u12c1\\u1692\\xf1\\u1683ing\\u803b\\xe5\\u40e5\\u0180cty\\u16a1\\u16a6\\u16a8r;\\uc000\\ud835\\udcb6;\\u402amp\\u0100;e\\u12c1\\u16af\\xf1\\u0288ilde\\u803b\\xe3\\u40e3ml\\u803b\\xe4\\u40e4\\u0100ci\\u16c2\\u16c8onin\\xf4\\u0272nt;\\u6a11\\u0800Nabcdefiklnoprsu\\u16ed\\u16f1\\u1730\\u173c\\u1743\\u1748\\u1778\\u177d\\u17e0\\u17e6\\u1839\\u1850\\u170d\\u193d\\u1948\\u1970ot;\\u6aed\\u0100cr\\u16f6\\u171ek\\u0200ceps\\u1700\\u1705\\u170d\\u1713ong;\\u624cpsilon;\\u43f6rime;\\u6035im\\u0100;e\\u171a\\u171b\\u623dq;\\u62cd\\u0176\\u1722\\u1726ee;\\u62bded\\u0100;g\\u172c\\u172d\\u6305e\\xbb\\u172drk\\u0100;t\\u135c\\u1737brk;\\u63b6\\u0100oy\\u1701\\u1741;\\u4431quo;\\u601e\\u0280cmprt\\u1753\\u175b\\u1761\\u1764\\u1768aus\\u0100;e\\u010a\\u0109ptyv;\\u69b0s\\xe9\\u170cno\\xf5\\u0113\\u0180ahw\\u176f\\u1771\\u1773;\\u43b2;\\u6136een;\\u626cr;\\uc000\\ud835\\udd1fg\\u0380costuvw\\u178d\\u179d\\u17b3\\u17c1\\u17d5\\u17db\\u17de\\u0180aiu\\u1794\\u1796\\u179a\\xf0\\u0760rc;\\u65efp\\xbb\\u1371\\u0180dpt\\u17a4\\u17a8\\u17adot;\\u6a00lus;\\u6a01imes;\\u6a02\\u0271\\u17b9\\0\\0\\u17becup;\\u6a06ar;\\u6605riangle\\u0100du\\u17cd\\u17d2own;\\u65bdp;\\u65b3plus;\\u6a04e\\xe5\\u1444\\xe5\\u14adarow;\\u690d\\u0180ako\\u17ed\\u1826\\u1835\\u0100cn\\u17f2\\u1823k\\u0180lst\\u17fa\\u05ab\\u1802ozenge;\\u69ebriangle\\u0200;dlr\\u1812\\u1813\\u1818\\u181d\\u65b4own;\\u65beeft;\\u65c2ight;\\u65b8k;\\u6423\\u01b1\\u182b\\0\\u1833\\u01b2\\u182f\\0\\u1831;\\u6592;\\u65914;\\u6593ck;\\u6588\\u0100eo\\u183e\\u184d\\u0100;q\\u1843\\u1846\\uc000=\\u20e5uiv;\\uc000\\u2261\\u20e5t;\\u6310\\u0200ptwx\\u1859\\u185e\\u1867\\u186cf;\\uc000\\ud835\\udd53\\u0100;t\\u13cb\\u1863om\\xbb\\u13cctie;\\u62c8\\u0600DHUVbdhmptuv\\u1885\\u1896\\u18aa\\u18bb\\u18d7\\u18db\\u18ec\\u18ff\\u1905\\u190a\\u1910\\u1921\\u0200LRlr\\u188e\\u1890\\u1892\\u1894;\\u6557;\\u6554;\\u6556;\\u6553\\u0280;DUdu\\u18a1\\u18a2\\u18a4\\u18a6\\u18a8\\u6550;\\u6566;\\u6569;\\u6564;\\u6567\\u0200LRlr\\u18b3\\u18b5\\u18b7\\u18b9;\\u655d;\\u655a;\\u655c;\\u6559\\u0380;HLRhlr\\u18ca\\u18cb\\u18cd\\u18cf\\u18d1\\u18d3\\u18d5\\u6551;\\u656c;\\u6563;\\u6560;\\u656b;\\u6562;\\u655fox;\\u69c9\\u0200LRlr\\u18e4\\u18e6\\u18e8\\u18ea;\\u6555;\\u6552;\\u6510;\\u650c\\u0280;DUdu\\u06bd\\u18f7\\u18f9\\u18fb\\u18fd;\\u6565;\\u6568;\\u652c;\\u6534inus;\\u629flus;\\u629eimes;\\u62a0\\u0200LRlr\\u1919\\u191b\\u191d\\u191f;\\u655b;\\u6558;\\u6518;\\u6514\\u0380;HLRhlr\\u1930\\u1931\\u1933\\u1935\\u1937\\u1939\\u193b\\u6502;\\u656a;\\u6561;\\u655e;\\u653c;\\u6524;\\u651c\\u0100ev\\u0123\\u1942bar\\u803b\\xa6\\u40a6\\u0200ceio\\u1951\\u1956\\u195a\\u1960r;\\uc000\\ud835\\udcb7mi;\\u604fm\\u0100;e\\u171a\\u171cl\\u0180;bh\\u1968\\u1969\\u196b\\u405c;\\u69c5sub;\\u67c8\\u016c\\u1974\\u197el\\u0100;e\\u1979\\u197a\\u6022t\\xbb\\u197ap\\u0180;Ee\\u012f\\u1985\\u1987;\\u6aae\\u0100;q\\u06dc\\u06db\\u0ce1\\u19a7\\0\\u19e8\\u1a11\\u1a15\\u1a32\\0\\u1a37\\u1a50\\0\\0\\u1ab4\\0\\0\\u1ac1\\0\\0\\u1b21\\u1b2e\\u1b4d\\u1b52\\0\\u1bfd\\0\\u1c0c\\u0180cpr\\u19ad\\u19b2\\u19ddute;\\u4107\\u0300;abcds\\u19bf\\u19c0\\u19c4\\u19ca\\u19d5\\u19d9\\u6229nd;\\u6a44rcup;\\u6a49\\u0100au\\u19cf\\u19d2p;\\u6a4bp;\\u6a47ot;\\u6a40;\\uc000\\u2229\\ufe00\\u0100eo\\u19e2\\u19e5t;\\u6041\\xee\\u0693\\u0200aeiu\\u19f0\\u19fb\\u1a01\\u1a05\\u01f0\\u19f5\\0\\u19f8s;\\u6a4don;\\u410ddil\\u803b\\xe7\\u40e7rc;\\u4109ps\\u0100;s\\u1a0c\\u1a0d\\u6a4cm;\\u6a50ot;\\u410b\\u0180dmn\\u1a1b\\u1a20\\u1a26il\\u80bb\\xb8\\u01adptyv;\\u69b2t\\u8100\\xa2;e\\u1a2d\\u1a2e\\u40a2r\\xe4\\u01b2r;\\uc000\\ud835\\udd20\\u0180cei\\u1a3d\\u1a40\\u1a4dy;\\u4447ck\\u0100;m\\u1a47\\u1a48\\u6713ark\\xbb\\u1a48;\\u43c7r\\u0380;Ecefms\\u1a5f\\u1a60\\u1a62\\u1a6b\\u1aa4\\u1aaa\\u1aae\\u65cb;\\u69c3\\u0180;el\\u1a69\\u1a6a\\u1a6d\\u42c6q;\\u6257e\\u0261\\u1a74\\0\\0\\u1a88rrow\\u0100lr\\u1a7c\\u1a81eft;\\u61baight;\\u61bb\\u0280RSacd\\u1a92\\u1a94\\u1a96\\u1a9a\\u1a9f\\xbb\\u0f47;\\u64c8st;\\u629birc;\\u629aash;\\u629dnint;\\u6a10id;\\u6aefcir;\\u69c2ubs\\u0100;u\\u1abb\\u1abc\\u6663it\\xbb\\u1abc\\u02ec\\u1ac7\\u1ad4\\u1afa\\0\\u1b0aon\\u0100;e\\u1acd\\u1ace\\u403a\\u0100;q\\xc7\\xc6\\u026d\\u1ad9\\0\\0\\u1ae2a\\u0100;t\\u1ade\\u1adf\\u402c;\\u4040\\u0180;fl\\u1ae8\\u1ae9\\u1aeb\\u6201\\xee\\u1160e\\u0100mx\\u1af1\\u1af6ent\\xbb\\u1ae9e\\xf3\\u024d\\u01e7\\u1afe\\0\\u1b07\\u0100;d\\u12bb\\u1b02ot;\\u6a6dn\\xf4\\u0246\\u0180fry\\u1b10\\u1b14\\u1b17;\\uc000\\ud835\\udd54o\\xe4\\u0254\\u8100\\xa9;s\\u0155\\u1b1dr;\\u6117\\u0100ao\\u1b25\\u1b29rr;\\u61b5ss;\\u6717\\u0100cu\\u1b32\\u1b37r;\\uc000\\ud835\\udcb8\\u0100bp\\u1b3c\\u1b44\\u0100;e\\u1b41\\u1b42\\u6acf;\\u6ad1\\u0100;e\\u1b49\\u1b4a\\u6ad0;\\u6ad2dot;\\u62ef\\u0380delprvw\\u1b60\\u1b6c\\u1b77\\u1b82\\u1bac\\u1bd4\\u1bf9arr\\u0100lr\\u1b68\\u1b6a;\\u6938;\\u6935\\u0270\\u1b72\\0\\0\\u1b75r;\\u62dec;\\u62dfarr\\u0100;p\\u1b7f\\u1b80\\u61b6;\\u693d\\u0300;bcdos\\u1b8f\\u1b90\\u1b96\\u1ba1\\u1ba5\\u1ba8\\u622arcap;\\u6a48\\u0100au\\u1b9b\\u1b9ep;\\u6a46p;\\u6a4aot;\\u628dr;\\u6a45;\\uc000\\u222a\\ufe00\\u0200alrv\\u1bb5\\u1bbf\\u1bde\\u1be3rr\\u0100;m\\u1bbc\\u1bbd\\u61b7;\\u693cy\\u0180evw\\u1bc7\\u1bd4\\u1bd8q\\u0270\\u1bce\\0\\0\\u1bd2re\\xe3\\u1b73u\\xe3\\u1b75ee;\\u62ceedge;\\u62cfen\\u803b\\xa4\\u40a4earrow\\u0100lr\\u1bee\\u1bf3eft\\xbb\\u1b80ight\\xbb\\u1bbde\\xe4\\u1bdd\\u0100ci\\u1c01\\u1c07onin\\xf4\\u01f7nt;\\u6231lcty;\\u632d\\u0980AHabcdefhijlorstuwz\\u1c38\\u1c3b\\u1c3f\\u1c5d\\u1c69\\u1c75\\u1c8a\\u1c9e\\u1cac\\u1cb7\\u1cfb\\u1cff\\u1d0d\\u1d7b\\u1d91\\u1dab\\u1dbb\\u1dc6\\u1dcdr\\xf2\\u0381ar;\\u6965\\u0200glrs\\u1c48\\u1c4d\\u1c52\\u1c54ger;\\u6020eth;\\u6138\\xf2\\u1133h\\u0100;v\\u1c5a\\u1c5b\\u6010\\xbb\\u090a\\u016b\\u1c61\\u1c67arow;\\u690fa\\xe3\\u0315\\u0100ay\\u1c6e\\u1c73ron;\\u410f;\\u4434\\u0180;ao\\u0332\\u1c7c\\u1c84\\u0100gr\\u02bf\\u1c81r;\\u61catseq;\\u6a77\\u0180glm\\u1c91\\u1c94\\u1c98\\u803b\\xb0\\u40b0ta;\\u43b4ptyv;\\u69b1\\u0100ir\\u1ca3\\u1ca8sht;\\u697f;\\uc000\\ud835\\udd21ar\\u0100lr\\u1cb3\\u1cb5\\xbb\\u08dc\\xbb\\u101e\\u0280aegsv\\u1cc2\\u0378\\u1cd6\\u1cdc\\u1ce0m\\u0180;os\\u0326\\u1cca\\u1cd4nd\\u0100;s\\u0326\\u1cd1uit;\\u6666amma;\\u43ddin;\\u62f2\\u0180;io\\u1ce7\\u1ce8\\u1cf8\\u40f7de\\u8100\\xf7;o\\u1ce7\\u1cf0ntimes;\\u62c7n\\xf8\\u1cf7cy;\\u4452c\\u026f\\u1d06\\0\\0\\u1d0arn;\\u631eop;\\u630d\\u0280lptuw\\u1d18\\u1d1d\\u1d22\\u1d49\\u1d55lar;\\u4024f;\\uc000\\ud835\\udd55\\u0280;emps\\u030b\\u1d2d\\u1d37\\u1d3d\\u1d42q\\u0100;d\\u0352\\u1d33ot;\\u6251inus;\\u6238lus;\\u6214quare;\\u62a1blebarwedg\\xe5\\xfan\\u0180adh\\u112e\\u1d5d\\u1d67ownarrow\\xf3\\u1c83arpoon\\u0100lr\\u1d72\\u1d76ef\\xf4\\u1cb4igh\\xf4\\u1cb6\\u0162\\u1d7f\\u1d85karo\\xf7\\u0f42\\u026f\\u1d8a\\0\\0\\u1d8ern;\\u631fop;\\u630c\\u0180cot\\u1d98\\u1da3\\u1da6\\u0100ry\\u1d9d\\u1da1;\\uc000\\ud835\\udcb9;\\u4455l;\\u69f6rok;\\u4111\\u0100dr\\u1db0\\u1db4ot;\\u62f1i\\u0100;f\\u1dba\\u1816\\u65bf\\u0100ah\\u1dc0\\u1dc3r\\xf2\\u0429a\\xf2\\u0fa6angle;\\u69a6\\u0100ci\\u1dd2\\u1dd5y;\\u445fgrarr;\\u67ff\\u0900Dacdefglmnopqrstux\\u1e01\\u1e09\\u1e19\\u1e38\\u0578\\u1e3c\\u1e49\\u1e61\\u1e7e\\u1ea5\\u1eaf\\u1ebd\\u1ee1\\u1f2a\\u1f37\\u1f44\\u1f4e\\u1f5a\\u0100Do\\u1e06\\u1d34o\\xf4\\u1c89\\u0100cs\\u1e0e\\u1e14ute\\u803b\\xe9\\u40e9ter;\\u6a6e\\u0200aioy\\u1e22\\u1e27\\u1e31\\u1e36ron;\\u411br\\u0100;c\\u1e2d\\u1e2e\\u6256\\u803b\\xea\\u40ealon;\\u6255;\\u444dot;\\u4117\\u0100Dr\\u1e41\\u1e45ot;\\u6252;\\uc000\\ud835\\udd22\\u0180;rs\\u1e50\\u1e51\\u1e57\\u6a9aave\\u803b\\xe8\\u40e8\\u0100;d\\u1e5c\\u1e5d\\u6a96ot;\\u6a98\\u0200;ils\\u1e6a\\u1e6b\\u1e72\\u1e74\\u6a99nters;\\u63e7;\\u6113\\u0100;d\\u1e79\\u1e7a\\u6a95ot;\\u6a97\\u0180aps\\u1e85\\u1e89\\u1e97cr;\\u4113ty\\u0180;sv\\u1e92\\u1e93\\u1e95\\u6205et\\xbb\\u1e93p\\u01001;\\u1e9d\\u1ea4\\u0133\\u1ea1\\u1ea3;\\u6004;\\u6005\\u6003\\u0100gs\\u1eaa\\u1eac;\\u414bp;\\u6002\\u0100gp\\u1eb4\\u1eb8on;\\u4119f;\\uc000\\ud835\\udd56\\u0180als\\u1ec4\\u1ece\\u1ed2r\\u0100;s\\u1eca\\u1ecb\\u62d5l;\\u69e3us;\\u6a71i\\u0180;lv\\u1eda\\u1edb\\u1edf\\u43b5on\\xbb\\u1edb;\\u43f5\\u0200csuv\\u1eea\\u1ef3\\u1f0b\\u1f23\\u0100io\\u1eef\\u1e31rc\\xbb\\u1e2e\\u0269\\u1ef9\\0\\0\\u1efb\\xed\\u0548ant\\u0100gl\\u1f02\\u1f06tr\\xbb\\u1e5dess\\xbb\\u1e7a\\u0180aei\\u1f12\\u1f16\\u1f1als;\\u403dst;\\u625fv\\u0100;D\\u0235\\u1f20D;\\u6a78parsl;\\u69e5\\u0100Da\\u1f2f\\u1f33ot;\\u6253rr;\\u6971\\u0180cdi\\u1f3e\\u1f41\\u1ef8r;\\u612fo\\xf4\\u0352\\u0100ah\\u1f49\\u1f4b;\\u43b7\\u803b\\xf0\\u40f0\\u0100mr\\u1f53\\u1f57l\\u803b\\xeb\\u40ebo;\\u60ac\\u0180cip\\u1f61\\u1f64\\u1f67l;\\u4021s\\xf4\\u056e\\u0100eo\\u1f6c\\u1f74ctatio\\xee\\u0559nential\\xe5\\u0579\\u09e1\\u1f92\\0\\u1f9e\\0\\u1fa1\\u1fa7\\0\\0\\u1fc6\\u1fcc\\0\\u1fd3\\0\\u1fe6\\u1fea\\u2000\\0\\u2008\\u205allingdotse\\xf1\\u1e44y;\\u4444male;\\u6640\\u0180ilr\\u1fad\\u1fb3\\u1fc1lig;\\u8000\\ufb03\\u0269\\u1fb9\\0\\0\\u1fbdg;\\u8000\\ufb00ig;\\u8000\\ufb04;\\uc000\\ud835\\udd23lig;\\u8000\\ufb01lig;\\uc000fj\\u0180alt\\u1fd9\\u1fdc\\u1fe1t;\\u666dig;\\u8000\\ufb02ns;\\u65b1of;\\u4192\\u01f0\\u1fee\\0\\u1ff3f;\\uc000\\ud835\\udd57\\u0100ak\\u05bf\\u1ff7\\u0100;v\\u1ffc\\u1ffd\\u62d4;\\u6ad9artint;\\u6a0d\\u0100ao\\u200c\\u2055\\u0100cs\\u2011\\u2052\\u03b1\\u201a\\u2030\\u2038\\u2045\\u2048\\0\\u2050\\u03b2\\u2022\\u2025\\u2027\\u202a\\u202c\\0\\u202e\\u803b\\xbd\\u40bd;\\u6153\\u803b\\xbc\\u40bc;\\u6155;\\u6159;\\u615b\\u01b3\\u2034\\0\\u2036;\\u6154;\\u6156\\u02b4\\u203e\\u2041\\0\\0\\u2043\\u803b\\xbe\\u40be;\\u6157;\\u615c5;\\u6158\\u01b6\\u204c\\0\\u204e;\\u615a;\\u615d8;\\u615el;\\u6044wn;\\u6322cr;\\uc000\\ud835\\udcbb\\u0880Eabcdefgijlnorstv\\u2082\\u2089\\u209f\\u20a5\\u20b0\\u20b4\\u20f0\\u20f5\\u20fa\\u20ff\\u2103\\u2112\\u2138\\u0317\\u213e\\u2152\\u219e\\u0100;l\\u064d\\u2087;\\u6a8c\\u0180cmp\\u2090\\u2095\\u209dute;\\u41f5ma\\u0100;d\\u209c\\u1cda\\u43b3;\\u6a86reve;\\u411f\\u0100iy\\u20aa\\u20aerc;\\u411d;\\u4433ot;\\u4121\\u0200;lqs\\u063e\\u0642\\u20bd\\u20c9\\u0180;qs\\u063e\\u064c\\u20c4lan\\xf4\\u0665\\u0200;cdl\\u0665\\u20d2\\u20d5\\u20e5c;\\u6aa9ot\\u0100;o\\u20dc\\u20dd\\u6a80\\u0100;l\\u20e2\\u20e3\\u6a82;\\u6a84\\u0100;e\\u20ea\\u20ed\\uc000\\u22db\\ufe00s;\\u6a94r;\\uc000\\ud835\\udd24\\u0100;g\\u0673\\u061bmel;\\u6137cy;\\u4453\\u0200;Eaj\\u065a\\u210c\\u210e\\u2110;\\u6a92;\\u6aa5;\\u6aa4\\u0200Eaes\\u211b\\u211d\\u2129\\u2134;\\u6269p\\u0100;p\\u2123\\u2124\\u6a8arox\\xbb\\u2124\\u0100;q\\u212e\\u212f\\u6a88\\u0100;q\\u212e\\u211bim;\\u62e7pf;\\uc000\\ud835\\udd58\\u0100ci\\u2143\\u2146r;\\u610am\\u0180;el\\u066b\\u214e\\u2150;\\u6a8e;\\u6a90\\u8300>;cdlqr\\u05ee\\u2160\\u216a\\u216e\\u2173\\u2179\\u0100ci\\u2165\\u2167;\\u6aa7r;\\u6a7aot;\\u62d7Par;\\u6995uest;\\u6a7c\\u0280adels\\u2184\\u216a\\u2190\\u0656\\u219b\\u01f0\\u2189\\0\\u218epro\\xf8\\u209er;\\u6978q\\u0100lq\\u063f\\u2196les\\xf3\\u2088i\\xed\\u066b\\u0100en\\u21a3\\u21adrtneqq;\\uc000\\u2269\\ufe00\\xc5\\u21aa\\u0500Aabcefkosy\\u21c4\\u21c7\\u21f1\\u21f5\\u21fa\\u2218\\u221d\\u222f\\u2268\\u227dr\\xf2\\u03a0\\u0200ilmr\\u21d0\\u21d4\\u21d7\\u21dbrs\\xf0\\u1484f\\xbb\\u2024il\\xf4\\u06a9\\u0100dr\\u21e0\\u21e4cy;\\u444a\\u0180;cw\\u08f4\\u21eb\\u21efir;\\u6948;\\u61adar;\\u610firc;\\u4125\\u0180alr\\u2201\\u220e\\u2213rts\\u0100;u\\u2209\\u220a\\u6665it\\xbb\\u220alip;\\u6026con;\\u62b9r;\\uc000\\ud835\\udd25s\\u0100ew\\u2223\\u2229arow;\\u6925arow;\\u6926\\u0280amopr\\u223a\\u223e\\u2243\\u225e\\u2263rr;\\u61fftht;\\u623bk\\u0100lr\\u2249\\u2253eftarrow;\\u61a9ightarrow;\\u61aaf;\\uc000\\ud835\\udd59bar;\\u6015\\u0180clt\\u226f\\u2274\\u2278r;\\uc000\\ud835\\udcbdas\\xe8\\u21f4rok;\\u4127\\u0100bp\\u2282\\u2287ull;\\u6043hen\\xbb\\u1c5b\\u0ae1\\u22a3\\0\\u22aa\\0\\u22b8\\u22c5\\u22ce\\0\\u22d5\\u22f3\\0\\0\\u22f8\\u2322\\u2367\\u2362\\u237f\\0\\u2386\\u23aa\\u23b4cute\\u803b\\xed\\u40ed\\u0180;iy\\u0771\\u22b0\\u22b5rc\\u803b\\xee\\u40ee;\\u4438\\u0100cx\\u22bc\\u22bfy;\\u4435cl\\u803b\\xa1\\u40a1\\u0100fr\\u039f\\u22c9;\\uc000\\ud835\\udd26rave\\u803b\\xec\\u40ec\\u0200;ino\\u073e\\u22dd\\u22e9\\u22ee\\u0100in\\u22e2\\u22e6nt;\\u6a0ct;\\u622dfin;\\u69dcta;\\u6129lig;\\u4133\\u0180aop\\u22fe\\u231a\\u231d\\u0180cgt\\u2305\\u2308\\u2317r;\\u412b\\u0180elp\\u071f\\u230f\\u2313in\\xe5\\u078ear\\xf4\\u0720h;\\u4131f;\\u62b7ed;\\u41b5\\u0280;cfot\\u04f4\\u232c\\u2331\\u233d\\u2341are;\\u6105in\\u0100;t\\u2338\\u2339\\u621eie;\\u69dddo\\xf4\\u2319\\u0280;celp\\u0757\\u234c\\u2350\\u235b\\u2361al;\\u62ba\\u0100gr\\u2355\\u2359er\\xf3\\u1563\\xe3\\u234darhk;\\u6a17rod;\\u6a3c\\u0200cgpt\\u236f\\u2372\\u2376\\u237by;\\u4451on;\\u412ff;\\uc000\\ud835\\udd5aa;\\u43b9uest\\u803b\\xbf\\u40bf\\u0100ci\\u238a\\u238fr;\\uc000\\ud835\\udcben\\u0280;Edsv\\u04f4\\u239b\\u239d\\u23a1\\u04f3;\\u62f9ot;\\u62f5\\u0100;v\\u23a6\\u23a7\\u62f4;\\u62f3\\u0100;i\\u0777\\u23aelde;\\u4129\\u01eb\\u23b8\\0\\u23bccy;\\u4456l\\u803b\\xef\\u40ef\\u0300cfmosu\\u23cc\\u23d7\\u23dc\\u23e1\\u23e7\\u23f5\\u0100iy\\u23d1\\u23d5rc;\\u4135;\\u4439r;\\uc000\\ud835\\udd27ath;\\u4237pf;\\uc000\\ud835\\udd5b\\u01e3\\u23ec\\0\\u23f1r;\\uc000\\ud835\\udcbfrcy;\\u4458kcy;\\u4454\\u0400acfghjos\\u240b\\u2416\\u2422\\u2427\\u242d\\u2431\\u2435\\u243bppa\\u0100;v\\u2413\\u2414\\u43ba;\\u43f0\\u0100ey\\u241b\\u2420dil;\\u4137;\\u443ar;\\uc000\\ud835\\udd28reen;\\u4138cy;\\u4445cy;\\u445cpf;\\uc000\\ud835\\udd5ccr;\\uc000\\ud835\\udcc0\\u0b80ABEHabcdefghjlmnoprstuv\\u2470\\u2481\\u2486\\u248d\\u2491\\u250e\\u253d\\u255a\\u2580\\u264e\\u265e\\u2665\\u2679\\u267d\\u269a\\u26b2\\u26d8\\u275d\\u2768\\u278b\\u27c0\\u2801\\u2812\\u0180art\\u2477\\u247a\\u247cr\\xf2\\u09c6\\xf2\\u0395ail;\\u691barr;\\u690e\\u0100;g\\u0994\\u248b;\\u6a8bar;\\u6962\\u0963\\u24a5\\0\\u24aa\\0\\u24b1\\0\\0\\0\\0\\0\\u24b5\\u24ba\\0\\u24c6\\u24c8\\u24cd\\0\\u24f9ute;\\u413amptyv;\\u69b4ra\\xee\\u084cbda;\\u43bbg\\u0180;dl\\u088e\\u24c1\\u24c3;\\u6991\\xe5\\u088e;\\u6a85uo\\u803b\\xab\\u40abr\\u0400;bfhlpst\\u0899\\u24de\\u24e6\\u24e9\\u24eb\\u24ee\\u24f1\\u24f5\\u0100;f\\u089d\\u24e3s;\\u691fs;\\u691d\\xeb\\u2252p;\\u61abl;\\u6939im;\\u6973l;\\u61a2\\u0180;ae\\u24ff\\u2500\\u2504\\u6aabil;\\u6919\\u0100;s\\u2509\\u250a\\u6aad;\\uc000\\u2aad\\ufe00\\u0180abr\\u2515\\u2519\\u251drr;\\u690crk;\\u6772\\u0100ak\\u2522\\u252cc\\u0100ek\\u2528\\u252a;\\u407b;\\u405b\\u0100es\\u2531\\u2533;\\u698bl\\u0100du\\u2539\\u253b;\\u698f;\\u698d\\u0200aeuy\\u2546\\u254b\\u2556\\u2558ron;\\u413e\\u0100di\\u2550\\u2554il;\\u413c\\xec\\u08b0\\xe2\\u2529;\\u443b\\u0200cqrs\\u2563\\u2566\\u256d\\u257da;\\u6936uo\\u0100;r\\u0e19\\u1746\\u0100du\\u2572\\u2577har;\\u6967shar;\\u694bh;\\u61b2\\u0280;fgqs\\u258b\\u258c\\u0989\\u25f3\\u25ff\\u6264t\\u0280ahlrt\\u2598\\u25a4\\u25b7\\u25c2\\u25e8rrow\\u0100;t\\u0899\\u25a1a\\xe9\\u24f6arpoon\\u0100du\\u25af\\u25b4own\\xbb\\u045ap\\xbb\\u0966eftarrows;\\u61c7ight\\u0180ahs\\u25cd\\u25d6\\u25derrow\\u0100;s\\u08f4\\u08a7arpoon\\xf3\\u0f98quigarro\\xf7\\u21f0hreetimes;\\u62cb\\u0180;qs\\u258b\\u0993\\u25falan\\xf4\\u09ac\\u0280;cdgs\\u09ac\\u260a\\u260d\\u261d\\u2628c;\\u6aa8ot\\u0100;o\\u2614\\u2615\\u6a7f\\u0100;r\\u261a\\u261b\\u6a81;\\u6a83\\u0100;e\\u2622\\u2625\\uc000\\u22da\\ufe00s;\\u6a93\\u0280adegs\\u2633\\u2639\\u263d\\u2649\\u264bppro\\xf8\\u24c6ot;\\u62d6q\\u0100gq\\u2643\\u2645\\xf4\\u0989gt\\xf2\\u248c\\xf4\\u099bi\\xed\\u09b2\\u0180ilr\\u2655\\u08e1\\u265asht;\\u697c;\\uc000\\ud835\\udd29\\u0100;E\\u099c\\u2663;\\u6a91\\u0161\\u2669\\u2676r\\u0100du\\u25b2\\u266e\\u0100;l\\u0965\\u2673;\\u696alk;\\u6584cy;\\u4459\\u0280;acht\\u0a48\\u2688\\u268b\\u2691\\u2696r\\xf2\\u25c1orne\\xf2\\u1d08ard;\\u696bri;\\u65fa\\u0100io\\u269f\\u26a4dot;\\u4140ust\\u0100;a\\u26ac\\u26ad\\u63b0che\\xbb\\u26ad\\u0200Eaes\\u26bb\\u26bd\\u26c9\\u26d4;\\u6268p\\u0100;p\\u26c3\\u26c4\\u6a89rox\\xbb\\u26c4\\u0100;q\\u26ce\\u26cf\\u6a87\\u0100;q\\u26ce\\u26bbim;\\u62e6\\u0400abnoptwz\\u26e9\\u26f4\\u26f7\\u271a\\u272f\\u2741\\u2747\\u2750\\u0100nr\\u26ee\\u26f1g;\\u67ecr;\\u61fdr\\xeb\\u08c1g\\u0180lmr\\u26ff\\u270d\\u2714eft\\u0100ar\\u09e6\\u2707ight\\xe1\\u09f2apsto;\\u67fcight\\xe1\\u09fdparrow\\u0100lr\\u2725\\u2729ef\\xf4\\u24edight;\\u61ac\\u0180afl\\u2736\\u2739\\u273dr;\\u6985;\\uc000\\ud835\\udd5dus;\\u6a2dimes;\\u6a34\\u0161\\u274b\\u274fst;\\u6217\\xe1\\u134e\\u0180;ef\\u2757\\u2758\\u1800\\u65cange\\xbb\\u2758ar\\u0100;l\\u2764\\u2765\\u4028t;\\u6993\\u0280achmt\\u2773\\u2776\\u277c\\u2785\\u2787r\\xf2\\u08a8orne\\xf2\\u1d8car\\u0100;d\\u0f98\\u2783;\\u696d;\\u600eri;\\u62bf\\u0300achiqt\\u2798\\u279d\\u0a40\\u27a2\\u27ae\\u27bbquo;\\u6039r;\\uc000\\ud835\\udcc1m\\u0180;eg\\u09b2\\u27aa\\u27ac;\\u6a8d;\\u6a8f\\u0100bu\\u252a\\u27b3o\\u0100;r\\u0e1f\\u27b9;\\u601arok;\\u4142\\u8400<;cdhilqr\\u082b\\u27d2\\u2639\\u27dc\\u27e0\\u27e5\\u27ea\\u27f0\\u0100ci\\u27d7\\u27d9;\\u6aa6r;\\u6a79re\\xe5\\u25f2mes;\\u62c9arr;\\u6976uest;\\u6a7b\\u0100Pi\\u27f5\\u27f9ar;\\u6996\\u0180;ef\\u2800\\u092d\\u181b\\u65c3r\\u0100du\\u2807\\u280dshar;\\u694ahar;\\u6966\\u0100en\\u2817\\u2821rtneqq;\\uc000\\u2268\\ufe00\\xc5\\u281e\\u0700Dacdefhilnopsu\\u2840\\u2845\\u2882\\u288e\\u2893\\u28a0\\u28a5\\u28a8\\u28da\\u28e2\\u28e4\\u0a83\\u28f3\\u2902Dot;\\u623a\\u0200clpr\\u284e\\u2852\\u2863\\u287dr\\u803b\\xaf\\u40af\\u0100et\\u2857\\u2859;\\u6642\\u0100;e\\u285e\\u285f\\u6720se\\xbb\\u285f\\u0100;s\\u103b\\u2868to\\u0200;dlu\\u103b\\u2873\\u2877\\u287bow\\xee\\u048cef\\xf4\\u090f\\xf0\\u13d1ker;\\u65ae\\u0100oy\\u2887\\u288cmma;\\u6a29;\\u443cash;\\u6014asuredangle\\xbb\\u1626r;\\uc000\\ud835\\udd2ao;\\u6127\\u0180cdn\\u28af\\u28b4\\u28c9ro\\u803b\\xb5\\u40b5\\u0200;acd\\u1464\\u28bd\\u28c0\\u28c4s\\xf4\\u16a7ir;\\u6af0ot\\u80bb\\xb7\\u01b5us\\u0180;bd\\u28d2\\u1903\\u28d3\\u6212\\u0100;u\\u1d3c\\u28d8;\\u6a2a\\u0163\\u28de\\u28e1p;\\u6adb\\xf2\\u2212\\xf0\\u0a81\\u0100dp\\u28e9\\u28eeels;\\u62a7f;\\uc000\\ud835\\udd5e\\u0100ct\\u28f8\\u28fdr;\\uc000\\ud835\\udcc2pos\\xbb\\u159d\\u0180;lm\\u2909\\u290a\\u290d\\u43bctimap;\\u62b8\\u0c00GLRVabcdefghijlmoprstuvw\\u2942\\u2953\\u297e\\u2989\\u2998\\u29da\\u29e9\\u2a15\\u2a1a\\u2a58\\u2a5d\\u2a83\\u2a95\\u2aa4\\u2aa8\\u2b04\\u2b07\\u2b44\\u2b7f\\u2bae\\u2c34\\u2c67\\u2c7c\\u2ce9\\u0100gt\\u2947\\u294b;\\uc000\\u22d9\\u0338\\u0100;v\\u2950\\u0bcf\\uc000\\u226b\\u20d2\\u0180elt\\u295a\\u2972\\u2976ft\\u0100ar\\u2961\\u2967rrow;\\u61cdightarrow;\\u61ce;\\uc000\\u22d8\\u0338\\u0100;v\\u297b\\u0c47\\uc000\\u226a\\u20d2ightarrow;\\u61cf\\u0100Dd\\u298e\\u2993ash;\\u62afash;\\u62ae\\u0280bcnpt\\u29a3\\u29a7\\u29ac\\u29b1\\u29ccla\\xbb\\u02deute;\\u4144g;\\uc000\\u2220\\u20d2\\u0280;Eiop\\u0d84\\u29bc\\u29c0\\u29c5\\u29c8;\\uc000\\u2a70\\u0338d;\\uc000\\u224b\\u0338s;\\u4149ro\\xf8\\u0d84ur\\u0100;a\\u29d3\\u29d4\\u666el\\u0100;s\\u29d3\\u0b38\\u01f3\\u29df\\0\\u29e3p\\u80bb\\xa0\\u0b37mp\\u0100;e\\u0bf9\\u0c00\\u0280aeouy\\u29f4\\u29fe\\u2a03\\u2a10\\u2a13\\u01f0\\u29f9\\0\\u29fb;\\u6a43on;\\u4148dil;\\u4146ng\\u0100;d\\u0d7e\\u2a0aot;\\uc000\\u2a6d\\u0338p;\\u6a42;\\u443dash;\\u6013\\u0380;Aadqsx\\u0b92\\u2a29\\u2a2d\\u2a3b\\u2a41\\u2a45\\u2a50rr;\\u61d7r\\u0100hr\\u2a33\\u2a36k;\\u6924\\u0100;o\\u13f2\\u13f0ot;\\uc000\\u2250\\u0338ui\\xf6\\u0b63\\u0100ei\\u2a4a\\u2a4ear;\\u6928\\xed\\u0b98ist\\u0100;s\\u0ba0\\u0b9fr;\\uc000\\ud835\\udd2b\\u0200Eest\\u0bc5\\u2a66\\u2a79\\u2a7c\\u0180;qs\\u0bbc\\u2a6d\\u0be1\\u0180;qs\\u0bbc\\u0bc5\\u2a74lan\\xf4\\u0be2i\\xed\\u0bea\\u0100;r\\u0bb6\\u2a81\\xbb\\u0bb7\\u0180Aap\\u2a8a\\u2a8d\\u2a91r\\xf2\\u2971rr;\\u61aear;\\u6af2\\u0180;sv\\u0f8d\\u2a9c\\u0f8c\\u0100;d\\u2aa1\\u2aa2\\u62fc;\\u62facy;\\u445a\\u0380AEadest\\u2ab7\\u2aba\\u2abe\\u2ac2\\u2ac5\\u2af6\\u2af9r\\xf2\\u2966;\\uc000\\u2266\\u0338rr;\\u619ar;\\u6025\\u0200;fqs\\u0c3b\\u2ace\\u2ae3\\u2aeft\\u0100ar\\u2ad4\\u2ad9rro\\xf7\\u2ac1ightarro\\xf7\\u2a90\\u0180;qs\\u0c3b\\u2aba\\u2aealan\\xf4\\u0c55\\u0100;s\\u0c55\\u2af4\\xbb\\u0c36i\\xed\\u0c5d\\u0100;r\\u0c35\\u2afei\\u0100;e\\u0c1a\\u0c25i\\xe4\\u0d90\\u0100pt\\u2b0c\\u2b11f;\\uc000\\ud835\\udd5f\\u8180\\xac;in\\u2b19\\u2b1a\\u2b36\\u40acn\\u0200;Edv\\u0b89\\u2b24\\u2b28\\u2b2e;\\uc000\\u22f9\\u0338ot;\\uc000\\u22f5\\u0338\\u01e1\\u0b89\\u2b33\\u2b35;\\u62f7;\\u62f6i\\u0100;v\\u0cb8\\u2b3c\\u01e1\\u0cb8\\u2b41\\u2b43;\\u62fe;\\u62fd\\u0180aor\\u2b4b\\u2b63\\u2b69r\\u0200;ast\\u0b7b\\u2b55\\u2b5a\\u2b5flle\\xec\\u0b7bl;\\uc000\\u2afd\\u20e5;\\uc000\\u2202\\u0338lint;\\u6a14\\u0180;ce\\u0c92\\u2b70\\u2b73u\\xe5\\u0ca5\\u0100;c\\u0c98\\u2b78\\u0100;e\\u0c92\\u2b7d\\xf1\\u0c98\\u0200Aait\\u2b88\\u2b8b\\u2b9d\\u2ba7r\\xf2\\u2988rr\\u0180;cw\\u2b94\\u2b95\\u2b99\\u619b;\\uc000\\u2933\\u0338;\\uc000\\u219d\\u0338ghtarrow\\xbb\\u2b95ri\\u0100;e\\u0ccb\\u0cd6\\u0380chimpqu\\u2bbd\\u2bcd\\u2bd9\\u2b04\\u0b78\\u2be4\\u2bef\\u0200;cer\\u0d32\\u2bc6\\u0d37\\u2bc9u\\xe5\\u0d45;\\uc000\\ud835\\udcc3ort\\u026d\\u2b05\\0\\0\\u2bd6ar\\xe1\\u2b56m\\u0100;e\\u0d6e\\u2bdf\\u0100;q\\u0d74\\u0d73su\\u0100bp\\u2beb\\u2bed\\xe5\\u0cf8\\xe5\\u0d0b\\u0180bcp\\u2bf6\\u2c11\\u2c19\\u0200;Ees\\u2bff\\u2c00\\u0d22\\u2c04\\u6284;\\uc000\\u2ac5\\u0338et\\u0100;e\\u0d1b\\u2c0bq\\u0100;q\\u0d23\\u2c00c\\u0100;e\\u0d32\\u2c17\\xf1\\u0d38\\u0200;Ees\\u2c22\\u2c23\\u0d5f\\u2c27\\u6285;\\uc000\\u2ac6\\u0338et\\u0100;e\\u0d58\\u2c2eq\\u0100;q\\u0d60\\u2c23\\u0200gilr\\u2c3d\\u2c3f\\u2c45\\u2c47\\xec\\u0bd7lde\\u803b\\xf1\\u40f1\\xe7\\u0c43iangle\\u0100lr\\u2c52\\u2c5ceft\\u0100;e\\u0c1a\\u2c5a\\xf1\\u0c26ight\\u0100;e\\u0ccb\\u2c65\\xf1\\u0cd7\\u0100;m\\u2c6c\\u2c6d\\u43bd\\u0180;es\\u2c74\\u2c75\\u2c79\\u4023ro;\\u6116p;\\u6007\\u0480DHadgilrs\\u2c8f\\u2c94\\u2c99\\u2c9e\\u2ca3\\u2cb0\\u2cb6\\u2cd3\\u2ce3ash;\\u62adarr;\\u6904p;\\uc000\\u224d\\u20d2ash;\\u62ac\\u0100et\\u2ca8\\u2cac;\\uc000\\u2265\\u20d2;\\uc000>\\u20d2nfin;\\u69de\\u0180Aet\\u2cbd\\u2cc1\\u2cc5rr;\\u6902;\\uc000\\u2264\\u20d2\\u0100;r\\u2cca\\u2ccd\\uc000<\\u20d2ie;\\uc000\\u22b4\\u20d2\\u0100At\\u2cd8\\u2cdcrr;\\u6903rie;\\uc000\\u22b5\\u20d2im;\\uc000\\u223c\\u20d2\\u0180Aan\\u2cf0\\u2cf4\\u2d02rr;\\u61d6r\\u0100hr\\u2cfa\\u2cfdk;\\u6923\\u0100;o\\u13e7\\u13e5ear;\\u6927\\u1253\\u1a95\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\0\\u2d2d\\0\\u2d38\\u2d48\\u2d60\\u2d65\\u2d72\\u2d84\\u1b07\\0\\0\\u2d8d\\u2dab\\0\\u2dc8\\u2dce\\0\\u2ddc\\u2e19\\u2e2b\\u2e3e\\u2e43\\u0100cs\\u2d31\\u1a97ute\\u803b\\xf3\\u40f3\\u0100iy\\u2d3c\\u2d45r\\u0100;c\\u1a9e\\u2d42\\u803b\\xf4\\u40f4;\\u443e\\u0280abios\\u1aa0\\u2d52\\u2d57\\u01c8\\u2d5alac;\\u4151v;\\u6a38old;\\u69bclig;\\u4153\\u0100cr\\u2d69\\u2d6dir;\\u69bf;\\uc000\\ud835\\udd2c\\u036f\\u2d79\\0\\0\\u2d7c\\0\\u2d82n;\\u42dbave\\u803b\\xf2\\u40f2;\\u69c1\\u0100bm\\u2d88\\u0df4ar;\\u69b5\\u0200acit\\u2d95\\u2d98\\u2da5\\u2da8r\\xf2\\u1a80\\u0100ir\\u2d9d\\u2da0r;\\u69beoss;\\u69bbn\\xe5\\u0e52;\\u69c0\\u0180aei\\u2db1\\u2db5\\u2db9cr;\\u414dga;\\u43c9\\u0180cdn\\u2dc0\\u2dc5\\u01cdron;\\u43bf;\\u69b6pf;\\uc000\\ud835\\udd60\\u0180ael\\u2dd4\\u2dd7\\u01d2r;\\u69b7rp;\\u69b9\\u0380;adiosv\\u2dea\\u2deb\\u2dee\\u2e08\\u2e0d\\u2e10\\u2e16\\u6228r\\xf2\\u1a86\\u0200;efm\\u2df7\\u2df8\\u2e02\\u2e05\\u6a5dr\\u0100;o\\u2dfe\\u2dff\\u6134f\\xbb\\u2dff\\u803b\\xaa\\u40aa\\u803b\\xba\\u40bagof;\\u62b6r;\\u6a56lope;\\u6a57;\\u6a5b\\u0180clo\\u2e1f\\u2e21\\u2e27\\xf2\\u2e01ash\\u803b\\xf8\\u40f8l;\\u6298i\\u016c\\u2e2f\\u2e34de\\u803b\\xf5\\u40f5es\\u0100;a\\u01db\\u2e3as;\\u6a36ml\\u803b\\xf6\\u40f6bar;\\u633d\\u0ae1\\u2e5e\\0\\u2e7d\\0\\u2e80\\u2e9d\\0\\u2ea2\\u2eb9\\0\\0\\u2ecb\\u0e9c\\0\\u2f13\\0\\0\\u2f2b\\u2fbc\\0\\u2fc8r\\u0200;ast\\u0403\\u2e67\\u2e72\\u0e85\\u8100\\xb6;l\\u2e6d\\u2e6e\\u40b6le\\xec\\u0403\\u0269\\u2e78\\0\\0\\u2e7bm;\\u6af3;\\u6afdy;\\u443fr\\u0280cimpt\\u2e8b\\u2e8f\\u2e93\\u1865\\u2e97nt;\\u4025od;\\u402eil;\\u6030enk;\\u6031r;\\uc000\\ud835\\udd2d\\u0180imo\\u2ea8\\u2eb0\\u2eb4\\u0100;v\\u2ead\\u2eae\\u43c6;\\u43d5ma\\xf4\\u0a76ne;\\u660e\\u0180;tv\\u2ebf\\u2ec0\\u2ec8\\u43c0chfork\\xbb\\u1ffd;\\u43d6\\u0100au\\u2ecf\\u2edfn\\u0100ck\\u2ed5\\u2eddk\\u0100;h\\u21f4\\u2edb;\\u610e\\xf6\\u21f4s\\u0480;abcdemst\\u2ef3\\u2ef4\\u1908\\u2ef9\\u2efd\\u2f04\\u2f06\\u2f0a\\u2f0e\\u402bcir;\\u6a23ir;\\u6a22\\u0100ou\\u1d40\\u2f02;\\u6a25;\\u6a72n\\u80bb\\xb1\\u0e9dim;\\u6a26wo;\\u6a27\\u0180ipu\\u2f19\\u2f20\\u2f25ntint;\\u6a15f;\\uc000\\ud835\\udd61nd\\u803b\\xa3\\u40a3\\u0500;Eaceinosu\\u0ec8\\u2f3f\\u2f41\\u2f44\\u2f47\\u2f81\\u2f89\\u2f92\\u2f7e\\u2fb6;\\u6ab3p;\\u6ab7u\\xe5\\u0ed9\\u0100;c\\u0ece\\u2f4c\\u0300;acens\\u0ec8\\u2f59\\u2f5f\\u2f66\\u2f68\\u2f7eppro\\xf8\\u2f43urlye\\xf1\\u0ed9\\xf1\\u0ece\\u0180aes\\u2f6f\\u2f76\\u2f7approx;\\u6ab9qq;\\u6ab5im;\\u62e8i\\xed\\u0edfme\\u0100;s\\u2f88\\u0eae\\u6032\\u0180Eas\\u2f78\\u2f90\\u2f7a\\xf0\\u2f75\\u0180dfp\\u0eec\\u2f99\\u2faf\\u0180als\\u2fa0\\u2fa5\\u2faalar;\\u632eine;\\u6312urf;\\u6313\\u0100;t\\u0efb\\u2fb4\\xef\\u0efbrel;\\u62b0\\u0100ci\\u2fc0\\u2fc5r;\\uc000\\ud835\\udcc5;\\u43c8ncsp;\\u6008\\u0300fiopsu\\u2fda\\u22e2\\u2fdf\\u2fe5\\u2feb\\u2ff1r;\\uc000\\ud835\\udd2epf;\\uc000\\ud835\\udd62rime;\\u6057cr;\\uc000\\ud835\\udcc6\\u0180aeo\\u2ff8\\u3009\\u3013t\\u0100ei\\u2ffe\\u3005rnion\\xf3\\u06b0nt;\\u6a16st\\u0100;e\\u3010\\u3011\\u403f\\xf1\\u1f19\\xf4\\u0f14\\u0a80ABHabcdefhilmnoprstux\\u3040\\u3051\\u3055\\u3059\\u30e0\\u310e\\u312b\\u3147\\u3162\\u3172\\u318e\\u3206\\u3215\\u3224\\u3229\\u3258\\u326e\\u3272\\u3290\\u32b0\\u32b7\\u0180art\\u3047\\u304a\\u304cr\\xf2\\u10b3\\xf2\\u03ddail;\\u691car\\xf2\\u1c65ar;\\u6964\\u0380cdenqrt\\u3068\\u3075\\u3078\\u307f\\u308f\\u3094\\u30cc\\u0100eu\\u306d\\u3071;\\uc000\\u223d\\u0331te;\\u4155i\\xe3\\u116emptyv;\\u69b3g\\u0200;del\\u0fd1\\u3089\\u308b\\u308d;\\u6992;\\u69a5\\xe5\\u0fd1uo\\u803b\\xbb\\u40bbr\\u0580;abcfhlpstw\\u0fdc\\u30ac\\u30af\\u30b7\\u30b9\\u30bc\\u30be\\u30c0\\u30c3\\u30c7\\u30cap;\\u6975\\u0100;f\\u0fe0\\u30b4s;\\u6920;\\u6933s;\\u691e\\xeb\\u225d\\xf0\\u272el;\\u6945im;\\u6974l;\\u61a3;\\u619d\\u0100ai\\u30d1\\u30d5il;\\u691ao\\u0100;n\\u30db\\u30dc\\u6236al\\xf3\\u0f1e\\u0180abr\\u30e7\\u30ea\\u30eer\\xf2\\u17e5rk;\\u6773\\u0100ak\\u30f3\\u30fdc\\u0100ek\\u30f9\\u30fb;\\u407d;\\u405d\\u0100es\\u3102\\u3104;\\u698cl\\u0100du\\u310a\\u310c;\\u698e;\\u6990\\u0200aeuy\\u3117\\u311c\\u3127\\u3129ron;\\u4159\\u0100di\\u3121\\u3125il;\\u4157\\xec\\u0ff2\\xe2\\u30fa;\\u4440\\u0200clqs\\u3134\\u3137\\u313d\\u3144a;\\u6937dhar;\\u6969uo\\u0100;r\\u020e\\u020dh;\\u61b3\\u0180acg\\u314e\\u315f\\u0f44l\\u0200;ips\\u0f78\\u3158\\u315b\\u109cn\\xe5\\u10bbar\\xf4\\u0fa9t;\\u65ad\\u0180ilr\\u3169\\u1023\\u316esht;\\u697d;\\uc000\\ud835\\udd2f\\u0100ao\\u3177\\u3186r\\u0100du\\u317d\\u317f\\xbb\\u047b\\u0100;l\\u1091\\u3184;\\u696c\\u0100;v\\u318b\\u318c\\u43c1;\\u43f1\\u0180gns\\u3195\\u31f9\\u31fcht\\u0300ahlrst\\u31a4\\u31b0\\u31c2\\u31d8\\u31e4\\u31eerrow\\u0100;t\\u0fdc\\u31ada\\xe9\\u30c8arpoon\\u0100du\\u31bb\\u31bfow\\xee\\u317ep\\xbb\\u1092eft\\u0100ah\\u31ca\\u31d0rrow\\xf3\\u0feaarpoon\\xf3\\u0551ightarrows;\\u61c9quigarro\\xf7\\u30cbhreetimes;\\u62ccg;\\u42daingdotse\\xf1\\u1f32\\u0180ahm\\u320d\\u3210\\u3213r\\xf2\\u0feaa\\xf2\\u0551;\\u600foust\\u0100;a\\u321e\\u321f\\u63b1che\\xbb\\u321fmid;\\u6aee\\u0200abpt\\u3232\\u323d\\u3240\\u3252\\u0100nr\\u3237\\u323ag;\\u67edr;\\u61fer\\xeb\\u1003\\u0180afl\\u3247\\u324a\\u324er;\\u6986;\\uc000\\ud835\\udd63us;\\u6a2eimes;\\u6a35\\u0100ap\\u325d\\u3267r\\u0100;g\\u3263\\u3264\\u4029t;\\u6994olint;\\u6a12ar\\xf2\\u31e3\\u0200achq\\u327b\\u3280\\u10bc\\u3285quo;\\u603ar;\\uc000\\ud835\\udcc7\\u0100bu\\u30fb\\u328ao\\u0100;r\\u0214\\u0213\\u0180hir\\u3297\\u329b\\u32a0re\\xe5\\u31f8mes;\\u62cai\\u0200;efl\\u32aa\\u1059\\u1821\\u32ab\\u65b9tri;\\u69celuhar;\\u6968;\\u611e\\u0d61\\u32d5\\u32db\\u32df\\u332c\\u3338\\u3371\\0\\u337a\\u33a4\\0\\0\\u33ec\\u33f0\\0\\u3428\\u3448\\u345a\\u34ad\\u34b1\\u34ca\\u34f1\\0\\u3616\\0\\0\\u3633cute;\\u415bqu\\xef\\u27ba\\u0500;Eaceinpsy\\u11ed\\u32f3\\u32f5\\u32ff\\u3302\\u330b\\u330f\\u331f\\u3326\\u3329;\\u6ab4\\u01f0\\u32fa\\0\\u32fc;\\u6ab8on;\\u4161u\\xe5\\u11fe\\u0100;d\\u11f3\\u3307il;\\u415frc;\\u415d\\u0180Eas\\u3316\\u3318\\u331b;\\u6ab6p;\\u6abaim;\\u62e9olint;\\u6a13i\\xed\\u1204;\\u4441ot\\u0180;be\\u3334\\u1d47\\u3335\\u62c5;\\u6a66\\u0380Aacmstx\\u3346\\u334a\\u3357\\u335b\\u335e\\u3363\\u336drr;\\u61d8r\\u0100hr\\u3350\\u3352\\xeb\\u2228\\u0100;o\\u0a36\\u0a34t\\u803b\\xa7\\u40a7i;\\u403bwar;\\u6929m\\u0100in\\u3369\\xf0nu\\xf3\\xf1t;\\u6736r\\u0100;o\\u3376\\u2055\\uc000\\ud835\\udd30\\u0200acoy\\u3382\\u3386\\u3391\\u33a0rp;\\u666f\\u0100hy\\u338b\\u338fcy;\\u4449;\\u4448rt\\u026d\\u3399\\0\\0\\u339ci\\xe4\\u1464ara\\xec\\u2e6f\\u803b\\xad\\u40ad\\u0100gm\\u33a8\\u33b4ma\\u0180;fv\\u33b1\\u33b2\\u33b2\\u43c3;\\u43c2\\u0400;deglnpr\\u12ab\\u33c5\\u33c9\\u33ce\\u33d6\\u33de\\u33e1\\u33e6ot;\\u6a6a\\u0100;q\\u12b1\\u12b0\\u0100;E\\u33d3\\u33d4\\u6a9e;\\u6aa0\\u0100;E\\u33db\\u33dc\\u6a9d;\\u6a9fe;\\u6246lus;\\u6a24arr;\\u6972ar\\xf2\\u113d\\u0200aeit\\u33f8\\u3408\\u340f\\u3417\\u0100ls\\u33fd\\u3404lsetm\\xe9\\u336ahp;\\u6a33parsl;\\u69e4\\u0100dl\\u1463\\u3414e;\\u6323\\u0100;e\\u341c\\u341d\\u6aaa\\u0100;s\\u3422\\u3423\\u6aac;\\uc000\\u2aac\\ufe00\\u0180flp\\u342e\\u3433\\u3442tcy;\\u444c\\u0100;b\\u3438\\u3439\\u402f\\u0100;a\\u343e\\u343f\\u69c4r;\\u633ff;\\uc000\\ud835\\udd64a\\u0100dr\\u344d\\u0402es\\u0100;u\\u3454\\u3455\\u6660it\\xbb\\u3455\\u0180csu\\u3460\\u3479\\u349f\\u0100au\\u3465\\u346fp\\u0100;s\\u1188\\u346b;\\uc000\\u2293\\ufe00p\\u0100;s\\u11b4\\u3475;\\uc000\\u2294\\ufe00u\\u0100bp\\u347f\\u348f\\u0180;es\\u1197\\u119c\\u3486et\\u0100;e\\u1197\\u348d\\xf1\\u119d\\u0180;es\\u11a8\\u11ad\\u3496et\\u0100;e\\u11a8\\u349d\\xf1\\u11ae\\u0180;af\\u117b\\u34a6\\u05b0r\\u0165\\u34ab\\u05b1\\xbb\\u117car\\xf2\\u1148\\u0200cemt\\u34b9\\u34be\\u34c2\\u34c5r;\\uc000\\ud835\\udcc8tm\\xee\\xf1i\\xec\\u3415ar\\xe6\\u11be\\u0100ar\\u34ce\\u34d5r\\u0100;f\\u34d4\\u17bf\\u6606\\u0100an\\u34da\\u34edight\\u0100ep\\u34e3\\u34eapsilo\\xee\\u1ee0h\\xe9\\u2eafs\\xbb\\u2852\\u0280bcmnp\\u34fb\\u355e\\u1209\\u358b\\u358e\\u0480;Edemnprs\\u350e\\u350f\\u3511\\u3515\\u351e\\u3523\\u352c\\u3531\\u3536\\u6282;\\u6ac5ot;\\u6abd\\u0100;d\\u11da\\u351aot;\\u6ac3ult;\\u6ac1\\u0100Ee\\u3528\\u352a;\\u6acb;\\u628alus;\\u6abfarr;\\u6979\\u0180eiu\\u353d\\u3552\\u3555t\\u0180;en\\u350e\\u3545\\u354bq\\u0100;q\\u11da\\u350feq\\u0100;q\\u352b\\u3528m;\\u6ac7\\u0100bp\\u355a\\u355c;\\u6ad5;\\u6ad3c\\u0300;acens\\u11ed\\u356c\\u3572\\u3579\\u357b\\u3326ppro\\xf8\\u32faurlye\\xf1\\u11fe\\xf1\\u11f3\\u0180aes\\u3582\\u3588\\u331bppro\\xf8\\u331aq\\xf1\\u3317g;\\u666a\\u0680123;Edehlmnps\\u35a9\\u35ac\\u35af\\u121c\\u35b2\\u35b4\\u35c0\\u35c9\\u35d5\\u35da\\u35df\\u35e8\\u35ed\\u803b\\xb9\\u40b9\\u803b\\xb2\\u40b2\\u803b\\xb3\\u40b3;\\u6ac6\\u0100os\\u35b9\\u35bct;\\u6abeub;\\u6ad8\\u0100;d\\u1222\\u35c5ot;\\u6ac4s\\u0100ou\\u35cf\\u35d2l;\\u67c9b;\\u6ad7arr;\\u697bult;\\u6ac2\\u0100Ee\\u35e4\\u35e6;\\u6acc;\\u628blus;\\u6ac0\\u0180eiu\\u35f4\\u3609\\u360ct\\u0180;en\\u121c\\u35fc\\u3602q\\u0100;q\\u1222\\u35b2eq\\u0100;q\\u35e7\\u35e4m;\\u6ac8\\u0100bp\\u3611\\u3613;\\u6ad4;\\u6ad6\\u0180Aan\\u361c\\u3620\\u362drr;\\u61d9r\\u0100hr\\u3626\\u3628\\xeb\\u222e\\u0100;o\\u0a2b\\u0a29war;\\u692alig\\u803b\\xdf\\u40df\\u0be1\\u3651\\u365d\\u3660\\u12ce\\u3673\\u3679\\0\\u367e\\u36c2\\0\\0\\0\\0\\0\\u36db\\u3703\\0\\u3709\\u376c\\0\\0\\0\\u3787\\u0272\\u3656\\0\\0\\u365bget;\\u6316;\\u43c4r\\xeb\\u0e5f\\u0180aey\\u3666\\u366b\\u3670ron;\\u4165dil;\\u4163;\\u4442lrec;\\u6315r;\\uc000\\ud835\\udd31\\u0200eiko\\u3686\\u369d\\u36b5\\u36bc\\u01f2\\u368b\\0\\u3691e\\u01004f\\u1284\\u1281a\\u0180;sv\\u3698\\u3699\\u369b\\u43b8ym;\\u43d1\\u0100cn\\u36a2\\u36b2k\\u0100as\\u36a8\\u36aeppro\\xf8\\u12c1im\\xbb\\u12acs\\xf0\\u129e\\u0100as\\u36ba\\u36ae\\xf0\\u12c1rn\\u803b\\xfe\\u40fe\\u01ec\\u031f\\u36c6\\u22e7es\\u8180\\xd7;bd\\u36cf\\u36d0\\u36d8\\u40d7\\u0100;a\\u190f\\u36d5r;\\u6a31;\\u6a30\\u0180eps\\u36e1\\u36e3\\u3700\\xe1\\u2a4d\\u0200;bcf\\u0486\\u36ec\\u36f0\\u36f4ot;\\u6336ir;\\u6af1\\u0100;o\\u36f9\\u36fc\\uc000\\ud835\\udd65rk;\\u6ada\\xe1\\u3362rime;\\u6034\\u0180aip\\u370f\\u3712\\u3764d\\xe5\\u1248\\u0380adempst\\u3721\\u374d\\u3740\\u3751\\u3757\\u375c\\u375fngle\\u0280;dlqr\\u3730\\u3731\\u3736\\u3740\\u3742\\u65b5own\\xbb\\u1dbbeft\\u0100;e\\u2800\\u373e\\xf1\\u092e;\\u625cight\\u0100;e\\u32aa\\u374b\\xf1\\u105aot;\\u65ecinus;\\u6a3alus;\\u6a39b;\\u69cdime;\\u6a3bezium;\\u63e2\\u0180cht\\u3772\\u377d\\u3781\\u0100ry\\u3777\\u377b;\\uc000\\ud835\\udcc9;\\u4446cy;\\u445brok;\\u4167\\u0100io\\u378b\\u378ex\\xf4\\u1777head\\u0100lr\\u3797\\u37a0eftarro\\xf7\\u084fightarrow\\xbb\\u0f5d\\u0900AHabcdfghlmoprstuw\\u37d0\\u37d3\\u37d7\\u37e4\\u37f0\\u37fc\\u380e\\u381c\\u3823\\u3834\\u3851\\u385d\\u386b\\u38a9\\u38cc\\u38d2\\u38ea\\u38f6r\\xf2\\u03edar;\\u6963\\u0100cr\\u37dc\\u37e2ute\\u803b\\xfa\\u40fa\\xf2\\u1150r\\u01e3\\u37ea\\0\\u37edy;\\u445eve;\\u416d\\u0100iy\\u37f5\\u37farc\\u803b\\xfb\\u40fb;\\u4443\\u0180abh\\u3803\\u3806\\u380br\\xf2\\u13adlac;\\u4171a\\xf2\\u13c3\\u0100ir\\u3813\\u3818sht;\\u697e;\\uc000\\ud835\\udd32rave\\u803b\\xf9\\u40f9\\u0161\\u3827\\u3831r\\u0100lr\\u382c\\u382e\\xbb\\u0957\\xbb\\u1083lk;\\u6580\\u0100ct\\u3839\\u384d\\u026f\\u383f\\0\\0\\u384arn\\u0100;e\\u3845\\u3846\\u631cr\\xbb\\u3846op;\\u630fri;\\u65f8\\u0100al\\u3856\\u385acr;\\u416b\\u80bb\\xa8\\u0349\\u0100gp\\u3862\\u3866on;\\u4173f;\\uc000\\ud835\\udd66\\u0300adhlsu\\u114b\\u3878\\u387d\\u1372\\u3891\\u38a0own\\xe1\\u13b3arpoon\\u0100lr\\u3888\\u388cef\\xf4\\u382digh\\xf4\\u382fi\\u0180;hl\\u3899\\u389a\\u389c\\u43c5\\xbb\\u13faon\\xbb\\u389aparrows;\\u61c8\\u0180cit\\u38b0\\u38c4\\u38c8\\u026f\\u38b6\\0\\0\\u38c1rn\\u0100;e\\u38bc\\u38bd\\u631dr\\xbb\\u38bdop;\\u630eng;\\u416fri;\\u65f9cr;\\uc000\\ud835\\udcca\\u0180dir\\u38d9\\u38dd\\u38e2ot;\\u62f0lde;\\u4169i\\u0100;f\\u3730\\u38e8\\xbb\\u1813\\u0100am\\u38ef\\u38f2r\\xf2\\u38a8l\\u803b\\xfc\\u40fcangle;\\u69a7\\u0780ABDacdeflnoprsz\\u391c\\u391f\\u3929\\u392d\\u39b5\\u39b8\\u39bd\\u39df\\u39e4\\u39e8\\u39f3\\u39f9\\u39fd\\u3a01\\u3a20r\\xf2\\u03f7ar\\u0100;v\\u3926\\u3927\\u6ae8;\\u6ae9as\\xe8\\u03e1\\u0100nr\\u3932\\u3937grt;\\u699c\\u0380eknprst\\u34e3\\u3946\\u394b\\u3952\\u395d\\u3964\\u3996app\\xe1\\u2415othin\\xe7\\u1e96\\u0180hir\\u34eb\\u2ec8\\u3959op\\xf4\\u2fb5\\u0100;h\\u13b7\\u3962\\xef\\u318d\\u0100iu\\u3969\\u396dgm\\xe1\\u33b3\\u0100bp\\u3972\\u3984setneq\\u0100;q\\u397d\\u3980\\uc000\\u228a\\ufe00;\\uc000\\u2acb\\ufe00setneq\\u0100;q\\u398f\\u3992\\uc000\\u228b\\ufe00;\\uc000\\u2acc\\ufe00\\u0100hr\\u399b\\u399fet\\xe1\\u369ciangle\\u0100lr\\u39aa\\u39afeft\\xbb\\u0925ight\\xbb\\u1051y;\\u4432ash\\xbb\\u1036\\u0180elr\\u39c4\\u39d2\\u39d7\\u0180;be\\u2dea\\u39cb\\u39cfar;\\u62bbq;\\u625alip;\\u62ee\\u0100bt\\u39dc\\u1468a\\xf2\\u1469r;\\uc000\\ud835\\udd33tr\\xe9\\u39aesu\\u0100bp\\u39ef\\u39f1\\xbb\\u0d1c\\xbb\\u0d59pf;\\uc000\\ud835\\udd67ro\\xf0\\u0efbtr\\xe9\\u39b4\\u0100cu\\u3a06\\u3a0br;\\uc000\\ud835\\udccb\\u0100bp\\u3a10\\u3a18n\\u0100Ee\\u3980\\u3a16\\xbb\\u397en\\u0100Ee\\u3992\\u3a1e\\xbb\\u3990igzag;\\u699a\\u0380cefoprs\\u3a36\\u3a3b\\u3a56\\u3a5b\\u3a54\\u3a61\\u3a6airc;\\u4175\\u0100di\\u3a40\\u3a51\\u0100bg\\u3a45\\u3a49ar;\\u6a5fe\\u0100;q\\u15fa\\u3a4f;\\u6259erp;\\u6118r;\\uc000\\ud835\\udd34pf;\\uc000\\ud835\\udd68\\u0100;e\\u1479\\u3a66at\\xe8\\u1479cr;\\uc000\\ud835\\udccc\\u0ae3\\u178e\\u3a87\\0\\u3a8b\\0\\u3a90\\u3a9b\\0\\0\\u3a9d\\u3aa8\\u3aab\\u3aaf\\0\\0\\u3ac3\\u3ace\\0\\u3ad8\\u17dc\\u17dftr\\xe9\\u17d1r;\\uc000\\ud835\\udd35\\u0100Aa\\u3a94\\u3a97r\\xf2\\u03c3r\\xf2\\u09f6;\\u43be\\u0100Aa\\u3aa1\\u3aa4r\\xf2\\u03b8r\\xf2\\u09eba\\xf0\\u2713is;\\u62fb\\u0180dpt\\u17a4\\u3ab5\\u3abe\\u0100fl\\u3aba\\u17a9;\\uc000\\ud835\\udd69im\\xe5\\u17b2\\u0100Aa\\u3ac7\\u3acar\\xf2\\u03cer\\xf2\\u0a01\\u0100cq\\u3ad2\\u17b8r;\\uc000\\ud835\\udccd\\u0100pt\\u17d6\\u3adcr\\xe9\\u17d4\\u0400acefiosu\\u3af0\\u3afd\\u3b08\\u3b0c\\u3b11\\u3b15\\u3b1b\\u3b21c\\u0100uy\\u3af6\\u3afbte\\u803b\\xfd\\u40fd;\\u444f\\u0100iy\\u3b02\\u3b06rc;\\u4177;\\u444bn\\u803b\\xa5\\u40a5r;\\uc000\\ud835\\udd36cy;\\u4457pf;\\uc000\\ud835\\udd6acr;\\uc000\\ud835\\udcce\\u0100cm\\u3b26\\u3b29y;\\u444el\\u803b\\xff\\u40ff\\u0500acdefhiosw\\u3b42\\u3b48\\u3b54\\u3b58\\u3b64\\u3b69\\u3b6d\\u3b74\\u3b7a\\u3b80cute;\\u417a\\u0100ay\\u3b4d\\u3b52ron;\\u417e;\\u4437ot;\\u417c\\u0100et\\u3b5d\\u3b61tr\\xe6\\u155fa;\\u43b6r;\\uc000\\ud835\\udd37cy;\\u4436grarr;\\u61ddpf;\\uc000\\ud835\\udd6bcr;\\uc000\\ud835\\udccf\\u0100jn\\u3b85\\u3b87;\\u600dj;\\u600c\"\n    .split(\"\")\n    .map((c) => c.charCodeAt(0)));\n//# sourceMappingURL=decode-data-html.js.map","// Generated using scripts/write-decode-map.ts\nexport default new Uint16Array(\n// prettier-ignore\n\"\\u0200aglq\\t\\x15\\x18\\x1b\\u026d\\x0f\\0\\0\\x12p;\\u4026os;\\u4027t;\\u403et;\\u403cuot;\\u4022\"\n    .split(\"\")\n    .map((c) => c.charCodeAt(0)));\n//# sourceMappingURL=decode-data-xml.js.map","// Adapted from https://github.com/mathiasbynens/he/blob/36afe179392226cf1b6ccdb16ebbb7a5a844d93a/src/he.js#L106-L134\nvar _a;\nconst decodeMap = new Map([\n    [0, 65533],\n    // C1 Unicode control character reference replacements\n    [128, 8364],\n    [130, 8218],\n    [131, 402],\n    [132, 8222],\n    [133, 8230],\n    [134, 8224],\n    [135, 8225],\n    [136, 710],\n    [137, 8240],\n    [138, 352],\n    [139, 8249],\n    [140, 338],\n    [142, 381],\n    [145, 8216],\n    [146, 8217],\n    [147, 8220],\n    [148, 8221],\n    [149, 8226],\n    [150, 8211],\n    [151, 8212],\n    [152, 732],\n    [153, 8482],\n    [154, 353],\n    [155, 8250],\n    [156, 339],\n    [158, 382],\n    [159, 376],\n]);\n/**\n * Polyfill for `String.fromCodePoint`. It is used to create a string from a Unicode code point.\n */\nexport const fromCodePoint = \n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition, node/no-unsupported-features/es-builtins\n(_a = String.fromCodePoint) !== null && _a !== void 0 ? _a : function (codePoint) {\n    let output = \"\";\n    if (codePoint > 0xffff) {\n        codePoint -= 0x10000;\n        output += String.fromCharCode(((codePoint >>> 10) & 0x3ff) | 0xd800);\n        codePoint = 0xdc00 | (codePoint & 0x3ff);\n    }\n    output += String.fromCharCode(codePoint);\n    return output;\n};\n/**\n * Replace the given code point with a replacement character if it is a\n * surrogate or is outside the valid range. Otherwise return the code\n * point unchanged.\n */\nexport function replaceCodePoint(codePoint) {\n    var _a;\n    if ((codePoint >= 0xd800 && codePoint <= 0xdfff) || codePoint > 0x10ffff) {\n        return 0xfffd;\n    }\n    return (_a = decodeMap.get(codePoint)) !== null && _a !== void 0 ? _a : codePoint;\n}\n/**\n * Replace the code point if relevant, then convert it to a string.\n *\n * @deprecated Use `fromCodePoint(replaceCodePoint(codePoint))` instead.\n * @param codePoint The code point to decode.\n * @returns The decoded code point.\n */\nexport default function decodeCodePoint(codePoint) {\n    return fromCodePoint(replaceCodePoint(codePoint));\n}\n//# sourceMappingURL=decode_codepoint.js.map","import htmlDecodeTree from \"./generated/decode-data-html.js\";\nimport xmlDecodeTree from \"./generated/decode-data-xml.js\";\nimport decodeCodePoint, { replaceCodePoint, fromCodePoint, } from \"./decode_codepoint.js\";\n// Re-export for use by eg. htmlparser2\nexport { htmlDecodeTree, xmlDecodeTree, decodeCodePoint };\nexport { replaceCodePoint, fromCodePoint } from \"./decode_codepoint.js\";\nvar CharCodes;\n(function (CharCodes) {\n    CharCodes[CharCodes[\"NUM\"] = 35] = \"NUM\";\n    CharCodes[CharCodes[\"SEMI\"] = 59] = \"SEMI\";\n    CharCodes[CharCodes[\"EQUALS\"] = 61] = \"EQUALS\";\n    CharCodes[CharCodes[\"ZERO\"] = 48] = \"ZERO\";\n    CharCodes[CharCodes[\"NINE\"] = 57] = \"NINE\";\n    CharCodes[CharCodes[\"LOWER_A\"] = 97] = \"LOWER_A\";\n    CharCodes[CharCodes[\"LOWER_F\"] = 102] = \"LOWER_F\";\n    CharCodes[CharCodes[\"LOWER_X\"] = 120] = \"LOWER_X\";\n    CharCodes[CharCodes[\"LOWER_Z\"] = 122] = \"LOWER_Z\";\n    CharCodes[CharCodes[\"UPPER_A\"] = 65] = \"UPPER_A\";\n    CharCodes[CharCodes[\"UPPER_F\"] = 70] = \"UPPER_F\";\n    CharCodes[CharCodes[\"UPPER_Z\"] = 90] = \"UPPER_Z\";\n})(CharCodes || (CharCodes = {}));\n/** Bit that needs to be set to convert an upper case ASCII character to lower case */\nconst TO_LOWER_BIT = 0b100000;\nexport var BinTrieFlags;\n(function (BinTrieFlags) {\n    BinTrieFlags[BinTrieFlags[\"VALUE_LENGTH\"] = 49152] = \"VALUE_LENGTH\";\n    BinTrieFlags[BinTrieFlags[\"BRANCH_LENGTH\"] = 16256] = \"BRANCH_LENGTH\";\n    BinTrieFlags[BinTrieFlags[\"JUMP_TABLE\"] = 127] = \"JUMP_TABLE\";\n})(BinTrieFlags || (BinTrieFlags = {}));\nfunction isNumber(code) {\n    return code >= CharCodes.ZERO && code <= CharCodes.NINE;\n}\nfunction isHexadecimalCharacter(code) {\n    return ((code >= CharCodes.UPPER_A && code <= CharCodes.UPPER_F) ||\n        (code >= CharCodes.LOWER_A && code <= CharCodes.LOWER_F));\n}\nfunction isAsciiAlphaNumeric(code) {\n    return ((code >= CharCodes.UPPER_A && code <= CharCodes.UPPER_Z) ||\n        (code >= CharCodes.LOWER_A && code <= CharCodes.LOWER_Z) ||\n        isNumber(code));\n}\n/**\n * Checks if the given character is a valid end character for an entity in an attribute.\n *\n * Attribute values that aren't terminated properly aren't parsed, and shouldn't lead to a parser error.\n * See the example in https://html.spec.whatwg.org/multipage/parsing.html#named-character-reference-state\n */\nfunction isEntityInAttributeInvalidEnd(code) {\n    return code === CharCodes.EQUALS || isAsciiAlphaNumeric(code);\n}\nvar EntityDecoderState;\n(function (EntityDecoderState) {\n    EntityDecoderState[EntityDecoderState[\"EntityStart\"] = 0] = \"EntityStart\";\n    EntityDecoderState[EntityDecoderState[\"NumericStart\"] = 1] = \"NumericStart\";\n    EntityDecoderState[EntityDecoderState[\"NumericDecimal\"] = 2] = \"NumericDecimal\";\n    EntityDecoderState[EntityDecoderState[\"NumericHex\"] = 3] = \"NumericHex\";\n    EntityDecoderState[EntityDecoderState[\"NamedEntity\"] = 4] = \"NamedEntity\";\n})(EntityDecoderState || (EntityDecoderState = {}));\nexport var DecodingMode;\n(function (DecodingMode) {\n    /** Entities in text nodes that can end with any character. */\n    DecodingMode[DecodingMode[\"Legacy\"] = 0] = \"Legacy\";\n    /** Only allow entities terminated with a semicolon. */\n    DecodingMode[DecodingMode[\"Strict\"] = 1] = \"Strict\";\n    /** Entities in attributes have limitations on ending characters. */\n    DecodingMode[DecodingMode[\"Attribute\"] = 2] = \"Attribute\";\n})(DecodingMode || (DecodingMode = {}));\n/**\n * Token decoder with support of writing partial entities.\n */\nexport class EntityDecoder {\n    constructor(\n    /** The tree used to decode entities. */\n    decodeTree, \n    /**\n     * The function that is called when a codepoint is decoded.\n     *\n     * For multi-byte named entities, this will be called multiple times,\n     * with the second codepoint, and the same `consumed` value.\n     *\n     * @param codepoint The decoded codepoint.\n     * @param consumed The number of bytes consumed by the decoder.\n     */\n    emitCodePoint, \n    /** An object that is used to produce errors. */\n    errors) {\n        this.decodeTree = decodeTree;\n        this.emitCodePoint = emitCodePoint;\n        this.errors = errors;\n        /** The current state of the decoder. */\n        this.state = EntityDecoderState.EntityStart;\n        /** Characters that were consumed while parsing an entity. */\n        this.consumed = 1;\n        /**\n         * The result of the entity.\n         *\n         * Either the result index of a numeric entity, or the codepoint of a\n         * numeric entity.\n         */\n        this.result = 0;\n        /** The current index in the decode tree. */\n        this.treeIndex = 0;\n        /** The number of characters that were consumed in excess. */\n        this.excess = 1;\n        /** The mode in which the decoder is operating. */\n        this.decodeMode = DecodingMode.Strict;\n    }\n    /** Resets the instance to make it reusable. */\n    startEntity(decodeMode) {\n        this.decodeMode = decodeMode;\n        this.state = EntityDecoderState.EntityStart;\n        this.result = 0;\n        this.treeIndex = 0;\n        this.excess = 1;\n        this.consumed = 1;\n    }\n    /**\n     * Write an entity to the decoder. This can be called multiple times with partial entities.\n     * If the entity is incomplete, the decoder will return -1.\n     *\n     * Mirrors the implementation of `getDecoder`, but with the ability to stop decoding if the\n     * entity is incomplete, and resume when the next string is written.\n     *\n     * @param string The string containing the entity (or a continuation of the entity).\n     * @param offset The offset at which the entity begins. Should be 0 if this is not the first call.\n     * @returns The number of characters that were consumed, or -1 if the entity is incomplete.\n     */\n    write(str, offset) {\n        switch (this.state) {\n            case EntityDecoderState.EntityStart: {\n                if (str.charCodeAt(offset) === CharCodes.NUM) {\n                    this.state = EntityDecoderState.NumericStart;\n                    this.consumed += 1;\n                    return this.stateNumericStart(str, offset + 1);\n                }\n                this.state = EntityDecoderState.NamedEntity;\n                return this.stateNamedEntity(str, offset);\n            }\n            case EntityDecoderState.NumericStart: {\n                return this.stateNumericStart(str, offset);\n            }\n            case EntityDecoderState.NumericDecimal: {\n                return this.stateNumericDecimal(str, offset);\n            }\n            case EntityDecoderState.NumericHex: {\n                return this.stateNumericHex(str, offset);\n            }\n            case EntityDecoderState.NamedEntity: {\n                return this.stateNamedEntity(str, offset);\n            }\n        }\n    }\n    /**\n     * Switches between the numeric decimal and hexadecimal states.\n     *\n     * Equivalent to the `Numeric character reference state` in the HTML spec.\n     *\n     * @param str The string containing the entity (or a continuation of the entity).\n     * @param offset The current offset.\n     * @returns The number of characters that were consumed, or -1 if the entity is incomplete.\n     */\n    stateNumericStart(str, offset) {\n        if (offset >= str.length) {\n            return -1;\n        }\n        if ((str.charCodeAt(offset) | TO_LOWER_BIT) === CharCodes.LOWER_X) {\n            this.state = EntityDecoderState.NumericHex;\n            this.consumed += 1;\n            return this.stateNumericHex(str, offset + 1);\n        }\n        this.state = EntityDecoderState.NumericDecimal;\n        return this.stateNumericDecimal(str, offset);\n    }\n    addToNumericResult(str, start, end, base) {\n        if (start !== end) {\n            const digitCount = end - start;\n            this.result =\n                this.result * Math.pow(base, digitCount) +\n                    parseInt(str.substr(start, digitCount), base);\n            this.consumed += digitCount;\n        }\n    }\n    /**\n     * Parses a hexadecimal numeric entity.\n     *\n     * Equivalent to the `Hexademical character reference state` in the HTML spec.\n     *\n     * @param str The string containing the entity (or a continuation of the entity).\n     * @param offset The current offset.\n     * @returns The number of characters that were consumed, or -1 if the entity is incomplete.\n     */\n    stateNumericHex(str, offset) {\n        const startIdx = offset;\n        while (offset < str.length) {\n            const char = str.charCodeAt(offset);\n            if (isNumber(char) || isHexadecimalCharacter(char)) {\n                offset += 1;\n            }\n            else {\n                this.addToNumericResult(str, startIdx, offset, 16);\n                return this.emitNumericEntity(char, 3);\n            }\n        }\n        this.addToNumericResult(str, startIdx, offset, 16);\n        return -1;\n    }\n    /**\n     * Parses a decimal numeric entity.\n     *\n     * Equivalent to the `Decimal character reference state` in the HTML spec.\n     *\n     * @param str The string containing the entity (or a continuation of the entity).\n     * @param offset The current offset.\n     * @returns The number of characters that were consumed, or -1 if the entity is incomplete.\n     */\n    stateNumericDecimal(str, offset) {\n        const startIdx = offset;\n        while (offset < str.length) {\n            const char = str.charCodeAt(offset);\n            if (isNumber(char)) {\n                offset += 1;\n            }\n            else {\n                this.addToNumericResult(str, startIdx, offset, 10);\n                return this.emitNumericEntity(char, 2);\n            }\n        }\n        this.addToNumericResult(str, startIdx, offset, 10);\n        return -1;\n    }\n    /**\n     * Validate and emit a numeric entity.\n     *\n     * Implements the logic from the `Hexademical character reference start\n     * state` and `Numeric character reference end state` in the HTML spec.\n     *\n     * @param lastCp The last code point of the entity. Used to see if the\n     *               entity was terminated with a semicolon.\n     * @param expectedLength The minimum number of characters that should be\n     *                       consumed. Used to validate that at least one digit\n     *                       was consumed.\n     * @returns The number of characters that were consumed.\n     */\n    emitNumericEntity(lastCp, expectedLength) {\n        var _a;\n        // Ensure we consumed at least one digit.\n        if (this.consumed <= expectedLength) {\n            (_a = this.errors) === null || _a === void 0 ? void 0 : _a.absenceOfDigitsInNumericCharacterReference(this.consumed);\n            return 0;\n        }\n        // Figure out if this is a legit end of the entity\n        if (lastCp === CharCodes.SEMI) {\n            this.consumed += 1;\n        }\n        else if (this.decodeMode === DecodingMode.Strict) {\n            return 0;\n        }\n        this.emitCodePoint(replaceCodePoint(this.result), this.consumed);\n        if (this.errors) {\n            if (lastCp !== CharCodes.SEMI) {\n                this.errors.missingSemicolonAfterCharacterReference();\n            }\n            this.errors.validateNumericCharacterReference(this.result);\n        }\n        return this.consumed;\n    }\n    /**\n     * Parses a named entity.\n     *\n     * Equivalent to the `Named character reference state` in the HTML spec.\n     *\n     * @param str The string containing the entity (or a continuation of the entity).\n     * @param offset The current offset.\n     * @returns The number of characters that were consumed, or -1 if the entity is incomplete.\n     */\n    stateNamedEntity(str, offset) {\n        const { decodeTree } = this;\n        let current = decodeTree[this.treeIndex];\n        // The mask is the number of bytes of the value, including the current byte.\n        let valueLength = (current & BinTrieFlags.VALUE_LENGTH) >> 14;\n        for (; offset < str.length; offset++, this.excess++) {\n            const char = str.charCodeAt(offset);\n            this.treeIndex = determineBranch(decodeTree, current, this.treeIndex + Math.max(1, valueLength), char);\n            if (this.treeIndex < 0) {\n                return this.result === 0 ||\n                    // If we are parsing an attribute\n                    (this.decodeMode === DecodingMode.Attribute &&\n                        // We shouldn't have consumed any characters after the entity,\n                        (valueLength === 0 ||\n                            // And there should be no invalid characters.\n                            isEntityInAttributeInvalidEnd(char)))\n                    ? 0\n                    : this.emitNotTerminatedNamedEntity();\n            }\n            current = decodeTree[this.treeIndex];\n            valueLength = (current & BinTrieFlags.VALUE_LENGTH) >> 14;\n            // If the branch is a value, store it and continue\n            if (valueLength !== 0) {\n                // If the entity is terminated by a semicolon, we are done.\n                if (char === CharCodes.SEMI) {\n                    return this.emitNamedEntityData(this.treeIndex, valueLength, this.consumed + this.excess);\n                }\n                // If we encounter a non-terminated (legacy) entity while parsing strictly, then ignore it.\n                if (this.decodeMode !== DecodingMode.Strict) {\n                    this.result = this.treeIndex;\n                    this.consumed += this.excess;\n                    this.excess = 0;\n                }\n            }\n        }\n        return -1;\n    }\n    /**\n     * Emit a named entity that was not terminated with a semicolon.\n     *\n     * @returns The number of characters consumed.\n     */\n    emitNotTerminatedNamedEntity() {\n        var _a;\n        const { result, decodeTree } = this;\n        const valueLength = (decodeTree[result] & BinTrieFlags.VALUE_LENGTH) >> 14;\n        this.emitNamedEntityData(result, valueLength, this.consumed);\n        (_a = this.errors) === null || _a === void 0 ? void 0 : _a.missingSemicolonAfterCharacterReference();\n        return this.consumed;\n    }\n    /**\n     * Emit a named entity.\n     *\n     * @param result The index of the entity in the decode tree.\n     * @param valueLength The number of bytes in the entity.\n     * @param consumed The number of characters consumed.\n     *\n     * @returns The number of characters consumed.\n     */\n    emitNamedEntityData(result, valueLength, consumed) {\n        const { decodeTree } = this;\n        this.emitCodePoint(valueLength === 1\n            ? decodeTree[result] & ~BinTrieFlags.VALUE_LENGTH\n            : decodeTree[result + 1], consumed);\n        if (valueLength === 3) {\n            // For multi-byte values, we need to emit the second byte.\n            this.emitCodePoint(decodeTree[result + 2], consumed);\n        }\n        return consumed;\n    }\n    /**\n     * Signal to the parser that the end of the input was reached.\n     *\n     * Remaining data will be emitted and relevant errors will be produced.\n     *\n     * @returns The number of characters consumed.\n     */\n    end() {\n        var _a;\n        switch (this.state) {\n            case EntityDecoderState.NamedEntity: {\n                // Emit a named entity if we have one.\n                return this.result !== 0 &&\n                    (this.decodeMode !== DecodingMode.Attribute ||\n                        this.result === this.treeIndex)\n                    ? this.emitNotTerminatedNamedEntity()\n                    : 0;\n            }\n            // Otherwise, emit a numeric entity if we have one.\n            case EntityDecoderState.NumericDecimal: {\n                return this.emitNumericEntity(0, 2);\n            }\n            case EntityDecoderState.NumericHex: {\n                return this.emitNumericEntity(0, 3);\n            }\n            case EntityDecoderState.NumericStart: {\n                (_a = this.errors) === null || _a === void 0 ? void 0 : _a.absenceOfDigitsInNumericCharacterReference(this.consumed);\n                return 0;\n            }\n            case EntityDecoderState.EntityStart: {\n                // Return 0 if we have no entity.\n                return 0;\n            }\n        }\n    }\n}\n/**\n * Creates a function that decodes entities in a string.\n *\n * @param decodeTree The decode tree.\n * @returns A function that decodes entities in a string.\n */\nfunction getDecoder(decodeTree) {\n    let ret = \"\";\n    const decoder = new EntityDecoder(decodeTree, (str) => (ret += fromCodePoint(str)));\n    return function decodeWithTrie(str, decodeMode) {\n        let lastIndex = 0;\n        let offset = 0;\n        while ((offset = str.indexOf(\"&\", offset)) >= 0) {\n            ret += str.slice(lastIndex, offset);\n            decoder.startEntity(decodeMode);\n            const len = decoder.write(str, \n            // Skip the \"&\"\n            offset + 1);\n            if (len < 0) {\n                lastIndex = offset + decoder.end();\n                break;\n            }\n            lastIndex = offset + len;\n            // If `len` is 0, skip the current `&` and continue.\n            offset = len === 0 ? lastIndex + 1 : lastIndex;\n        }\n        const result = ret + str.slice(lastIndex);\n        // Make sure we don't keep a reference to the final string.\n        ret = \"\";\n        return result;\n    };\n}\n/**\n * Determines the branch of the current node that is taken given the current\n * character. This function is used to traverse the trie.\n *\n * @param decodeTree The trie.\n * @param current The current node.\n * @param nodeIdx The index right after the current node and its value.\n * @param char The current character.\n * @returns The index of the next node, or -1 if no branch is taken.\n */\nexport function determineBranch(decodeTree, current, nodeIdx, char) {\n    const branchCount = (current & BinTrieFlags.BRANCH_LENGTH) >> 7;\n    const jumpOffset = current & BinTrieFlags.JUMP_TABLE;\n    // Case 1: Single branch encoded in jump offset\n    if (branchCount === 0) {\n        return jumpOffset !== 0 && char === jumpOffset ? nodeIdx : -1;\n    }\n    // Case 2: Multiple branches encoded in jump table\n    if (jumpOffset) {\n        const value = char - jumpOffset;\n        return value < 0 || value >= branchCount\n            ? -1\n            : decodeTree[nodeIdx + value] - 1;\n    }\n    // Case 3: Multiple branches encoded in dictionary\n    // Binary search for the character.\n    let lo = nodeIdx;\n    let hi = lo + branchCount - 1;\n    while (lo <= hi) {\n        const mid = (lo + hi) >>> 1;\n        const midVal = decodeTree[mid];\n        if (midVal < char) {\n            lo = mid + 1;\n        }\n        else if (midVal > char) {\n            hi = mid - 1;\n        }\n        else {\n            return decodeTree[mid + branchCount];\n        }\n    }\n    return -1;\n}\nconst htmlDecoder = getDecoder(htmlDecodeTree);\nconst xmlDecoder = getDecoder(xmlDecodeTree);\n/**\n * Decodes an HTML string.\n *\n * @param str The string to decode.\n * @param mode The decoding mode.\n * @returns The decoded string.\n */\nexport function decodeHTML(str, mode = DecodingMode.Legacy) {\n    return htmlDecoder(str, mode);\n}\n/**\n * Decodes an HTML string in an attribute.\n *\n * @param str The string to decode.\n * @returns The decoded string.\n */\nexport function decodeHTMLAttribute(str) {\n    return htmlDecoder(str, DecodingMode.Attribute);\n}\n/**\n * Decodes an HTML string, requiring all entities to be terminated by a semicolon.\n *\n * @param str The string to decode.\n * @returns The decoded string.\n */\nexport function decodeHTMLStrict(str) {\n    return htmlDecoder(str, DecodingMode.Strict);\n}\n/**\n * Decodes an XML string, requiring all entities to be terminated by a semicolon.\n *\n * @param str The string to decode.\n * @returns The decoded string.\n */\nexport function decodeXML(str) {\n    return xmlDecoder(str, DecodingMode.Strict);\n}\n//# sourceMappingURL=decode.js.map","import { htmlDecodeTree, xmlDecodeTree, BinTrieFlags, determineBranch, replaceCodePoint, } from \"entities/lib/decode.js\";\nvar CharCodes;\n(function (CharCodes) {\n    CharCodes[CharCodes[\"Tab\"] = 9] = \"Tab\";\n    CharCodes[CharCodes[\"NewLine\"] = 10] = \"NewLine\";\n    CharCodes[CharCodes[\"FormFeed\"] = 12] = \"FormFeed\";\n    CharCodes[CharCodes[\"CarriageReturn\"] = 13] = \"CarriageReturn\";\n    CharCodes[CharCodes[\"Space\"] = 32] = \"Space\";\n    CharCodes[CharCodes[\"ExclamationMark\"] = 33] = \"ExclamationMark\";\n    CharCodes[CharCodes[\"Number\"] = 35] = \"Number\";\n    CharCodes[CharCodes[\"Amp\"] = 38] = \"Amp\";\n    CharCodes[CharCodes[\"SingleQuote\"] = 39] = \"SingleQuote\";\n    CharCodes[CharCodes[\"DoubleQuote\"] = 34] = \"DoubleQuote\";\n    CharCodes[CharCodes[\"Dash\"] = 45] = \"Dash\";\n    CharCodes[CharCodes[\"Slash\"] = 47] = \"Slash\";\n    CharCodes[CharCodes[\"Zero\"] = 48] = \"Zero\";\n    CharCodes[CharCodes[\"Nine\"] = 57] = \"Nine\";\n    CharCodes[CharCodes[\"Semi\"] = 59] = \"Semi\";\n    CharCodes[CharCodes[\"Lt\"] = 60] = \"Lt\";\n    CharCodes[CharCodes[\"Eq\"] = 61] = \"Eq\";\n    CharCodes[CharCodes[\"Gt\"] = 62] = \"Gt\";\n    CharCodes[CharCodes[\"Questionmark\"] = 63] = \"Questionmark\";\n    CharCodes[CharCodes[\"UpperA\"] = 65] = \"UpperA\";\n    CharCodes[CharCodes[\"LowerA\"] = 97] = \"LowerA\";\n    CharCodes[CharCodes[\"UpperF\"] = 70] = \"UpperF\";\n    CharCodes[CharCodes[\"LowerF\"] = 102] = \"LowerF\";\n    CharCodes[CharCodes[\"UpperZ\"] = 90] = \"UpperZ\";\n    CharCodes[CharCodes[\"LowerZ\"] = 122] = \"LowerZ\";\n    CharCodes[CharCodes[\"LowerX\"] = 120] = \"LowerX\";\n    CharCodes[CharCodes[\"OpeningSquareBracket\"] = 91] = \"OpeningSquareBracket\";\n})(CharCodes || (CharCodes = {}));\n/** All the states the tokenizer can be in. */\nvar State;\n(function (State) {\n    State[State[\"Text\"] = 1] = \"Text\";\n    State[State[\"BeforeTagName\"] = 2] = \"BeforeTagName\";\n    State[State[\"InTagName\"] = 3] = \"InTagName\";\n    State[State[\"InSelfClosingTag\"] = 4] = \"InSelfClosingTag\";\n    State[State[\"BeforeClosingTagName\"] = 5] = \"BeforeClosingTagName\";\n    State[State[\"InClosingTagName\"] = 6] = \"InClosingTagName\";\n    State[State[\"AfterClosingTagName\"] = 7] = \"AfterClosingTagName\";\n    // Attributes\n    State[State[\"BeforeAttributeName\"] = 8] = \"BeforeAttributeName\";\n    State[State[\"InAttributeName\"] = 9] = \"InAttributeName\";\n    State[State[\"AfterAttributeName\"] = 10] = \"AfterAttributeName\";\n    State[State[\"BeforeAttributeValue\"] = 11] = \"BeforeAttributeValue\";\n    State[State[\"InAttributeValueDq\"] = 12] = \"InAttributeValueDq\";\n    State[State[\"InAttributeValueSq\"] = 13] = \"InAttributeValueSq\";\n    State[State[\"InAttributeValueNq\"] = 14] = \"InAttributeValueNq\";\n    // Declarations\n    State[State[\"BeforeDeclaration\"] = 15] = \"BeforeDeclaration\";\n    State[State[\"InDeclaration\"] = 16] = \"InDeclaration\";\n    // Processing instructions\n    State[State[\"InProcessingInstruction\"] = 17] = \"InProcessingInstruction\";\n    // Comments & CDATA\n    State[State[\"BeforeComment\"] = 18] = \"BeforeComment\";\n    State[State[\"CDATASequence\"] = 19] = \"CDATASequence\";\n    State[State[\"InSpecialComment\"] = 20] = \"InSpecialComment\";\n    State[State[\"InCommentLike\"] = 21] = \"InCommentLike\";\n    // Special tags\n    State[State[\"BeforeSpecialS\"] = 22] = \"BeforeSpecialS\";\n    State[State[\"SpecialStartSequence\"] = 23] = \"SpecialStartSequence\";\n    State[State[\"InSpecialTag\"] = 24] = \"InSpecialTag\";\n    State[State[\"BeforeEntity\"] = 25] = \"BeforeEntity\";\n    State[State[\"BeforeNumericEntity\"] = 26] = \"BeforeNumericEntity\";\n    State[State[\"InNamedEntity\"] = 27] = \"InNamedEntity\";\n    State[State[\"InNumericEntity\"] = 28] = \"InNumericEntity\";\n    State[State[\"InHexEntity\"] = 29] = \"InHexEntity\";\n})(State || (State = {}));\nfunction isWhitespace(c) {\n    return (c === CharCodes.Space ||\n        c === CharCodes.NewLine ||\n        c === CharCodes.Tab ||\n        c === CharCodes.FormFeed ||\n        c === CharCodes.CarriageReturn);\n}\nfunction isEndOfTagSection(c) {\n    return c === CharCodes.Slash || c === CharCodes.Gt || isWhitespace(c);\n}\nfunction isNumber(c) {\n    return c >= CharCodes.Zero && c <= CharCodes.Nine;\n}\nfunction isASCIIAlpha(c) {\n    return ((c >= CharCodes.LowerA && c <= CharCodes.LowerZ) ||\n        (c >= CharCodes.UpperA && c <= CharCodes.UpperZ));\n}\nfunction isHexDigit(c) {\n    return ((c >= CharCodes.UpperA && c <= CharCodes.UpperF) ||\n        (c >= CharCodes.LowerA && c <= CharCodes.LowerF));\n}\nexport var QuoteType;\n(function (QuoteType) {\n    QuoteType[QuoteType[\"NoValue\"] = 0] = \"NoValue\";\n    QuoteType[QuoteType[\"Unquoted\"] = 1] = \"Unquoted\";\n    QuoteType[QuoteType[\"Single\"] = 2] = \"Single\";\n    QuoteType[QuoteType[\"Double\"] = 3] = \"Double\";\n})(QuoteType || (QuoteType = {}));\n/**\n * Sequences used to match longer strings.\n *\n * We don't have `Script`, `Style`, or `Title` here. Instead, we re-use the *End\n * sequences with an increased offset.\n */\nconst Sequences = {\n    Cdata: new Uint8Array([0x43, 0x44, 0x41, 0x54, 0x41, 0x5b]),\n    CdataEnd: new Uint8Array([0x5d, 0x5d, 0x3e]),\n    CommentEnd: new Uint8Array([0x2d, 0x2d, 0x3e]),\n    ScriptEnd: new Uint8Array([0x3c, 0x2f, 0x73, 0x63, 0x72, 0x69, 0x70, 0x74]),\n    StyleEnd: new Uint8Array([0x3c, 0x2f, 0x73, 0x74, 0x79, 0x6c, 0x65]),\n    TitleEnd: new Uint8Array([0x3c, 0x2f, 0x74, 0x69, 0x74, 0x6c, 0x65]), // `</title`\n};\nexport default class Tokenizer {\n    constructor({ xmlMode = false, decodeEntities = true, }, cbs) {\n        this.cbs = cbs;\n        /** The current state the tokenizer is in. */\n        this.state = State.Text;\n        /** The read buffer. */\n        this.buffer = \"\";\n        /** The beginning of the section that is currently being read. */\n        this.sectionStart = 0;\n        /** The index within the buffer that we are currently looking at. */\n        this.index = 0;\n        /** Some behavior, eg. when decoding entities, is done while we are in another state. This keeps track of the other state type. */\n        this.baseState = State.Text;\n        /** For special parsing behavior inside of script and style tags. */\n        this.isSpecial = false;\n        /** Indicates whether the tokenizer has been paused. */\n        this.running = true;\n        /** The offset of the current buffer. */\n        this.offset = 0;\n        this.currentSequence = undefined;\n        this.sequenceIndex = 0;\n        this.trieIndex = 0;\n        this.trieCurrent = 0;\n        /** For named entities, the index of the value. For numeric entities, the code point. */\n        this.entityResult = 0;\n        this.entityExcess = 0;\n        this.xmlMode = xmlMode;\n        this.decodeEntities = decodeEntities;\n        this.entityTrie = xmlMode ? xmlDecodeTree : htmlDecodeTree;\n    }\n    reset() {\n        this.state = State.Text;\n        this.buffer = \"\";\n        this.sectionStart = 0;\n        this.index = 0;\n        this.baseState = State.Text;\n        this.currentSequence = undefined;\n        this.running = true;\n        this.offset = 0;\n    }\n    write(chunk) {\n        this.offset += this.buffer.length;\n        this.buffer = chunk;\n        this.parse();\n    }\n    end() {\n        if (this.running)\n            this.finish();\n    }\n    pause() {\n        this.running = false;\n    }\n    resume() {\n        this.running = true;\n        if (this.index < this.buffer.length + this.offset) {\n            this.parse();\n        }\n    }\n    /**\n     * The current index within all of the written data.\n     */\n    getIndex() {\n        return this.index;\n    }\n    /**\n     * The start of the current section.\n     */\n    getSectionStart() {\n        return this.sectionStart;\n    }\n    stateText(c) {\n        if (c === CharCodes.Lt ||\n            (!this.decodeEntities && this.fastForwardTo(CharCodes.Lt))) {\n            if (this.index > this.sectionStart) {\n                this.cbs.ontext(this.sectionStart, this.index);\n            }\n            this.state = State.BeforeTagName;\n            this.sectionStart = this.index;\n        }\n        else if (this.decodeEntities && c === CharCodes.Amp) {\n            this.state = State.BeforeEntity;\n        }\n    }\n    stateSpecialStartSequence(c) {\n        const isEnd = this.sequenceIndex === this.currentSequence.length;\n        const isMatch = isEnd\n            ? // If we are at the end of the sequence, make sure the tag name has ended\n                isEndOfTagSection(c)\n            : // Otherwise, do a case-insensitive comparison\n                (c | 0x20) === this.currentSequence[this.sequenceIndex];\n        if (!isMatch) {\n            this.isSpecial = false;\n        }\n        else if (!isEnd) {\n            this.sequenceIndex++;\n            return;\n        }\n        this.sequenceIndex = 0;\n        this.state = State.InTagName;\n        this.stateInTagName(c);\n    }\n    /** Look for an end tag. For <title> tags, also decode entities. */\n    stateInSpecialTag(c) {\n        if (this.sequenceIndex === this.currentSequence.length) {\n            if (c === CharCodes.Gt || isWhitespace(c)) {\n                const endOfText = this.index - this.currentSequence.length;\n                if (this.sectionStart < endOfText) {\n                    // Spoof the index so that reported locations match up.\n                    const actualIndex = this.index;\n                    this.index = endOfText;\n                    this.cbs.ontext(this.sectionStart, endOfText);\n                    this.index = actualIndex;\n                }\n                this.isSpecial = false;\n                this.sectionStart = endOfText + 2; // Skip over the `</`\n                this.stateInClosingTagName(c);\n                return; // We are done; skip the rest of the function.\n            }\n            this.sequenceIndex = 0;\n        }\n        if ((c | 0x20) === this.currentSequence[this.sequenceIndex]) {\n            this.sequenceIndex += 1;\n        }\n        else if (this.sequenceIndex === 0) {\n            if (this.currentSequence === Sequences.TitleEnd) {\n                // We have to parse entities in <title> tags.\n                if (this.decodeEntities && c === CharCodes.Amp) {\n                    this.state = State.BeforeEntity;\n                }\n            }\n            else if (this.fastForwardTo(CharCodes.Lt)) {\n                // Outside of <title> tags, we can fast-forward.\n                this.sequenceIndex = 1;\n            }\n        }\n        else {\n            // If we see a `<`, set the sequence index to 1; useful for eg. `<</script>`.\n            this.sequenceIndex = Number(c === CharCodes.Lt);\n        }\n    }\n    stateCDATASequence(c) {\n        if (c === Sequences.Cdata[this.sequenceIndex]) {\n            if (++this.sequenceIndex === Sequences.Cdata.length) {\n                this.state = State.InCommentLike;\n                this.currentSequence = Sequences.CdataEnd;\n                this.sequenceIndex = 0;\n                this.sectionStart = this.index + 1;\n            }\n        }\n        else {\n            this.sequenceIndex = 0;\n            this.state = State.InDeclaration;\n            this.stateInDeclaration(c); // Reconsume the character\n        }\n    }\n    /**\n     * When we wait for one specific character, we can speed things up\n     * by skipping through the buffer until we find it.\n     *\n     * @returns Whether the character was found.\n     */\n    fastForwardTo(c) {\n        while (++this.index < this.buffer.length + this.offset) {\n            if (this.buffer.charCodeAt(this.index - this.offset) === c) {\n                return true;\n            }\n        }\n        /*\n         * We increment the index at the end of the `parse` loop,\n         * so set it to `buffer.length - 1` here.\n         *\n         * TODO: Refactor `parse` to increment index before calling states.\n         */\n        this.index = this.buffer.length + this.offset - 1;\n        return false;\n    }\n    /**\n     * Comments and CDATA end with `-->` and `]]>`.\n     *\n     * Their common qualities are:\n     * - Their end sequences have a distinct character they start with.\n     * - That character is then repeated, so we have to check multiple repeats.\n     * - All characters but the start character of the sequence can be skipped.\n     */\n    stateInCommentLike(c) {\n        if (c === this.currentSequence[this.sequenceIndex]) {\n            if (++this.sequenceIndex === this.currentSequence.length) {\n                if (this.currentSequence === Sequences.CdataEnd) {\n                    this.cbs.oncdata(this.sectionStart, this.index, 2);\n                }\n                else {\n                    this.cbs.oncomment(this.sectionStart, this.index, 2);\n                }\n                this.sequenceIndex = 0;\n                this.sectionStart = this.index + 1;\n                this.state = State.Text;\n            }\n        }\n        else if (this.sequenceIndex === 0) {\n            // Fast-forward to the first character of the sequence\n            if (this.fastForwardTo(this.currentSequence[0])) {\n                this.sequenceIndex = 1;\n            }\n        }\n        else if (c !== this.currentSequence[this.sequenceIndex - 1]) {\n            // Allow long sequences, eg. --->, ]]]>\n            this.sequenceIndex = 0;\n        }\n    }\n    /**\n     * HTML only allows ASCII alpha characters (a-z and A-Z) at the beginning of a tag name.\n     *\n     * XML allows a lot more characters here (@see https://www.w3.org/TR/REC-xml/#NT-NameStartChar).\n     * We allow anything that wouldn't end the tag.\n     */\n    isTagStartChar(c) {\n        return this.xmlMode ? !isEndOfTagSection(c) : isASCIIAlpha(c);\n    }\n    startSpecial(sequence, offset) {\n        this.isSpecial = true;\n        this.currentSequence = sequence;\n        this.sequenceIndex = offset;\n        this.state = State.SpecialStartSequence;\n    }\n    stateBeforeTagName(c) {\n        if (c === CharCodes.ExclamationMark) {\n            this.state = State.BeforeDeclaration;\n            this.sectionStart = this.index + 1;\n        }\n        else if (c === CharCodes.Questionmark) {\n            this.state = State.InProcessingInstruction;\n            this.sectionStart = this.index + 1;\n        }\n        else if (this.isTagStartChar(c)) {\n            const lower = c | 0x20;\n            this.sectionStart = this.index;\n            if (!this.xmlMode && lower === Sequences.TitleEnd[2]) {\n                this.startSpecial(Sequences.TitleEnd, 3);\n            }\n            else {\n                this.state =\n                    !this.xmlMode && lower === Sequences.ScriptEnd[2]\n                        ? State.BeforeSpecialS\n                        : State.InTagName;\n            }\n        }\n        else if (c === CharCodes.Slash) {\n            this.state = State.BeforeClosingTagName;\n        }\n        else {\n            this.state = State.Text;\n            this.stateText(c);\n        }\n    }\n    stateInTagName(c) {\n        if (isEndOfTagSection(c)) {\n            this.cbs.onopentagname(this.sectionStart, this.index);\n            this.sectionStart = -1;\n            this.state = State.BeforeAttributeName;\n            this.stateBeforeAttributeName(c);\n        }\n    }\n    stateBeforeClosingTagName(c) {\n        if (isWhitespace(c)) {\n            // Ignore\n        }\n        else if (c === CharCodes.Gt) {\n            this.state = State.Text;\n        }\n        else {\n            this.state = this.isTagStartChar(c)\n                ? State.InClosingTagName\n                : State.InSpecialComment;\n            this.sectionStart = this.index;\n        }\n    }\n    stateInClosingTagName(c) {\n        if (c === CharCodes.Gt || isWhitespace(c)) {\n            this.cbs.onclosetag(this.sectionStart, this.index);\n            this.sectionStart = -1;\n            this.state = State.AfterClosingTagName;\n            this.stateAfterClosingTagName(c);\n        }\n    }\n    stateAfterClosingTagName(c) {\n        // Skip everything until \">\"\n        if (c === CharCodes.Gt || this.fastForwardTo(CharCodes.Gt)) {\n            this.state = State.Text;\n            this.baseState = State.Text;\n            this.sectionStart = this.index + 1;\n        }\n    }\n    stateBeforeAttributeName(c) {\n        if (c === CharCodes.Gt) {\n            this.cbs.onopentagend(this.index);\n            if (this.isSpecial) {\n                this.state = State.InSpecialTag;\n                this.sequenceIndex = 0;\n            }\n            else {\n                this.state = State.Text;\n            }\n            this.baseState = this.state;\n            this.sectionStart = this.index + 1;\n        }\n        else if (c === CharCodes.Slash) {\n            this.state = State.InSelfClosingTag;\n        }\n        else if (!isWhitespace(c)) {\n            this.state = State.InAttributeName;\n            this.sectionStart = this.index;\n        }\n    }\n    stateInSelfClosingTag(c) {\n        if (c === CharCodes.Gt) {\n            this.cbs.onselfclosingtag(this.index);\n            this.state = State.Text;\n            this.baseState = State.Text;\n            this.sectionStart = this.index + 1;\n            this.isSpecial = false; // Reset special state, in case of self-closing special tags\n        }\n        else if (!isWhitespace(c)) {\n            this.state = State.BeforeAttributeName;\n            this.stateBeforeAttributeName(c);\n        }\n    }\n    stateInAttributeName(c) {\n        if (c === CharCodes.Eq || isEndOfTagSection(c)) {\n            this.cbs.onattribname(this.sectionStart, this.index);\n            this.sectionStart = -1;\n            this.state = State.AfterAttributeName;\n            this.stateAfterAttributeName(c);\n        }\n    }\n    stateAfterAttributeName(c) {\n        if (c === CharCodes.Eq) {\n            this.state = State.BeforeAttributeValue;\n        }\n        else if (c === CharCodes.Slash || c === CharCodes.Gt) {\n            this.cbs.onattribend(QuoteType.NoValue, this.index);\n            this.state = State.BeforeAttributeName;\n            this.stateBeforeAttributeName(c);\n        }\n        else if (!isWhitespace(c)) {\n            this.cbs.onattribend(QuoteType.NoValue, this.index);\n            this.state = State.InAttributeName;\n            this.sectionStart = this.index;\n        }\n    }\n    stateBeforeAttributeValue(c) {\n        if (c === CharCodes.DoubleQuote) {\n            this.state = State.InAttributeValueDq;\n            this.sectionStart = this.index + 1;\n        }\n        else if (c === CharCodes.SingleQuote) {\n            this.state = State.InAttributeValueSq;\n            this.sectionStart = this.index + 1;\n        }\n        else if (!isWhitespace(c)) {\n            this.sectionStart = this.index;\n            this.state = State.InAttributeValueNq;\n            this.stateInAttributeValueNoQuotes(c); // Reconsume token\n        }\n    }\n    handleInAttributeValue(c, quote) {\n        if (c === quote ||\n            (!this.decodeEntities && this.fastForwardTo(quote))) {\n            this.cbs.onattribdata(this.sectionStart, this.index);\n            this.sectionStart = -1;\n            this.cbs.onattribend(quote === CharCodes.DoubleQuote\n                ? QuoteType.Double\n                : QuoteType.Single, this.index);\n            this.state = State.BeforeAttributeName;\n        }\n        else if (this.decodeEntities && c === CharCodes.Amp) {\n            this.baseState = this.state;\n            this.state = State.BeforeEntity;\n        }\n    }\n    stateInAttributeValueDoubleQuotes(c) {\n        this.handleInAttributeValue(c, CharCodes.DoubleQuote);\n    }\n    stateInAttributeValueSingleQuotes(c) {\n        this.handleInAttributeValue(c, CharCodes.SingleQuote);\n    }\n    stateInAttributeValueNoQuotes(c) {\n        if (isWhitespace(c) || c === CharCodes.Gt) {\n            this.cbs.onattribdata(this.sectionStart, this.index);\n            this.sectionStart = -1;\n            this.cbs.onattribend(QuoteType.Unquoted, this.index);\n            this.state = State.BeforeAttributeName;\n            this.stateBeforeAttributeName(c);\n        }\n        else if (this.decodeEntities && c === CharCodes.Amp) {\n            this.baseState = this.state;\n            this.state = State.BeforeEntity;\n        }\n    }\n    stateBeforeDeclaration(c) {\n        if (c === CharCodes.OpeningSquareBracket) {\n            this.state = State.CDATASequence;\n            this.sequenceIndex = 0;\n        }\n        else {\n            this.state =\n                c === CharCodes.Dash\n                    ? State.BeforeComment\n                    : State.InDeclaration;\n        }\n    }\n    stateInDeclaration(c) {\n        if (c === CharCodes.Gt || this.fastForwardTo(CharCodes.Gt)) {\n            this.cbs.ondeclaration(this.sectionStart, this.index);\n            this.state = State.Text;\n            this.sectionStart = this.index + 1;\n        }\n    }\n    stateInProcessingInstruction(c) {\n        if (c === CharCodes.Gt || this.fastForwardTo(CharCodes.Gt)) {\n            this.cbs.onprocessinginstruction(this.sectionStart, this.index);\n            this.state = State.Text;\n            this.sectionStart = this.index + 1;\n        }\n    }\n    stateBeforeComment(c) {\n        if (c === CharCodes.Dash) {\n            this.state = State.InCommentLike;\n            this.currentSequence = Sequences.CommentEnd;\n            // Allow short comments (eg. <!-->)\n            this.sequenceIndex = 2;\n            this.sectionStart = this.index + 1;\n        }\n        else {\n            this.state = State.InDeclaration;\n        }\n    }\n    stateInSpecialComment(c) {\n        if (c === CharCodes.Gt || this.fastForwardTo(CharCodes.Gt)) {\n            this.cbs.oncomment(this.sectionStart, this.index, 0);\n            this.state = State.Text;\n            this.sectionStart = this.index + 1;\n        }\n    }\n    stateBeforeSpecialS(c) {\n        const lower = c | 0x20;\n        if (lower === Sequences.ScriptEnd[3]) {\n            this.startSpecial(Sequences.ScriptEnd, 4);\n        }\n        else if (lower === Sequences.StyleEnd[3]) {\n            this.startSpecial(Sequences.StyleEnd, 4);\n        }\n        else {\n            this.state = State.InTagName;\n            this.stateInTagName(c); // Consume the token again\n        }\n    }\n    stateBeforeEntity(c) {\n        // Start excess with 1 to include the '&'\n        this.entityExcess = 1;\n        this.entityResult = 0;\n        if (c === CharCodes.Number) {\n            this.state = State.BeforeNumericEntity;\n        }\n        else if (c === CharCodes.Amp) {\n            // We have two `&` characters in a row. Stay in the current state.\n        }\n        else {\n            this.trieIndex = 0;\n            this.trieCurrent = this.entityTrie[0];\n            this.state = State.InNamedEntity;\n            this.stateInNamedEntity(c);\n        }\n    }\n    stateInNamedEntity(c) {\n        this.entityExcess += 1;\n        this.trieIndex = determineBranch(this.entityTrie, this.trieCurrent, this.trieIndex + 1, c);\n        if (this.trieIndex < 0) {\n            this.emitNamedEntity();\n            this.index--;\n            return;\n        }\n        this.trieCurrent = this.entityTrie[this.trieIndex];\n        const masked = this.trieCurrent & BinTrieFlags.VALUE_LENGTH;\n        // If the branch is a value, store it and continue\n        if (masked) {\n            // The mask is the number of bytes of the value, including the current byte.\n            const valueLength = (masked >> 14) - 1;\n            // If we have a legacy entity while parsing strictly, just skip the number of bytes\n            if (!this.allowLegacyEntity() && c !== CharCodes.Semi) {\n                this.trieIndex += valueLength;\n            }\n            else {\n                // Add 1 as we have already incremented the excess\n                const entityStart = this.index - this.entityExcess + 1;\n                if (entityStart > this.sectionStart) {\n                    this.emitPartial(this.sectionStart, entityStart);\n                }\n                // If this is a surrogate pair, consume the next two bytes\n                this.entityResult = this.trieIndex;\n                this.trieIndex += valueLength;\n                this.entityExcess = 0;\n                this.sectionStart = this.index + 1;\n                if (valueLength === 0) {\n                    this.emitNamedEntity();\n                }\n            }\n        }\n    }\n    emitNamedEntity() {\n        this.state = this.baseState;\n        if (this.entityResult === 0) {\n            return;\n        }\n        const valueLength = (this.entityTrie[this.entityResult] & BinTrieFlags.VALUE_LENGTH) >>\n            14;\n        switch (valueLength) {\n            case 1: {\n                this.emitCodePoint(this.entityTrie[this.entityResult] &\n                    ~BinTrieFlags.VALUE_LENGTH);\n                break;\n            }\n            case 2: {\n                this.emitCodePoint(this.entityTrie[this.entityResult + 1]);\n                break;\n            }\n            case 3: {\n                this.emitCodePoint(this.entityTrie[this.entityResult + 1]);\n                this.emitCodePoint(this.entityTrie[this.entityResult + 2]);\n            }\n        }\n    }\n    stateBeforeNumericEntity(c) {\n        if ((c | 0x20) === CharCodes.LowerX) {\n            this.entityExcess++;\n            this.state = State.InHexEntity;\n        }\n        else {\n            this.state = State.InNumericEntity;\n            this.stateInNumericEntity(c);\n        }\n    }\n    emitNumericEntity(strict) {\n        const entityStart = this.index - this.entityExcess - 1;\n        const numberStart = entityStart + 2 + Number(this.state === State.InHexEntity);\n        if (numberStart !== this.index) {\n            // Emit leading data if any\n            if (entityStart > this.sectionStart) {\n                this.emitPartial(this.sectionStart, entityStart);\n            }\n            this.sectionStart = this.index + Number(strict);\n            this.emitCodePoint(replaceCodePoint(this.entityResult));\n        }\n        this.state = this.baseState;\n    }\n    stateInNumericEntity(c) {\n        if (c === CharCodes.Semi) {\n            this.emitNumericEntity(true);\n        }\n        else if (isNumber(c)) {\n            this.entityResult = this.entityResult * 10 + (c - CharCodes.Zero);\n            this.entityExcess++;\n        }\n        else {\n            if (this.allowLegacyEntity()) {\n                this.emitNumericEntity(false);\n            }\n            else {\n                this.state = this.baseState;\n            }\n            this.index--;\n        }\n    }\n    stateInHexEntity(c) {\n        if (c === CharCodes.Semi) {\n            this.emitNumericEntity(true);\n        }\n        else if (isNumber(c)) {\n            this.entityResult = this.entityResult * 16 + (c - CharCodes.Zero);\n            this.entityExcess++;\n        }\n        else if (isHexDigit(c)) {\n            this.entityResult =\n                this.entityResult * 16 + ((c | 0x20) - CharCodes.LowerA + 10);\n            this.entityExcess++;\n        }\n        else {\n            if (this.allowLegacyEntity()) {\n                this.emitNumericEntity(false);\n            }\n            else {\n                this.state = this.baseState;\n            }\n            this.index--;\n        }\n    }\n    allowLegacyEntity() {\n        return (!this.xmlMode &&\n            (this.baseState === State.Text ||\n                this.baseState === State.InSpecialTag));\n    }\n    /**\n     * Remove data that has already been consumed from the buffer.\n     */\n    cleanup() {\n        // If we are inside of text or attributes, emit what we already have.\n        if (this.running && this.sectionStart !== this.index) {\n            if (this.state === State.Text ||\n                (this.state === State.InSpecialTag && this.sequenceIndex === 0)) {\n                this.cbs.ontext(this.sectionStart, this.index);\n                this.sectionStart = this.index;\n            }\n            else if (this.state === State.InAttributeValueDq ||\n                this.state === State.InAttributeValueSq ||\n                this.state === State.InAttributeValueNq) {\n                this.cbs.onattribdata(this.sectionStart, this.index);\n                this.sectionStart = this.index;\n            }\n        }\n    }\n    shouldContinue() {\n        return this.index < this.buffer.length + this.offset && this.running;\n    }\n    /**\n     * Iterates through the buffer, calling the function corresponding to the current state.\n     *\n     * States that are more likely to be hit are higher up, as a performance improvement.\n     */\n    parse() {\n        while (this.shouldContinue()) {\n            const c = this.buffer.charCodeAt(this.index - this.offset);\n            switch (this.state) {\n                case State.Text: {\n                    this.stateText(c);\n                    break;\n                }\n                case State.SpecialStartSequence: {\n                    this.stateSpecialStartSequence(c);\n                    break;\n                }\n                case State.InSpecialTag: {\n                    this.stateInSpecialTag(c);\n                    break;\n                }\n                case State.CDATASequence: {\n                    this.stateCDATASequence(c);\n                    break;\n                }\n                case State.InAttributeValueDq: {\n                    this.stateInAttributeValueDoubleQuotes(c);\n                    break;\n                }\n                case State.InAttributeName: {\n                    this.stateInAttributeName(c);\n                    break;\n                }\n                case State.InCommentLike: {\n                    this.stateInCommentLike(c);\n                    break;\n                }\n                case State.InSpecialComment: {\n                    this.stateInSpecialComment(c);\n                    break;\n                }\n                case State.BeforeAttributeName: {\n                    this.stateBeforeAttributeName(c);\n                    break;\n                }\n                case State.InTagName: {\n                    this.stateInTagName(c);\n                    break;\n                }\n                case State.InClosingTagName: {\n                    this.stateInClosingTagName(c);\n                    break;\n                }\n                case State.BeforeTagName: {\n                    this.stateBeforeTagName(c);\n                    break;\n                }\n                case State.AfterAttributeName: {\n                    this.stateAfterAttributeName(c);\n                    break;\n                }\n                case State.InAttributeValueSq: {\n                    this.stateInAttributeValueSingleQuotes(c);\n                    break;\n                }\n                case State.BeforeAttributeValue: {\n                    this.stateBeforeAttributeValue(c);\n                    break;\n                }\n                case State.BeforeClosingTagName: {\n                    this.stateBeforeClosingTagName(c);\n                    break;\n                }\n                case State.AfterClosingTagName: {\n                    this.stateAfterClosingTagName(c);\n                    break;\n                }\n                case State.BeforeSpecialS: {\n                    this.stateBeforeSpecialS(c);\n                    break;\n                }\n                case State.InAttributeValueNq: {\n                    this.stateInAttributeValueNoQuotes(c);\n                    break;\n                }\n                case State.InSelfClosingTag: {\n                    this.stateInSelfClosingTag(c);\n                    break;\n                }\n                case State.InDeclaration: {\n                    this.stateInDeclaration(c);\n                    break;\n                }\n                case State.BeforeDeclaration: {\n                    this.stateBeforeDeclaration(c);\n                    break;\n                }\n                case State.BeforeComment: {\n                    this.stateBeforeComment(c);\n                    break;\n                }\n                case State.InProcessingInstruction: {\n                    this.stateInProcessingInstruction(c);\n                    break;\n                }\n                case State.InNamedEntity: {\n                    this.stateInNamedEntity(c);\n                    break;\n                }\n                case State.BeforeEntity: {\n                    this.stateBeforeEntity(c);\n                    break;\n                }\n                case State.InHexEntity: {\n                    this.stateInHexEntity(c);\n                    break;\n                }\n                case State.InNumericEntity: {\n                    this.stateInNumericEntity(c);\n                    break;\n                }\n                default: {\n                    // `this._state === State.BeforeNumericEntity`\n                    this.stateBeforeNumericEntity(c);\n                }\n            }\n            this.index++;\n        }\n        this.cleanup();\n    }\n    finish() {\n        if (this.state === State.InNamedEntity) {\n            this.emitNamedEntity();\n        }\n        // If there is remaining data, emit it in a reasonable way\n        if (this.sectionStart < this.index) {\n            this.handleTrailingData();\n        }\n        this.cbs.onend();\n    }\n    /** Handle any trailing data. */\n    handleTrailingData() {\n        const endIndex = this.buffer.length + this.offset;\n        if (this.state === State.InCommentLike) {\n            if (this.currentSequence === Sequences.CdataEnd) {\n                this.cbs.oncdata(this.sectionStart, endIndex, 0);\n            }\n            else {\n                this.cbs.oncomment(this.sectionStart, endIndex, 0);\n            }\n        }\n        else if (this.state === State.InNumericEntity &&\n            this.allowLegacyEntity()) {\n            this.emitNumericEntity(false);\n            // All trailing data will have been consumed\n        }\n        else if (this.state === State.InHexEntity &&\n            this.allowLegacyEntity()) {\n            this.emitNumericEntity(false);\n            // All trailing data will have been consumed\n        }\n        else if (this.state === State.InTagName ||\n            this.state === State.BeforeAttributeName ||\n            this.state === State.BeforeAttributeValue ||\n            this.state === State.AfterAttributeName ||\n            this.state === State.InAttributeName ||\n            this.state === State.InAttributeValueSq ||\n            this.state === State.InAttributeValueDq ||\n            this.state === State.InAttributeValueNq ||\n            this.state === State.InClosingTagName) {\n            /*\n             * If we are currently in an opening or closing tag, us not calling the\n             * respective callback signals that the tag should be ignored.\n             */\n        }\n        else {\n            this.cbs.ontext(this.sectionStart, endIndex);\n        }\n    }\n    emitPartial(start, endIndex) {\n        if (this.baseState !== State.Text &&\n            this.baseState !== State.InSpecialTag) {\n            this.cbs.onattribdata(start, endIndex);\n        }\n        else {\n            this.cbs.ontext(start, endIndex);\n        }\n    }\n    emitCodePoint(cp) {\n        if (this.baseState !== State.Text &&\n            this.baseState !== State.InSpecialTag) {\n            this.cbs.onattribentity(cp);\n        }\n        else {\n            this.cbs.ontextentity(cp);\n        }\n    }\n}\n//# sourceMappingURL=Tokenizer.js.map","import Tokenizer, { QuoteType } from \"./Tokenizer.js\";\nimport { fromCodePoint } from \"entities/lib/decode.js\";\nconst formTags = new Set([\n    \"input\",\n    \"option\",\n    \"optgroup\",\n    \"select\",\n    \"button\",\n    \"datalist\",\n    \"textarea\",\n]);\nconst pTag = new Set([\"p\"]);\nconst tableSectionTags = new Set([\"thead\", \"tbody\"]);\nconst ddtTags = new Set([\"dd\", \"dt\"]);\nconst rtpTags = new Set([\"rt\", \"rp\"]);\nconst openImpliesClose = new Map([\n    [\"tr\", new Set([\"tr\", \"th\", \"td\"])],\n    [\"th\", new Set([\"th\"])],\n    [\"td\", new Set([\"thead\", \"th\", \"td\"])],\n    [\"body\", new Set([\"head\", \"link\", \"script\"])],\n    [\"li\", new Set([\"li\"])],\n    [\"p\", pTag],\n    [\"h1\", pTag],\n    [\"h2\", pTag],\n    [\"h3\", pTag],\n    [\"h4\", pTag],\n    [\"h5\", pTag],\n    [\"h6\", pTag],\n    [\"select\", formTags],\n    [\"input\", formTags],\n    [\"output\", formTags],\n    [\"button\", formTags],\n    [\"datalist\", formTags],\n    [\"textarea\", formTags],\n    [\"option\", new Set([\"option\"])],\n    [\"optgroup\", new Set([\"optgroup\", \"option\"])],\n    [\"dd\", ddtTags],\n    [\"dt\", ddtTags],\n    [\"address\", pTag],\n    [\"article\", pTag],\n    [\"aside\", pTag],\n    [\"blockquote\", pTag],\n    [\"details\", pTag],\n    [\"div\", pTag],\n    [\"dl\", pTag],\n    [\"fieldset\", pTag],\n    [\"figcaption\", pTag],\n    [\"figure\", pTag],\n    [\"footer\", pTag],\n    [\"form\", pTag],\n    [\"header\", pTag],\n    [\"hr\", pTag],\n    [\"main\", pTag],\n    [\"nav\", pTag],\n    [\"ol\", pTag],\n    [\"pre\", pTag],\n    [\"section\", pTag],\n    [\"table\", pTag],\n    [\"ul\", pTag],\n    [\"rt\", rtpTags],\n    [\"rp\", rtpTags],\n    [\"tbody\", tableSectionTags],\n    [\"tfoot\", tableSectionTags],\n]);\nconst voidElements = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\nconst foreignContextElements = new Set([\"math\", \"svg\"]);\nconst htmlIntegrationElements = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignobject\",\n    \"desc\",\n    \"title\",\n]);\nconst reNameEnd = /\\s|\\//;\nexport class Parser {\n    constructor(cbs, options = {}) {\n        var _a, _b, _c, _d, _e;\n        this.options = options;\n        /** The start index of the last event. */\n        this.startIndex = 0;\n        /** The end index of the last event. */\n        this.endIndex = 0;\n        /**\n         * Store the start index of the current open tag,\n         * so we can update the start index for attributes.\n         */\n        this.openTagStart = 0;\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribvalue = \"\";\n        this.attribs = null;\n        this.stack = [];\n        this.foreignContext = [];\n        this.buffers = [];\n        this.bufferOffset = 0;\n        /** The index of the last written buffer. Used when resuming after a `pause()`. */\n        this.writeIndex = 0;\n        /** Indicates whether the parser has finished running / `.end` has been called. */\n        this.ended = false;\n        this.cbs = cbs !== null && cbs !== void 0 ? cbs : {};\n        this.lowerCaseTagNames = (_a = options.lowerCaseTags) !== null && _a !== void 0 ? _a : !options.xmlMode;\n        this.lowerCaseAttributeNames =\n            (_b = options.lowerCaseAttributeNames) !== null && _b !== void 0 ? _b : !options.xmlMode;\n        this.tokenizer = new ((_c = options.Tokenizer) !== null && _c !== void 0 ? _c : Tokenizer)(this.options, this);\n        (_e = (_d = this.cbs).onparserinit) === null || _e === void 0 ? void 0 : _e.call(_d, this);\n    }\n    // Tokenizer event handlers\n    /** @internal */\n    ontext(start, endIndex) {\n        var _a, _b;\n        const data = this.getSlice(start, endIndex);\n        this.endIndex = endIndex - 1;\n        (_b = (_a = this.cbs).ontext) === null || _b === void 0 ? void 0 : _b.call(_a, data);\n        this.startIndex = endIndex;\n    }\n    /** @internal */\n    ontextentity(cp) {\n        var _a, _b;\n        /*\n         * Entities can be emitted on the character, or directly after.\n         * We use the section start here to get accurate indices.\n         */\n        const index = this.tokenizer.getSectionStart();\n        this.endIndex = index - 1;\n        (_b = (_a = this.cbs).ontext) === null || _b === void 0 ? void 0 : _b.call(_a, fromCodePoint(cp));\n        this.startIndex = index;\n    }\n    isVoidElement(name) {\n        return !this.options.xmlMode && voidElements.has(name);\n    }\n    /** @internal */\n    onopentagname(start, endIndex) {\n        this.endIndex = endIndex;\n        let name = this.getSlice(start, endIndex);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        this.emitOpenTag(name);\n    }\n    emitOpenTag(name) {\n        var _a, _b, _c, _d;\n        this.openTagStart = this.startIndex;\n        this.tagname = name;\n        const impliesClose = !this.options.xmlMode && openImpliesClose.get(name);\n        if (impliesClose) {\n            while (this.stack.length > 0 &&\n                impliesClose.has(this.stack[this.stack.length - 1])) {\n                const element = this.stack.pop();\n                (_b = (_a = this.cbs).onclosetag) === null || _b === void 0 ? void 0 : _b.call(_a, element, true);\n            }\n        }\n        if (!this.isVoidElement(name)) {\n            this.stack.push(name);\n            if (foreignContextElements.has(name)) {\n                this.foreignContext.push(true);\n            }\n            else if (htmlIntegrationElements.has(name)) {\n                this.foreignContext.push(false);\n            }\n        }\n        (_d = (_c = this.cbs).onopentagname) === null || _d === void 0 ? void 0 : _d.call(_c, name);\n        if (this.cbs.onopentag)\n            this.attribs = {};\n    }\n    endOpenTag(isImplied) {\n        var _a, _b;\n        this.startIndex = this.openTagStart;\n        if (this.attribs) {\n            (_b = (_a = this.cbs).onopentag) === null || _b === void 0 ? void 0 : _b.call(_a, this.tagname, this.attribs, isImplied);\n            this.attribs = null;\n        }\n        if (this.cbs.onclosetag && this.isVoidElement(this.tagname)) {\n            this.cbs.onclosetag(this.tagname, true);\n        }\n        this.tagname = \"\";\n    }\n    /** @internal */\n    onopentagend(endIndex) {\n        this.endIndex = endIndex;\n        this.endOpenTag(false);\n        // Set `startIndex` for next node\n        this.startIndex = endIndex + 1;\n    }\n    /** @internal */\n    onclosetag(start, endIndex) {\n        var _a, _b, _c, _d, _e, _f;\n        this.endIndex = endIndex;\n        let name = this.getSlice(start, endIndex);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        if (foreignContextElements.has(name) ||\n            htmlIntegrationElements.has(name)) {\n            this.foreignContext.pop();\n        }\n        if (!this.isVoidElement(name)) {\n            const pos = this.stack.lastIndexOf(name);\n            if (pos !== -1) {\n                if (this.cbs.onclosetag) {\n                    let count = this.stack.length - pos;\n                    while (count--) {\n                        // We know the stack has sufficient elements.\n                        this.cbs.onclosetag(this.stack.pop(), count !== 0);\n                    }\n                }\n                else\n                    this.stack.length = pos;\n            }\n            else if (!this.options.xmlMode && name === \"p\") {\n                // Implicit open before close\n                this.emitOpenTag(\"p\");\n                this.closeCurrentTag(true);\n            }\n        }\n        else if (!this.options.xmlMode && name === \"br\") {\n            // We can't use `emitOpenTag` for implicit open, as `br` would be implicitly closed.\n            (_b = (_a = this.cbs).onopentagname) === null || _b === void 0 ? void 0 : _b.call(_a, \"br\");\n            (_d = (_c = this.cbs).onopentag) === null || _d === void 0 ? void 0 : _d.call(_c, \"br\", {}, true);\n            (_f = (_e = this.cbs).onclosetag) === null || _f === void 0 ? void 0 : _f.call(_e, \"br\", false);\n        }\n        // Set `startIndex` for next node\n        this.startIndex = endIndex + 1;\n    }\n    /** @internal */\n    onselfclosingtag(endIndex) {\n        this.endIndex = endIndex;\n        if (this.options.xmlMode ||\n            this.options.recognizeSelfClosing ||\n            this.foreignContext[this.foreignContext.length - 1]) {\n            this.closeCurrentTag(false);\n            // Set `startIndex` for next node\n            this.startIndex = endIndex + 1;\n        }\n        else {\n            // Ignore the fact that the tag is self-closing.\n            this.onopentagend(endIndex);\n        }\n    }\n    closeCurrentTag(isOpenImplied) {\n        var _a, _b;\n        const name = this.tagname;\n        this.endOpenTag(isOpenImplied);\n        // Self-closing tags will be on the top of the stack\n        if (this.stack[this.stack.length - 1] === name) {\n            // If the opening tag isn't implied, the closing tag has to be implied.\n            (_b = (_a = this.cbs).onclosetag) === null || _b === void 0 ? void 0 : _b.call(_a, name, !isOpenImplied);\n            this.stack.pop();\n        }\n    }\n    /** @internal */\n    onattribname(start, endIndex) {\n        this.startIndex = start;\n        const name = this.getSlice(start, endIndex);\n        this.attribname = this.lowerCaseAttributeNames\n            ? name.toLowerCase()\n            : name;\n    }\n    /** @internal */\n    onattribdata(start, endIndex) {\n        this.attribvalue += this.getSlice(start, endIndex);\n    }\n    /** @internal */\n    onattribentity(cp) {\n        this.attribvalue += fromCodePoint(cp);\n    }\n    /** @internal */\n    onattribend(quote, endIndex) {\n        var _a, _b;\n        this.endIndex = endIndex;\n        (_b = (_a = this.cbs).onattribute) === null || _b === void 0 ? void 0 : _b.call(_a, this.attribname, this.attribvalue, quote === QuoteType.Double\n            ? '\"'\n            : quote === QuoteType.Single\n                ? \"'\"\n                : quote === QuoteType.NoValue\n                    ? undefined\n                    : null);\n        if (this.attribs &&\n            !Object.prototype.hasOwnProperty.call(this.attribs, this.attribname)) {\n            this.attribs[this.attribname] = this.attribvalue;\n        }\n        this.attribvalue = \"\";\n    }\n    getInstructionName(value) {\n        const index = value.search(reNameEnd);\n        let name = index < 0 ? value : value.substr(0, index);\n        if (this.lowerCaseTagNames) {\n            name = name.toLowerCase();\n        }\n        return name;\n    }\n    /** @internal */\n    ondeclaration(start, endIndex) {\n        this.endIndex = endIndex;\n        const value = this.getSlice(start, endIndex);\n        if (this.cbs.onprocessinginstruction) {\n            const name = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(`!${name}`, `!${value}`);\n        }\n        // Set `startIndex` for next node\n        this.startIndex = endIndex + 1;\n    }\n    /** @internal */\n    onprocessinginstruction(start, endIndex) {\n        this.endIndex = endIndex;\n        const value = this.getSlice(start, endIndex);\n        if (this.cbs.onprocessinginstruction) {\n            const name = this.getInstructionName(value);\n            this.cbs.onprocessinginstruction(`?${name}`, `?${value}`);\n        }\n        // Set `startIndex` for next node\n        this.startIndex = endIndex + 1;\n    }\n    /** @internal */\n    oncomment(start, endIndex, offset) {\n        var _a, _b, _c, _d;\n        this.endIndex = endIndex;\n        (_b = (_a = this.cbs).oncomment) === null || _b === void 0 ? void 0 : _b.call(_a, this.getSlice(start, endIndex - offset));\n        (_d = (_c = this.cbs).oncommentend) === null || _d === void 0 ? void 0 : _d.call(_c);\n        // Set `startIndex` for next node\n        this.startIndex = endIndex + 1;\n    }\n    /** @internal */\n    oncdata(start, endIndex, offset) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k;\n        this.endIndex = endIndex;\n        const value = this.getSlice(start, endIndex - offset);\n        if (this.options.xmlMode || this.options.recognizeCDATA) {\n            (_b = (_a = this.cbs).oncdatastart) === null || _b === void 0 ? void 0 : _b.call(_a);\n            (_d = (_c = this.cbs).ontext) === null || _d === void 0 ? void 0 : _d.call(_c, value);\n            (_f = (_e = this.cbs).oncdataend) === null || _f === void 0 ? void 0 : _f.call(_e);\n        }\n        else {\n            (_h = (_g = this.cbs).oncomment) === null || _h === void 0 ? void 0 : _h.call(_g, `[CDATA[${value}]]`);\n            (_k = (_j = this.cbs).oncommentend) === null || _k === void 0 ? void 0 : _k.call(_j);\n        }\n        // Set `startIndex` for next node\n        this.startIndex = endIndex + 1;\n    }\n    /** @internal */\n    onend() {\n        var _a, _b;\n        if (this.cbs.onclosetag) {\n            // Set the end index for all remaining tags\n            this.endIndex = this.startIndex;\n            for (let index = this.stack.length; index > 0; this.cbs.onclosetag(this.stack[--index], true))\n                ;\n        }\n        (_b = (_a = this.cbs).onend) === null || _b === void 0 ? void 0 : _b.call(_a);\n    }\n    /**\n     * Resets the parser to a blank state, ready to parse a new HTML document\n     */\n    reset() {\n        var _a, _b, _c, _d;\n        (_b = (_a = this.cbs).onreset) === null || _b === void 0 ? void 0 : _b.call(_a);\n        this.tokenizer.reset();\n        this.tagname = \"\";\n        this.attribname = \"\";\n        this.attribs = null;\n        this.stack.length = 0;\n        this.startIndex = 0;\n        this.endIndex = 0;\n        (_d = (_c = this.cbs).onparserinit) === null || _d === void 0 ? void 0 : _d.call(_c, this);\n        this.buffers.length = 0;\n        this.bufferOffset = 0;\n        this.writeIndex = 0;\n        this.ended = false;\n    }\n    /**\n     * Resets the parser, then parses a complete document and\n     * pushes it to the handler.\n     *\n     * @param data Document to parse.\n     */\n    parseComplete(data) {\n        this.reset();\n        this.end(data);\n    }\n    getSlice(start, end) {\n        while (start - this.bufferOffset >= this.buffers[0].length) {\n            this.shiftBuffer();\n        }\n        let slice = this.buffers[0].slice(start - this.bufferOffset, end - this.bufferOffset);\n        while (end - this.bufferOffset > this.buffers[0].length) {\n            this.shiftBuffer();\n            slice += this.buffers[0].slice(0, end - this.bufferOffset);\n        }\n        return slice;\n    }\n    shiftBuffer() {\n        this.bufferOffset += this.buffers[0].length;\n        this.writeIndex--;\n        this.buffers.shift();\n    }\n    /**\n     * Parses a chunk of data and calls the corresponding callbacks.\n     *\n     * @param chunk Chunk to parse.\n     */\n    write(chunk) {\n        var _a, _b;\n        if (this.ended) {\n            (_b = (_a = this.cbs).onerror) === null || _b === void 0 ? void 0 : _b.call(_a, new Error(\".write() after done!\"));\n            return;\n        }\n        this.buffers.push(chunk);\n        if (this.tokenizer.running) {\n            this.tokenizer.write(chunk);\n            this.writeIndex++;\n        }\n    }\n    /**\n     * Parses the end of the buffer and clears the stack, calls onend.\n     *\n     * @param chunk Optional final chunk to parse.\n     */\n    end(chunk) {\n        var _a, _b;\n        if (this.ended) {\n            (_b = (_a = this.cbs).onerror) === null || _b === void 0 ? void 0 : _b.call(_a, new Error(\".end() after done!\"));\n            return;\n        }\n        if (chunk)\n            this.write(chunk);\n        this.ended = true;\n        this.tokenizer.end();\n    }\n    /**\n     * Pauses parsing. The parser won't emit events until `resume` is called.\n     */\n    pause() {\n        this.tokenizer.pause();\n    }\n    /**\n     * Resumes parsing after `pause` was called.\n     */\n    resume() {\n        this.tokenizer.resume();\n        while (this.tokenizer.running &&\n            this.writeIndex < this.buffers.length) {\n            this.tokenizer.write(this.buffers[this.writeIndex++]);\n        }\n        if (this.ended)\n            this.tokenizer.end();\n    }\n    /**\n     * Alias of `write`, for backwards compatibility.\n     *\n     * @param chunk Chunk to parse.\n     * @deprecated\n     */\n    parseChunk(chunk) {\n        this.write(chunk);\n    }\n    /**\n     * Alias of `end`, for backwards compatibility.\n     *\n     * @param chunk Optional final chunk to parse.\n     * @deprecated\n     */\n    done(chunk) {\n        this.end(chunk);\n    }\n}\n//# sourceMappingURL=Parser.js.map","// Generated using scripts/write-encode-map.ts\nfunction restoreDiff(arr) {\n    for (let i = 1; i < arr.length; i++) {\n        arr[i][0] += arr[i - 1][0] + 1;\n    }\n    return arr;\n}\n// prettier-ignore\nexport default new Map(/* #__PURE__ */ restoreDiff([[9, \"&Tab;\"], [0, \"&NewLine;\"], [22, \"&excl;\"], [0, \"&quot;\"], [0, \"&num;\"], [0, \"&dollar;\"], [0, \"&percnt;\"], [0, \"&amp;\"], [0, \"&apos;\"], [0, \"&lpar;\"], [0, \"&rpar;\"], [0, \"&ast;\"], [0, \"&plus;\"], [0, \"&comma;\"], [1, \"&period;\"], [0, \"&sol;\"], [10, \"&colon;\"], [0, \"&semi;\"], [0, { v: \"&lt;\", n: 8402, o: \"&nvlt;\" }], [0, { v: \"&equals;\", n: 8421, o: \"&bne;\" }], [0, { v: \"&gt;\", n: 8402, o: \"&nvgt;\" }], [0, \"&quest;\"], [0, \"&commat;\"], [26, \"&lbrack;\"], [0, \"&bsol;\"], [0, \"&rbrack;\"], [0, \"&Hat;\"], [0, \"&lowbar;\"], [0, \"&DiacriticalGrave;\"], [5, { n: 106, o: \"&fjlig;\" }], [20, \"&lbrace;\"], [0, \"&verbar;\"], [0, \"&rbrace;\"], [34, \"&nbsp;\"], [0, \"&iexcl;\"], [0, \"&cent;\"], [0, \"&pound;\"], [0, \"&curren;\"], [0, \"&yen;\"], [0, \"&brvbar;\"], [0, \"&sect;\"], [0, \"&die;\"], [0, \"&copy;\"], [0, \"&ordf;\"], [0, \"&laquo;\"], [0, \"&not;\"], [0, \"&shy;\"], [0, \"&circledR;\"], [0, \"&macr;\"], [0, \"&deg;\"], [0, \"&PlusMinus;\"], [0, \"&sup2;\"], [0, \"&sup3;\"], [0, \"&acute;\"], [0, \"&micro;\"], [0, \"&para;\"], [0, \"&centerdot;\"], [0, \"&cedil;\"], [0, \"&sup1;\"], [0, \"&ordm;\"], [0, \"&raquo;\"], [0, \"&frac14;\"], [0, \"&frac12;\"], [0, \"&frac34;\"], [0, \"&iquest;\"], [0, \"&Agrave;\"], [0, \"&Aacute;\"], [0, \"&Acirc;\"], [0, \"&Atilde;\"], [0, \"&Auml;\"], [0, \"&angst;\"], [0, \"&AElig;\"], [0, \"&Ccedil;\"], [0, \"&Egrave;\"], [0, \"&Eacute;\"], [0, \"&Ecirc;\"], [0, \"&Euml;\"], [0, \"&Igrave;\"], [0, \"&Iacute;\"], [0, \"&Icirc;\"], [0, \"&Iuml;\"], [0, \"&ETH;\"], [0, \"&Ntilde;\"], [0, \"&Ograve;\"], [0, \"&Oacute;\"], [0, \"&Ocirc;\"], [0, \"&Otilde;\"], [0, \"&Ouml;\"], [0, \"&times;\"], [0, \"&Oslash;\"], [0, \"&Ugrave;\"], [0, \"&Uacute;\"], [0, \"&Ucirc;\"], [0, \"&Uuml;\"], [0, \"&Yacute;\"], [0, \"&THORN;\"], [0, \"&szlig;\"], [0, \"&agrave;\"], [0, \"&aacute;\"], [0, \"&acirc;\"], [0, \"&atilde;\"], [0, \"&auml;\"], [0, \"&aring;\"], [0, \"&aelig;\"], [0, \"&ccedil;\"], [0, \"&egrave;\"], [0, \"&eacute;\"], [0, \"&ecirc;\"], [0, \"&euml;\"], [0, \"&igrave;\"], [0, \"&iacute;\"], [0, \"&icirc;\"], [0, \"&iuml;\"], [0, \"&eth;\"], [0, \"&ntilde;\"], [0, \"&ograve;\"], [0, \"&oacute;\"], [0, \"&ocirc;\"], [0, \"&otilde;\"], [0, \"&ouml;\"], [0, \"&div;\"], [0, \"&oslash;\"], [0, \"&ugrave;\"], [0, \"&uacute;\"], [0, \"&ucirc;\"], [0, \"&uuml;\"], [0, \"&yacute;\"], [0, \"&thorn;\"], [0, \"&yuml;\"], [0, \"&Amacr;\"], [0, \"&amacr;\"], [0, \"&Abreve;\"], [0, \"&abreve;\"], [0, \"&Aogon;\"], [0, \"&aogon;\"], [0, \"&Cacute;\"], [0, \"&cacute;\"], [0, \"&Ccirc;\"], [0, \"&ccirc;\"], [0, \"&Cdot;\"], [0, \"&cdot;\"], [0, \"&Ccaron;\"], [0, \"&ccaron;\"], [0, \"&Dcaron;\"], [0, \"&dcaron;\"], [0, \"&Dstrok;\"], [0, \"&dstrok;\"], [0, \"&Emacr;\"], [0, \"&emacr;\"], [2, \"&Edot;\"], [0, \"&edot;\"], [0, \"&Eogon;\"], [0, \"&eogon;\"], [0, \"&Ecaron;\"], [0, \"&ecaron;\"], [0, \"&Gcirc;\"], [0, \"&gcirc;\"], [0, \"&Gbreve;\"], [0, \"&gbreve;\"], [0, \"&Gdot;\"], [0, \"&gdot;\"], [0, \"&Gcedil;\"], [1, \"&Hcirc;\"], [0, \"&hcirc;\"], [0, \"&Hstrok;\"], [0, \"&hstrok;\"], [0, \"&Itilde;\"], [0, \"&itilde;\"], [0, \"&Imacr;\"], [0, \"&imacr;\"], [2, \"&Iogon;\"], [0, \"&iogon;\"], [0, \"&Idot;\"], [0, \"&imath;\"], [0, \"&IJlig;\"], [0, \"&ijlig;\"], [0, \"&Jcirc;\"], [0, \"&jcirc;\"], [0, \"&Kcedil;\"], [0, \"&kcedil;\"], [0, \"&kgreen;\"], [0, \"&Lacute;\"], [0, \"&lacute;\"], [0, \"&Lcedil;\"], [0, \"&lcedil;\"], [0, \"&Lcaron;\"], [0, \"&lcaron;\"], [0, \"&Lmidot;\"], [0, \"&lmidot;\"], [0, \"&Lstrok;\"], [0, \"&lstrok;\"], [0, \"&Nacute;\"], [0, \"&nacute;\"], [0, \"&Ncedil;\"], [0, \"&ncedil;\"], [0, \"&Ncaron;\"], [0, \"&ncaron;\"], [0, \"&napos;\"], [0, \"&ENG;\"], [0, \"&eng;\"], [0, \"&Omacr;\"], [0, \"&omacr;\"], [2, \"&Odblac;\"], [0, \"&odblac;\"], [0, \"&OElig;\"], [0, \"&oelig;\"], [0, \"&Racute;\"], [0, \"&racute;\"], [0, \"&Rcedil;\"], [0, \"&rcedil;\"], [0, \"&Rcaron;\"], [0, \"&rcaron;\"], [0, \"&Sacute;\"], [0, \"&sacute;\"], [0, \"&Scirc;\"], [0, \"&scirc;\"], [0, \"&Scedil;\"], [0, \"&scedil;\"], [0, \"&Scaron;\"], [0, \"&scaron;\"], [0, \"&Tcedil;\"], [0, \"&tcedil;\"], [0, \"&Tcaron;\"], [0, \"&tcaron;\"], [0, \"&Tstrok;\"], [0, \"&tstrok;\"], [0, \"&Utilde;\"], [0, \"&utilde;\"], [0, \"&Umacr;\"], [0, \"&umacr;\"], [0, \"&Ubreve;\"], [0, \"&ubreve;\"], [0, \"&Uring;\"], [0, \"&uring;\"], [0, \"&Udblac;\"], [0, \"&udblac;\"], [0, \"&Uogon;\"], [0, \"&uogon;\"], [0, \"&Wcirc;\"], [0, \"&wcirc;\"], [0, \"&Ycirc;\"], [0, \"&ycirc;\"], [0, \"&Yuml;\"], [0, \"&Zacute;\"], [0, \"&zacute;\"], [0, \"&Zdot;\"], [0, \"&zdot;\"], [0, \"&Zcaron;\"], [0, \"&zcaron;\"], [19, \"&fnof;\"], [34, \"&imped;\"], [63, \"&gacute;\"], [65, \"&jmath;\"], [142, \"&circ;\"], [0, \"&caron;\"], [16, \"&breve;\"], [0, \"&DiacriticalDot;\"], [0, \"&ring;\"], [0, \"&ogon;\"], [0, \"&DiacriticalTilde;\"], [0, \"&dblac;\"], [51, \"&DownBreve;\"], [127, \"&Alpha;\"], [0, \"&Beta;\"], [0, \"&Gamma;\"], [0, \"&Delta;\"], [0, \"&Epsilon;\"], [0, \"&Zeta;\"], [0, \"&Eta;\"], [0, \"&Theta;\"], [0, \"&Iota;\"], [0, \"&Kappa;\"], [0, \"&Lambda;\"], [0, \"&Mu;\"], [0, \"&Nu;\"], [0, \"&Xi;\"], [0, \"&Omicron;\"], [0, \"&Pi;\"], [0, \"&Rho;\"], [1, \"&Sigma;\"], [0, \"&Tau;\"], [0, \"&Upsilon;\"], [0, \"&Phi;\"], [0, \"&Chi;\"], [0, \"&Psi;\"], [0, \"&ohm;\"], [7, \"&alpha;\"], [0, \"&beta;\"], [0, \"&gamma;\"], [0, \"&delta;\"], [0, \"&epsi;\"], [0, \"&zeta;\"], [0, \"&eta;\"], [0, \"&theta;\"], [0, \"&iota;\"], [0, \"&kappa;\"], [0, \"&lambda;\"], [0, \"&mu;\"], [0, \"&nu;\"], [0, \"&xi;\"], [0, \"&omicron;\"], [0, \"&pi;\"], [0, \"&rho;\"], [0, \"&sigmaf;\"], [0, \"&sigma;\"], [0, \"&tau;\"], [0, \"&upsi;\"], [0, \"&phi;\"], [0, \"&chi;\"], [0, \"&psi;\"], [0, \"&omega;\"], [7, \"&thetasym;\"], [0, \"&Upsi;\"], [2, \"&phiv;\"], [0, \"&piv;\"], [5, \"&Gammad;\"], [0, \"&digamma;\"], [18, \"&kappav;\"], [0, \"&rhov;\"], [3, \"&epsiv;\"], [0, \"&backepsilon;\"], [10, \"&IOcy;\"], [0, \"&DJcy;\"], [0, \"&GJcy;\"], [0, \"&Jukcy;\"], [0, \"&DScy;\"], [0, \"&Iukcy;\"], [0, \"&YIcy;\"], [0, \"&Jsercy;\"], [0, \"&LJcy;\"], [0, \"&NJcy;\"], [0, \"&TSHcy;\"], [0, \"&KJcy;\"], [1, \"&Ubrcy;\"], [0, \"&DZcy;\"], [0, \"&Acy;\"], [0, \"&Bcy;\"], [0, \"&Vcy;\"], [0, \"&Gcy;\"], [0, \"&Dcy;\"], [0, \"&IEcy;\"], [0, \"&ZHcy;\"], [0, \"&Zcy;\"], [0, \"&Icy;\"], [0, \"&Jcy;\"], [0, \"&Kcy;\"], [0, \"&Lcy;\"], [0, \"&Mcy;\"], [0, \"&Ncy;\"], [0, \"&Ocy;\"], [0, \"&Pcy;\"], [0, \"&Rcy;\"], [0, \"&Scy;\"], [0, \"&Tcy;\"], [0, \"&Ucy;\"], [0, \"&Fcy;\"], [0, \"&KHcy;\"], [0, \"&TScy;\"], [0, \"&CHcy;\"], [0, \"&SHcy;\"], [0, \"&SHCHcy;\"], [0, \"&HARDcy;\"], [0, \"&Ycy;\"], [0, \"&SOFTcy;\"], [0, \"&Ecy;\"], [0, \"&YUcy;\"], [0, \"&YAcy;\"], [0, \"&acy;\"], [0, \"&bcy;\"], [0, \"&vcy;\"], [0, \"&gcy;\"], [0, \"&dcy;\"], [0, \"&iecy;\"], [0, \"&zhcy;\"], [0, \"&zcy;\"], [0, \"&icy;\"], [0, \"&jcy;\"], [0, \"&kcy;\"], [0, \"&lcy;\"], [0, \"&mcy;\"], [0, \"&ncy;\"], [0, \"&ocy;\"], [0, \"&pcy;\"], [0, \"&rcy;\"], [0, \"&scy;\"], [0, \"&tcy;\"], [0, \"&ucy;\"], [0, \"&fcy;\"], [0, \"&khcy;\"], [0, \"&tscy;\"], [0, \"&chcy;\"], [0, \"&shcy;\"], [0, \"&shchcy;\"], [0, \"&hardcy;\"], [0, \"&ycy;\"], [0, \"&softcy;\"], [0, \"&ecy;\"], [0, \"&yucy;\"], [0, \"&yacy;\"], [1, \"&iocy;\"], [0, \"&djcy;\"], [0, \"&gjcy;\"], [0, \"&jukcy;\"], [0, \"&dscy;\"], [0, \"&iukcy;\"], [0, \"&yicy;\"], [0, \"&jsercy;\"], [0, \"&ljcy;\"], [0, \"&njcy;\"], [0, \"&tshcy;\"], [0, \"&kjcy;\"], [1, \"&ubrcy;\"], [0, \"&dzcy;\"], [7074, \"&ensp;\"], [0, \"&emsp;\"], [0, \"&emsp13;\"], [0, \"&emsp14;\"], [1, \"&numsp;\"], [0, \"&puncsp;\"], [0, \"&ThinSpace;\"], [0, \"&hairsp;\"], [0, \"&NegativeMediumSpace;\"], [0, \"&zwnj;\"], [0, \"&zwj;\"], [0, \"&lrm;\"], [0, \"&rlm;\"], [0, \"&dash;\"], [2, \"&ndash;\"], [0, \"&mdash;\"], [0, \"&horbar;\"], [0, \"&Verbar;\"], [1, \"&lsquo;\"], [0, \"&CloseCurlyQuote;\"], [0, \"&lsquor;\"], [1, \"&ldquo;\"], [0, \"&CloseCurlyDoubleQuote;\"], [0, \"&bdquo;\"], [1, \"&dagger;\"], [0, \"&Dagger;\"], [0, \"&bull;\"], [2, \"&nldr;\"], [0, \"&hellip;\"], [9, \"&permil;\"], [0, \"&pertenk;\"], [0, \"&prime;\"], [0, \"&Prime;\"], [0, \"&tprime;\"], [0, \"&backprime;\"], [3, \"&lsaquo;\"], [0, \"&rsaquo;\"], [3, \"&oline;\"], [2, \"&caret;\"], [1, \"&hybull;\"], [0, \"&frasl;\"], [10, \"&bsemi;\"], [7, \"&qprime;\"], [7, { v: \"&MediumSpace;\", n: 8202, o: \"&ThickSpace;\" }], [0, \"&NoBreak;\"], [0, \"&af;\"], [0, \"&InvisibleTimes;\"], [0, \"&ic;\"], [72, \"&euro;\"], [46, \"&tdot;\"], [0, \"&DotDot;\"], [37, \"&complexes;\"], [2, \"&incare;\"], [4, \"&gscr;\"], [0, \"&hamilt;\"], [0, \"&Hfr;\"], [0, \"&Hopf;\"], [0, \"&planckh;\"], [0, \"&hbar;\"], [0, \"&imagline;\"], [0, \"&Ifr;\"], [0, \"&lagran;\"], [0, \"&ell;\"], [1, \"&naturals;\"], [0, \"&numero;\"], [0, \"&copysr;\"], [0, \"&weierp;\"], [0, \"&Popf;\"], [0, \"&Qopf;\"], [0, \"&realine;\"], [0, \"&real;\"], [0, \"&reals;\"], [0, \"&rx;\"], [3, \"&trade;\"], [1, \"&integers;\"], [2, \"&mho;\"], [0, \"&zeetrf;\"], [0, \"&iiota;\"], [2, \"&bernou;\"], [0, \"&Cayleys;\"], [1, \"&escr;\"], [0, \"&Escr;\"], [0, \"&Fouriertrf;\"], [1, \"&Mellintrf;\"], [0, \"&order;\"], [0, \"&alefsym;\"], [0, \"&beth;\"], [0, \"&gimel;\"], [0, \"&daleth;\"], [12, \"&CapitalDifferentialD;\"], [0, \"&dd;\"], [0, \"&ee;\"], [0, \"&ii;\"], [10, \"&frac13;\"], [0, \"&frac23;\"], [0, \"&frac15;\"], [0, \"&frac25;\"], [0, \"&frac35;\"], [0, \"&frac45;\"], [0, \"&frac16;\"], [0, \"&frac56;\"], [0, \"&frac18;\"], [0, \"&frac38;\"], [0, \"&frac58;\"], [0, \"&frac78;\"], [49, \"&larr;\"], [0, \"&ShortUpArrow;\"], [0, \"&rarr;\"], [0, \"&darr;\"], [0, \"&harr;\"], [0, \"&updownarrow;\"], [0, \"&nwarr;\"], [0, \"&nearr;\"], [0, \"&LowerRightArrow;\"], [0, \"&LowerLeftArrow;\"], [0, \"&nlarr;\"], [0, \"&nrarr;\"], [1, { v: \"&rarrw;\", n: 824, o: \"&nrarrw;\" }], [0, \"&Larr;\"], [0, \"&Uarr;\"], [0, \"&Rarr;\"], [0, \"&Darr;\"], [0, \"&larrtl;\"], [0, \"&rarrtl;\"], [0, \"&LeftTeeArrow;\"], [0, \"&mapstoup;\"], [0, \"&map;\"], [0, \"&DownTeeArrow;\"], [1, \"&hookleftarrow;\"], [0, \"&hookrightarrow;\"], [0, \"&larrlp;\"], [0, \"&looparrowright;\"], [0, \"&harrw;\"], [0, \"&nharr;\"], [1, \"&lsh;\"], [0, \"&rsh;\"], [0, \"&ldsh;\"], [0, \"&rdsh;\"], [1, \"&crarr;\"], [0, \"&cularr;\"], [0, \"&curarr;\"], [2, \"&circlearrowleft;\"], [0, \"&circlearrowright;\"], [0, \"&leftharpoonup;\"], [0, \"&DownLeftVector;\"], [0, \"&RightUpVector;\"], [0, \"&LeftUpVector;\"], [0, \"&rharu;\"], [0, \"&DownRightVector;\"], [0, \"&dharr;\"], [0, \"&dharl;\"], [0, \"&RightArrowLeftArrow;\"], [0, \"&udarr;\"], [0, \"&LeftArrowRightArrow;\"], [0, \"&leftleftarrows;\"], [0, \"&upuparrows;\"], [0, \"&rightrightarrows;\"], [0, \"&ddarr;\"], [0, \"&leftrightharpoons;\"], [0, \"&Equilibrium;\"], [0, \"&nlArr;\"], [0, \"&nhArr;\"], [0, \"&nrArr;\"], [0, \"&DoubleLeftArrow;\"], [0, \"&DoubleUpArrow;\"], [0, \"&DoubleRightArrow;\"], [0, \"&dArr;\"], [0, \"&DoubleLeftRightArrow;\"], [0, \"&DoubleUpDownArrow;\"], [0, \"&nwArr;\"], [0, \"&neArr;\"], [0, \"&seArr;\"], [0, \"&swArr;\"], [0, \"&lAarr;\"], [0, \"&rAarr;\"], [1, \"&zigrarr;\"], [6, \"&larrb;\"], [0, \"&rarrb;\"], [15, \"&DownArrowUpArrow;\"], [7, \"&loarr;\"], [0, \"&roarr;\"], [0, \"&hoarr;\"], [0, \"&forall;\"], [0, \"&comp;\"], [0, { v: \"&part;\", n: 824, o: \"&npart;\" }], [0, \"&exist;\"], [0, \"&nexist;\"], [0, \"&empty;\"], [1, \"&Del;\"], [0, \"&Element;\"], [0, \"&NotElement;\"], [1, \"&ni;\"], [0, \"&notni;\"], [2, \"&prod;\"], [0, \"&coprod;\"], [0, \"&sum;\"], [0, \"&minus;\"], [0, \"&MinusPlus;\"], [0, \"&dotplus;\"], [1, \"&Backslash;\"], [0, \"&lowast;\"], [0, \"&compfn;\"], [1, \"&radic;\"], [2, \"&prop;\"], [0, \"&infin;\"], [0, \"&angrt;\"], [0, { v: \"&ang;\", n: 8402, o: \"&nang;\" }], [0, \"&angmsd;\"], [0, \"&angsph;\"], [0, \"&mid;\"], [0, \"&nmid;\"], [0, \"&DoubleVerticalBar;\"], [0, \"&NotDoubleVerticalBar;\"], [0, \"&and;\"], [0, \"&or;\"], [0, { v: \"&cap;\", n: 65024, o: \"&caps;\" }], [0, { v: \"&cup;\", n: 65024, o: \"&cups;\" }], [0, \"&int;\"], [0, \"&Int;\"], [0, \"&iiint;\"], [0, \"&conint;\"], [0, \"&Conint;\"], [0, \"&Cconint;\"], [0, \"&cwint;\"], [0, \"&ClockwiseContourIntegral;\"], [0, \"&awconint;\"], [0, \"&there4;\"], [0, \"&becaus;\"], [0, \"&ratio;\"], [0, \"&Colon;\"], [0, \"&dotminus;\"], [1, \"&mDDot;\"], [0, \"&homtht;\"], [0, { v: \"&sim;\", n: 8402, o: \"&nvsim;\" }], [0, { v: \"&backsim;\", n: 817, o: \"&race;\" }], [0, { v: \"&ac;\", n: 819, o: \"&acE;\" }], [0, \"&acd;\"], [0, \"&VerticalTilde;\"], [0, \"&NotTilde;\"], [0, { v: \"&eqsim;\", n: 824, o: \"&nesim;\" }], [0, \"&sime;\"], [0, \"&NotTildeEqual;\"], [0, \"&cong;\"], [0, \"&simne;\"], [0, \"&ncong;\"], [0, \"&ap;\"], [0, \"&nap;\"], [0, \"&ape;\"], [0, { v: \"&apid;\", n: 824, o: \"&napid;\" }], [0, \"&backcong;\"], [0, { v: \"&asympeq;\", n: 8402, o: \"&nvap;\" }], [0, { v: \"&bump;\", n: 824, o: \"&nbump;\" }], [0, { v: \"&bumpe;\", n: 824, o: \"&nbumpe;\" }], [0, { v: \"&doteq;\", n: 824, o: \"&nedot;\" }], [0, \"&doteqdot;\"], [0, \"&efDot;\"], [0, \"&erDot;\"], [0, \"&Assign;\"], [0, \"&ecolon;\"], [0, \"&ecir;\"], [0, \"&circeq;\"], [1, \"&wedgeq;\"], [0, \"&veeeq;\"], [1, \"&triangleq;\"], [2, \"&equest;\"], [0, \"&ne;\"], [0, { v: \"&Congruent;\", n: 8421, o: \"&bnequiv;\" }], [0, \"&nequiv;\"], [1, { v: \"&le;\", n: 8402, o: \"&nvle;\" }], [0, { v: \"&ge;\", n: 8402, o: \"&nvge;\" }], [0, { v: \"&lE;\", n: 824, o: \"&nlE;\" }], [0, { v: \"&gE;\", n: 824, o: \"&ngE;\" }], [0, { v: \"&lnE;\", n: 65024, o: \"&lvertneqq;\" }], [0, { v: \"&gnE;\", n: 65024, o: \"&gvertneqq;\" }], [0, { v: \"&ll;\", n: new Map(/* #__PURE__ */ restoreDiff([[824, \"&nLtv;\"], [7577, \"&nLt;\"]])) }], [0, { v: \"&gg;\", n: new Map(/* #__PURE__ */ restoreDiff([[824, \"&nGtv;\"], [7577, \"&nGt;\"]])) }], [0, \"&between;\"], [0, \"&NotCupCap;\"], [0, \"&nless;\"], [0, \"&ngt;\"], [0, \"&nle;\"], [0, \"&nge;\"], [0, \"&lesssim;\"], [0, \"&GreaterTilde;\"], [0, \"&nlsim;\"], [0, \"&ngsim;\"], [0, \"&LessGreater;\"], [0, \"&gl;\"], [0, \"&NotLessGreater;\"], [0, \"&NotGreaterLess;\"], [0, \"&pr;\"], [0, \"&sc;\"], [0, \"&prcue;\"], [0, \"&sccue;\"], [0, \"&PrecedesTilde;\"], [0, { v: \"&scsim;\", n: 824, o: \"&NotSucceedsTilde;\" }], [0, \"&NotPrecedes;\"], [0, \"&NotSucceeds;\"], [0, { v: \"&sub;\", n: 8402, o: \"&NotSubset;\" }], [0, { v: \"&sup;\", n: 8402, o: \"&NotSuperset;\" }], [0, \"&nsub;\"], [0, \"&nsup;\"], [0, \"&sube;\"], [0, \"&supe;\"], [0, \"&NotSubsetEqual;\"], [0, \"&NotSupersetEqual;\"], [0, { v: \"&subne;\", n: 65024, o: \"&varsubsetneq;\" }], [0, { v: \"&supne;\", n: 65024, o: \"&varsupsetneq;\" }], [1, \"&cupdot;\"], [0, \"&UnionPlus;\"], [0, { v: \"&sqsub;\", n: 824, o: \"&NotSquareSubset;\" }], [0, { v: \"&sqsup;\", n: 824, o: \"&NotSquareSuperset;\" }], [0, \"&sqsube;\"], [0, \"&sqsupe;\"], [0, { v: \"&sqcap;\", n: 65024, o: \"&sqcaps;\" }], [0, { v: \"&sqcup;\", n: 65024, o: \"&sqcups;\" }], [0, \"&CirclePlus;\"], [0, \"&CircleMinus;\"], [0, \"&CircleTimes;\"], [0, \"&osol;\"], [0, \"&CircleDot;\"], [0, \"&circledcirc;\"], [0, \"&circledast;\"], [1, \"&circleddash;\"], [0, \"&boxplus;\"], [0, \"&boxminus;\"], [0, \"&boxtimes;\"], [0, \"&dotsquare;\"], [0, \"&RightTee;\"], [0, \"&dashv;\"], [0, \"&DownTee;\"], [0, \"&bot;\"], [1, \"&models;\"], [0, \"&DoubleRightTee;\"], [0, \"&Vdash;\"], [0, \"&Vvdash;\"], [0, \"&VDash;\"], [0, \"&nvdash;\"], [0, \"&nvDash;\"], [0, \"&nVdash;\"], [0, \"&nVDash;\"], [0, \"&prurel;\"], [1, \"&LeftTriangle;\"], [0, \"&RightTriangle;\"], [0, { v: \"&LeftTriangleEqual;\", n: 8402, o: \"&nvltrie;\" }], [0, { v: \"&RightTriangleEqual;\", n: 8402, o: \"&nvrtrie;\" }], [0, \"&origof;\"], [0, \"&imof;\"], [0, \"&multimap;\"], [0, \"&hercon;\"], [0, \"&intcal;\"], [0, \"&veebar;\"], [1, \"&barvee;\"], [0, \"&angrtvb;\"], [0, \"&lrtri;\"], [0, \"&bigwedge;\"], [0, \"&bigvee;\"], [0, \"&bigcap;\"], [0, \"&bigcup;\"], [0, \"&diam;\"], [0, \"&sdot;\"], [0, \"&sstarf;\"], [0, \"&divideontimes;\"], [0, \"&bowtie;\"], [0, \"&ltimes;\"], [0, \"&rtimes;\"], [0, \"&leftthreetimes;\"], [0, \"&rightthreetimes;\"], [0, \"&backsimeq;\"], [0, \"&curlyvee;\"], [0, \"&curlywedge;\"], [0, \"&Sub;\"], [0, \"&Sup;\"], [0, \"&Cap;\"], [0, \"&Cup;\"], [0, \"&fork;\"], [0, \"&epar;\"], [0, \"&lessdot;\"], [0, \"&gtdot;\"], [0, { v: \"&Ll;\", n: 824, o: \"&nLl;\" }], [0, { v: \"&Gg;\", n: 824, o: \"&nGg;\" }], [0, { v: \"&leg;\", n: 65024, o: \"&lesg;\" }], [0, { v: \"&gel;\", n: 65024, o: \"&gesl;\" }], [2, \"&cuepr;\"], [0, \"&cuesc;\"], [0, \"&NotPrecedesSlantEqual;\"], [0, \"&NotSucceedsSlantEqual;\"], [0, \"&NotSquareSubsetEqual;\"], [0, \"&NotSquareSupersetEqual;\"], [2, \"&lnsim;\"], [0, \"&gnsim;\"], [0, \"&precnsim;\"], [0, \"&scnsim;\"], [0, \"&nltri;\"], [0, \"&NotRightTriangle;\"], [0, \"&nltrie;\"], [0, \"&NotRightTriangleEqual;\"], [0, \"&vellip;\"], [0, \"&ctdot;\"], [0, \"&utdot;\"], [0, \"&dtdot;\"], [0, \"&disin;\"], [0, \"&isinsv;\"], [0, \"&isins;\"], [0, { v: \"&isindot;\", n: 824, o: \"&notindot;\" }], [0, \"&notinvc;\"], [0, \"&notinvb;\"], [1, { v: \"&isinE;\", n: 824, o: \"&notinE;\" }], [0, \"&nisd;\"], [0, \"&xnis;\"], [0, \"&nis;\"], [0, \"&notnivc;\"], [0, \"&notnivb;\"], [6, \"&barwed;\"], [0, \"&Barwed;\"], [1, \"&lceil;\"], [0, \"&rceil;\"], [0, \"&LeftFloor;\"], [0, \"&rfloor;\"], [0, \"&drcrop;\"], [0, \"&dlcrop;\"], [0, \"&urcrop;\"], [0, \"&ulcrop;\"], [0, \"&bnot;\"], [1, \"&profline;\"], [0, \"&profsurf;\"], [1, \"&telrec;\"], [0, \"&target;\"], [5, \"&ulcorn;\"], [0, \"&urcorn;\"], [0, \"&dlcorn;\"], [0, \"&drcorn;\"], [2, \"&frown;\"], [0, \"&smile;\"], [9, \"&cylcty;\"], [0, \"&profalar;\"], [7, \"&topbot;\"], [6, \"&ovbar;\"], [1, \"&solbar;\"], [60, \"&angzarr;\"], [51, \"&lmoustache;\"], [0, \"&rmoustache;\"], [2, \"&OverBracket;\"], [0, \"&bbrk;\"], [0, \"&bbrktbrk;\"], [37, \"&OverParenthesis;\"], [0, \"&UnderParenthesis;\"], [0, \"&OverBrace;\"], [0, \"&UnderBrace;\"], [2, \"&trpezium;\"], [4, \"&elinters;\"], [59, \"&blank;\"], [164, \"&circledS;\"], [55, \"&boxh;\"], [1, \"&boxv;\"], [9, \"&boxdr;\"], [3, \"&boxdl;\"], [3, \"&boxur;\"], [3, \"&boxul;\"], [3, \"&boxvr;\"], [7, \"&boxvl;\"], [7, \"&boxhd;\"], [7, \"&boxhu;\"], [7, \"&boxvh;\"], [19, \"&boxH;\"], [0, \"&boxV;\"], [0, \"&boxdR;\"], [0, \"&boxDr;\"], [0, \"&boxDR;\"], [0, \"&boxdL;\"], [0, \"&boxDl;\"], [0, \"&boxDL;\"], [0, \"&boxuR;\"], [0, \"&boxUr;\"], [0, \"&boxUR;\"], [0, \"&boxuL;\"], [0, \"&boxUl;\"], [0, \"&boxUL;\"], [0, \"&boxvR;\"], [0, \"&boxVr;\"], [0, \"&boxVR;\"], [0, \"&boxvL;\"], [0, \"&boxVl;\"], [0, \"&boxVL;\"], [0, \"&boxHd;\"], [0, \"&boxhD;\"], [0, \"&boxHD;\"], [0, \"&boxHu;\"], [0, \"&boxhU;\"], [0, \"&boxHU;\"], [0, \"&boxvH;\"], [0, \"&boxVh;\"], [0, \"&boxVH;\"], [19, \"&uhblk;\"], [3, \"&lhblk;\"], [3, \"&block;\"], [8, \"&blk14;\"], [0, \"&blk12;\"], [0, \"&blk34;\"], [13, \"&square;\"], [8, \"&blacksquare;\"], [0, \"&EmptyVerySmallSquare;\"], [1, \"&rect;\"], [0, \"&marker;\"], [2, \"&fltns;\"], [1, \"&bigtriangleup;\"], [0, \"&blacktriangle;\"], [0, \"&triangle;\"], [2, \"&blacktriangleright;\"], [0, \"&rtri;\"], [3, \"&bigtriangledown;\"], [0, \"&blacktriangledown;\"], [0, \"&dtri;\"], [2, \"&blacktriangleleft;\"], [0, \"&ltri;\"], [6, \"&loz;\"], [0, \"&cir;\"], [32, \"&tridot;\"], [2, \"&bigcirc;\"], [8, \"&ultri;\"], [0, \"&urtri;\"], [0, \"&lltri;\"], [0, \"&EmptySmallSquare;\"], [0, \"&FilledSmallSquare;\"], [8, \"&bigstar;\"], [0, \"&star;\"], [7, \"&phone;\"], [49, \"&female;\"], [1, \"&male;\"], [29, \"&spades;\"], [2, \"&clubs;\"], [1, \"&hearts;\"], [0, \"&diamondsuit;\"], [3, \"&sung;\"], [2, \"&flat;\"], [0, \"&natural;\"], [0, \"&sharp;\"], [163, \"&check;\"], [3, \"&cross;\"], [8, \"&malt;\"], [21, \"&sext;\"], [33, \"&VerticalSeparator;\"], [25, \"&lbbrk;\"], [0, \"&rbbrk;\"], [84, \"&bsolhsub;\"], [0, \"&suphsol;\"], [28, \"&LeftDoubleBracket;\"], [0, \"&RightDoubleBracket;\"], [0, \"&lang;\"], [0, \"&rang;\"], [0, \"&Lang;\"], [0, \"&Rang;\"], [0, \"&loang;\"], [0, \"&roang;\"], [7, \"&longleftarrow;\"], [0, \"&longrightarrow;\"], [0, \"&longleftrightarrow;\"], [0, \"&DoubleLongLeftArrow;\"], [0, \"&DoubleLongRightArrow;\"], [0, \"&DoubleLongLeftRightArrow;\"], [1, \"&longmapsto;\"], [2, \"&dzigrarr;\"], [258, \"&nvlArr;\"], [0, \"&nvrArr;\"], [0, \"&nvHarr;\"], [0, \"&Map;\"], [6, \"&lbarr;\"], [0, \"&bkarow;\"], [0, \"&lBarr;\"], [0, \"&dbkarow;\"], [0, \"&drbkarow;\"], [0, \"&DDotrahd;\"], [0, \"&UpArrowBar;\"], [0, \"&DownArrowBar;\"], [2, \"&Rarrtl;\"], [2, \"&latail;\"], [0, \"&ratail;\"], [0, \"&lAtail;\"], [0, \"&rAtail;\"], [0, \"&larrfs;\"], [0, \"&rarrfs;\"], [0, \"&larrbfs;\"], [0, \"&rarrbfs;\"], [2, \"&nwarhk;\"], [0, \"&nearhk;\"], [0, \"&hksearow;\"], [0, \"&hkswarow;\"], [0, \"&nwnear;\"], [0, \"&nesear;\"], [0, \"&seswar;\"], [0, \"&swnwar;\"], [8, { v: \"&rarrc;\", n: 824, o: \"&nrarrc;\" }], [1, \"&cudarrr;\"], [0, \"&ldca;\"], [0, \"&rdca;\"], [0, \"&cudarrl;\"], [0, \"&larrpl;\"], [2, \"&curarrm;\"], [0, \"&cularrp;\"], [7, \"&rarrpl;\"], [2, \"&harrcir;\"], [0, \"&Uarrocir;\"], [0, \"&lurdshar;\"], [0, \"&ldrushar;\"], [2, \"&LeftRightVector;\"], [0, \"&RightUpDownVector;\"], [0, \"&DownLeftRightVector;\"], [0, \"&LeftUpDownVector;\"], [0, \"&LeftVectorBar;\"], [0, \"&RightVectorBar;\"], [0, \"&RightUpVectorBar;\"], [0, \"&RightDownVectorBar;\"], [0, \"&DownLeftVectorBar;\"], [0, \"&DownRightVectorBar;\"], [0, \"&LeftUpVectorBar;\"], [0, \"&LeftDownVectorBar;\"], [0, \"&LeftTeeVector;\"], [0, \"&RightTeeVector;\"], [0, \"&RightUpTeeVector;\"], [0, \"&RightDownTeeVector;\"], [0, \"&DownLeftTeeVector;\"], [0, \"&DownRightTeeVector;\"], [0, \"&LeftUpTeeVector;\"], [0, \"&LeftDownTeeVector;\"], [0, \"&lHar;\"], [0, \"&uHar;\"], [0, \"&rHar;\"], [0, \"&dHar;\"], [0, \"&luruhar;\"], [0, \"&ldrdhar;\"], [0, \"&ruluhar;\"], [0, \"&rdldhar;\"], [0, \"&lharul;\"], [0, \"&llhard;\"], [0, \"&rharul;\"], [0, \"&lrhard;\"], [0, \"&udhar;\"], [0, \"&duhar;\"], [0, \"&RoundImplies;\"], [0, \"&erarr;\"], [0, \"&simrarr;\"], [0, \"&larrsim;\"], [0, \"&rarrsim;\"], [0, \"&rarrap;\"], [0, \"&ltlarr;\"], [1, \"&gtrarr;\"], [0, \"&subrarr;\"], [1, \"&suplarr;\"], [0, \"&lfisht;\"], [0, \"&rfisht;\"], [0, \"&ufisht;\"], [0, \"&dfisht;\"], [5, \"&lopar;\"], [0, \"&ropar;\"], [4, \"&lbrke;\"], [0, \"&rbrke;\"], [0, \"&lbrkslu;\"], [0, \"&rbrksld;\"], [0, \"&lbrksld;\"], [0, \"&rbrkslu;\"], [0, \"&langd;\"], [0, \"&rangd;\"], [0, \"&lparlt;\"], [0, \"&rpargt;\"], [0, \"&gtlPar;\"], [0, \"&ltrPar;\"], [3, \"&vzigzag;\"], [1, \"&vangrt;\"], [0, \"&angrtvbd;\"], [6, \"&ange;\"], [0, \"&range;\"], [0, \"&dwangle;\"], [0, \"&uwangle;\"], [0, \"&angmsdaa;\"], [0, \"&angmsdab;\"], [0, \"&angmsdac;\"], [0, \"&angmsdad;\"], [0, \"&angmsdae;\"], [0, \"&angmsdaf;\"], [0, \"&angmsdag;\"], [0, \"&angmsdah;\"], [0, \"&bemptyv;\"], [0, \"&demptyv;\"], [0, \"&cemptyv;\"], [0, \"&raemptyv;\"], [0, \"&laemptyv;\"], [0, \"&ohbar;\"], [0, \"&omid;\"], [0, \"&opar;\"], [1, \"&operp;\"], [1, \"&olcross;\"], [0, \"&odsold;\"], [1, \"&olcir;\"], [0, \"&ofcir;\"], [0, \"&olt;\"], [0, \"&ogt;\"], [0, \"&cirscir;\"], [0, \"&cirE;\"], [0, \"&solb;\"], [0, \"&bsolb;\"], [3, \"&boxbox;\"], [3, \"&trisb;\"], [0, \"&rtriltri;\"], [0, { v: \"&LeftTriangleBar;\", n: 824, o: \"&NotLeftTriangleBar;\" }], [0, { v: \"&RightTriangleBar;\", n: 824, o: \"&NotRightTriangleBar;\" }], [11, \"&iinfin;\"], [0, \"&infintie;\"], [0, \"&nvinfin;\"], [4, \"&eparsl;\"], [0, \"&smeparsl;\"], [0, \"&eqvparsl;\"], [5, \"&blacklozenge;\"], [8, \"&RuleDelayed;\"], [1, \"&dsol;\"], [9, \"&bigodot;\"], [0, \"&bigoplus;\"], [0, \"&bigotimes;\"], [1, \"&biguplus;\"], [1, \"&bigsqcup;\"], [5, \"&iiiint;\"], [0, \"&fpartint;\"], [2, \"&cirfnint;\"], [0, \"&awint;\"], [0, \"&rppolint;\"], [0, \"&scpolint;\"], [0, \"&npolint;\"], [0, \"&pointint;\"], [0, \"&quatint;\"], [0, \"&intlarhk;\"], [10, \"&pluscir;\"], [0, \"&plusacir;\"], [0, \"&simplus;\"], [0, \"&plusdu;\"], [0, \"&plussim;\"], [0, \"&plustwo;\"], [1, \"&mcomma;\"], [0, \"&minusdu;\"], [2, \"&loplus;\"], [0, \"&roplus;\"], [0, \"&Cross;\"], [0, \"&timesd;\"], [0, \"&timesbar;\"], [1, \"&smashp;\"], [0, \"&lotimes;\"], [0, \"&rotimes;\"], [0, \"&otimesas;\"], [0, \"&Otimes;\"], [0, \"&odiv;\"], [0, \"&triplus;\"], [0, \"&triminus;\"], [0, \"&tritime;\"], [0, \"&intprod;\"], [2, \"&amalg;\"], [0, \"&capdot;\"], [1, \"&ncup;\"], [0, \"&ncap;\"], [0, \"&capand;\"], [0, \"&cupor;\"], [0, \"&cupcap;\"], [0, \"&capcup;\"], [0, \"&cupbrcap;\"], [0, \"&capbrcup;\"], [0, \"&cupcup;\"], [0, \"&capcap;\"], [0, \"&ccups;\"], [0, \"&ccaps;\"], [2, \"&ccupssm;\"], [2, \"&And;\"], [0, \"&Or;\"], [0, \"&andand;\"], [0, \"&oror;\"], [0, \"&orslope;\"], [0, \"&andslope;\"], [1, \"&andv;\"], [0, \"&orv;\"], [0, \"&andd;\"], [0, \"&ord;\"], [1, \"&wedbar;\"], [6, \"&sdote;\"], [3, \"&simdot;\"], [2, { v: \"&congdot;\", n: 824, o: \"&ncongdot;\" }], [0, \"&easter;\"], [0, \"&apacir;\"], [0, { v: \"&apE;\", n: 824, o: \"&napE;\" }], [0, \"&eplus;\"], [0, \"&pluse;\"], [0, \"&Esim;\"], [0, \"&Colone;\"], [0, \"&Equal;\"], [1, \"&ddotseq;\"], [0, \"&equivDD;\"], [0, \"&ltcir;\"], [0, \"&gtcir;\"], [0, \"&ltquest;\"], [0, \"&gtquest;\"], [0, { v: \"&leqslant;\", n: 824, o: \"&nleqslant;\" }], [0, { v: \"&geqslant;\", n: 824, o: \"&ngeqslant;\" }], [0, \"&lesdot;\"], [0, \"&gesdot;\"], [0, \"&lesdoto;\"], [0, \"&gesdoto;\"], [0, \"&lesdotor;\"], [0, \"&gesdotol;\"], [0, \"&lap;\"], [0, \"&gap;\"], [0, \"&lne;\"], [0, \"&gne;\"], [0, \"&lnap;\"], [0, \"&gnap;\"], [0, \"&lEg;\"], [0, \"&gEl;\"], [0, \"&lsime;\"], [0, \"&gsime;\"], [0, \"&lsimg;\"], [0, \"&gsiml;\"], [0, \"&lgE;\"], [0, \"&glE;\"], [0, \"&lesges;\"], [0, \"&gesles;\"], [0, \"&els;\"], [0, \"&egs;\"], [0, \"&elsdot;\"], [0, \"&egsdot;\"], [0, \"&el;\"], [0, \"&eg;\"], [2, \"&siml;\"], [0, \"&simg;\"], [0, \"&simlE;\"], [0, \"&simgE;\"], [0, { v: \"&LessLess;\", n: 824, o: \"&NotNestedLessLess;\" }], [0, { v: \"&GreaterGreater;\", n: 824, o: \"&NotNestedGreaterGreater;\" }], [1, \"&glj;\"], [0, \"&gla;\"], [0, \"&ltcc;\"], [0, \"&gtcc;\"], [0, \"&lescc;\"], [0, \"&gescc;\"], [0, \"&smt;\"], [0, \"&lat;\"], [0, { v: \"&smte;\", n: 65024, o: \"&smtes;\" }], [0, { v: \"&late;\", n: 65024, o: \"&lates;\" }], [0, \"&bumpE;\"], [0, { v: \"&PrecedesEqual;\", n: 824, o: \"&NotPrecedesEqual;\" }], [0, { v: \"&sce;\", n: 824, o: \"&NotSucceedsEqual;\" }], [2, \"&prE;\"], [0, \"&scE;\"], [0, \"&precneqq;\"], [0, \"&scnE;\"], [0, \"&prap;\"], [0, \"&scap;\"], [0, \"&precnapprox;\"], [0, \"&scnap;\"], [0, \"&Pr;\"], [0, \"&Sc;\"], [0, \"&subdot;\"], [0, \"&supdot;\"], [0, \"&subplus;\"], [0, \"&supplus;\"], [0, \"&submult;\"], [0, \"&supmult;\"], [0, \"&subedot;\"], [0, \"&supedot;\"], [0, { v: \"&subE;\", n: 824, o: \"&nsubE;\" }], [0, { v: \"&supE;\", n: 824, o: \"&nsupE;\" }], [0, \"&subsim;\"], [0, \"&supsim;\"], [2, { v: \"&subnE;\", n: 65024, o: \"&varsubsetneqq;\" }], [0, { v: \"&supnE;\", n: 65024, o: \"&varsupsetneqq;\" }], [2, \"&csub;\"], [0, \"&csup;\"], [0, \"&csube;\"], [0, \"&csupe;\"], [0, \"&subsup;\"], [0, \"&supsub;\"], [0, \"&subsub;\"], [0, \"&supsup;\"], [0, \"&suphsub;\"], [0, \"&supdsub;\"], [0, \"&forkv;\"], [0, \"&topfork;\"], [0, \"&mlcp;\"], [8, \"&Dashv;\"], [1, \"&Vdashl;\"], [0, \"&Barv;\"], [0, \"&vBar;\"], [0, \"&vBarv;\"], [1, \"&Vbar;\"], [0, \"&Not;\"], [0, \"&bNot;\"], [0, \"&rnmid;\"], [0, \"&cirmid;\"], [0, \"&midcir;\"], [0, \"&topcir;\"], [0, \"&nhpar;\"], [0, \"&parsim;\"], [9, { v: \"&parsl;\", n: 8421, o: \"&nparsl;\" }], [44343, { n: new Map(/* #__PURE__ */ restoreDiff([[56476, \"&Ascr;\"], [1, \"&Cscr;\"], [0, \"&Dscr;\"], [2, \"&Gscr;\"], [2, \"&Jscr;\"], [0, \"&Kscr;\"], [2, \"&Nscr;\"], [0, \"&Oscr;\"], [0, \"&Pscr;\"], [0, \"&Qscr;\"], [1, \"&Sscr;\"], [0, \"&Tscr;\"], [0, \"&Uscr;\"], [0, \"&Vscr;\"], [0, \"&Wscr;\"], [0, \"&Xscr;\"], [0, \"&Yscr;\"], [0, \"&Zscr;\"], [0, \"&ascr;\"], [0, \"&bscr;\"], [0, \"&cscr;\"], [0, \"&dscr;\"], [1, \"&fscr;\"], [1, \"&hscr;\"], [0, \"&iscr;\"], [0, \"&jscr;\"], [0, \"&kscr;\"], [0, \"&lscr;\"], [0, \"&mscr;\"], [0, \"&nscr;\"], [1, \"&pscr;\"], [0, \"&qscr;\"], [0, \"&rscr;\"], [0, \"&sscr;\"], [0, \"&tscr;\"], [0, \"&uscr;\"], [0, \"&vscr;\"], [0, \"&wscr;\"], [0, \"&xscr;\"], [0, \"&yscr;\"], [0, \"&zscr;\"], [52, \"&Afr;\"], [0, \"&Bfr;\"], [1, \"&Dfr;\"], [0, \"&Efr;\"], [0, \"&Ffr;\"], [0, \"&Gfr;\"], [2, \"&Jfr;\"], [0, \"&Kfr;\"], [0, \"&Lfr;\"], [0, \"&Mfr;\"], [0, \"&Nfr;\"], [0, \"&Ofr;\"], [0, \"&Pfr;\"], [0, \"&Qfr;\"], [1, \"&Sfr;\"], [0, \"&Tfr;\"], [0, \"&Ufr;\"], [0, \"&Vfr;\"], [0, \"&Wfr;\"], [0, \"&Xfr;\"], [0, \"&Yfr;\"], [1, \"&afr;\"], [0, \"&bfr;\"], [0, \"&cfr;\"], [0, \"&dfr;\"], [0, \"&efr;\"], [0, \"&ffr;\"], [0, \"&gfr;\"], [0, \"&hfr;\"], [0, \"&ifr;\"], [0, \"&jfr;\"], [0, \"&kfr;\"], [0, \"&lfr;\"], [0, \"&mfr;\"], [0, \"&nfr;\"], [0, \"&ofr;\"], [0, \"&pfr;\"], [0, \"&qfr;\"], [0, \"&rfr;\"], [0, \"&sfr;\"], [0, \"&tfr;\"], [0, \"&ufr;\"], [0, \"&vfr;\"], [0, \"&wfr;\"], [0, \"&xfr;\"], [0, \"&yfr;\"], [0, \"&zfr;\"], [0, \"&Aopf;\"], [0, \"&Bopf;\"], [1, \"&Dopf;\"], [0, \"&Eopf;\"], [0, \"&Fopf;\"], [0, \"&Gopf;\"], [1, \"&Iopf;\"], [0, \"&Jopf;\"], [0, \"&Kopf;\"], [0, \"&Lopf;\"], [0, \"&Mopf;\"], [1, \"&Oopf;\"], [3, \"&Sopf;\"], [0, \"&Topf;\"], [0, \"&Uopf;\"], [0, \"&Vopf;\"], [0, \"&Wopf;\"], [0, \"&Xopf;\"], [0, \"&Yopf;\"], [1, \"&aopf;\"], [0, \"&bopf;\"], [0, \"&copf;\"], [0, \"&dopf;\"], [0, \"&eopf;\"], [0, \"&fopf;\"], [0, \"&gopf;\"], [0, \"&hopf;\"], [0, \"&iopf;\"], [0, \"&jopf;\"], [0, \"&kopf;\"], [0, \"&lopf;\"], [0, \"&mopf;\"], [0, \"&nopf;\"], [0, \"&oopf;\"], [0, \"&popf;\"], [0, \"&qopf;\"], [0, \"&ropf;\"], [0, \"&sopf;\"], [0, \"&topf;\"], [0, \"&uopf;\"], [0, \"&vopf;\"], [0, \"&wopf;\"], [0, \"&xopf;\"], [0, \"&yopf;\"], [0, \"&zopf;\"]])) }], [8906, \"&fflig;\"], [0, \"&filig;\"], [0, \"&fllig;\"], [0, \"&ffilig;\"], [0, \"&ffllig;\"]]));\n//# sourceMappingURL=encode-html.js.map","export const xmlReplacer = /[\"&'<>$\\x80-\\uFFFF]/g;\nconst xmlCodeMap = new Map([\n    [34, \"&quot;\"],\n    [38, \"&amp;\"],\n    [39, \"&apos;\"],\n    [60, \"&lt;\"],\n    [62, \"&gt;\"],\n]);\n// For compatibility with node < 4, we wrap `codePointAt`\nexport const getCodePoint = \n// eslint-disable-next-line @typescript-eslint/no-unnecessary-condition\nString.prototype.codePointAt != null\n    ? (str, index) => str.codePointAt(index)\n    : // http://mathiasbynens.be/notes/javascript-encoding#surrogate-formulae\n        (c, index) => (c.charCodeAt(index) & 0xfc00) === 0xd800\n            ? (c.charCodeAt(index) - 0xd800) * 0x400 +\n                c.charCodeAt(index + 1) -\n                0xdc00 +\n                0x10000\n            : c.charCodeAt(index);\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in XML\n * documents using XML entities.\n *\n * If a character has no equivalent entity, a\n * numeric hexadecimal reference (eg. `&#xfc;`) will be used.\n */\nexport function encodeXML(str) {\n    let ret = \"\";\n    let lastIdx = 0;\n    let match;\n    while ((match = xmlReplacer.exec(str)) !== null) {\n        const i = match.index;\n        const char = str.charCodeAt(i);\n        const next = xmlCodeMap.get(char);\n        if (next !== undefined) {\n            ret += str.substring(lastIdx, i) + next;\n            lastIdx = i + 1;\n        }\n        else {\n            ret += `${str.substring(lastIdx, i)}&#x${getCodePoint(str, i).toString(16)};`;\n            // Increase by 1 if we have a surrogate pair\n            lastIdx = xmlReplacer.lastIndex += Number((char & 0xfc00) === 0xd800);\n        }\n    }\n    return ret + str.substr(lastIdx);\n}\n/**\n * Encodes all non-ASCII characters, as well as characters not valid in XML\n * documents using numeric hexadecimal reference (eg. `&#xfc;`).\n *\n * Have a look at `escapeUTF8` if you want a more concise output at the expense\n * of reduced transportability.\n *\n * @param data String to escape.\n */\nexport const escape = encodeXML;\n/**\n * Creates a function that escapes all characters matched by the given regular\n * expression using the given map of characters to escape to their entities.\n *\n * @param regex Regular expression to match characters to escape.\n * @param map Map of characters to escape to their entities.\n *\n * @returns Function that escapes all characters matched by the given regular\n * expression using the given map of characters to escape to their entities.\n */\nfunction getEscaper(regex, map) {\n    return function escape(data) {\n        let match;\n        let lastIdx = 0;\n        let result = \"\";\n        while ((match = regex.exec(data))) {\n            if (lastIdx !== match.index) {\n                result += data.substring(lastIdx, match.index);\n            }\n            // We know that this character will be in the map.\n            result += map.get(match[0].charCodeAt(0));\n            // Every match will be of length 1\n            lastIdx = match.index + 1;\n        }\n        return result + data.substring(lastIdx);\n    };\n}\n/**\n * Encodes all characters not valid in XML documents using XML entities.\n *\n * Note that the output will be character-set dependent.\n *\n * @param data String to escape.\n */\nexport const escapeUTF8 = getEscaper(/[&<>'\"]/g, xmlCodeMap);\n/**\n * Encodes all characters that have to be escaped in HTML attributes,\n * following {@link https://html.spec.whatwg.org/multipage/parsing.html#escapingString}.\n *\n * @param data String to escape.\n */\nexport const escapeAttribute = getEscaper(/[\"&\\u00A0]/g, new Map([\n    [34, \"&quot;\"],\n    [38, \"&amp;\"],\n    [160, \"&nbsp;\"],\n]));\n/**\n * Encodes all characters that have to be escaped in HTML text,\n * following {@link https://html.spec.whatwg.org/multipage/parsing.html#escapingString}.\n *\n * @param data String to escape.\n */\nexport const escapeText = getEscaper(/[&<>\\u00A0]/g, new Map([\n    [38, \"&amp;\"],\n    [60, \"&lt;\"],\n    [62, \"&gt;\"],\n    [160, \"&nbsp;\"],\n]));\n//# sourceMappingURL=escape.js.map","import { decodeXML, decodeHTML, DecodingMode } from \"./decode.js\";\nimport { encodeHTML, encodeNonAsciiHTML } from \"./encode.js\";\nimport { encodeXML, escapeUTF8, escapeAttribute, escapeText, } from \"./escape.js\";\n/** The level of entities to support. */\nexport var EntityLevel;\n(function (EntityLevel) {\n    /** Support only XML entities. */\n    EntityLevel[EntityLevel[\"XML\"] = 0] = \"XML\";\n    /** Support HTML entities, which are a superset of XML entities. */\n    EntityLevel[EntityLevel[\"HTML\"] = 1] = \"HTML\";\n})(EntityLevel || (EntityLevel = {}));\nexport var EncodingMode;\n(function (EncodingMode) {\n    /**\n     * The output is UTF-8 encoded. Only characters that need escaping within\n     * XML will be escaped.\n     */\n    EncodingMode[EncodingMode[\"UTF8\"] = 0] = \"UTF8\";\n    /**\n     * The output consists only of ASCII characters. Characters that need\n     * escaping within HTML, and characters that aren't ASCII characters will\n     * be escaped.\n     */\n    EncodingMode[EncodingMode[\"ASCII\"] = 1] = \"ASCII\";\n    /**\n     * Encode all characters that have an equivalent entity, as well as all\n     * characters that are not ASCII characters.\n     */\n    EncodingMode[EncodingMode[\"Extensive\"] = 2] = \"Extensive\";\n    /**\n     * Encode all characters that have to be escaped in HTML attributes,\n     * following {@link https://html.spec.whatwg.org/multipage/parsing.html#escapingString}.\n     */\n    EncodingMode[EncodingMode[\"Attribute\"] = 3] = \"Attribute\";\n    /**\n     * Encode all characters that have to be escaped in HTML text,\n     * following {@link https://html.spec.whatwg.org/multipage/parsing.html#escapingString}.\n     */\n    EncodingMode[EncodingMode[\"Text\"] = 4] = \"Text\";\n})(EncodingMode || (EncodingMode = {}));\n/**\n * Decodes a string with entities.\n *\n * @param data String to decode.\n * @param options Decoding options.\n */\nexport function decode(data, options = EntityLevel.XML) {\n    const level = typeof options === \"number\" ? options : options.level;\n    if (level === EntityLevel.HTML) {\n        const mode = typeof options === \"object\" ? options.mode : undefined;\n        return decodeHTML(data, mode);\n    }\n    return decodeXML(data);\n}\n/**\n * Decodes a string with entities. Does not allow missing trailing semicolons for entities.\n *\n * @param data String to decode.\n * @param options Decoding options.\n * @deprecated Use `decode` with the `mode` set to `Strict`.\n */\nexport function decodeStrict(data, options = EntityLevel.XML) {\n    var _a;\n    const opts = typeof options === \"number\" ? { level: options } : options;\n    (_a = opts.mode) !== null && _a !== void 0 ? _a : (opts.mode = DecodingMode.Strict);\n    return decode(data, opts);\n}\n/**\n * Encodes a string with entities.\n *\n * @param data String to encode.\n * @param options Encoding options.\n */\nexport function encode(data, options = EntityLevel.XML) {\n    const opts = typeof options === \"number\" ? { level: options } : options;\n    // Mode `UTF8` just escapes XML entities\n    if (opts.mode === EncodingMode.UTF8)\n        return escapeUTF8(data);\n    if (opts.mode === EncodingMode.Attribute)\n        return escapeAttribute(data);\n    if (opts.mode === EncodingMode.Text)\n        return escapeText(data);\n    if (opts.level === EntityLevel.HTML) {\n        if (opts.mode === EncodingMode.ASCII) {\n            return encodeNonAsciiHTML(data);\n        }\n        return encodeHTML(data);\n    }\n    // ASCII and Extensive are equivalent\n    return encodeXML(data);\n}\nexport { encodeXML, escape, escapeUTF8, escapeAttribute, escapeText, } from \"./escape.js\";\nexport { encodeHTML, encodeNonAsciiHTML, \n// Legacy aliases (deprecated)\nencodeHTML as encodeHTML4, encodeHTML as encodeHTML5, } from \"./encode.js\";\nexport { EntityDecoder, DecodingMode, decodeXML, decodeHTML, decodeHTMLStrict, decodeHTMLAttribute, \n// Legacy aliases (deprecated)\ndecodeHTML as decodeHTML4, decodeHTML as decodeHTML5, decodeHTMLStrict as decodeHTML4Strict, decodeHTMLStrict as decodeHTML5Strict, decodeXML as decodeXMLStrict, } from \"./decode.js\";\n//# sourceMappingURL=index.js.map","export const elementNames = new Map([\n    \"altGlyph\",\n    \"altGlyphDef\",\n    \"altGlyphItem\",\n    \"animateColor\",\n    \"animateMotion\",\n    \"animateTransform\",\n    \"clipPath\",\n    \"feBlend\",\n    \"feColorMatrix\",\n    \"feComponentTransfer\",\n    \"feComposite\",\n    \"feConvolveMatrix\",\n    \"feDiffuseLighting\",\n    \"feDisplacementMap\",\n    \"feDistantLight\",\n    \"feDropShadow\",\n    \"feFlood\",\n    \"feFuncA\",\n    \"feFuncB\",\n    \"feFuncG\",\n    \"feFuncR\",\n    \"feGaussianBlur\",\n    \"feImage\",\n    \"feMerge\",\n    \"feMergeNode\",\n    \"feMorphology\",\n    \"feOffset\",\n    \"fePointLight\",\n    \"feSpecularLighting\",\n    \"feSpotLight\",\n    \"feTile\",\n    \"feTurbulence\",\n    \"foreignObject\",\n    \"glyphRef\",\n    \"linearGradient\",\n    \"radialGradient\",\n    \"textPath\",\n].map((val) => [val.toLowerCase(), val]));\nexport const attributeNames = new Map([\n    \"definitionURL\",\n    \"attributeName\",\n    \"attributeType\",\n    \"baseFrequency\",\n    \"baseProfile\",\n    \"calcMode\",\n    \"clipPathUnits\",\n    \"diffuseConstant\",\n    \"edgeMode\",\n    \"filterUnits\",\n    \"glyphRef\",\n    \"gradientTransform\",\n    \"gradientUnits\",\n    \"kernelMatrix\",\n    \"kernelUnitLength\",\n    \"keyPoints\",\n    \"keySplines\",\n    \"keyTimes\",\n    \"lengthAdjust\",\n    \"limitingConeAngle\",\n    \"markerHeight\",\n    \"markerUnits\",\n    \"markerWidth\",\n    \"maskContentUnits\",\n    \"maskUnits\",\n    \"numOctaves\",\n    \"pathLength\",\n    \"patternContentUnits\",\n    \"patternTransform\",\n    \"patternUnits\",\n    \"pointsAtX\",\n    \"pointsAtY\",\n    \"pointsAtZ\",\n    \"preserveAlpha\",\n    \"preserveAspectRatio\",\n    \"primitiveUnits\",\n    \"refX\",\n    \"refY\",\n    \"repeatCount\",\n    \"repeatDur\",\n    \"requiredExtensions\",\n    \"requiredFeatures\",\n    \"specularConstant\",\n    \"specularExponent\",\n    \"spreadMethod\",\n    \"startOffset\",\n    \"stdDeviation\",\n    \"stitchTiles\",\n    \"surfaceScale\",\n    \"systemLanguage\",\n    \"tableValues\",\n    \"targetX\",\n    \"targetY\",\n    \"textLength\",\n    \"viewBox\",\n    \"viewTarget\",\n    \"xChannelSelector\",\n    \"yChannelSelector\",\n    \"zoomAndPan\",\n].map((val) => [val.toLowerCase(), val]));\n","/*\n * Module dependencies\n */\nimport * as ElementType from \"domelementtype\";\nimport { encodeXML, escapeAttribute, escapeText } from \"entities\";\n/**\n * Mixed-case SVG and MathML tags & attributes\n * recognized by the HTML parser.\n *\n * @see https://html.spec.whatwg.org/multipage/parsing.html#parsing-main-inforeign\n */\nimport { elementNames, attributeNames } from \"./foreignNames.js\";\nconst unencodedElements = new Set([\n    \"style\",\n    \"script\",\n    \"xmp\",\n    \"iframe\",\n    \"noembed\",\n    \"noframes\",\n    \"plaintext\",\n    \"noscript\",\n]);\nfunction replaceQuotes(value) {\n    return value.replace(/\"/g, \"&quot;\");\n}\n/**\n * Format attributes\n */\nfunction formatAttributes(attributes, opts) {\n    var _a;\n    if (!attributes)\n        return;\n    const encode = ((_a = opts.encodeEntities) !== null && _a !== void 0 ? _a : opts.decodeEntities) === false\n        ? replaceQuotes\n        : opts.xmlMode || opts.encodeEntities !== \"utf8\"\n            ? encodeXML\n            : escapeAttribute;\n    return Object.keys(attributes)\n        .map((key) => {\n        var _a, _b;\n        const value = (_a = attributes[key]) !== null && _a !== void 0 ? _a : \"\";\n        if (opts.xmlMode === \"foreign\") {\n            /* Fix up mixed-case attribute names */\n            key = (_b = attributeNames.get(key)) !== null && _b !== void 0 ? _b : key;\n        }\n        if (!opts.emptyAttrs && !opts.xmlMode && value === \"\") {\n            return key;\n        }\n        return `${key}=\"${encode(value)}\"`;\n    })\n        .join(\" \");\n}\n/**\n * Self-enclosing tags\n */\nconst singleTag = new Set([\n    \"area\",\n    \"base\",\n    \"basefont\",\n    \"br\",\n    \"col\",\n    \"command\",\n    \"embed\",\n    \"frame\",\n    \"hr\",\n    \"img\",\n    \"input\",\n    \"isindex\",\n    \"keygen\",\n    \"link\",\n    \"meta\",\n    \"param\",\n    \"source\",\n    \"track\",\n    \"wbr\",\n]);\n/**\n * Renders a DOM node or an array of DOM nodes to a string.\n *\n * Can be thought of as the equivalent of the `outerHTML` of the passed node(s).\n *\n * @param node Node to be rendered.\n * @param options Changes serialization behavior\n */\nexport function render(node, options = {}) {\n    const nodes = \"length\" in node ? node : [node];\n    let output = \"\";\n    for (let i = 0; i < nodes.length; i++) {\n        output += renderNode(nodes[i], options);\n    }\n    return output;\n}\nexport default render;\nfunction renderNode(node, options) {\n    switch (node.type) {\n        case ElementType.Root:\n            return render(node.children, options);\n        // @ts-expect-error We don't use `Doctype` yet\n        case ElementType.Doctype:\n        case ElementType.Directive:\n            return renderDirective(node);\n        case ElementType.Comment:\n            return renderComment(node);\n        case ElementType.CDATA:\n            return renderCdata(node);\n        case ElementType.Script:\n        case ElementType.Style:\n        case ElementType.Tag:\n            return renderTag(node, options);\n        case ElementType.Text:\n            return renderText(node, options);\n    }\n}\nconst foreignModeIntegrationPoints = new Set([\n    \"mi\",\n    \"mo\",\n    \"mn\",\n    \"ms\",\n    \"mtext\",\n    \"annotation-xml\",\n    \"foreignObject\",\n    \"desc\",\n    \"title\",\n]);\nconst foreignElements = new Set([\"svg\", \"math\"]);\nfunction renderTag(elem, opts) {\n    var _a;\n    // Handle SVG / MathML in HTML\n    if (opts.xmlMode === \"foreign\") {\n        /* Fix up mixed-case element names */\n        elem.name = (_a = elementNames.get(elem.name)) !== null && _a !== void 0 ? _a : elem.name;\n        /* Exit foreign mode at integration points */\n        if (elem.parent &&\n            foreignModeIntegrationPoints.has(elem.parent.name)) {\n            opts = { ...opts, xmlMode: false };\n        }\n    }\n    if (!opts.xmlMode && foreignElements.has(elem.name)) {\n        opts = { ...opts, xmlMode: \"foreign\" };\n    }\n    let tag = `<${elem.name}`;\n    const attribs = formatAttributes(elem.attribs, opts);\n    if (attribs) {\n        tag += ` ${attribs}`;\n    }\n    if (elem.children.length === 0 &&\n        (opts.xmlMode\n            ? // In XML mode or foreign mode, and user hasn't explicitly turned off self-closing tags\n                opts.selfClosingTags !== false\n            : // User explicitly asked for self-closing tags, even in HTML mode\n                opts.selfClosingTags && singleTag.has(elem.name))) {\n        if (!opts.xmlMode)\n            tag += \" \";\n        tag += \"/>\";\n    }\n    else {\n        tag += \">\";\n        if (elem.children.length > 0) {\n            tag += render(elem.children, opts);\n        }\n        if (opts.xmlMode || !singleTag.has(elem.name)) {\n            tag += `</${elem.name}>`;\n        }\n    }\n    return tag;\n}\nfunction renderDirective(elem) {\n    return `<${elem.data}>`;\n}\nfunction renderText(elem, opts) {\n    var _a;\n    let data = elem.data || \"\";\n    // If entities weren't decoded, no need to encode them back\n    if (((_a = opts.encodeEntities) !== null && _a !== void 0 ? _a : opts.decodeEntities) !== false &&\n        !(!opts.xmlMode &&\n            elem.parent &&\n            unencodedElements.has(elem.parent.name))) {\n        data =\n            opts.xmlMode || opts.encodeEntities !== \"utf8\"\n                ? encodeXML(data)\n                : escapeText(data);\n    }\n    return data;\n}\nfunction renderCdata(elem) {\n    return `<![CDATA[${elem.children[0].data}]]>`;\n}\nfunction renderComment(elem) {\n    return `<!--${elem.data}-->`;\n}\n","import { hasChildren } from \"domhandler\";\n/**\n * Given an array of nodes, remove any member that is contained by another\n * member.\n *\n * @category Helpers\n * @param nodes Nodes to filter.\n * @returns Remaining nodes that aren't contained by other nodes.\n */\nexport function removeSubsets(nodes) {\n    let idx = nodes.length;\n    /*\n     * Check if each node (or one of its ancestors) is already contained in the\n     * array.\n     */\n    while (--idx >= 0) {\n        const node = nodes[idx];\n        /*\n         * Remove the node if it is not unique.\n         * We are going through the array from the end, so we only\n         * have to check nodes that preceed the node under consideration in the array.\n         */\n        if (idx > 0 && nodes.lastIndexOf(node, idx - 1) >= 0) {\n            nodes.splice(idx, 1);\n            continue;\n        }\n        for (let ancestor = node.parent; ancestor; ancestor = ancestor.parent) {\n            if (nodes.includes(ancestor)) {\n                nodes.splice(idx, 1);\n                break;\n            }\n        }\n    }\n    return nodes;\n}\n/**\n * @category Helpers\n * @see {@link http://dom.spec.whatwg.org/#dom-node-comparedocumentposition}\n */\nexport var DocumentPosition;\n(function (DocumentPosition) {\n    DocumentPosition[DocumentPosition[\"DISCONNECTED\"] = 1] = \"DISCONNECTED\";\n    DocumentPosition[DocumentPosition[\"PRECEDING\"] = 2] = \"PRECEDING\";\n    DocumentPosition[DocumentPosition[\"FOLLOWING\"] = 4] = \"FOLLOWING\";\n    DocumentPosition[DocumentPosition[\"CONTAINS\"] = 8] = \"CONTAINS\";\n    DocumentPosition[DocumentPosition[\"CONTAINED_BY\"] = 16] = \"CONTAINED_BY\";\n})(DocumentPosition || (DocumentPosition = {}));\n/**\n * Compare the position of one node against another node in any other document,\n * returning a bitmask with the values from {@link DocumentPosition}.\n *\n * Document order:\n * > There is an ordering, document order, defined on all the nodes in the\n * > document corresponding to the order in which the first character of the\n * > XML representation of each node occurs in the XML representation of the\n * > document after expansion of general entities. Thus, the document element\n * > node will be the first node. Element nodes occur before their children.\n * > Thus, document order orders element nodes in order of the occurrence of\n * > their start-tag in the XML (after expansion of entities). The attribute\n * > nodes of an element occur after the element and before its children. The\n * > relative order of attribute nodes is implementation-dependent.\n *\n * Source:\n * http://www.w3.org/TR/DOM-Level-3-Core/glossary.html#dt-document-order\n *\n * @category Helpers\n * @param nodeA The first node to use in the comparison\n * @param nodeB The second node to use in the comparison\n * @returns A bitmask describing the input nodes' relative position.\n *\n * See http://dom.spec.whatwg.org/#dom-node-comparedocumentposition for\n * a description of these values.\n */\nexport function compareDocumentPosition(nodeA, nodeB) {\n    const aParents = [];\n    const bParents = [];\n    if (nodeA === nodeB) {\n        return 0;\n    }\n    let current = hasChildren(nodeA) ? nodeA : nodeA.parent;\n    while (current) {\n        aParents.unshift(current);\n        current = current.parent;\n    }\n    current = hasChildren(nodeB) ? nodeB : nodeB.parent;\n    while (current) {\n        bParents.unshift(current);\n        current = current.parent;\n    }\n    const maxIdx = Math.min(aParents.length, bParents.length);\n    let idx = 0;\n    while (idx < maxIdx && aParents[idx] === bParents[idx]) {\n        idx++;\n    }\n    if (idx === 0) {\n        return DocumentPosition.DISCONNECTED;\n    }\n    const sharedParent = aParents[idx - 1];\n    const siblings = sharedParent.children;\n    const aSibling = aParents[idx];\n    const bSibling = bParents[idx];\n    if (siblings.indexOf(aSibling) > siblings.indexOf(bSibling)) {\n        if (sharedParent === nodeB) {\n            return DocumentPosition.FOLLOWING | DocumentPosition.CONTAINED_BY;\n        }\n        return DocumentPosition.FOLLOWING;\n    }\n    if (sharedParent === nodeA) {\n        return DocumentPosition.PRECEDING | DocumentPosition.CONTAINS;\n    }\n    return DocumentPosition.PRECEDING;\n}\n/**\n * Sort an array of nodes based on their relative position in the document,\n * removing any duplicate nodes. If the array contains nodes that do not belong\n * to the same document, sort order is unspecified.\n *\n * @category Helpers\n * @param nodes Array of DOM nodes.\n * @returns Collection of unique nodes, sorted in document order.\n */\nexport function uniqueSort(nodes) {\n    nodes = nodes.filter((node, i, arr) => !arr.includes(node, i + 1));\n    nodes.sort((a, b) => {\n        const relative = compareDocumentPosition(a, b);\n        if (relative & DocumentPosition.PRECEDING) {\n            return -1;\n        }\n        else if (relative & DocumentPosition.FOLLOWING) {\n            return 1;\n        }\n        return 0;\n    });\n    return nodes;\n}\n//# sourceMappingURL=helpers.js.map","import { hp2Builder } from '@selderee/plugin-htmlparser2';\nimport { parseDocument } from 'htmlparser2';\nimport { DecisionTree } from 'selderee';\nimport merge from 'deepmerge';\nimport { render } from 'dom-serializer';\n\n/**\n * Make a recursive function that will only run to a given depth\n * and switches to an alternative function at that depth. \\\n * No limitation if `n` is `undefined` (Just wraps `f` in that case).\n *\n * @param   { number | undefined } n   Allowed depth of recursion. `undefined` for no limitation.\n * @param   { Function }           f   Function that accepts recursive callback as the first argument.\n * @param   { Function }           [g] Function to run instead, when maximum depth was reached. Do nothing by default.\n * @returns { Function }\n */\nfunction limitedDepthRecursive (n, f, g = () => undefined) {\n  if (n === undefined) {\n    const f1 = function (...args) { return f(f1, ...args); };\n    return f1;\n  }\n  if (n >= 0) {\n    return function (...args) { return f(limitedDepthRecursive(n - 1, f, g), ...args); };\n  }\n  return g;\n}\n\n/**\n * Return the same string or a substring with\n * the given character occurrences removed from each side.\n *\n * @param   { string } str  A string to trim.\n * @param   { string } char A character to be trimmed.\n * @returns { string }\n */\nfunction trimCharacter (str, char) {\n  let start = 0;\n  let end = str.length;\n  while (start < end && str[start] === char) { ++start; }\n  while (end > start && str[end - 1] === char) { --end; }\n  return (start > 0 || end < str.length)\n    ? str.substring(start, end)\n    : str;\n}\n\n/**\n * Return the same string or a substring with\n * the given character occurrences removed from the end only.\n *\n * @param   { string } str  A string to trim.\n * @param   { string } char A character to be trimmed.\n * @returns { string }\n */\nfunction trimCharacterEnd (str, char) {\n  let end = str.length;\n  while (end > 0 && str[end - 1] === char) { --end; }\n  return (end < str.length)\n    ? str.substring(0, end)\n    : str;\n}\n\n/**\n * Return a new string will all characters replaced with unicode escape sequences.\n * This extreme kind of escaping can used to be safely compose regular expressions.\n *\n * @param { string } str A string to escape.\n * @returns { string } A string of unicode escape sequences.\n */\nfunction unicodeEscape (str) {\n  return str.replace(/[\\s\\S]/g, c => '\\\\u' + c.charCodeAt().toString(16).padStart(4, '0'));\n}\n\n/**\n * Deduplicate an array by a given key callback.\n * Item properties are merged recursively and with the preference for last defined values.\n * Of items with the same key, merged item takes the place of the last item,\n * others are omitted.\n *\n * @param { any[] } items An array to deduplicate.\n * @param { (x: any) => string } getKey Callback to get a value that distinguishes unique items.\n * @returns { any[] }\n */\nfunction mergeDuplicatesPreferLast (items, getKey) {\n  const map = new Map();\n  for (let i = items.length; i-- > 0;) {\n    const item = items[i];\n    const key = getKey(item);\n    map.set(\n      key,\n      (map.has(key))\n        ? merge(item, map.get(key), { arrayMerge: overwriteMerge$1 })\n        : item\n    );\n  }\n  return [...map.values()].reverse();\n}\n\nconst overwriteMerge$1 = (acc, src, options) => [...src];\n\n/**\n * Get a nested property from an object.\n *\n * @param   { object }   obj  The object to query for the value.\n * @param   { string[] } path The path to the property.\n * @returns { any }\n */\nfunction get (obj, path) {\n  for (const key of path) {\n    if (!obj) { return undefined; }\n    obj = obj[key];\n  }\n  return obj;\n}\n\n/**\n * Convert a number into alphabetic sequence representation (Sequence without zeroes).\n *\n * For example: `a, ..., z, aa, ..., zz, aaa, ...`.\n *\n * @param   { number } num              Number to convert. Must be >= 1.\n * @param   { string } [baseChar = 'a'] Character for 1 in the sequence.\n * @param   { number } [base = 26]      Number of characters in the sequence.\n * @returns { string }\n */\nfunction numberToLetterSequence (num, baseChar = 'a', base = 26) {\n  const digits = [];\n  do {\n    num -= 1;\n    digits.push(num % base);\n    num = (num / base) >> 0; // quick `floor`\n  } while (num > 0);\n  const baseCode = baseChar.charCodeAt(0);\n  return digits\n    .reverse()\n    .map(n => String.fromCharCode(baseCode + n))\n    .join('');\n}\n\nconst I = ['I', 'X', 'C', 'M'];\nconst V = ['V', 'L', 'D'];\n\n/**\n * Convert a number to it's Roman representation. No large numbers extension.\n *\n * @param   { number } num Number to convert. `0 < num <= 3999`.\n * @returns { string }\n */\nfunction numberToRoman (num) {\n  return [...(num) + '']\n    .map(n => +n)\n    .reverse()\n    .map((v, i) => ((v % 5 < 4)\n      ? (v < 5 ? '' : V[i]) + I[i].repeat(v % 5)\n      : I[i] + (v < 5 ? V[i] : I[i + 1])))\n    .reverse()\n    .join('');\n}\n\n/**\n * Helps to build text from words.\n */\nclass InlineTextBuilder {\n  /**\n   * Creates an instance of InlineTextBuilder.\n   *\n   * If `maxLineLength` is not provided then it is either `options.wordwrap` or unlimited.\n   *\n   * @param { Options } options           HtmlToText options.\n   * @param { number }  [ maxLineLength ] This builder will try to wrap text to fit this line length.\n   */\n  constructor (options, maxLineLength = undefined) {\n    /** @type { string[][] } */\n    this.lines = [];\n    /** @type { string[] }   */\n    this.nextLineWords = [];\n    this.maxLineLength = maxLineLength || options.wordwrap || Number.MAX_VALUE;\n    this.nextLineAvailableChars = this.maxLineLength;\n    this.wrapCharacters = get(options, ['longWordSplit', 'wrapCharacters']) || [];\n    this.forceWrapOnLimit = get(options, ['longWordSplit', 'forceWrapOnLimit']) || false;\n\n    this.stashedSpace = false;\n    this.wordBreakOpportunity = false;\n  }\n\n  /**\n   * Add a new word.\n   *\n   * @param { string } word A word to add.\n   * @param { boolean } [noWrap] Don't wrap text even if the line is too long.\n   */\n  pushWord (word, noWrap = false) {\n    if (this.nextLineAvailableChars <= 0 && !noWrap) {\n      this.startNewLine();\n    }\n    const isLineStart = this.nextLineWords.length === 0;\n    const cost = word.length + (isLineStart ? 0 : 1);\n    if ((cost <= this.nextLineAvailableChars) || noWrap) { // Fits into available budget\n\n      this.nextLineWords.push(word);\n      this.nextLineAvailableChars -= cost;\n\n    } else { // Does not fit - try to split the word\n\n      // The word is moved to a new line - prefer to wrap between words.\n      const [first, ...rest] = this.splitLongWord(word);\n      if (!isLineStart) { this.startNewLine(); }\n      this.nextLineWords.push(first);\n      this.nextLineAvailableChars -= first.length;\n      for (const part of rest) {\n        this.startNewLine();\n        this.nextLineWords.push(part);\n        this.nextLineAvailableChars -= part.length;\n      }\n\n    }\n  }\n\n  /**\n   * Pop a word from the currently built line.\n   * This doesn't affect completed lines.\n   *\n   * @returns { string }\n   */\n  popWord () {\n    const lastWord = this.nextLineWords.pop();\n    if (lastWord !== undefined) {\n      const isLineStart = this.nextLineWords.length === 0;\n      const cost = lastWord.length + (isLineStart ? 0 : 1);\n      this.nextLineAvailableChars += cost;\n    }\n    return lastWord;\n  }\n\n  /**\n   * Concat a word to the last word already in the builder.\n   * Adds a new word in case there are no words yet in the last line.\n   *\n   * @param { string } word A word to be concatenated.\n   * @param { boolean } [noWrap] Don't wrap text even if the line is too long.\n   */\n  concatWord (word, noWrap = false) {\n    if (this.wordBreakOpportunity && word.length > this.nextLineAvailableChars) {\n      this.pushWord(word, noWrap);\n      this.wordBreakOpportunity = false;\n    } else {\n      const lastWord = this.popWord();\n      this.pushWord((lastWord) ? lastWord.concat(word) : word, noWrap);\n    }\n  }\n\n  /**\n   * Add current line (and more empty lines if provided argument > 1) to the list of complete lines and start a new one.\n   *\n   * @param { number } n Number of line breaks that will be added to the resulting string.\n   */\n  startNewLine (n = 1) {\n    this.lines.push(this.nextLineWords);\n    if (n > 1) {\n      this.lines.push(...Array.from({ length: n - 1 }, () => []));\n    }\n    this.nextLineWords = [];\n    this.nextLineAvailableChars = this.maxLineLength;\n  }\n\n  /**\n   * No words in this builder.\n   *\n   * @returns { boolean }\n   */\n  isEmpty () {\n    return this.lines.length === 0\n        && this.nextLineWords.length === 0;\n  }\n\n  clear () {\n    this.lines.length = 0;\n    this.nextLineWords.length = 0;\n    this.nextLineAvailableChars = this.maxLineLength;\n  }\n\n  /**\n   * Join all lines of words inside the InlineTextBuilder into a complete string.\n   *\n   * @returns { string }\n   */\n  toString () {\n    return [...this.lines, this.nextLineWords]\n      .map(words => words.join(' '))\n      .join('\\n');\n  }\n\n  /**\n   * Split a long word up to fit within the word wrap limit.\n   * Use either a character to split looking back from the word wrap limit,\n   * or truncate to the word wrap limit.\n   *\n   * @param   { string }   word Input word.\n   * @returns { string[] }      Parts of the word.\n   */\n  splitLongWord (word) {\n    const parts = [];\n    let idx = 0;\n    while (word.length > this.maxLineLength) {\n\n      const firstLine = word.substring(0, this.maxLineLength);\n      const remainingChars = word.substring(this.maxLineLength);\n\n      const splitIndex = firstLine.lastIndexOf(this.wrapCharacters[idx]);\n\n      if (splitIndex > -1) { // Found a character to split on\n\n        word = firstLine.substring(splitIndex + 1) + remainingChars;\n        parts.push(firstLine.substring(0, splitIndex + 1));\n\n      } else { // Not found a character to split on\n\n        idx++;\n        if (idx < this.wrapCharacters.length) { // There is next character to try\n\n          word = firstLine + remainingChars;\n\n        } else { // No more characters to try\n\n          if (this.forceWrapOnLimit) {\n            parts.push(firstLine);\n            word = remainingChars;\n            if (word.length > this.maxLineLength) {\n              continue;\n            }\n          } else {\n            word = firstLine + remainingChars;\n          }\n          break;\n\n        }\n\n      }\n\n    }\n    parts.push(word); // Add remaining part to array\n    return parts;\n  }\n}\n\n/* eslint-disable max-classes-per-file */\n\n\nclass StackItem {\n  constructor (next = null) { this.next = next; }\n\n  getRoot () { return (this.next) ? this.next : this; }\n}\n\nclass BlockStackItem extends StackItem {\n  constructor (options, next = null, leadingLineBreaks = 1, maxLineLength = undefined) {\n    super(next);\n    this.leadingLineBreaks = leadingLineBreaks;\n    this.inlineTextBuilder = new InlineTextBuilder(options, maxLineLength);\n    this.rawText = '';\n    this.stashedLineBreaks = 0;\n    this.isPre = next && next.isPre;\n    this.isNoWrap = next && next.isNoWrap;\n  }\n}\n\nclass ListStackItem extends BlockStackItem {\n  constructor (\n    options,\n    next = null,\n    {\n      interRowLineBreaks = 1,\n      leadingLineBreaks = 2,\n      maxLineLength = undefined,\n      maxPrefixLength = 0,\n      prefixAlign = 'left',\n    } = {}\n  ) {\n    super(options, next, leadingLineBreaks, maxLineLength);\n    this.maxPrefixLength = maxPrefixLength;\n    this.prefixAlign = prefixAlign;\n    this.interRowLineBreaks = interRowLineBreaks;\n  }\n}\n\nclass ListItemStackItem extends BlockStackItem {\n  constructor (\n    options,\n    next = null,\n    {\n      leadingLineBreaks = 1,\n      maxLineLength = undefined,\n      prefix = '',\n    } = {}\n  ) {\n    super(options, next, leadingLineBreaks, maxLineLength);\n    this.prefix = prefix;\n  }\n}\n\nclass TableStackItem extends StackItem {\n  constructor (next = null) {\n    super(next);\n    this.rows = [];\n    this.isPre = next && next.isPre;\n    this.isNoWrap = next && next.isNoWrap;\n  }\n}\n\nclass TableRowStackItem extends StackItem {\n  constructor (next = null) {\n    super(next);\n    this.cells = [];\n    this.isPre = next && next.isPre;\n    this.isNoWrap = next && next.isNoWrap;\n  }\n}\n\nclass TableCellStackItem extends StackItem {\n  constructor (options, next = null, maxColumnWidth = undefined) {\n    super(next);\n    this.inlineTextBuilder = new InlineTextBuilder(options, maxColumnWidth);\n    this.rawText = '';\n    this.stashedLineBreaks = 0;\n    this.isPre = next && next.isPre;\n    this.isNoWrap = next && next.isNoWrap;\n  }\n}\n\nclass TransformerStackItem extends StackItem {\n  constructor (next = null, transform) {\n    super(next);\n    this.transform = transform;\n  }\n}\n\nfunction charactersToCodes (str) {\n  return [...str]\n    .map(c => '\\\\u' + c.charCodeAt(0).toString(16).padStart(4, '0'))\n    .join('');\n}\n\n/**\n * Helps to handle HTML whitespaces.\n *\n * @class WhitespaceProcessor\n */\nclass WhitespaceProcessor {\n\n  /**\n   * Creates an instance of WhitespaceProcessor.\n   *\n   * @param { Options } options    HtmlToText options.\n   * @memberof WhitespaceProcessor\n   */\n  constructor (options) {\n    this.whitespaceChars = (options.preserveNewlines)\n      ? options.whitespaceCharacters.replace(/\\n/g, '')\n      : options.whitespaceCharacters;\n    const whitespaceCodes = charactersToCodes(this.whitespaceChars);\n    this.leadingWhitespaceRe = new RegExp(`^[${whitespaceCodes}]`);\n    this.trailingWhitespaceRe = new RegExp(`[${whitespaceCodes}]$`);\n    this.allWhitespaceOrEmptyRe = new RegExp(`^[${whitespaceCodes}]*$`);\n    this.newlineOrNonWhitespaceRe = new RegExp(`(\\\\n|[^\\\\n${whitespaceCodes}])`, 'g');\n    this.newlineOrNonNewlineStringRe = new RegExp(`(\\\\n|[^\\\\n]+)`, 'g');\n\n    if (options.preserveNewlines) {\n\n      const wordOrNewlineRe = new RegExp(`\\\\n|[^\\\\n${whitespaceCodes}]+`, 'gm');\n\n      /**\n       * Shrink whitespaces and wrap text, add to the builder.\n       *\n       * @param { string }                  text              Input text.\n       * @param { InlineTextBuilder }       inlineTextBuilder A builder to receive processed text.\n       * @param { (str: string) => string } [ transform ]     A transform to be applied to words.\n       * @param { boolean }                 [noWrap] Don't wrap text even if the line is too long.\n       */\n      this.shrinkWrapAdd = function (text, inlineTextBuilder, transform = (str => str), noWrap = false) {\n        if (!text) { return; }\n        const previouslyStashedSpace = inlineTextBuilder.stashedSpace;\n        let anyMatch = false;\n        let m = wordOrNewlineRe.exec(text);\n        if (m) {\n          anyMatch = true;\n          if (m[0] === '\\n') {\n            inlineTextBuilder.startNewLine();\n          } else if (previouslyStashedSpace || this.testLeadingWhitespace(text)) {\n            inlineTextBuilder.pushWord(transform(m[0]), noWrap);\n          } else {\n            inlineTextBuilder.concatWord(transform(m[0]), noWrap);\n          }\n          while ((m = wordOrNewlineRe.exec(text)) !== null) {\n            if (m[0] === '\\n') {\n              inlineTextBuilder.startNewLine();\n            } else {\n              inlineTextBuilder.pushWord(transform(m[0]), noWrap);\n            }\n          }\n        }\n        inlineTextBuilder.stashedSpace = (previouslyStashedSpace && !anyMatch) || (this.testTrailingWhitespace(text));\n        // No need to stash a space in case last added item was a new line,\n        // but that won't affect anything later anyway.\n      };\n\n    } else {\n\n      const wordRe = new RegExp(`[^${whitespaceCodes}]+`, 'g');\n\n      this.shrinkWrapAdd = function (text, inlineTextBuilder, transform = (str => str), noWrap = false) {\n        if (!text) { return; }\n        const previouslyStashedSpace = inlineTextBuilder.stashedSpace;\n        let anyMatch = false;\n        let m = wordRe.exec(text);\n        if (m) {\n          anyMatch = true;\n          if (previouslyStashedSpace || this.testLeadingWhitespace(text)) {\n            inlineTextBuilder.pushWord(transform(m[0]), noWrap);\n          } else {\n            inlineTextBuilder.concatWord(transform(m[0]), noWrap);\n          }\n          while ((m = wordRe.exec(text)) !== null) {\n            inlineTextBuilder.pushWord(transform(m[0]), noWrap);\n          }\n        }\n        inlineTextBuilder.stashedSpace = (previouslyStashedSpace && !anyMatch) || this.testTrailingWhitespace(text);\n      };\n\n    }\n  }\n\n  /**\n   * Add text with only minimal processing.\n   * Everything between newlines considered a single word.\n   * No whitespace is trimmed.\n   * Not affected by preserveNewlines option - `\\n` always starts a new line.\n   *\n   * `noWrap` argument is `true` by default - this won't start a new line\n   * even if there is not enough space left in the current line.\n   *\n   * @param { string }            text              Input text.\n   * @param { InlineTextBuilder } inlineTextBuilder A builder to receive processed text.\n   * @param { boolean }           [noWrap] Don't wrap text even if the line is too long.\n   */\n  addLiteral (text, inlineTextBuilder, noWrap = true) {\n    if (!text) { return; }\n    const previouslyStashedSpace = inlineTextBuilder.stashedSpace;\n    let anyMatch = false;\n    let m = this.newlineOrNonNewlineStringRe.exec(text);\n    if (m) {\n      anyMatch = true;\n      if (m[0] === '\\n') {\n        inlineTextBuilder.startNewLine();\n      } else if (previouslyStashedSpace) {\n        inlineTextBuilder.pushWord(m[0], noWrap);\n      } else {\n        inlineTextBuilder.concatWord(m[0], noWrap);\n      }\n      while ((m = this.newlineOrNonNewlineStringRe.exec(text)) !== null) {\n        if (m[0] === '\\n') {\n          inlineTextBuilder.startNewLine();\n        } else {\n          inlineTextBuilder.pushWord(m[0], noWrap);\n        }\n      }\n    }\n    inlineTextBuilder.stashedSpace = (previouslyStashedSpace && !anyMatch);\n  }\n\n  /**\n   * Test whether the given text starts with HTML whitespace character.\n   *\n   * @param   { string }  text  The string to test.\n   * @returns { boolean }\n   */\n  testLeadingWhitespace (text) {\n    return this.leadingWhitespaceRe.test(text);\n  }\n\n  /**\n   * Test whether the given text ends with HTML whitespace character.\n   *\n   * @param   { string }  text  The string to test.\n   * @returns { boolean }\n   */\n  testTrailingWhitespace (text) {\n    return this.trailingWhitespaceRe.test(text);\n  }\n\n  /**\n   * Test whether the given text contains any non-whitespace characters.\n   *\n   * @param   { string }  text  The string to test.\n   * @returns { boolean }\n   */\n  testContainsWords (text) {\n    return !this.allWhitespaceOrEmptyRe.test(text);\n  }\n\n  /**\n   * Return the number of newlines if there are no words.\n   *\n   * If any word is found then return zero regardless of the actual number of newlines.\n   *\n   * @param   { string }  text  Input string.\n   * @returns { number }\n   */\n  countNewlinesNoWords (text) {\n    this.newlineOrNonWhitespaceRe.lastIndex = 0;\n    let counter = 0;\n    let match;\n    while ((match = this.newlineOrNonWhitespaceRe.exec(text)) !== null) {\n      if (match[0] === '\\n') {\n        counter++;\n      } else {\n        return 0;\n      }\n    }\n    return counter;\n  }\n\n}\n\n/**\n * Helps to build text from inline and block elements.\n *\n * @class BlockTextBuilder\n */\nclass BlockTextBuilder {\n\n  /**\n   * Creates an instance of BlockTextBuilder.\n   *\n   * @param { Options } options HtmlToText options.\n   * @param { import('selderee').Picker<DomNode, TagDefinition> } picker Selectors decision tree picker.\n   * @param { any} [metadata] Optional metadata for HTML document, for use in formatters.\n   */\n  constructor (options, picker, metadata = undefined) {\n    this.options = options;\n    this.picker = picker;\n    this.metadata = metadata;\n    this.whitespaceProcessor = new WhitespaceProcessor(options);\n    /** @type { StackItem } */\n    this._stackItem = new BlockStackItem(options);\n    /** @type { TransformerStackItem } */\n    this._wordTransformer = undefined;\n  }\n\n  /**\n   * Put a word-by-word transform function onto the transformations stack.\n   *\n   * Mainly used for uppercasing. Can be bypassed to add unformatted text such as URLs.\n   *\n   * Word transformations applied before wrapping.\n   *\n   * @param { (str: string) => string } wordTransform Word transformation function.\n   */\n  pushWordTransform (wordTransform) {\n    this._wordTransformer = new TransformerStackItem(this._wordTransformer, wordTransform);\n  }\n\n  /**\n   * Remove a function from the word transformations stack.\n   *\n   * @returns { (str: string) => string } A function that was removed.\n   */\n  popWordTransform () {\n    if (!this._wordTransformer) { return undefined; }\n    const transform = this._wordTransformer.transform;\n    this._wordTransformer = this._wordTransformer.next;\n    return transform;\n  }\n\n  /**\n   * Ignore wordwrap option in followup inline additions and disable automatic wrapping.\n   */\n  startNoWrap () {\n    this._stackItem.isNoWrap = true;\n  }\n\n  /**\n   * Return automatic wrapping to behavior defined by options.\n   */\n  stopNoWrap () {\n    this._stackItem.isNoWrap = false;\n  }\n\n  /** @returns { (str: string) => string } */\n  _getCombinedWordTransformer () {\n    const wt = (this._wordTransformer)\n      ? ((str) => applyTransformer(str, this._wordTransformer))\n      : undefined;\n    const ce = this.options.encodeCharacters;\n    return (wt)\n      ? ((ce) ? (str) => ce(wt(str)) : wt)\n      : ce;\n  }\n\n  _popStackItem () {\n    const item = this._stackItem;\n    this._stackItem = item.next;\n    return item;\n  }\n\n  /**\n   * Add a line break into currently built block.\n   */\n  addLineBreak () {\n    if (!(\n      this._stackItem instanceof BlockStackItem\n      || this._stackItem instanceof ListItemStackItem\n      || this._stackItem instanceof TableCellStackItem\n    )) { return; }\n    if (this._stackItem.isPre) {\n      this._stackItem.rawText += '\\n';\n    } else {\n      this._stackItem.inlineTextBuilder.startNewLine();\n    }\n  }\n\n  /**\n   * Allow to break line in case directly following text will not fit.\n   */\n  addWordBreakOpportunity () {\n    if (\n      this._stackItem instanceof BlockStackItem\n      || this._stackItem instanceof ListItemStackItem\n      || this._stackItem instanceof TableCellStackItem\n    ) {\n      this._stackItem.inlineTextBuilder.wordBreakOpportunity = true;\n    }\n  }\n\n  /**\n   * Add a node inline into the currently built block.\n   *\n   * @param { string } str\n   * Text content of a node to add.\n   *\n   * @param { object } [param1]\n   * Object holding the parameters of the operation.\n   *\n   * @param { boolean } [param1.noWordTransform]\n   * Ignore word transformers if there are any.\n   * Don't encode characters as well.\n   * (Use this for things like URL addresses).\n   */\n  addInline (str, { noWordTransform = false } = {}) {\n    if (!(\n      this._stackItem instanceof BlockStackItem\n      || this._stackItem instanceof ListItemStackItem\n      || this._stackItem instanceof TableCellStackItem\n    )) { return; }\n\n    if (this._stackItem.isPre) {\n      this._stackItem.rawText += str;\n      return;\n    }\n\n    if (\n      str.length === 0 || // empty string\n      (\n        this._stackItem.stashedLineBreaks && // stashed linebreaks make whitespace irrelevant\n        !this.whitespaceProcessor.testContainsWords(str) // no words to add\n      )\n    ) { return; }\n\n    if (this.options.preserveNewlines) {\n      const newlinesNumber = this.whitespaceProcessor.countNewlinesNoWords(str);\n      if (newlinesNumber > 0) {\n        this._stackItem.inlineTextBuilder.startNewLine(newlinesNumber);\n        // keep stashedLineBreaks unchanged\n        return;\n      }\n    }\n\n    if (this._stackItem.stashedLineBreaks) {\n      this._stackItem.inlineTextBuilder.startNewLine(this._stackItem.stashedLineBreaks);\n    }\n    this.whitespaceProcessor.shrinkWrapAdd(\n      str,\n      this._stackItem.inlineTextBuilder,\n      (noWordTransform) ? undefined : this._getCombinedWordTransformer(),\n      this._stackItem.isNoWrap\n    );\n    this._stackItem.stashedLineBreaks = 0; // inline text doesn't introduce line breaks\n  }\n\n  /**\n   * Add a string inline into the currently built block.\n   *\n   * Use this for markup elements that don't have to adhere\n   * to text layout rules.\n   *\n   * @param { string } str Text to add.\n   */\n  addLiteral (str) {\n    if (!(\n      this._stackItem instanceof BlockStackItem\n      || this._stackItem instanceof ListItemStackItem\n      || this._stackItem instanceof TableCellStackItem\n    )) { return; }\n\n    if (str.length === 0) { return; }\n\n    if (this._stackItem.isPre) {\n      this._stackItem.rawText += str;\n      return;\n    }\n\n    if (this._stackItem.stashedLineBreaks) {\n      this._stackItem.inlineTextBuilder.startNewLine(this._stackItem.stashedLineBreaks);\n    }\n    this.whitespaceProcessor.addLiteral(\n      str,\n      this._stackItem.inlineTextBuilder,\n      this._stackItem.isNoWrap\n    );\n    this._stackItem.stashedLineBreaks = 0;\n  }\n\n  /**\n   * Start building a new block.\n   *\n   * @param { object } [param0]\n   * Object holding the parameters of the block.\n   *\n   * @param { number } [param0.leadingLineBreaks]\n   * This block should have at least this number of line breaks to separate it from any preceding block.\n   *\n   * @param { number }  [param0.reservedLineLength]\n   * Reserve this number of characters on each line for block markup.\n   *\n   * @param { boolean } [param0.isPre]\n   * Should HTML whitespace be preserved inside this block.\n   */\n  openBlock ({ leadingLineBreaks = 1, reservedLineLength = 0, isPre = false } = {}) {\n    const maxLineLength = Math.max(20, this._stackItem.inlineTextBuilder.maxLineLength - reservedLineLength);\n    this._stackItem = new BlockStackItem(\n      this.options,\n      this._stackItem,\n      leadingLineBreaks,\n      maxLineLength\n    );\n    if (isPre) { this._stackItem.isPre = true; }\n  }\n\n  /**\n   * Finalize currently built block, add it's content to the parent block.\n   *\n   * @param { object } [param0]\n   * Object holding the parameters of the block.\n   *\n   * @param { number } [param0.trailingLineBreaks]\n   * This block should have at least this number of line breaks to separate it from any following block.\n   *\n   * @param { (str: string) => string } [param0.blockTransform]\n   * A function to transform the block text before adding to the parent block.\n   * This happens after word wrap and should be used in combination with reserved line length\n   * in order to keep line lengths correct.\n   * Used for whole block markup.\n   */\n  closeBlock ({ trailingLineBreaks = 1, blockTransform = undefined } = {}) {\n    const block = this._popStackItem();\n    const blockText = (blockTransform) ? blockTransform(getText(block)) : getText(block);\n    addText(this._stackItem, blockText, block.leadingLineBreaks, Math.max(block.stashedLineBreaks, trailingLineBreaks));\n  }\n\n  /**\n   * Start building a new list.\n   *\n   * @param { object } [param0]\n   * Object holding the parameters of the list.\n   *\n   * @param { number } [param0.maxPrefixLength]\n   * Length of the longest list item prefix.\n   * If not supplied or too small then list items won't be aligned properly.\n   *\n   * @param { 'left' | 'right' } [param0.prefixAlign]\n   * Specify how prefixes of different lengths have to be aligned\n   * within a column.\n   *\n   * @param { number } [param0.interRowLineBreaks]\n   * Minimum number of line breaks between list items.\n   *\n   * @param { number } [param0.leadingLineBreaks]\n   * This list should have at least this number of line breaks to separate it from any preceding block.\n   */\n  openList ({ maxPrefixLength = 0, prefixAlign = 'left', interRowLineBreaks = 1, leadingLineBreaks = 2 } = {}) {\n    this._stackItem = new ListStackItem(this.options, this._stackItem, {\n      interRowLineBreaks: interRowLineBreaks,\n      leadingLineBreaks: leadingLineBreaks,\n      maxLineLength: this._stackItem.inlineTextBuilder.maxLineLength,\n      maxPrefixLength: maxPrefixLength,\n      prefixAlign: prefixAlign\n    });\n  }\n\n  /**\n   * Start building a new list item.\n   *\n   * @param {object} param0\n   * Object holding the parameters of the list item.\n   *\n   * @param { string } [param0.prefix]\n   * Prefix for this list item (item number, bullet point, etc).\n   */\n  openListItem ({ prefix = '' } = {}) {\n    if (!(this._stackItem instanceof ListStackItem)) {\n      throw new Error('Can\\'t add a list item to something that is not a list! Check the formatter.');\n    }\n    const list = this._stackItem;\n    const prefixLength = Math.max(prefix.length, list.maxPrefixLength);\n    const maxLineLength = Math.max(20, list.inlineTextBuilder.maxLineLength - prefixLength);\n    this._stackItem = new ListItemStackItem(this.options, list, {\n      prefix: prefix,\n      maxLineLength: maxLineLength,\n      leadingLineBreaks: list.interRowLineBreaks\n    });\n  }\n\n  /**\n   * Finalize currently built list item, add it's content to the parent list.\n   */\n  closeListItem () {\n    const listItem = this._popStackItem();\n    const list = listItem.next;\n\n    const prefixLength = Math.max(listItem.prefix.length, list.maxPrefixLength);\n    const spacing = '\\n' + ' '.repeat(prefixLength);\n    const prefix = (list.prefixAlign === 'right')\n      ? listItem.prefix.padStart(prefixLength)\n      : listItem.prefix.padEnd(prefixLength);\n    const text = prefix + getText(listItem).replace(/\\n/g, spacing);\n\n    addText(\n      list,\n      text,\n      listItem.leadingLineBreaks,\n      Math.max(listItem.stashedLineBreaks, list.interRowLineBreaks)\n    );\n  }\n\n  /**\n   * Finalize currently built list, add it's content to the parent block.\n   *\n   * @param { object } param0\n   * Object holding the parameters of the list.\n   *\n   * @param { number } [param0.trailingLineBreaks]\n   * This list should have at least this number of line breaks to separate it from any following block.\n   */\n  closeList ({ trailingLineBreaks = 2 } = {}) {\n    const list = this._popStackItem();\n    const text = getText(list);\n    if (text) {\n      addText(this._stackItem, text, list.leadingLineBreaks, trailingLineBreaks);\n    }\n  }\n\n  /**\n   * Start building a table.\n   */\n  openTable () {\n    this._stackItem = new TableStackItem(this._stackItem);\n  }\n\n  /**\n   * Start building a table row.\n   */\n  openTableRow () {\n    if (!(this._stackItem instanceof TableStackItem)) {\n      throw new Error('Can\\'t add a table row to something that is not a table! Check the formatter.');\n    }\n    this._stackItem = new TableRowStackItem(this._stackItem);\n  }\n\n  /**\n   * Start building a table cell.\n   *\n   * @param { object } [param0]\n   * Object holding the parameters of the cell.\n   *\n   * @param { number } [param0.maxColumnWidth]\n   * Wrap cell content to this width. Fall back to global wordwrap value if undefined.\n   */\n  openTableCell ({ maxColumnWidth = undefined } = {}) {\n    if (!(this._stackItem instanceof TableRowStackItem)) {\n      throw new Error('Can\\'t add a table cell to something that is not a table row! Check the formatter.');\n    }\n    this._stackItem = new TableCellStackItem(this.options, this._stackItem, maxColumnWidth);\n  }\n\n  /**\n   * Finalize currently built table cell and add it to parent table row's cells.\n   *\n   * @param { object } [param0]\n   * Object holding the parameters of the cell.\n   *\n   * @param { number } [param0.colspan] How many columns this cell should occupy.\n   * @param { number } [param0.rowspan] How many rows this cell should occupy.\n   */\n  closeTableCell ({ colspan = 1, rowspan = 1 } = {}) {\n    const cell = this._popStackItem();\n    const text = trimCharacter(getText(cell), '\\n');\n    cell.next.cells.push({ colspan: colspan, rowspan: rowspan, text: text });\n  }\n\n  /**\n   * Finalize currently built table row and add it to parent table's rows.\n   */\n  closeTableRow () {\n    const row = this._popStackItem();\n    row.next.rows.push(row.cells);\n  }\n\n  /**\n   * Finalize currently built table and add the rendered text to the parent block.\n   *\n   * @param { object } param0\n   * Object holding the parameters of the table.\n   *\n   * @param { TablePrinter } param0.tableToString\n   * A function to convert a table of stringified cells into a complete table.\n   *\n   * @param { number } [param0.leadingLineBreaks]\n   * This table should have at least this number of line breaks to separate if from any preceding block.\n   *\n   * @param { number } [param0.trailingLineBreaks]\n   * This table should have at least this number of line breaks to separate it from any following block.\n   */\n  closeTable ({ tableToString, leadingLineBreaks = 2, trailingLineBreaks = 2 }) {\n    const table = this._popStackItem();\n    const output = tableToString(table.rows);\n    if (output) {\n      addText(this._stackItem, output, leadingLineBreaks, trailingLineBreaks);\n    }\n  }\n\n  /**\n   * Return the rendered text content of this builder.\n   *\n   * @returns { string }\n   */\n  toString () {\n    return getText(this._stackItem.getRoot());\n    // There should only be the root item if everything is closed properly.\n  }\n\n}\n\nfunction getText (stackItem) {\n  if (!(\n    stackItem instanceof BlockStackItem\n    || stackItem instanceof ListItemStackItem\n    || stackItem instanceof TableCellStackItem\n  )) {\n    throw new Error('Only blocks, list items and table cells can be requested for text contents.');\n  }\n  return (stackItem.inlineTextBuilder.isEmpty())\n    ? stackItem.rawText\n    : stackItem.rawText + stackItem.inlineTextBuilder.toString();\n}\n\nfunction addText (stackItem, text, leadingLineBreaks, trailingLineBreaks) {\n  if (!(\n    stackItem instanceof BlockStackItem\n    || stackItem instanceof ListItemStackItem\n    || stackItem instanceof TableCellStackItem\n  )) {\n    throw new Error('Only blocks, list items and table cells can contain text.');\n  }\n  const parentText = getText(stackItem);\n  const lineBreaks = Math.max(stackItem.stashedLineBreaks, leadingLineBreaks);\n  stackItem.inlineTextBuilder.clear();\n  if (parentText) {\n    stackItem.rawText = parentText + '\\n'.repeat(lineBreaks) + text;\n  } else {\n    stackItem.rawText = text;\n    stackItem.leadingLineBreaks = lineBreaks;\n  }\n  stackItem.stashedLineBreaks = trailingLineBreaks;\n}\n\n/**\n * @param { string } str A string to transform.\n * @param { TransformerStackItem } transformer A transformer item (with possible continuation).\n * @returns { string }\n */\nfunction applyTransformer (str, transformer) {\n  return ((transformer) ? applyTransformer(transformer.transform(str), transformer.next) : str);\n}\n\n/**\n * Compile selectors into a decision tree,\n * return a function intended for batch processing.\n *\n * @param   { Options } [options = {}]   HtmlToText options (defaults, formatters, user options merged, deduplicated).\n * @returns { (html: string, metadata?: any) => string } Pre-configured converter function.\n * @static\n */\nfunction compile$1 (options = {}) {\n  const selectorsWithoutFormat = options.selectors.filter(s => !s.format);\n  if (selectorsWithoutFormat.length) {\n    throw new Error(\n      'Following selectors have no specified format: ' +\n      selectorsWithoutFormat.map(s => `\\`${s.selector}\\``).join(', ')\n    );\n  }\n  const picker = new DecisionTree(\n    options.selectors.map(s => [s.selector, s])\n  ).build(hp2Builder);\n\n  if (typeof options.encodeCharacters !== 'function') {\n    options.encodeCharacters = makeReplacerFromDict(options.encodeCharacters);\n  }\n\n  const baseSelectorsPicker = new DecisionTree(\n    options.baseElements.selectors.map((s, i) => [s, i + 1])\n  ).build(hp2Builder);\n  function findBaseElements (dom) {\n    return findBases(dom, options, baseSelectorsPicker);\n  }\n\n  const limitedWalk = limitedDepthRecursive(\n    options.limits.maxDepth,\n    recursiveWalk,\n    function (dom, builder) {\n      builder.addInline(options.limits.ellipsis || '');\n    }\n  );\n\n  return function (html, metadata = undefined) {\n    return process(html, metadata, options, picker, findBaseElements, limitedWalk);\n  };\n}\n\n\n/**\n * Convert given HTML according to preprocessed options.\n *\n * @param { string } html HTML content to convert.\n * @param { any } metadata Optional metadata for HTML document, for use in formatters.\n * @param { Options } options HtmlToText options (preprocessed).\n * @param { import('selderee').Picker<DomNode, TagDefinition> } picker\n * Tag definition picker for DOM nodes processing.\n * @param { (dom: DomNode[]) => DomNode[] } findBaseElements\n * Function to extract elements from HTML DOM\n * that will only be present in the output text.\n * @param { RecursiveCallback } walk Recursive callback.\n * @returns { string }\n */\nfunction process (html, metadata, options, picker, findBaseElements, walk) {\n  const maxInputLength = options.limits.maxInputLength;\n  if (maxInputLength && html && html.length > maxInputLength) {\n    console.warn(\n      `Input length ${html.length} is above allowed limit of ${maxInputLength}. Truncating without ellipsis.`\n    );\n    html = html.substring(0, maxInputLength);\n  }\n\n  const document = parseDocument(html, { decodeEntities: options.decodeEntities });\n  const bases = findBaseElements(document.children);\n  const builder = new BlockTextBuilder(options, picker, metadata);\n  walk(bases, builder);\n  return builder.toString();\n}\n\n\nfunction findBases (dom, options, baseSelectorsPicker) {\n  const results = [];\n\n  function recursiveWalk (walk, /** @type { DomNode[] } */ dom) {\n    dom = dom.slice(0, options.limits.maxChildNodes);\n    for (const elem of dom) {\n      if (elem.type !== 'tag') {\n        continue;\n      }\n      const pickedSelectorIndex = baseSelectorsPicker.pick1(elem);\n      if (pickedSelectorIndex > 0) {\n        results.push({ selectorIndex: pickedSelectorIndex, element: elem });\n      } else if (elem.children) {\n        walk(elem.children);\n      }\n      if (results.length >= options.limits.maxBaseElements) {\n        return;\n      }\n    }\n  }\n\n  const limitedWalk = limitedDepthRecursive(\n    options.limits.maxDepth,\n    recursiveWalk\n  );\n  limitedWalk(dom);\n\n  if (options.baseElements.orderBy !== 'occurrence') { // 'selectors'\n    results.sort((a, b) => a.selectorIndex - b.selectorIndex);\n  }\n  return (options.baseElements.returnDomByDefault && results.length === 0)\n    ? dom\n    : results.map(x => x.element);\n}\n\n/**\n * Function to walk through DOM nodes and accumulate their string representations.\n *\n * @param   { RecursiveCallback } walk    Recursive callback.\n * @param   { DomNode[] }         [dom]   Nodes array to process.\n * @param   { BlockTextBuilder }  builder Passed around to accumulate output text.\n * @private\n */\nfunction recursiveWalk (walk, dom, builder) {\n  if (!dom) { return; }\n\n  const options = builder.options;\n\n  const tooManyChildNodes = dom.length > options.limits.maxChildNodes;\n  if (tooManyChildNodes) {\n    dom = dom.slice(0, options.limits.maxChildNodes);\n    dom.push({\n      data: options.limits.ellipsis,\n      type: 'text'\n    });\n  }\n\n  for (const elem of dom) {\n    switch (elem.type) {\n      case 'text': {\n        builder.addInline(elem.data);\n        break;\n      }\n      case 'tag': {\n        const tagDefinition = builder.picker.pick1(elem);\n        const format = options.formatters[tagDefinition.format];\n        format(elem, walk, builder, tagDefinition.options || {});\n        break;\n      }\n    }\n  }\n\n  return;\n}\n\n/**\n * @param { Object<string,string | false> } dict\n * A dictionary where keys are characters to replace\n * and values are replacement strings.\n *\n * First code point from dict keys is used.\n * Compound emojis with ZWJ are not supported (not until Node 16).\n *\n * @returns { ((str: string) => string) | undefined }\n */\nfunction makeReplacerFromDict (dict) {\n  if (!dict || Object.keys(dict).length === 0) {\n    return undefined;\n  }\n  /** @type { [string, string][] } */\n  const entries = Object.entries(dict).filter(([, v]) => v !== false);\n  const regex = new RegExp(\n    entries\n      .map(([c]) => `(${unicodeEscape([...c][0])})`)\n      .join('|'),\n    'g'\n  );\n  const values = entries.map(([, v]) => v);\n  const replacer = (m, ...cgs) => values[cgs.findIndex(cg => cg)];\n  return (str) => str.replace(regex, replacer);\n}\n\n/**\n * Dummy formatter that discards the input and does nothing.\n *\n * @type { FormatCallback }\n */\nfunction formatSkip (elem, walk, builder, formatOptions) {\n  /* do nothing */\n}\n\n/**\n * Insert the given string literal inline instead of a tag.\n *\n * @type { FormatCallback }\n */\nfunction formatInlineString (elem, walk, builder, formatOptions) {\n  builder.addLiteral(formatOptions.string || '');\n}\n\n/**\n * Insert a block with the given string literal instead of a tag.\n *\n * @type { FormatCallback }\n */\nfunction formatBlockString (elem, walk, builder, formatOptions) {\n  builder.openBlock({ leadingLineBreaks: formatOptions.leadingLineBreaks || 2 });\n  builder.addLiteral(formatOptions.string || '');\n  builder.closeBlock({ trailingLineBreaks: formatOptions.trailingLineBreaks || 2 });\n}\n\n/**\n * Process an inline-level element.\n *\n * @type { FormatCallback }\n */\nfunction formatInline (elem, walk, builder, formatOptions) {\n  walk(elem.children, builder);\n}\n\n/**\n * Process a block-level container.\n *\n * @type { FormatCallback }\n */\nfunction formatBlock$1 (elem, walk, builder, formatOptions) {\n  builder.openBlock({ leadingLineBreaks: formatOptions.leadingLineBreaks || 2 });\n  walk(elem.children, builder);\n  builder.closeBlock({ trailingLineBreaks: formatOptions.trailingLineBreaks || 2 });\n}\n\nfunction renderOpenTag (elem) {\n  const attrs = (elem.attribs && elem.attribs.length)\n    ? ' ' + Object.entries(elem.attribs)\n      .map(([k, v]) => ((v === '') ? k : `${k}=${v.replace(/\"/g, '&quot;')}`))\n      .join(' ')\n    : '';\n  return `<${elem.name}${attrs}>`;\n}\n\nfunction renderCloseTag (elem) {\n  return `</${elem.name}>`;\n}\n\n/**\n * Render an element as inline HTML tag, walk through it's children.\n *\n * @type { FormatCallback }\n */\nfunction formatInlineTag (elem, walk, builder, formatOptions) {\n  builder.startNoWrap();\n  builder.addLiteral(renderOpenTag(elem));\n  builder.stopNoWrap();\n  walk(elem.children, builder);\n  builder.startNoWrap();\n  builder.addLiteral(renderCloseTag(elem));\n  builder.stopNoWrap();\n}\n\n/**\n * Render an element as HTML block bag, walk through it's children.\n *\n * @type { FormatCallback }\n */\nfunction formatBlockTag (elem, walk, builder, formatOptions) {\n  builder.openBlock({ leadingLineBreaks: formatOptions.leadingLineBreaks || 2 });\n  builder.startNoWrap();\n  builder.addLiteral(renderOpenTag(elem));\n  builder.stopNoWrap();\n  walk(elem.children, builder);\n  builder.startNoWrap();\n  builder.addLiteral(renderCloseTag(elem));\n  builder.stopNoWrap();\n  builder.closeBlock({ trailingLineBreaks: formatOptions.trailingLineBreaks || 2 });\n}\n\n/**\n * Render an element with all it's children as inline HTML.\n *\n * @type { FormatCallback }\n */\nfunction formatInlineHtml (elem, walk, builder, formatOptions) {\n  builder.startNoWrap();\n  builder.addLiteral(\n    render(elem, { decodeEntities: builder.options.decodeEntities })\n  );\n  builder.stopNoWrap();\n}\n\n/**\n * Render an element with all it's children as HTML block.\n *\n * @type { FormatCallback }\n */\nfunction formatBlockHtml (elem, walk, builder, formatOptions) {\n  builder.openBlock({ leadingLineBreaks: formatOptions.leadingLineBreaks || 2 });\n  builder.startNoWrap();\n  builder.addLiteral(\n    render(elem, { decodeEntities: builder.options.decodeEntities })\n  );\n  builder.stopNoWrap();\n  builder.closeBlock({ trailingLineBreaks: formatOptions.trailingLineBreaks || 2 });\n}\n\n/**\n * Render inline element wrapped with given strings.\n *\n * @type { FormatCallback }\n */\nfunction formatInlineSurround (elem, walk, builder, formatOptions) {\n  builder.addLiteral(formatOptions.prefix || '');\n  walk(elem.children, builder);\n  builder.addLiteral(formatOptions.suffix || '');\n}\n\nvar genericFormatters = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  block: formatBlock$1,\n  blockHtml: formatBlockHtml,\n  blockString: formatBlockString,\n  blockTag: formatBlockTag,\n  inline: formatInline,\n  inlineHtml: formatInlineHtml,\n  inlineString: formatInlineString,\n  inlineSurround: formatInlineSurround,\n  inlineTag: formatInlineTag,\n  skip: formatSkip\n});\n\nfunction getRow (matrix, j) {\n  if (!matrix[j]) { matrix[j] = []; }\n  return matrix[j];\n}\n\nfunction findFirstVacantIndex (row, x = 0) {\n  while (row[x]) { x++; }\n  return x;\n}\n\nfunction transposeInPlace (matrix, maxSize) {\n  for (let i = 0; i < maxSize; i++) {\n    const rowI = getRow(matrix, i);\n    for (let j = 0; j < i; j++) {\n      const rowJ = getRow(matrix, j);\n      if (rowI[j] || rowJ[i]) {\n        const temp = rowI[j];\n        rowI[j] = rowJ[i];\n        rowJ[i] = temp;\n      }\n    }\n  }\n}\n\nfunction putCellIntoLayout (cell, layout, baseRow, baseCol) {\n  for (let r = 0; r < cell.rowspan; r++) {\n    const layoutRow = getRow(layout, baseRow + r);\n    for (let c = 0; c < cell.colspan; c++) {\n      layoutRow[baseCol + c] = cell;\n    }\n  }\n}\n\nfunction getOrInitOffset (offsets, index) {\n  if (offsets[index] === undefined) {\n    offsets[index] = (index === 0) ? 0 : 1 + getOrInitOffset(offsets, index - 1);\n  }\n  return offsets[index];\n}\n\nfunction updateOffset (offsets, base, span, value) {\n  offsets[base + span] = Math.max(\n    getOrInitOffset(offsets, base + span),\n    getOrInitOffset(offsets, base) + value\n  );\n}\n\n/**\n * Render a table into a string.\n * Cells can contain multiline text and span across multiple rows and columns.\n *\n * Modifies cells to add lines array.\n *\n * @param { TablePrinterCell[][] } tableRows Table to render.\n * @param { number } rowSpacing Number of spaces between columns.\n * @param { number } colSpacing Number of empty lines between rows.\n * @returns { string }\n */\nfunction tableToString (tableRows, rowSpacing, colSpacing) {\n  const layout = [];\n  let colNumber = 0;\n  const rowNumber = tableRows.length;\n  const rowOffsets = [0];\n  // Fill the layout table and row offsets row-by-row.\n  for (let j = 0; j < rowNumber; j++) {\n    const layoutRow = getRow(layout, j);\n    const cells = tableRows[j];\n    let x = 0;\n    for (let i = 0; i < cells.length; i++) {\n      const cell = cells[i];\n      x = findFirstVacantIndex(layoutRow, x);\n      putCellIntoLayout(cell, layout, j, x);\n      x += cell.colspan;\n      cell.lines = cell.text.split('\\n');\n      const cellHeight = cell.lines.length;\n      updateOffset(rowOffsets, j, cell.rowspan, cellHeight + rowSpacing);\n    }\n    colNumber = (layoutRow.length > colNumber) ? layoutRow.length : colNumber;\n  }\n\n  transposeInPlace(layout, (rowNumber > colNumber) ? rowNumber : colNumber);\n\n  const outputLines = [];\n  const colOffsets = [0];\n  // Fill column offsets and output lines column-by-column.\n  for (let x = 0; x < colNumber; x++) {\n    let y = 0;\n    let cell;\n    const rowsInThisColumn = Math.min(rowNumber, layout[x].length);\n    while (y < rowsInThisColumn) {\n      cell = layout[x][y];\n      if (cell) {\n        if (!cell.rendered) {\n          let cellWidth = 0;\n          for (let j = 0; j < cell.lines.length; j++) {\n            const line = cell.lines[j];\n            const lineOffset = rowOffsets[y] + j;\n            outputLines[lineOffset] = (outputLines[lineOffset] || '').padEnd(colOffsets[x]) + line;\n            cellWidth = (line.length > cellWidth) ? line.length : cellWidth;\n          }\n          updateOffset(colOffsets, x, cell.colspan, cellWidth + colSpacing);\n          cell.rendered = true;\n        }\n        y += cell.rowspan;\n      } else {\n        const lineOffset = rowOffsets[y];\n        outputLines[lineOffset] = (outputLines[lineOffset] || '');\n        y++;\n      }\n    }\n  }\n\n  return outputLines.join('\\n');\n}\n\n/**\n * Process a line-break.\n *\n * @type { FormatCallback }\n */\nfunction formatLineBreak (elem, walk, builder, formatOptions) {\n  builder.addLineBreak();\n}\n\n/**\n * Process a `wbr` tag (word break opportunity).\n *\n * @type { FormatCallback }\n */\nfunction formatWbr (elem, walk, builder, formatOptions) {\n  builder.addWordBreakOpportunity();\n}\n\n/**\n * Process a horizontal line.\n *\n * @type { FormatCallback }\n */\nfunction formatHorizontalLine (elem, walk, builder, formatOptions) {\n  builder.openBlock({ leadingLineBreaks: formatOptions.leadingLineBreaks || 2 });\n  builder.addInline('-'.repeat(formatOptions.length || builder.options.wordwrap || 40));\n  builder.closeBlock({ trailingLineBreaks: formatOptions.trailingLineBreaks || 2 });\n}\n\n/**\n * Process a paragraph.\n *\n * @type { FormatCallback }\n */\nfunction formatParagraph (elem, walk, builder, formatOptions) {\n  builder.openBlock({ leadingLineBreaks: formatOptions.leadingLineBreaks || 2 });\n  walk(elem.children, builder);\n  builder.closeBlock({ trailingLineBreaks: formatOptions.trailingLineBreaks || 2 });\n}\n\n/**\n * Process a preformatted content.\n *\n * @type { FormatCallback }\n */\nfunction formatPre (elem, walk, builder, formatOptions) {\n  builder.openBlock({\n    isPre: true,\n    leadingLineBreaks: formatOptions.leadingLineBreaks || 2\n  });\n  walk(elem.children, builder);\n  builder.closeBlock({ trailingLineBreaks: formatOptions.trailingLineBreaks || 2 });\n}\n\n/**\n * Process a heading.\n *\n * @type { FormatCallback }\n */\nfunction formatHeading (elem, walk, builder, formatOptions) {\n  builder.openBlock({ leadingLineBreaks: formatOptions.leadingLineBreaks || 2 });\n  if (formatOptions.uppercase !== false) {\n    builder.pushWordTransform(str => str.toUpperCase());\n    walk(elem.children, builder);\n    builder.popWordTransform();\n  } else {\n    walk(elem.children, builder);\n  }\n  builder.closeBlock({ trailingLineBreaks: formatOptions.trailingLineBreaks || 2 });\n}\n\n/**\n * Process a blockquote.\n *\n * @type { FormatCallback }\n */\nfunction formatBlockquote (elem, walk, builder, formatOptions) {\n  builder.openBlock({\n    leadingLineBreaks: formatOptions.leadingLineBreaks || 2,\n    reservedLineLength: 2\n  });\n  walk(elem.children, builder);\n  builder.closeBlock({\n    trailingLineBreaks: formatOptions.trailingLineBreaks || 2,\n    blockTransform: str => ((formatOptions.trimEmptyLines !== false) ? trimCharacter(str, '\\n') : str)\n      .split('\\n')\n      .map(line => '> ' + line)\n      .join('\\n')\n  });\n}\n\nfunction withBrackets (str, brackets) {\n  if (!brackets) { return str; }\n\n  const lbr = (typeof brackets[0] === 'string')\n    ? brackets[0]\n    : '[';\n  const rbr = (typeof brackets[1] === 'string')\n    ? brackets[1]\n    : ']';\n  return lbr + str + rbr;\n}\n\nfunction pathRewrite (path, rewriter, baseUrl, metadata, elem) {\n  const modifiedPath = (typeof rewriter === 'function')\n    ? rewriter(path, metadata, elem)\n    : path;\n  return (modifiedPath[0] === '/' && baseUrl)\n    ? trimCharacterEnd(baseUrl, '/') + modifiedPath\n    : modifiedPath;\n}\n\n/**\n * Process an image.\n *\n * @type { FormatCallback }\n */\nfunction formatImage (elem, walk, builder, formatOptions) {\n  const attribs = elem.attribs || {};\n  const alt = (attribs.alt)\n    ? attribs.alt\n    : '';\n  const src = (!attribs.src)\n    ? ''\n    : pathRewrite(attribs.src, formatOptions.pathRewrite, formatOptions.baseUrl, builder.metadata, elem);\n  const text = (!src)\n    ? alt\n    : (!alt)\n      ? withBrackets(src, formatOptions.linkBrackets)\n      : alt + ' ' + withBrackets(src, formatOptions.linkBrackets);\n\n  builder.addInline(text, { noWordTransform: true });\n}\n\n// a img baseUrl\n// a img pathRewrite\n// a img linkBrackets\n\n// a     ignoreHref: false\n//            ignoreText ?\n// a     noAnchorUrl: true\n//            can be replaced with selector\n// a     hideLinkHrefIfSameAsText: false\n//            how to compare, what to show (text, href, normalized) ?\n// a     mailto protocol removed without options\n\n// a     protocols: mailto, tel, ...\n//            can be matched with selector?\n\n// anchors, protocols - only if no pathRewrite fn is provided\n\n// normalize-url ?\n\n// a\n// a[href^=\"#\"] - format:skip by default\n// a[href^=\"mailto:\"] - ?\n\n/**\n * Process an anchor.\n *\n * @type { FormatCallback }\n */\nfunction formatAnchor (elem, walk, builder, formatOptions) {\n  function getHref () {\n    if (formatOptions.ignoreHref) { return ''; }\n    if (!elem.attribs || !elem.attribs.href) { return ''; }\n    let href = elem.attribs.href.replace(/^mailto:/, '');\n    if (formatOptions.noAnchorUrl && href[0] === '#') { return ''; }\n    href = pathRewrite(href, formatOptions.pathRewrite, formatOptions.baseUrl, builder.metadata, elem);\n    return href;\n  }\n  const href = getHref();\n  if (!href) {\n    walk(elem.children, builder);\n  } else {\n    let text = '';\n    builder.pushWordTransform(\n      str => {\n        if (str) { text += str; }\n        return str;\n      }\n    );\n    walk(elem.children, builder);\n    builder.popWordTransform();\n\n    const hideSameLink = formatOptions.hideLinkHrefIfSameAsText && href === text;\n    if (!hideSameLink) {\n      builder.addInline(\n        (!text)\n          ? href\n          : ' ' + withBrackets(href, formatOptions.linkBrackets),\n        { noWordTransform: true }\n      );\n    }\n  }\n}\n\n/**\n * @param { DomNode }           elem               List items with their prefixes.\n * @param { RecursiveCallback } walk               Recursive callback to process child nodes.\n * @param { BlockTextBuilder }  builder            Passed around to accumulate output text.\n * @param { FormatOptions }     formatOptions      Options specific to a formatter.\n * @param { () => string }      nextPrefixCallback Function that returns increasing index each time it is called.\n */\nfunction formatList (elem, walk, builder, formatOptions, nextPrefixCallback) {\n  const isNestedList = get(elem, ['parent', 'name']) === 'li';\n\n  // With Roman numbers, index length is not as straightforward as with Arabic numbers or letters,\n  // so the dumb length comparison is the most robust way to get the correct value.\n  let maxPrefixLength = 0;\n  const listItems = (elem.children || [])\n    // it might be more accurate to check only for html spaces here, but no significant benefit\n    .filter(child => child.type !== 'text' || !/^\\s*$/.test(child.data))\n    .map(function (child) {\n      if (child.name !== 'li') {\n        return { node: child, prefix: '' };\n      }\n      const prefix = (isNestedList)\n        ? nextPrefixCallback().trimStart()\n        : nextPrefixCallback();\n      if (prefix.length > maxPrefixLength) { maxPrefixLength = prefix.length; }\n      return { node: child, prefix: prefix };\n    });\n  if (!listItems.length) { return; }\n\n  builder.openList({\n    interRowLineBreaks: 1,\n    leadingLineBreaks: isNestedList ? 1 : (formatOptions.leadingLineBreaks || 2),\n    maxPrefixLength: maxPrefixLength,\n    prefixAlign: 'left'\n  });\n\n  for (const { node, prefix } of listItems) {\n    builder.openListItem({ prefix: prefix });\n    walk([node], builder);\n    builder.closeListItem();\n  }\n\n  builder.closeList({ trailingLineBreaks: isNestedList ? 1 : (formatOptions.trailingLineBreaks || 2) });\n}\n\n/**\n * Process an unordered list.\n *\n * @type { FormatCallback }\n */\nfunction formatUnorderedList (elem, walk, builder, formatOptions) {\n  const prefix = formatOptions.itemPrefix || ' * ';\n  return formatList(elem, walk, builder, formatOptions, () => prefix);\n}\n\n/**\n * Process an ordered list.\n *\n * @type { FormatCallback }\n */\nfunction formatOrderedList (elem, walk, builder, formatOptions) {\n  let nextIndex = Number(elem.attribs.start || '1');\n  const indexFunction = getOrderedListIndexFunction(elem.attribs.type);\n  const nextPrefixCallback = () => ' ' + indexFunction(nextIndex++) + '. ';\n  return formatList(elem, walk, builder, formatOptions, nextPrefixCallback);\n}\n\n/**\n * Return a function that can be used to generate index markers of a specified format.\n *\n * @param   { string } [olType='1'] Marker type.\n * @returns { (i: number) => string }\n */\nfunction getOrderedListIndexFunction (olType = '1') {\n  switch (olType) {\n    case 'a': return (i) => numberToLetterSequence(i, 'a');\n    case 'A': return (i) => numberToLetterSequence(i, 'A');\n    case 'i': return (i) => numberToRoman(i).toLowerCase();\n    case 'I': return (i) => numberToRoman(i);\n    case '1':\n    default: return (i) => (i).toString();\n  }\n}\n\n/**\n * Given a list of class and ID selectors (prefixed with '.' and '#'),\n * return them as separate lists of names without prefixes.\n *\n * @param { string[] } selectors Class and ID selectors (`[\".class\", \"#id\"]` etc).\n * @returns { { classes: string[], ids: string[] } }\n */\nfunction splitClassesAndIds (selectors) {\n  const classes = [];\n  const ids = [];\n  for (const selector of selectors) {\n    if (selector.startsWith('.')) {\n      classes.push(selector.substring(1));\n    } else if (selector.startsWith('#')) {\n      ids.push(selector.substring(1));\n    }\n  }\n  return { classes: classes, ids: ids };\n}\n\nfunction isDataTable (attr, tables) {\n  if (tables === true) { return true; }\n  if (!attr) { return false; }\n\n  const { classes, ids } = splitClassesAndIds(tables);\n  const attrClasses = (attr['class'] || '').split(' ');\n  const attrIds = (attr['id'] || '').split(' ');\n\n  return attrClasses.some(x => classes.includes(x)) || attrIds.some(x => ids.includes(x));\n}\n\n/**\n * Process a table (either as a container or as a data table, depending on options).\n *\n * @type { FormatCallback }\n */\nfunction formatTable (elem, walk, builder, formatOptions) {\n  return isDataTable(elem.attribs, builder.options.tables)\n    ? formatDataTable(elem, walk, builder, formatOptions)\n    : formatBlock(elem, walk, builder, formatOptions);\n}\n\nfunction formatBlock (elem, walk, builder, formatOptions) {\n  builder.openBlock({ leadingLineBreaks: formatOptions.leadingLineBreaks });\n  walk(elem.children, builder);\n  builder.closeBlock({ trailingLineBreaks: formatOptions.trailingLineBreaks });\n}\n\n/**\n * Process a data table.\n *\n * @type { FormatCallback }\n */\nfunction formatDataTable (elem, walk, builder, formatOptions) {\n  builder.openTable();\n  elem.children.forEach(walkTable);\n  builder.closeTable({\n    tableToString: (rows) => tableToString(rows, formatOptions.rowSpacing ?? 0, formatOptions.colSpacing ?? 3),\n    leadingLineBreaks: formatOptions.leadingLineBreaks,\n    trailingLineBreaks: formatOptions.trailingLineBreaks\n  });\n\n  function formatCell (cellNode) {\n    const colspan = +get(cellNode, ['attribs', 'colspan']) || 1;\n    const rowspan = +get(cellNode, ['attribs', 'rowspan']) || 1;\n    builder.openTableCell({ maxColumnWidth: formatOptions.maxColumnWidth });\n    walk(cellNode.children, builder);\n    builder.closeTableCell({ colspan: colspan, rowspan: rowspan });\n  }\n\n  function walkTable (elem) {\n    if (elem.type !== 'tag') { return; }\n\n    const formatHeaderCell = (formatOptions.uppercaseHeaderCells !== false)\n      ? (cellNode) => {\n        builder.pushWordTransform(str => str.toUpperCase());\n        formatCell(cellNode);\n        builder.popWordTransform();\n      }\n      : formatCell;\n\n    switch (elem.name) {\n      case 'thead':\n      case 'tbody':\n      case 'tfoot':\n      case 'center':\n        elem.children.forEach(walkTable);\n        return;\n\n      case 'tr': {\n        builder.openTableRow();\n        for (const childOfTr of elem.children) {\n          if (childOfTr.type !== 'tag') { continue; }\n          switch (childOfTr.name) {\n            case 'th': {\n              formatHeaderCell(childOfTr);\n              break;\n            }\n            case 'td': {\n              formatCell(childOfTr);\n              break;\n            }\n              // do nothing\n          }\n        }\n        builder.closeTableRow();\n        break;\n      }\n        // do nothing\n    }\n  }\n}\n\nvar textFormatters = /*#__PURE__*/Object.freeze({\n  __proto__: null,\n  anchor: formatAnchor,\n  blockquote: formatBlockquote,\n  dataTable: formatDataTable,\n  heading: formatHeading,\n  horizontalLine: formatHorizontalLine,\n  image: formatImage,\n  lineBreak: formatLineBreak,\n  orderedList: formatOrderedList,\n  paragraph: formatParagraph,\n  pre: formatPre,\n  table: formatTable,\n  unorderedList: formatUnorderedList,\n  wbr: formatWbr\n});\n\n/**\n * Default options.\n *\n * @constant\n * @type { Options }\n * @default\n * @private\n */\nconst DEFAULT_OPTIONS = {\n  baseElements: {\n    selectors: [ 'body' ],\n    orderBy: 'selectors', // 'selectors' | 'occurrence'\n    returnDomByDefault: true\n  },\n  decodeEntities: true,\n  encodeCharacters: {},\n  formatters: {},\n  limits: {\n    ellipsis: '...',\n    maxBaseElements: undefined,\n    maxChildNodes: undefined,\n    maxDepth: undefined,\n    maxInputLength: (1 << 24) // 16_777_216\n  },\n  longWordSplit: {\n    forceWrapOnLimit: false,\n    wrapCharacters: []\n  },\n  preserveNewlines: false,\n  selectors: [\n    { selector: '*', format: 'inline' },\n    {\n      selector: 'a',\n      format: 'anchor',\n      options: {\n        baseUrl: null,\n        hideLinkHrefIfSameAsText: false,\n        ignoreHref: false,\n        linkBrackets: ['[', ']'],\n        noAnchorUrl: true\n      }\n    },\n    { selector: 'article', format: 'block', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } },\n    { selector: 'aside', format: 'block', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } },\n    {\n      selector: 'blockquote',\n      format: 'blockquote',\n      options: { leadingLineBreaks: 2, trailingLineBreaks: 2, trimEmptyLines: true }\n    },\n    { selector: 'br', format: 'lineBreak' },\n    { selector: 'div', format: 'block', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } },\n    { selector: 'footer', format: 'block', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } },\n    { selector: 'form', format: 'block', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } },\n    { selector: 'h1', format: 'heading', options: { leadingLineBreaks: 3, trailingLineBreaks: 2, uppercase: true } },\n    { selector: 'h2', format: 'heading', options: { leadingLineBreaks: 3, trailingLineBreaks: 2, uppercase: true } },\n    { selector: 'h3', format: 'heading', options: { leadingLineBreaks: 3, trailingLineBreaks: 2, uppercase: true } },\n    { selector: 'h4', format: 'heading', options: { leadingLineBreaks: 2, trailingLineBreaks: 2, uppercase: true } },\n    { selector: 'h5', format: 'heading', options: { leadingLineBreaks: 2, trailingLineBreaks: 2, uppercase: true } },\n    { selector: 'h6', format: 'heading', options: { leadingLineBreaks: 2, trailingLineBreaks: 2, uppercase: true } },\n    { selector: 'header', format: 'block', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } },\n    {\n      selector: 'hr',\n      format: 'horizontalLine',\n      options: { leadingLineBreaks: 2, length: undefined, trailingLineBreaks: 2 }\n    },\n    {\n      selector: 'img',\n      format: 'image',\n      options: { baseUrl: null, linkBrackets: ['[', ']'] }\n    },\n    { selector: 'main', format: 'block', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } },\n    { selector: 'nav', format: 'block', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } },\n    {\n      selector: 'ol',\n      format: 'orderedList',\n      options: { leadingLineBreaks: 2, trailingLineBreaks: 2 }\n    },\n    { selector: 'p', format: 'paragraph', options: { leadingLineBreaks: 2, trailingLineBreaks: 2 } },\n    { selector: 'pre', format: 'pre', options: { leadingLineBreaks: 2, trailingLineBreaks: 2 } },\n    { selector: 'section', format: 'block', options: { leadingLineBreaks: 1, trailingLineBreaks: 1 } },\n    {\n      selector: 'table',\n      format: 'table',\n      options: {\n        colSpacing: 3,\n        leadingLineBreaks: 2,\n        maxColumnWidth: 60,\n        rowSpacing: 0,\n        trailingLineBreaks: 2,\n        uppercaseHeaderCells: true\n      }\n    },\n    {\n      selector: 'ul',\n      format: 'unorderedList',\n      options: { itemPrefix: ' * ', leadingLineBreaks: 2, trailingLineBreaks: 2 }\n    },\n    { selector: 'wbr', format: 'wbr' },\n  ],\n  tables: [], // deprecated\n  whitespaceCharacters: ' \\t\\r\\n\\f\\u200b',\n  wordwrap: 80\n};\n\nconst concatMerge = (acc, src, options) => [...acc, ...src];\nconst overwriteMerge = (acc, src, options) => [...src];\nconst selectorsMerge = (acc, src, options) => (\n  (acc.some(s => typeof s === 'object'))\n    ? concatMerge(acc, src) // selectors\n    : overwriteMerge(acc, src) // baseElements.selectors\n);\n\n/**\n * Preprocess options, compile selectors into a decision tree,\n * return a function intended for batch processing.\n *\n * @param   { Options } [options = {}]   HtmlToText options.\n * @returns { (html: string, metadata?: any) => string } Pre-configured converter function.\n * @static\n */\nfunction compile (options = {}) {\n  options = merge(\n    DEFAULT_OPTIONS,\n    options,\n    {\n      arrayMerge: overwriteMerge,\n      customMerge: (key) => ((key === 'selectors') ? selectorsMerge : undefined)\n    }\n  );\n  options.formatters = Object.assign({}, genericFormatters, textFormatters, options.formatters);\n  options.selectors = mergeDuplicatesPreferLast(options.selectors, (s => s.selector));\n\n  handleDeprecatedOptions(options);\n\n  return compile$1(options);\n}\n\n/**\n * Convert given HTML content to plain text string.\n *\n * @param   { string }  html           HTML content to convert.\n * @param   { Options } [options = {}] HtmlToText options.\n * @param   { any }     [metadata]     Optional metadata for HTML document, for use in formatters.\n * @returns { string }                 Plain text string.\n * @static\n *\n * @example\n * const { convert } = require('html-to-text');\n * const text = convert('<h1>Hello World</h1>', {\n *   wordwrap: 130\n * });\n * console.log(text); // HELLO WORLD\n */\nfunction convert (html, options = {}, metadata = undefined) {\n  return compile(options)(html, metadata);\n}\n\n/**\n * Map previously existing and now deprecated options to the new options layout.\n * This is a subject for cleanup in major releases.\n *\n * @param { Options } options HtmlToText options.\n */\nfunction handleDeprecatedOptions (options) {\n  if (options.tags) {\n    const tagDefinitions = Object.entries(options.tags).map(\n      ([selector, definition]) => ({ ...definition, selector: selector || '*' })\n    );\n    options.selectors.push(...tagDefinitions);\n    options.selectors = mergeDuplicatesPreferLast(options.selectors, (s => s.selector));\n  }\n\n  function set (obj, path, value) {\n    const valueKey = path.pop();\n    for (const key of path) {\n      let nested = obj[key];\n      if (!nested) {\n        nested = {};\n        obj[key] = nested;\n      }\n      obj = nested;\n    }\n    obj[valueKey] = value;\n  }\n\n  if (options['baseElement']) {\n    const baseElement = options['baseElement'];\n    set(\n      options,\n      ['baseElements', 'selectors'],\n      (Array.isArray(baseElement) ? baseElement : [baseElement])\n    );\n  }\n  if (options['returnDomByDefault'] !== undefined) {\n    set(options, ['baseElements', 'returnDomByDefault'], options['returnDomByDefault']);\n  }\n\n  for (const definition of options.selectors) {\n    if (definition.format === 'anchor' && get(definition, ['options', 'noLinkBrackets'])) {\n      set(definition, ['options', 'linkBrackets'], false);\n    }\n  }\n}\n\nexport { compile, convert, convert as htmlToText };\n","import { Parser } from \"./Parser.js\";\nexport { Parser } from \"./Parser.js\";\nimport { DomHandler, } from \"domhandler\";\nexport { DomHandler, \n// Old name for DomHandler\nDomHandler as DefaultHandler, } from \"domhandler\";\n// Helper methods\n/**\n * Parses the data, returns the resulting document.\n *\n * @param data The data that should be parsed.\n * @param options Optional options for the parser and DOM builder.\n */\nexport function parseDocument(data, options) {\n    const handler = new DomHandler(undefined, options);\n    new Parser(handler, options).end(data);\n    return handler.root;\n}\n/**\n * Parses data, returns an array of the root nodes.\n *\n * Note that the root nodes still have a `Document` node as their parent.\n * Use `parseDocument` to get the `Document` node instead.\n *\n * @param data The data that should be parsed.\n * @param options Optional options for the parser and DOM builder.\n * @deprecated Use `parseDocument` instead.\n */\nexport function parseDOM(data, options) {\n    return parseDocument(data, options).children;\n}\n/**\n * Creates a parser instance, with an attached DOM handler.\n *\n * @param callback A callback that will be called once parsing has been completed.\n * @param options Optional options for the parser and DOM builder.\n * @param elementCallback An optional callback that will be called every time a tag has been completed inside of the DOM.\n */\nexport function createDomStream(callback, options, elementCallback) {\n    const handler = new DomHandler(callback, options, elementCallback);\n    return new Parser(handler, options);\n}\nexport { default as Tokenizer, } from \"./Tokenizer.js\";\n/*\n * All of the following exports exist for backwards-compatibility.\n * They should probably be removed eventually.\n */\nexport * as ElementType from \"domelementtype\";\nimport { getFeed } from \"domutils\";\nexport { getFeed } from \"domutils\";\nconst parseFeedDefaultOptions = { xmlMode: true };\n/**\n * Parse a feed.\n *\n * @param feed The feed that should be parsed, as a string.\n * @param options Optionally, options for parsing. When using this, you should set `xmlMode` to `true`.\n */\nexport function parseFeed(feed, options = parseFeedDefaultOptions) {\n    return getFeed(parseDOM(feed, options));\n}\nexport * as DomUtils from \"domutils\";\n//# sourceMappingURL=index.js.map","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { htmlToText } from 'html-to-text';\nimport { singleton, inject } from 'tsyringe';\nlet EmailContentExtractor = class EmailContentExtractor {\n    constructor(logger) {\n        this.logger = logger;\n    }\n    findEmailParts(parts) {\n        let textBody = '';\n        let htmlBody = '';\n        const attachments = [];\n        this.logger.debug('Parsing email parts...');\n        function recurse(part) {\n            if (hasNestedParts(part)) {\n                part.parts.forEach(recurse);\n                return;\n            }\n            if (isPlainTextBody(part)) {\n                textBody = part.body;\n            }\n            else if (isHtmlBody(part)) {\n                htmlBody = part.body;\n            }\n            else if (isAttachment(part) && part.name) {\n                attachments.push({\n                    name: part.name,\n                    mimeType: part.contentType,\n                    size: part.size || 0,\n                });\n            }\n        }\n        parts.forEach(recurse);\n        const finalBody = htmlBody ? convertHtmlToText(htmlBody) : textBody;\n        return { body: finalBody, attachments };\n    }\n    buildPrompt(structuredData, customTags, promptTemplate) {\n        const headersJSON = JSON.stringify(structuredData.headers, null, 2);\n        const attachmentsJSON = JSON.stringify(structuredData.attachments, null, 2);\n        const customInstructions = customTags\n            .map((tag) => `- ${tag.key}: (boolean) ${tag.prompt}`)\n            .join('\\n');\n        const fullInstructions = `${promptTemplate}\\n${customInstructions}`;\n        const finalPrompt = fullInstructions\n            .replace('{headers}', headersJSON)\n            .replace('{body}', structuredData.body)\n            .replace('{attachments}', attachmentsJSON);\n        return {\n            prompt: finalPrompt,\n            allTagsDescription: customInstructions,\n        };\n    }\n    truncateText(text, maxLength) {\n        if (text.length <= maxLength) {\n            return text;\n        }\n        return text.substring(0, maxLength);\n    }\n};\nEmailContentExtractor = __decorate([\n    singleton(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], EmailContentExtractor);\nexport { EmailContentExtractor };\nfunction hasNestedParts(part) {\n    return part.parts !== undefined && part.parts.length > 0;\n}\nfunction isPlainTextBody(part) {\n    return part.contentType === 'text/plain' && !part.isAttachment;\n}\nfunction isHtmlBody(part) {\n    return part.contentType === 'text/html' && !part.isAttachment;\n}\nfunction isAttachment(part) {\n    return part.isAttachment || part.name !== undefined;\n}\nfunction convertHtmlToText(html) {\n    return htmlToText(html, { wordwrap: 130 });\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { singleton, inject } from 'tsyringe';\nlet TagService = class TagService {\n    constructor(logger, tagManager) {\n        this.logger = logger;\n        this.tagManager = tagManager;\n        this.tagKeyPrefix = '_ma_';\n        this.tagNamePrefix = 'A:';\n        this.hardcodedTags = {\n            is_scam: { key: 'is_scam', name: 'Scam Alert', color: '#FF5722' },\n            spf_fail: { key: 'spf_fail', name: 'SPF Fail', color: '#E91E63' },\n            dkim_fail: { key: 'dkim_fail', name: 'DKIM Fail', color: '#E91E63' },\n            tagged: { key: 'tagged', name: 'Tagged', color: '#4f4f4f' },\n            email_ai_analyzed: { key: 'email_ai_analyzed', name: 'AI Analyzed', color: '#9E9E9E' },\n        };\n        this.defaultCustomTags = [\n            {\n                key: 'is_advertise',\n                name: 'Advertisement',\n                color: '#FFC107',\n                prompt: 'check if email is advertising something and contains an offer or someone is asking for contact to show the offer',\n            },\n            {\n                key: 'is_business_approach',\n                name: 'Business Ad',\n                color: '#2196F3',\n                prompt: 'check if email is a cold marketing/sales/business approach (or next message in the approach process where sender reply to self to refresh the approach in the mailbox). Consider typical sales and lead generation scenarios.',\n            },\n            {\n                key: 'is_personal',\n                name: 'Personal',\n                color: '#4CAF50',\n                prompt: 'check if this is non-sales scenario approach from someone who likes to contact in a non-business context.',\n            },\n            {\n                key: 'is_business',\n                name: 'Business',\n                color: '#af4c87',\n                prompt: 'check if this looks like work related email',\n            },\n            {\n                key: 'is_service_important',\n                name: 'Service Important',\n                color: '#F44336',\n                prompt: 'check if email contains important information related to already subscribed service (if this is subscription offer - ignore it): bill, password reset, login link, 2fa code, expiration notice. Consider common services like electricity, bank account, netflix, or similar subscription service.',\n            },\n            {\n                key: 'is_service_not_important',\n                name: 'Service Info',\n                color: '#9E9E9E',\n                prompt: 'check if email contains non critical information from already subscribed service (if this is subscription offer - ignore it) - like: daily posts update from linkedin, AWS invitation for conference, cross sale, tips how to use product, surveys, new offers',\n            },\n            {\n                key: 'is_bill',\n                name: 'Bill',\n                color: '#f4b136',\n                prompt: 'check if email contains bill or invoice information.',\n            },\n            {\n                key: 'has_calendar_invite',\n                name: 'Appointment',\n                color: '#7F07f2',\n                prompt: 'check if the mail has invitation to the call or meeting (with calendar appointment attached)',\n            },\n        ];\n    }\n    async ensureTagsExist() {\n        try {\n            const tagsToEnsure = await this.getAllTagConfigs();\n            const allTags = await this.tagManager.getAllTags();\n            if (!this.isThunderbirdTagArray(allTags)) {\n                this.logger.error('Invalid tag list received from Thunderbird', { allTags });\n                return;\n            }\n            for (const tagToCreate of tagsToEnsure) {\n                const alreadyExists = this.checkTagExists(allTags, tagToCreate);\n                if (alreadyExists) {\n                    this.logger.debug(`Tag already exists`, { key: tagToCreate.key, name: tagToCreate.name });\n                    continue;\n                }\n                await this.tagManager.createTag(this.tagNamePrefix + tagToCreate.name, tagToCreate.color);\n                this.logger.info(`Created new tag`, { name: tagToCreate.name });\n            }\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Error during tag creation', { error: errorMessage });\n        }\n    }\n    checkTagExists(existingTags, tagToCheck) {\n        return existingTags.some((existingTag) => existingTag.key === this.tagKeyPrefix + tagToCheck.key ||\n            existingTag.tag === this.tagNamePrefix + tagToCheck.name);\n    }\n    async getAllTagConfigs() {\n        try {\n            const storageResult = this.tagManager.getCustomTags\n                ? await this.tagManager.getCustomTags(this.defaultCustomTags)\n                : { customTags: this.defaultCustomTags };\n            if (!this.isValidStorageCustomTags(storageResult)) {\n                this.logger.error('Invalid format for custom tags', { storageResult });\n                return Object.values(this.hardcodedTags);\n            }\n            const { customTags = this.defaultCustomTags } = storageResult;\n            const hardcoded = Object.values(this.hardcodedTags);\n            const result = [...hardcoded];\n            for (let i = 0; i < (customTags?.length ?? 0); i++) {\n                const tag = customTags?.[i];\n                if (tag) {\n                    result.push(tag);\n                }\n            }\n            return result;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Error getting tag configurations', { error: errorMessage });\n            return Object.values(this.hardcodedTags);\n        }\n    }\n    findThunderbirdTag(existingTags, tagConfig) {\n        return existingTags.find((existingTag) => existingTag.key === this.tagKeyPrefix + tagConfig.key ||\n            existingTag.tag === this.tagNamePrefix + tagConfig.name);\n    }\n    isThunderbirdTag(value) {\n        if (typeof value !== 'object' || value === null) {\n            return false;\n        }\n        const tag = value;\n        return (typeof tag.key === 'string' &&\n            tag.key.length > 0 &&\n            typeof tag.tag === 'string' &&\n            tag.tag.length > 0 &&\n            typeof tag.color === 'string' &&\n            /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(tag.color) &&\n            typeof tag.ordinal === 'string');\n    }\n    isThunderbirdTagArray(value) {\n        if (!Array.isArray(value)) {\n            return false;\n        }\n        return value.every((item) => this.isThunderbirdTag(item));\n    }\n    isValidStorageCustomTags(value) {\n        if (typeof value !== 'object' || value === null) {\n            return false;\n        }\n        const storage = value;\n        if (storage.customTags !== undefined) {\n            return Array.isArray(storage.customTags);\n        }\n        return true;\n    }\n};\nTagService = __decorate([\n    singleton(),\n    __param(0, inject('ILogger')),\n    __param(1, inject('ITagManager')),\n    __metadata(\"design:paramtypes\", [Object, Object])\n], TagService);\nexport { TagService };\n","export var Provider;\n(function (Provider) {\n    Provider[\"OLLAMA\"] = \"ollama\";\n    Provider[\"OPENAI\"] = \"openai\";\n    Provider[\"GEMINI\"] = \"gemini\";\n    Provider[\"CLAUDE\"] = \"claude\";\n    Provider[\"MISTRAL\"] = \"mistral\";\n    Provider[\"DEEPSEEK\"] = \"deepseek\";\n    Provider[\"ZAI_PAAS\"] = \"zai-paas\";\n    Provider[\"ZAI_CODING\"] = \"zai-coding\";\n})(Provider || (Provider = {}));\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { singleton, inject } from 'tsyringe';\nimport { Provider, } from '@/shared/types/ProviderTypes';\n// ============================================================================\n// AppConfigService Implementation\n// ============================================================================\n/**\n * Configuration service with caching.\n *\n * Provides access to application configuration with in-memory caching\n * to improve performance. Falls back to defaults if ConfigRepository is unavailable.\n */\nlet AppConfigService = class AppConfigService {\n    // ==========================================================================\n    // Constructor\n    // ==========================================================================\n    constructor(logger, configRepository) {\n        /** In-memory cache for configurations */\n        this.cache = new Map();\n        /** Default cache TTL: 5 minutes */\n        this.DEFAULT_CACHE_TTL = 5 * 60 * 1000;\n        // Hardcoded tags (system tags that cannot be modified)\n        this.hardcodedTags = {\n            is_scam: { key: 'is_scam', name: 'Scam Alert', color: '#FF5722' },\n            spf_fail: { key: 'spf_fail', name: 'SPF Fail', color: '#E91E63' },\n            dkim_fail: { key: 'dkim_fail', name: 'DKIM Fail', color: '#E91E63' },\n            tagged: { key: 'tagged', name: 'Tagged', color: '#4f4f4f' },\n            email_ai_analyzed: { key: 'email_ai_analyzed', name: 'AI Analyzed', color: '#9E9E9E' },\n        };\n        this.defaultCustomTags = [\n            {\n                key: 'is_advertise',\n                name: 'Advertisement',\n                color: '#FFC107',\n                prompt: 'check if email is advertising something and contains an offer or someone is asking for contact to show the offer',\n            },\n            {\n                key: 'is_business_approach',\n                name: 'Business Ad',\n                color: '#2196F3',\n                prompt: 'check if email is a cold marketing/sales/business approach (or next message in the approach process where sender reply to self to refresh the approach in the mailbox). Consider typical sales and lead generation scenarios.',\n            },\n            {\n                key: 'is_personal',\n                name: 'Personal',\n                color: '#4CAF50',\n                prompt: 'check if this is non-sales scenario approach from someone who likes to contact in a non-business context.',\n            },\n            {\n                key: 'is_business',\n                name: 'Business',\n                color: '#af4c87',\n                prompt: 'check if this looks like work related email',\n            },\n            {\n                key: 'is_service_important',\n                name: 'Service Important',\n                color: '#F44336',\n                prompt: 'check if email contains important information related to already subscribed service (if this is subscription offer - ignore it): bill, password reset, login link, 2fa code, expiration notice. Consider common services like electricity, bank account, netflix, or similar subscription service.',\n            },\n            {\n                key: 'is_service_not_important',\n                name: 'Service Info',\n                color: '#9E9E9E',\n                prompt: 'check if email contains non critical information from already subscribed service (if this is subscription offer - ignore it) - like: daily posts update from linkedin, AWS invitation for conference, cross sale, tips how to use product, surveys, new offers',\n            },\n            {\n                key: 'is_bill',\n                name: 'Bill',\n                color: '#f4b136',\n                prompt: 'check if email contains bill or invoice information.',\n            },\n            {\n                key: 'has_calendar_invite',\n                name: 'Appointment',\n                color: '#7F07f2',\n                prompt: 'check if the mail has invitation to the call or meeting (with calendar appointment attached)',\n            },\n        ];\n        this.defaults = {\n            provider: Provider.OLLAMA,\n            ollamaApiUrl: 'http://localhost:11434/api/generate',\n            ollamaModel: 'gemma3:27b',\n            openaiApiKey: '',\n            geminiApiKey: '',\n            claudeApiKey: '',\n            mistralApiKey: '',\n            deepseekApiKey: '',\n            zaiPaasApiKey: '',\n            zaiPaasModel: 'glm-4.5',\n            zaiCodingApiKey: '',\n            zaiCodingModel: 'glm-4.7',\n            customTags: this.defaultCustomTags,\n            enableNotifications: true,\n            enableLogging: true,\n            model: undefined,\n            modelConcurrencyLimits: undefined,\n        };\n        this.logger = logger;\n        this.configRepository = configRepository;\n        this.logger.debug('AppConfigService initialized with ConfigRepository');\n    }\n    // ==========================================================================\n    // Public Methods - ConfigRepository Integration\n    // ==========================================================================\n    /**\n     * Gets application configuration from ConfigRepository with caching.\n     *\n     * @returns Promise resolving to application config\n     */\n    async getAppConfig() {\n        const cacheKey = 'appConfig';\n        // Check cache\n        const cached = this.getFromCache(cacheKey);\n        if (cached) {\n            this.logger.debug('AppConfig cache hit', { cacheKey });\n            return cached;\n        }\n        // Load from repository\n        try {\n            const config = await this.configRepository.getAppConfig();\n            // Cache the result\n            this.setInCache(cacheKey, config, this.DEFAULT_CACHE_TTL);\n            return config;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.warn('Failed to load app config from repository, using fallback', {\n                error: errorMessage,\n            });\n            // Return fallback config\n            return {\n                defaultProvider: this.defaults.provider,\n                enableNotifications: this.defaults.enableNotifications,\n                enableLogging: this.defaults.enableLogging,\n                modelConcurrencyLimits: this.defaults.modelConcurrencyLimits,\n            };\n        }\n    }\n    /**\n     * Gets provider settings from ConfigRepository with caching.\n     *\n     * @param providerId - Provider identifier\n     * @returns Promise resolving to provider settings\n     */\n    async getProviderSettings(providerId) {\n        const cacheKey = `providerSettings:${providerId}`;\n        // Check cache\n        const cached = this.getFromCache(cacheKey);\n        if (cached) {\n            this.logger.debug('ProviderSettings cache hit', { cacheKey, providerId });\n            return cached;\n        }\n        // Load from repository\n        try {\n            const settings = await this.configRepository.getProviderSettings(providerId);\n            // Cache the result\n            this.setInCache(cacheKey, settings, this.DEFAULT_CACHE_TTL);\n            return settings;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.warn('Failed to load provider settings from repository, using fallback', {\n                providerId,\n                error: errorMessage,\n            });\n            // Return fallback settings based on provider\n            return this.getFallbackProviderSettings(providerId);\n        }\n    }\n    /**\n     * Gets custom tags from ConfigRepository with caching.\n     *\n     * @returns Promise resolving to custom tags array\n     */\n    async getCustomTags() {\n        const cacheKey = 'customTags';\n        // Check cache\n        const cached = this.getFromCache(cacheKey);\n        if (cached) {\n            this.logger.debug('CustomTags cache hit', { cacheKey });\n            return cached;\n        }\n        // Load from repository\n        try {\n            const tags = await this.configRepository.getCustomTags();\n            // Cache the result\n            this.setInCache(cacheKey, tags, this.DEFAULT_CACHE_TTL);\n            return tags;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.warn('Failed to load custom tags from repository, using defaults', {\n                error: errorMessage,\n            });\n            // Return default custom tags\n            return this.defaultCustomTags.map((tag) => ({\n                key: tag.key,\n                name: tag.name,\n                color: tag.color,\n                prompt: tag.prompt,\n            }));\n        }\n    }\n    /**\n     * Saves provider settings to ConfigRepository and invalidates cache.\n     *\n     * @param providerId - Provider identifier\n     * @param settings - Provider settings to save\n     */\n    async setProviderSettings(providerId, settings) {\n        try {\n            await this.configRepository.setProviderSettings(providerId, settings);\n            // Invalidate cache\n            this.invalidateCache(`providerSettings:${providerId}`);\n            this.logger.info('Provider settings saved successfully', { providerId });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to save provider settings', { providerId, error: errorMessage });\n            throw new Error(`Failed to save provider settings for ${providerId}: ${errorMessage}`);\n        }\n    }\n    /**\n     * Saves custom tags to ConfigRepository and invalidates cache.\n     *\n     * @param tags - Custom tags to save\n     */\n    async setCustomTags(tags) {\n        try {\n            await this.configRepository.setCustomTags(tags);\n            // Invalidate cache\n            this.invalidateCache('customTags');\n            this.logger.info('Custom tags saved successfully', { count: tags.length });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to save custom tags', { error: errorMessage });\n            throw new Error(`Failed to save custom tags: ${errorMessage}`);\n        }\n    }\n    /**\n     * Saves application configuration to ConfigRepository and invalidates cache.\n     *\n     * @param config - Application config to save\n     */\n    async setAppConfig(config) {\n        try {\n            await this.configRepository.setAppConfig(config);\n            // Invalidate cache\n            this.invalidateCache('appConfig');\n            this.logger.info('App config saved successfully');\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to save app config', { error: errorMessage });\n            throw new Error(`Failed to save app config: ${errorMessage}`);\n        }\n    }\n    /**\n     * Clears all configuration cache entries.\n     */\n    clearCache() {\n        this.cache.clear();\n        this.logger.debug('AppConfigService cache cleared');\n    }\n    // ==========================================================================\n    // Public Methods - Defaults and Helpers\n    // ==========================================================================\n    getDefaults() {\n        return this.defaults;\n    }\n    getHardcodedTags() {\n        return this.hardcodedTags;\n    }\n    getDefaultCustomTags() {\n        return this.defaultCustomTags;\n    }\n    getPromptTemplate() {\n        const PROMPT_INSTRUCTIONS = [\n            'Hi, I like you to check and score an email based on the following structured data. Please respond as a single, clean JSON object with the specified properties.',\n            '',\n            '### Email Headers',\n            '```json',\n            '{headers}',\n            '```',\n            '',\n            '### Email Body (converted from HTML to plain text)',\n            '```text',\n            '{body}',\n            '```',\n            '',\n            '### Attachments',\n            '```json',\n            '{attachments}',\n            '```',\n            '',\n            '### INSTRUCTIONS',\n            'Based on the data above, please populate the following JSON object:',\n            '- tags: (array of strings) list of tag keys where the corresponding check is true (e.g., [\"is_advertise\", \"is_business\"])',\n            '- confidence: (number between 0.0 and 1.0) your overall confidence in the analysis',\n            '- reasoning: (string) brief explanation of your analysis in one or two sentences',\n        ];\n        return PROMPT_INSTRUCTIONS.join('\\n');\n    }\n    isValidProvider(provider) {\n        return Object.values(Provider).includes(provider);\n    }\n    isHardcodedTag(tag) {\n        return Object.keys(this.hardcodedTags).includes(tag.key);\n    }\n    isValidColor(color) {\n        return /^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(color);\n    }\n    getConcurrencyLimit(config, provider, model) {\n        const PROVIDER_DEFAULT_CONCURRENCY = {\n            [Provider.OLLAMA]: 5,\n            [Provider.OPENAI]: 10,\n            [Provider.GEMINI]: 5,\n            [Provider.CLAUDE]: 5,\n            [Provider.MISTRAL]: 10,\n            [Provider.DEEPSEEK]: 10,\n            [Provider.ZAI_PAAS]: 5,\n            [Provider.ZAI_CODING]: 5,\n        };\n        if (!config.modelConcurrencyLimits) {\n            return PROVIDER_DEFAULT_CONCURRENCY[provider] ?? 5;\n        }\n        const modelConfig = config.modelConcurrencyLimits.find((c) => c.provider === provider && c.model === model);\n        if (modelConfig && modelConfig.concurrency > 0) {\n            return modelConfig.concurrency;\n        }\n        const providerConfig = config.modelConcurrencyLimits.find((c) => c.provider === provider && !c.model);\n        if (providerConfig && providerConfig.concurrency > 0) {\n            return providerConfig.concurrency;\n        }\n        return PROVIDER_DEFAULT_CONCURRENCY[provider] ?? 5;\n    }\n    validateConcurrencyConfig(config) {\n        const errors = [];\n        for (const entry of config) {\n            const providerStr = entry.provider;\n            if (!this.isValidProvider(providerStr)) {\n                errors.push(`Invalid provider: ${entry.provider}`);\n            }\n            if (!entry.model && !entry.provider) {\n                errors.push('Either provider or model must be specified');\n            }\n            if (entry.concurrency !== undefined &&\n                (entry.concurrency < 1 || !Number.isInteger(entry.concurrency))) {\n                errors.push(`Invalid concurrency value for ${providerStr}/${entry.model || '(any)'}: ${entry.concurrency}. Must be a positive integer.`);\n            }\n        }\n        return errors;\n    }\n    // ==========================================================================\n    // Private Methods - Caching\n    // ==========================================================================\n    /**\n     * Gets value from cache if not expired.\n     *\n     * @param key - Cache key\n     * @returns Cached value or null if not found or expired\n     */\n    getFromCache(key) {\n        const entry = this.cache.get(key);\n        if (!entry) {\n            return null;\n        }\n        // Check if cache entry is expired\n        const now = Date.now();\n        if (now - entry.config.timestamp > entry.ttl) {\n            this.cache.delete(key);\n            return null;\n        }\n        return entry.config.value;\n    }\n    /**\n     * Sets value in cache.\n     *\n     * @param key - Cache key\n     * @param value - Value to cache\n     * @param ttl - Time-to-live in milliseconds\n     */\n    setInCache(key, value, ttl) {\n        const entry = {\n            config: {\n                value,\n                timestamp: Date.now(),\n            },\n            ttl,\n        };\n        this.cache.set(key, entry);\n    }\n    /**\n     * Invalidates cache entry.\n     *\n     * @param key - Cache key to invalidate\n     */\n    invalidateCache(key) {\n        this.cache.delete(key);\n        this.logger.debug('Cache entry invalidated', { key });\n    }\n    /**\n     * Gets fallback provider settings for a provider.\n     *\n     * @param providerId - Provider identifier\n     * @returns Fallback provider settings\n     */\n    getFallbackProviderSettings(providerId) {\n        const providerDefaults = {\n            openai: {\n                apiKey: this.defaults.openaiApiKey,\n                model: 'gpt-4o-mini',\n            },\n            gemini: {\n                apiKey: this.defaults.geminiApiKey,\n                model: 'gemini-2.0-flash-exp',\n            },\n            claude: {\n                apiKey: this.defaults.claudeApiKey,\n                model: 'claude-3-5-sonnet-20241022',\n            },\n            mistral: {\n                apiKey: this.defaults.mistralApiKey,\n                model: 'mistral-large-latest',\n            },\n            deepseek: {\n                apiKey: this.defaults.deepseekApiKey,\n                model: 'deepseek-chat',\n            },\n            'zai-paas': {\n                apiKey: this.defaults.zaiPaasApiKey,\n                model: this.defaults.zaiPaasModel,\n                apiUrl: 'https://api.z.ai/v1',\n            },\n            'zai-coding': {\n                apiKey: this.defaults.zaiCodingApiKey,\n                model: this.defaults.zaiCodingModel,\n                apiUrl: 'https://api.z.ai/v1',\n            },\n            ollama: {\n                apiKey: '',\n                model: this.defaults.ollamaModel,\n                apiUrl: this.defaults.ollamaApiUrl,\n            },\n        };\n        return (providerDefaults[providerId] ?? {\n            apiKey: '',\n            model: '',\n        });\n    }\n};\nAppConfigService = __decorate([\n    singleton(),\n    __param(0, inject('ILogger')),\n    __param(1, inject('IConfigRepository')),\n    __metadata(\"design:paramtypes\", [Object, Object])\n], AppConfigService);\nexport { AppConfigService };\n","/**\n * Rate Limiter Service\n *\n * Provides rate limiting functionality for API requests to AI providers.\n * Uses token bucket algorithm with priority queue and per-model concurrency limiting.\n *\n * This service:\n * - Manages token buckets per provider with refill rate\n * - Enforces concurrency limits per model using semaphores\n * - Supports priority-based queuing of requests\n * - Provides statistics and reset capabilities\n *\n * @module application/services/RateLimiterService\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\n// ============================================================================\n// Service Implementation\n// ============================================================================\n/**\n * Rate Limiter Service\n *\n * Manages API request rates using token bucket algorithm.\n * Supports per-provider rate limits and per-model concurrency limits.\n *\n * @example\n * ```typescript\n * const service = container.resolve<RateLimiterService>(RateLimiterService);\n *\n * // Configure providers\n * service.configure({\n *   openai: { limit: 500, window: 60000 },\n *   claude: { limit: 50, window: 60000 }\n * });\n *\n * // Execute with rate limiting\n * await service.acquire('openai', async () => {\n *   return await callOpenAI();\n * }, 1, 'gpt-4');\n * ```\n */\nlet RateLimiterService = class RateLimiterService {\n    // ==========================================================================\n    // Constructor\n    // ==========================================================================\n    /**\n     * Creates a new RateLimiterService instance.\n     *\n     * @param logger - Logger instance for logging operations\n     */\n    constructor(logger) {\n        this.logger = logger;\n        this.buckets = {};\n        this.queues = {};\n        this.processing = {};\n        this.modelSemaphores = {};\n        this.modelConcurrencyConfig = {};\n        this.logger.debug('RateLimiterService initialized');\n    }\n    // ==========================================================================\n    // Public Methods\n    // ==========================================================================\n    /**\n     * Configures rate limits for providers.\n     *\n     * @param config - Rate limiter configuration for each provider\n     * @param modelConcurrency - Optional per-model concurrency limits\n     */\n    configure(config, modelConcurrency = {}) {\n        this.logger.info('Configuring rate limiter', {\n            providers: Object.keys(config),\n            modelConcurrency,\n        });\n        // Clear existing configuration\n        this.reset();\n        // Initialize buckets and queues for each provider\n        for (const provider in config) {\n            this.buckets[provider] = {\n                tokens: config[provider].limit,\n                lastRefill: Date.now(),\n                limit: config[provider].limit,\n                window: config[provider].window,\n            };\n            this.queues[provider] = [];\n            this.processing[provider] = null;\n        }\n        // Store model concurrency configuration\n        this.modelConcurrencyConfig = modelConcurrency;\n        this.logger.info('Rate limiter configured', {\n            providers: Object.keys(this.buckets).join(', '),\n        });\n    }\n    /**\n     * Acquires a token and executes a function with rate limiting.\n     *\n     * Waits if no tokens are available. Supports priority queuing and\n     * optional per-model concurrency limiting.\n     *\n     * @param provider - Provider name\n     * @param requestFn - Async function to execute\n     * @param priority - Priority level (higher = more important, default: 1)\n     * @param model - Optional model name for concurrency limiting\n     * @returns Promise resolving to function result\n     *\n     * @throws {Error} If provider is not configured\n     *\n     * @example\n     * ```typescript\n     * const result = await rateLimiter.acquire('openai', async () => {\n     *   return await callOpenAI();\n     * }, 1, 'gpt-4');\n     * ```\n     */\n    async acquire(provider, requestFn, priority = 1, model) {\n        // Defensive check: Provider must be configured\n        if (!(provider in this.queues)) {\n            throw new Error(`Provider '${provider}' not configured in RateLimiter. Valid providers: ${Object.keys(this.queues).join(', ')}`);\n        }\n        this.logger.debug('Acquiring token', { provider, priority, model });\n        // Wrap the request function with semaphore logic if model is specified\n        const wrappedFn = async () => {\n            if (!model) {\n                return await requestFn();\n            }\n            await this.acquireSemaphore(provider, model);\n            try {\n                return await requestFn();\n            }\n            finally {\n                this.releaseSemaphore(provider, model);\n            }\n        };\n        return new Promise((resolve, reject) => {\n            this.queues[provider].push({\n                fn: wrappedFn,\n                resolve: resolve,\n                reject,\n                priority,\n            });\n            this.queues[provider].sort((a, b) => b.priority - a.priority);\n            this.processQueue(provider);\n        });\n    }\n    /**\n     * Attempts to acquire a token without waiting.\n     *\n     * Returns true and executes the function immediately if a token is available.\n     * Returns false if no token is available.\n     *\n     * @param provider - Provider name\n     * @param requestFn - Async function to execute if token is available\n     * @returns Promise resolving to true if executed, false otherwise\n     *\n     * @example\n     * ```typescript\n     * if (await rateLimiter.tryAcquire('openai', async () => {\n     *   return await callOpenAI();\n     * })) {\n     *   console.log('Request executed immediately');\n     * } else {\n     *   console.log('No token available');\n     * }\n     * ```\n     */\n    async tryAcquire(provider, requestFn) {\n        if (!(provider in this.queues)) {\n            return false;\n        }\n        this.refillTokens(provider);\n        if (this.buckets[provider].tokens >= 1) {\n            this.consumeToken(provider);\n            try {\n                await requestFn();\n                return true;\n            }\n            catch (error) {\n                this.logger.error('Error in tryAcquire execution', { provider, error });\n                return false;\n            }\n        }\n        return false;\n    }\n    /**\n     * Gets current statistics for all providers.\n     *\n     * @returns Current rate limiter statistics\n     */\n    getStats() {\n        const stats = {\n            providers: {},\n            totalQueued: 0,\n        };\n        for (const provider in this.buckets) {\n            const bucket = this.buckets[provider];\n            const semaphore = this.getFirstSemaphoreForProvider(provider);\n            const queueLength = this.queues[provider].length;\n            stats.providers[provider] = {\n                tokens: bucket.tokens,\n                limit: bucket.limit,\n                queueLength,\n                isProcessing: this.processing[provider] !== null,\n            };\n            if (semaphore) {\n                stats.providers[provider].activeConcurrency = semaphore.active;\n                stats.providers[provider].maxConcurrency = semaphore.limit;\n            }\n            stats.totalQueued += queueLength;\n        }\n        return stats;\n    }\n    /**\n     * Resets the rate limiter to initial state.\n     *\n     * Clears all buckets, queues, and semaphores.\n     */\n    reset() {\n        this.logger.info('Resetting rate limiter');\n        // Clear all state\n        for (const provider in this.buckets) {\n            delete this.buckets[provider];\n        }\n        for (const provider in this.queues) {\n            delete this.queues[provider];\n        }\n        for (const provider in this.processing) {\n            delete this.processing[provider];\n        }\n        for (const semaphoreKey in this.modelSemaphores) {\n            delete this.modelSemaphores[semaphoreKey];\n        }\n        this.logger.info('Rate limiter reset complete');\n    }\n    /**\n     * Clears all queues and optionally cancels running processes.\n     *\n     * @param cancelRunning - Whether to reject pending tasks and clear processing promises\n     * @returns Statistics about cleared queues\n     */\n    clearQueue(cancelRunning = false) {\n        let clearedTasks = 0;\n        const cancelledProviders = [];\n        const providers = {};\n        for (const provider in this.queues) {\n            const queueLength = this.queues[provider].length;\n            const isCurrentlyExecuting = this.processing[provider] !== null;\n            clearedTasks += queueLength;\n            // Reject all pending tasks in the queue (only if not currently executing)\n            if (cancelRunning && queueLength > 0) {\n                if (!isCurrentlyExecuting) {\n                    for (const task of this.queues[provider]) {\n                        task.reject(new Error('Queue cleared'));\n                    }\n                }\n            }\n            // Clear the queue (only if not currently executing)\n            if (!isCurrentlyExecuting) {\n                this.queues[provider] = [];\n            }\n            // Clear processing flag if requested and provider is processing\n            if (cancelRunning && isCurrentlyExecuting) {\n                this.processing[provider] = null;\n                cancelledProviders.push(provider);\n            }\n            providers[provider] = {\n                queueLength: queueLength,\n                isProcessing: isCurrentlyExecuting,\n            };\n        }\n        this.logger.info('Rate limiter queues cleared', {\n            clearedTasks,\n            cancelledProviders,\n            providers,\n        });\n        return {\n            clearedTasks,\n            cancelledProviders,\n            providers,\n        };\n    }\n    // ==========================================================================\n    // Private Methods\n    // ==========================================================================\n    /**\n     * Gets or creates a semaphore for a model.\n     *\n     * @param provider - Provider name\n     * @param model - Model name\n     * @returns Semaphore for the model\n     */\n    getSemaphore(provider, model) {\n        const semaphoreKey = `${provider}:${model}`;\n        if (!this.modelSemaphores[semaphoreKey]) {\n            const limit = this.getConcurrencyLimit(provider, model);\n            this.modelSemaphores[semaphoreKey] = {\n                active: 0,\n                limit,\n                waiting: [],\n            };\n        }\n        return this.modelSemaphores[semaphoreKey];\n    }\n    /**\n     * Gets the first semaphore for a provider (for statistics).\n     *\n     * @param provider - Provider name\n     * @returns First semaphore or undefined\n     */\n    getFirstSemaphoreForProvider(provider) {\n        const prefix = `${provider}:`;\n        const key = Object.keys(this.modelSemaphores).find((k) => k.startsWith(prefix));\n        return key ? this.modelSemaphores[key] : undefined;\n    }\n    /**\n     * Gets concurrency limit for a model.\n     *\n     * @param provider - Provider name\n     * @param model - Model name\n     * @returns Concurrency limit\n     */\n    getConcurrencyLimit(provider, model) {\n        const key = `${provider}:${model}`;\n        return this.modelConcurrencyConfig[key] || 1; // Default: 1 concurrent request\n    }\n    /**\n     * Acquires a semaphore slot for a model.\n     *\n     * Waits if all slots are occupied.\n     *\n     * @param provider - Provider name\n     * @param model - Model name\n     * @returns Promise that resolves when a slot is acquired\n     */\n    async acquireSemaphore(provider, model) {\n        const semaphore = this.getSemaphore(provider, model);\n        if (semaphore.active < semaphore.limit) {\n            semaphore.active++;\n            return;\n        }\n        return new Promise((resolve, reject) => {\n            semaphore.waiting.push({ resolve, reject });\n        });\n    }\n    /**\n     * Releases a semaphore slot for a model.\n     *\n     * @param provider - Provider name\n     * @param model - Model name\n     */\n    releaseSemaphore(provider, model) {\n        const semaphore = this.getSemaphore(provider, model);\n        semaphore.active--;\n        if (semaphore.waiting.length > 0) {\n            const next = semaphore.waiting.shift();\n            if (next) {\n                semaphore.active++;\n                next.resolve();\n            }\n        }\n    }\n    /**\n     * Refills tokens based on elapsed time since last refill.\n     *\n     * @param provider - Provider to refill tokens for\n     */\n    refillTokens(provider) {\n        const bucket = this.buckets[provider];\n        const now = Date.now();\n        const elapsed = now - bucket.lastRefill;\n        const refillAmount = (elapsed / bucket.window) * bucket.limit;\n        bucket.tokens = Math.min(bucket.limit, bucket.tokens + refillAmount);\n        bucket.lastRefill = now;\n    }\n    /**\n     * Checks if provider has available tokens.\n     *\n     * @param provider - Provider to check\n     * @returns True if at least 1 token is available\n     */\n    hasTokens(provider) {\n        this.refillTokens(provider);\n        return this.buckets[provider].tokens >= 1;\n    }\n    /**\n     * Consumes one token from the provider's bucket.\n     *\n     * @param provider - Provider to consume token from\n     */\n    consumeToken(provider) {\n        this.buckets[provider].tokens -= 1;\n    }\n    /**\n     * Processes the queue for a given provider.\n     *\n     * @param provider - Provider to process queue for\n     */\n    async processQueue(provider) {\n        if (this.processing[provider]) {\n            await this.processing[provider];\n            return;\n        }\n        this.processing[provider] = (async () => {\n            try {\n                while (this.queues[provider].length > 0) {\n                    const { fn, resolve, reject } = this.queues[provider].shift();\n                    // Wait for token to become available\n                    while (!this.hasTokens(provider)) {\n                        await new Promise((r) => setTimeout(r, 100));\n                    }\n                    this.consumeToken(provider);\n                    try {\n                        const result = await fn();\n                        resolve(result);\n                    }\n                    catch (error) {\n                        reject(error);\n                    }\n                }\n            }\n            finally {\n                this.processing[provider] = null;\n            }\n        })();\n        await this.processing[provider];\n    }\n};\nRateLimiterService = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], RateLimiterService);\nexport { RateLimiterService };\n","/**\n * BaseProviderAdapter bridges the legacy BaseProvider implementation with the IProvider interface.\n *\n * This adapter enables dependency injection for existing BaseProvider implementations\n * by wrapping them in the IProvider interface contract.\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport { injectable } from 'tsyringe';\nimport 'reflect-metadata';\n// ============================================================================\n// Type Guards and Helpers\n// ============================================================================\n/**\n * Type guard to check if value is valid IProviderSettings\n */\nfunction isIProviderSettings(value) {\n    return (typeof value === 'object' &&\n        value !== null &&\n        ('apiKey' in value || 'apiUrl' in value || 'model' in value));\n}\n/**\n * Type guard to check if value is valid IAttachment\n */\nfunction isIAttachment(value) {\n    return (typeof value === 'object' &&\n        value !== null &&\n        'name' in value &&\n        'mimeType' in value &&\n        'size' in value);\n}\n/**\n * Type guard to check if value is valid ICustomTag\n */\nfunction isICustomTag(value) {\n    return (typeof value === 'object' &&\n        value !== null &&\n        'key' in value &&\n        'name' in value &&\n        'description' in value);\n}\n// ============================================================================\n// Adapter Implementation\n// ============================================================================\n/**\n * Adapter class that wraps BaseProvider to implement IProvider interface.\n *\n * This adapter enables the legacy BaseProvider implementations to be used\n * with the new dependency injection system. It handles type conversions between\n * the new IProvider interfaces and the legacy BaseProvider types.\n *\n * @template T - The BaseProvider implementation type\n *\n * @example\n * ```typescript\n * const adapter = new BaseProviderAdapter<OpenAIProvider>(\n *   'openai',\n *   new OpenAIProvider()\n * );\n * await container.registerInstance<IProvider>('IProvider', adapter);\n * ```\n */\nlet BaseProviderAdapter = class BaseProviderAdapter {\n    /**\n     * Creates a new BaseProviderAdapter instance.\n     *\n     * @param providerId - Unique identifier for this provider\n     * @param provider - The BaseProvider implementation to wrap\n     * @param logger - Logger instance for logging operations\n     */\n    constructor(providerId, provider, logger) {\n        this.provider = provider;\n        this.providerId = providerId;\n        this.logger = logger;\n        this.logger.debug('BaseProviderAdapter initialized', { providerId });\n    }\n    // ========================================================================\n    // IProvider Implementation\n    // ========================================================================\n    /**\n     * Validates provider settings.\n     *\n     * Delegates to the wrapped BaseProvider's validateSettings method.\n     *\n     * @param settings - Provider settings to validate\n     * @returns Promise resolving to true if settings are valid\n     * @throws {Error} If settings validation fails\n     *\n     * @example\n     * ```typescript\n     * const isValid = await adapter.validateSettings({\n     *   apiKey: 'sk-proj-123456'\n     * });\n     * ```\n     */\n    async validateSettings(settings) {\n        this.logger.debug('Validating provider settings', {\n            providerId: this.providerId,\n            hasApiKey: !!settings.apiKey,\n            hasModel: !!settings.model,\n        });\n        try {\n            // Convert IProviderSettings to BaseProviderSettings\n            const baseSettings = this.convertSettings(settings);\n            // Access protected method via type assertion (BaseProvider instances have this method)\n            const result = this.provider.validateSettings(baseSettings);\n            if (result) {\n                this.logger.debug('Settings validation succeeded', { providerId: this.providerId });\n            }\n            else {\n                this.logger.warn('Settings validation failed', { providerId: this.providerId });\n            }\n            return result;\n        }\n        catch (error) {\n            this.logger.error('Settings validation error', {\n                providerId: this.providerId,\n                error: error instanceof Error ? error.message : String(error),\n            });\n            throw error;\n        }\n    }\n    /**\n     * Analyzes an email and assigns tags.\n     *\n     * Delegates to the wrapped BaseProvider's analyze method after converting\n     * the input format from IAnalyzeInput to LegacyAnalyzeInput.\n     *\n     * @param input - Analysis input containing settings, email data, and tags\n     * @returns Promise resolving to tag analysis response\n     * @throws {Error} If analysis fails (invalid settings, API error, timeout, etc.)\n     *\n     * @example\n     * ```typescript\n     * const result = await adapter.analyze({\n     *   settings: { apiKey: 'sk-...', model: 'gpt-4' },\n     *   data: { headers: {}, body: 'Hello...', attachments: [] },\n     *   tags: [{ key: 'is_advertise', name: 'Ad', description: '...' }]\n     * });\n     * console.log(result.tags);\n     * ```\n     */\n    async analyze(input) {\n        this.logger.debug('Starting email analysis', {\n            providerId: this.providerId,\n            tagCount: input.tags.length,\n            hasBody: !!input.data.body,\n        });\n        try {\n            // Convert IAnalyzeInput to LegacyAnalyzeInput\n            const legacyInput = this.convertAnalyzeInput(input);\n            // Delegate to BaseProvider\n            const legacyResponse = await this.provider.analyze(legacyInput);\n            // Convert legacy TagResponse to ITagResponse\n            const response = this.convertTagResponse(legacyResponse);\n            this.logger.info('Email analysis completed', {\n                providerId: this.providerId,\n                tagCount: response.tags.length,\n                confidence: response.confidence,\n            });\n            return response;\n        }\n        catch (error) {\n            this.logger.error('Email analysis failed', {\n                providerId: this.providerId,\n                error: error instanceof Error ? error.message : String(error),\n            });\n            throw error;\n        }\n    }\n    // ========================================================================\n    // Type Conversion Methods\n    // ========================================================================\n    /**\n     * Converts IProviderSettings to BaseProviderSettings.\n     *\n     * @param settings - IProviderSettings to convert\n     * @returns BaseProviderSettings\n     */\n    convertSettings(settings) {\n        if (!isIProviderSettings(settings)) {\n            throw new Error('Invalid settings provided');\n        }\n        const baseSettings = {\n            apiKey: settings.apiKey,\n            apiUrl: settings.apiUrl,\n            model: settings.model,\n        };\n        // Copy any additional properties\n        for (const [key, value] of Object.entries(settings)) {\n            if (!['apiKey', 'apiUrl', 'model'].includes(key)) {\n                baseSettings[key] = value;\n            }\n        }\n        return baseSettings;\n    }\n    /**\n     * Converts IAnalyzeInput to LegacyAnalyzeInput.\n     *\n     * @param input - IAnalyzeInput to convert\n     * @returns LegacyAnalyzeInput\n     */\n    convertAnalyzeInput(input) {\n        if (!isIProviderSettings(input.settings)) {\n            throw new Error('Invalid settings provided in analyze input');\n        }\n        // Convert IStructuredEmailData to StructuredEmailData\n        const structuredData = this.convertStructuredEmailData(input.data);\n        // Convert ICustomTag[] to CustomTags\n        const customTags = this.convertCustomTags(input.tags);\n        return {\n            settings: this.convertSettings(input.settings),\n            structuredData,\n            customTags,\n        };\n    }\n    /**\n     * Converts IStructuredEmailData to StructuredEmailData from legacy.\n     *\n     * @param data - IStructuredEmailData to convert\n     * @returns Legacy StructuredEmailData\n     */\n    convertStructuredEmailData(data) {\n        return {\n            headers: { ...data.headers },\n            body: data.body,\n            attachments: data.attachments.map((attachment) => {\n                if (!isIAttachment(attachment)) {\n                    throw new Error('Invalid attachment provided');\n                }\n                return {\n                    name: attachment.name,\n                    mimeType: attachment.mimeType,\n                    size: attachment.size,\n                };\n            }),\n        };\n    }\n    /**\n     * Converts ICustomTag[] to CustomTags from legacy.\n     *\n     * @param tags - ICustomTag array to convert\n     * @returns Legacy CustomTags\n     */\n    convertCustomTags(tags) {\n        return tags.map((tag) => {\n            if (!isICustomTag(tag)) {\n                throw new Error('Invalid custom tag provided');\n            }\n            return {\n                key: tag.key,\n                name: tag.name,\n                color: '#9E9E9E', // Default gray color for custom tags\n                prompt: tag.description, // description maps to prompt in legacy\n            };\n        });\n    }\n    /**\n     * Converts legacy TagResponse to ITagResponse.\n     *\n     * @param response - Legacy TagResponse\n     * @returns ITagResponse\n     */\n    convertTagResponse(response) {\n        return {\n            tags: response.tags,\n            confidence: response.confidence,\n            reasoning: response.reasoning,\n            // Extract known optional fields if present\n            is_scam: response.is_scam,\n            sender: response.sender,\n            sender_consistent: response.sender_consistent,\n            spf_pass: response.spf_pass,\n            dkim_pass: response.dkim_pass,\n        };\n    }\n};\nBaseProviderAdapter = __decorate([\n    injectable(),\n    __metadata(\"design:paramtypes\", [String, Object, Object])\n], BaseProviderAdapter);\nexport { BaseProviderAdapter };\n","/**\n * Utility functions for provider implementations\n * @module providers/utils\n */\nimport { Provider, DEFAULT_CUSTOM_TAGS } from '../../../core/config';\n// ============================================================================\n// TYPE DEFINITIONS AND INTERFACES\n// ============================================================================\n/**\n * Log levels for the logger\n */\nexport var LogLevel;\n(function (LogLevel) {\n    LogLevel[LogLevel[\"DEBUG\"] = 0] = \"DEBUG\";\n    LogLevel[LogLevel[\"INFO\"] = 1] = \"INFO\";\n    LogLevel[LogLevel[\"WARN\"] = 2] = \"WARN\";\n    LogLevel[LogLevel[\"ERROR\"] = 3] = \"ERROR\";\n})(LogLevel || (LogLevel = {}));\n/**\n * Error severity levels for UI display\n * - CRITICAL: Shows as alert/dialog, requires user attention\n * - WARNING: Shows as toast notification, non-blocking\n * - INFO: Shows as status message, informational only\n */\nexport var ErrorSeverity;\n(function (ErrorSeverity) {\n    ErrorSeverity[\"INFO\"] = \"info\";\n    ErrorSeverity[\"WARNING\"] = \"warning\";\n    ErrorSeverity[\"CRITICAL\"] = \"critical\";\n})(ErrorSeverity || (ErrorSeverity = {}));\n/**\n * Error types for categorization\n */\nexport var ErrorType;\n(function (ErrorType) {\n    ErrorType[\"API\"] = \"api\";\n    ErrorType[\"PROVIDER\"] = \"provider\";\n    ErrorType[\"USER\"] = \"user\";\n    ErrorType[\"SYSTEM\"] = \"system\";\n    ErrorType[\"NETWORK\"] = \"network\";\n    ErrorType[\"VALIDATION\"] = \"validation\";\n})(ErrorType || (ErrorType = {}));\n/**\n * Type guard for error objects\n */\nfunction isError(value) {\n    return (value instanceof Error || (typeof value === 'object' && value !== null && 'message' in value));\n}\n/**\n * Type guard for errors with cause property\n */\nfunction isErrorWithCause(error) {\n    return 'cause' in error && typeof error.cause === 'object' && error.cause !== null;\n}\n// ============================================================================\n// API SCHEMA DEFINITIONS\n// ============================================================================\n/**\n * Schema definition for Tag responses\n */\nconst TAG_RESPONSE_SCHEMA = {\n    tags: {\n        type: 'array',\n        itemType: 'string',\n        required: true,\n        default: [],\n    },\n    confidence: {\n        type: 'number',\n        required: true,\n        default: 0.5,\n        validate: (value) => typeof value === 'number' && value >= 0 && value <= 1,\n    },\n    reasoning: {\n        type: 'string',\n        required: false,\n        default: '',\n    },\n};\n// ============================================================================\n// UTILITY FUNCTIONS\n// ============================================================================\n/**\n * Masks an API key for logging purposes\n * Shows first 7 and last 3 characters with ellipsis in between\n *\n * @param key - The API key to mask\n * @returns Masked key string\n *\n * @example\n * maskApiKey('sk-1234567890abcdef') // Returns 'sk-1234...def'\n * maskApiKey('short') // Returns '***'\n * maskApiKey(null) // Returns 'not set'\n */\nexport function maskApiKey(key) {\n    if (!key || typeof key !== 'string')\n        return 'not set';\n    if (key.length <= 10)\n        return '***';\n    return key.slice(0, 7) + '...' + key.slice(-3);\n}\n// ============================================================================\n// LOGGER IMPLEMENTATION\n// ============================================================================\nlet currentLogLevel = LogLevel.INFO;\n/**\n * Sets the current log level\n *\n * @param level - The log level to set\n */\nfunction setLogLevel(level) {\n    currentLogLevel = level;\n}\n/**\n * Internal logging function\n *\n * @param level - The log level\n * @param message - The log message\n * @param context - Optional context object\n */\nfunction log(level, message, context = {}) {\n    if (level >= currentLogLevel) {\n        const timestamp = new Date().toISOString();\n        const levelName = LogLevel[level];\n        // Separate log calls to prevent browser DevTools from showing raw context object\n        console.log(`[${timestamp}] [${levelName}] ${message}`);\n        if (Object.keys(context).length > 0) {\n            const sanitizedContext = sanitizeContext(context);\n            console.log('Context:', sanitizedContext);\n        }\n    }\n}\n/**\n * Sanitizes context object by masking sensitive fields recursively\n * Handles nested objects and arrays to ensure API keys are never logged\n *\n * @param context - The context object to sanitize\n * @param depth - Current recursion depth (prevents infinite recursion)\n * @returns Sanitized context object\n */\nfunction sanitizeContext(context, depth = 0) {\n    const MAX_DEPTH = 10;\n    if (!context || typeof context !== 'object')\n        return context;\n    if (depth > MAX_DEPTH)\n        return '[Max depth reached]';\n    const sanitized = {};\n    const keyPatterns = ['key', 'token', 'password', 'secret'];\n    for (const [key, value] of Object.entries(context)) {\n        const isSensitive = keyPatterns.some((pattern) => key.toLowerCase().includes(pattern));\n        if (isSensitive) {\n            // Mask sensitive values\n            sanitized[key] = maskApiKey(value);\n        }\n        else if (Array.isArray(value)) {\n            // Recursively sanitize array elements\n            sanitized[key] = value.map((item) => typeof item === 'object' && item !== null\n                ? sanitizeContext(item, depth + 1)\n                : item);\n        }\n        else if (typeof value === 'object' && value !== null) {\n            // Recursively sanitize nested objects\n            sanitized[key] = sanitizeContext(value, depth + 1);\n        }\n        else {\n            sanitized[key] = value;\n        }\n    }\n    return sanitized;\n}\n/**\n * Logger instance with typed methods\n */\nexport const logger = {\n    debug: (msg, ctx) => log(LogLevel.DEBUG, msg, ctx),\n    info: (msg, ctx) => log(LogLevel.INFO, msg, ctx),\n    warn: (msg, ctx) => log(LogLevel.WARN, msg, ctx),\n    error: (msg, ctx) => log(LogLevel.ERROR, msg, ctx),\n    setLogLevel,\n};\n// ============================================================================\n// ERROR DISPLAY HELPERS\n// ============================================================================\n/**\n * Logs an error and sends it to the UI for display\n * This is the standard error handling function for the entire application\n *\n * @param error - The error to handle (can be Error, string, or unknown)\n * @param type - Error type for categorization\n * @param context - Additional context information\n * @param customMessage - Optional custom message to override the error message\n */\nexport function logAndDisplayError(error, type = ErrorType.SYSTEM, context = {}, customMessage) {\n    // Extract error message\n    const errorMessage = customMessage || (error instanceof Error ? error.message : String(error));\n    // Determine severity based on error type and content\n    const severity = determineErrorSeverity(error, type);\n    // Create error display object\n    const errorDisplay = {\n        message: errorMessage,\n        severity,\n        type,\n        context,\n    };\n    // Log the error with full context\n    logger.error(`[${type.toUpperCase()}] ${errorMessage}`, {\n        ...context,\n        severity,\n        errorMessage,\n        stack: error instanceof Error ? error.stack : undefined,\n    });\n    // Send error to UI via runtime message\n    sendErrorToUI(errorDisplay).catch((sendError) => {\n        logger.error('Failed to send error to UI', {\n            originalError: errorMessage,\n            sendError: sendError instanceof Error ? sendError.message : String(sendError),\n        });\n    });\n}\n/**\n * Determines error severity based on error type and content\n *\n * @param error - The error to evaluate\n * @param type - Error type\n * @returns Appropriate severity level\n */\nfunction determineErrorSeverity(error, type) {\n    const errorMessage = error instanceof Error ? error.message.toLowerCase() : String(error).toLowerCase();\n    // CRITICAL errors\n    if (type === ErrorType.SYSTEM) {\n        return ErrorSeverity.CRITICAL;\n    }\n    if (errorMessage.includes('permission')) {\n        return ErrorSeverity.CRITICAL;\n    }\n    if (errorMessage.includes('configuration')) {\n        return ErrorSeverity.CRITICAL;\n    }\n    // WARNING errors\n    if (type === ErrorType.NETWORK || type === ErrorType.API) {\n        return ErrorSeverity.WARNING;\n    }\n    if (errorMessage.includes('timeout')) {\n        return ErrorSeverity.WARNING;\n    }\n    if (errorMessage.includes('rate limit')) {\n        return ErrorSeverity.WARNING;\n    }\n    // INFO errors (usually validation or user input issues)\n    if (type === ErrorType.VALIDATION || type === ErrorType.USER) {\n        return ErrorSeverity.INFO;\n    }\n    // Default to CRITICAL for unknown errors\n    return ErrorSeverity.CRITICAL;\n}\n/**\n * Sends error display message to UI via runtime API\n * Note: This function works in background script context\n *\n * @param errorDisplay - Error information to display\n */\nasync function sendErrorToUI(errorDisplay) {\n    try {\n        // Check if we're in a browser extension context\n        // @ts-expect-error - browser runtime API is available in extension context\n        if (typeof browser !== 'undefined' && browser.runtime) {\n            const message = {\n                action: 'showError',\n                error: errorDisplay,\n            };\n            // Try to send message to options page\n            // @ts-expect-error - browser runtime sendMessage is valid for WebExtensions\n            browser.runtime.sendMessage(message).catch((reason) => {\n                // Options page might not be open, this is acceptable\n                const errorMsg = reason instanceof Error ? reason.message : String(reason);\n                if (!errorMsg.includes('Receiving end does not exist')) {\n                    logger.warn('Failed to send error to UI', { error: errorMsg });\n                }\n            });\n        }\n    }\n    catch (error) {\n        // Runtime API not available (not in extension context)\n        logger.debug('Runtime API not available for error display');\n    }\n}\n// ============================================================================\n// JSON EXTRACTION\n// ============================================================================\n/**\n * Type guard for unknown data being a string\n */\nfunction isString(value) {\n    return typeof value === 'string';\n}\n/**\n * Extracts the first valid JSON object from a text string\n * Handles nested objects by counting braces\n *\n * @param text - Text potentially containing JSON\n * @returns Extracted JSON string\n * @throws {Error} If no valid JSON object is found\n *\n * @example\n * extractJson('Here is some text {\"key\": \"value\"} more text') // Returns '{\"key\": \"value\"}'\n * extractJson('{\"nested\": {\"deep\": true}}') // Returns '{\"nested\": {\"deep\": true}}'\n */\nexport function extractJson(text) {\n    if (!isString(text)) {\n        throw new Error('Input must be a string');\n    }\n    let firstBrace = -1;\n    let braceCount = 0;\n    for (let i = 0; i < text.length; i++) {\n        if (text[i] === '{') {\n            if (firstBrace === -1)\n                firstBrace = i;\n            braceCount++;\n        }\n        else if (text[i] === '}') {\n            braceCount--;\n            if (braceCount === 0 && firstBrace !== -1) {\n                const extracted = text.substring(firstBrace, i + 1);\n                logger.info('[LLM-EXTRACT-JSON] Extracted JSON:', {\n                    startIdx: firstBrace,\n                    endIdx: i + 1,\n                    length: extracted.length,\n                    preview: extracted.substring(0, 200),\n                });\n                return extracted;\n            }\n        }\n    }\n    logger.info('[LLM-EXTRACT-JSON] No JSON found in text', {\n        textLength: text.length,\n        hasBrace: text.includes('{'),\n        preview: text.substring(0, 200),\n    });\n    throw new Error('Could not find a valid JSON object in the response.');\n}\n// ============================================================================\n// RETRY WITH BACKOFF\n// ============================================================================\n/**\n * Checks if an error is a transient (retryable) error\n * Transient errors include network errors and connection resets\n *\n * @param error - The error to check\n * @returns True if the error is transient\n */\nfunction isTransientError(error) {\n    if (!isError(error))\n        return false;\n    if (error.name === 'TypeError' && error.message.includes('fetch'))\n        return true;\n    if (error.name === 'NetworkError')\n        return true;\n    if (isErrorWithCause(error)) {\n        const code = error.cause?.code;\n        if (code === 'ECONNRESET' || code === 'ECONNREFUSED')\n            return true;\n    }\n    return false;\n}\n/**\n * Checks if an HTTP status code is retryable\n * Retryable statuses: 5xx, 408 (Request Timeout), 429 (Too Many Requests)\n *\n * @param status - HTTP status code\n * @returns True if the status is retryable\n */\nfunction isRetryableStatus(status) {\n    return status >= 500 || status === 408 || status === 429;\n}\n/**\n * Type guard for objects with status property\n */\nfunction hasStatus(obj) {\n    return (typeof obj === 'object' &&\n        obj !== null &&\n        'status' in obj &&\n        typeof obj.status === 'number');\n}\n/**\n * Retries an async function with exponential backoff and jitter\n *\n * @template T - Return type of the function\n * @param fn - Async function to retry\n * @param options - Retry configuration options\n * @returns Promise resolving to the function result\n * @throws The last error if all retries are exhausted\n *\n * @example\n * await retryWithBackoff(() => fetch('/api/data'), { maxRetries: 3 })\n *\n * @example\n * await retryWithBackoff(() => fetchData(), {\n *   maxRetries: 5,\n *   baseDelay: 2000,\n *   factor: 2,\n *   jitter: 0.3\n * })\n */\nexport async function retryWithBackoff(fn, options = {}) {\n    const { maxRetries = 3, baseDelay = 1000, factor = 2, jitter = 0.5 } = options;\n    let lastError;\n    for (let attempt = 0; attempt <= maxRetries; attempt++) {\n        try {\n            const result = await fn();\n            // Check if result has retryable status\n            if (hasStatus(result) && isRetryableStatus(result.status)) {\n                throw new Error(`HTTP ${result.status}`);\n            }\n            return result;\n        }\n        catch (error) {\n            lastError = error;\n            const hasErrorStatus = isError(error) && typeof error.status === 'number';\n            const status = hasErrorStatus ? error.status : null;\n            const isTransient = isTransientError(error) || (status !== null && isRetryableStatus(status));\n            if (attempt === maxRetries || !isTransient) {\n                throw lastError;\n            }\n            // Calculate delay with exponential backoff and jitter\n            const exponentialDelay = baseDelay * Math.pow(factor, attempt);\n            const jitterAmount = exponentialDelay * jitter * (Math.random() * 2 - 1);\n            const delay = exponentialDelay + jitterAmount;\n            await new Promise((resolve) => setTimeout(resolve, Math.max(0, delay)));\n        }\n    }\n    throw lastError;\n}\n// ============================================================================\n// VALIDATION\n// ============================================================================\n/**\n * Logs validation errors\n *\n * @param message - Error message\n * @param details - Additional error details\n */\nfunction logError(message, details = {}) {\n    logger.error(`[Validation Error] ${message}`, details);\n}\n/**\n * Validates and sanitizes a value against a schema definition\n *\n * @template T - Expected type of the value\n * @param value - The value to validate\n * @param schema - Schema definition\n * @param fieldName - Name of the field being validated\n * @returns Validated and sanitized value\n */\nfunction validateValue(value, schema, fieldName) {\n    // Handle missing/undefined values\n    if (value === undefined || value === null) {\n        if (schema.required) {\n            logError(`Missing required field: ${fieldName}`, { received: value });\n        }\n        return schema.default;\n    }\n    // Type validation and conversion\n    switch (schema.type) {\n        case 'string': {\n            if (typeof value !== 'string') {\n                logError(`Type mismatch for ${fieldName}: expected string`, {\n                    received: typeof value,\n                });\n                return schema.default;\n            }\n            return value;\n        }\n        case 'number': {\n            let numValue;\n            if (typeof value !== 'number') {\n                const converted = Number(value);\n                if (isNaN(converted)) {\n                    logError(`Type mismatch for ${fieldName}: expected number`, {\n                        received: typeof value,\n                    });\n                    return schema.default;\n                }\n                numValue = converted;\n            }\n            else {\n                numValue = value;\n            }\n            if (schema.validate && !schema.validate(numValue)) {\n                logError(`Validation failed for ${fieldName}`, { received: numValue });\n                return schema.default;\n            }\n            return numValue;\n        }\n        case 'array': {\n            if (!Array.isArray(value)) {\n                logError(`Type mismatch for ${fieldName}: expected array`, {\n                    received: typeof value,\n                });\n                return schema.default;\n            }\n            return value;\n        }\n        case 'boolean': {\n            if (typeof value !== 'boolean') {\n                logError(`Type mismatch for ${fieldName}: expected boolean`, {\n                    received: typeof value,\n                });\n                return schema.default;\n            }\n            return value;\n        }\n        default:\n            return schema.default;\n    }\n}\n/**\n * Type guard for parsed JSON object\n */\nfunction isJsonObject(value) {\n    return typeof value === 'object' && value !== null && !Array.isArray(value);\n}\n/**\n * Validates an LLM response against the Tag schema\n * Handles JSON parsing errors, schema validation, and fallbacks\n *\n * @param response - Raw response (string or already parsed object)\n * @returns Validated response with fallback values\n *\n * @example\n * validateLLMResponse('{\"tags\": [\"work\", \"urgent\"], \"confidence\": 0.8}')\n * // Returns { tags: [\"work\", \"urgent\"], confidence: 0.8, reasoning: \"\" }\n *\n * @example\n * validateLLMResponse('Some text {\"tags\": [\"personal\"]} more text')\n * // Returns { tags: [\"personal\"], confidence: 0.5, reasoning: \"\" }\n *\n * @example\n * validateLLMResponse('invalid json')\n * // Returns { tags: [], confidence: 0.5, reasoning: \"\" }\n */\nexport function validateLLMResponse(response) {\n    // Log raw response for debugging\n    logger.info('[LLM-RAW-RESPONSE] Raw LLM response:', {\n        type: typeof response,\n        preview: typeof response === 'string'\n            ? response.substring(0, 500)\n            : JSON.stringify(response).substring(0, 500),\n        isNull: response === null,\n        isUndefined: response === undefined,\n        isEmpty: typeof response === 'string' && response.trim().length === 0,\n    });\n    let parsed;\n    // Parse JSON if response is a string\n    if (isString(response)) {\n        try {\n            // First try to extract JSON if it's embedded in text\n            const jsonText = extractJson(response);\n            parsed = JSON.parse(jsonText);\n            logger.info('[LLM-PARSED-JSON] Parsed JSON (extracted):', {\n                keys: Object.keys(parsed),\n                hasTags: 'tags' in parsed,\n                hasConfidence: 'confidence' in parsed,\n                tagsValue: parsed.tags,\n                confidenceValue: parsed.confidence,\n            });\n        }\n        catch (error) {\n            // Fallback: try parsing the whole string as JSON\n            try {\n                parsed = JSON.parse(response);\n                logger.info('[LLM-PARSED-JSON] Parsed JSON (fallback):', {\n                    keys: Object.keys(parsed),\n                    hasTags: 'tags' in parsed,\n                    hasConfidence: 'confidence' in parsed,\n                    tagsValue: parsed.tags,\n                    confidenceValue: parsed.confidence,\n                });\n            }\n            catch (parseError) {\n                const errorMessage = parseError instanceof Error ? parseError.message : String(parseError);\n                logError('Failed to parse JSON response', {\n                    error: errorMessage,\n                    response: response.substring(0, 200),\n                });\n                // Return fallback response\n                return {\n                    tags: [],\n                    confidence: 0.5,\n                    reasoning: '',\n                };\n            }\n        }\n    }\n    else if (isJsonObject(response)) {\n        parsed = response;\n        logger.info('[LLM-PARSED-JSON] Parsed JSON (object input):', {\n            keys: Object.keys(parsed),\n            hasTags: 'tags' in parsed,\n            hasConfidence: 'confidence' in parsed,\n            tagsValue: parsed.tags,\n            confidenceValue: parsed.confidence,\n        });\n    }\n    else {\n        logError('Invalid response type', { type: typeof response });\n        return {\n            tags: [],\n            confidence: 0.5,\n            reasoning: '',\n        };\n    }\n    // Validate each field against schema\n    const validated = {};\n    for (const [fieldName, schema] of Object.entries(TAG_RESPONSE_SCHEMA)) {\n        validated[fieldName] = validateValue(parsed[fieldName], schema, fieldName);\n    }\n    return validated;\n}\n// ============================================================================\n// APP CONFIG VALIDATION\n// ============================================================================\n/**\n * Type guard for checking if a value is a valid CustomTags array\n * @param value - Value to check\n * @returns True if value is a valid CustomTags array\n */\nfunction isCustomTags(value) {\n    if (!Array.isArray(value))\n        return false;\n    for (const item of value) {\n        if (typeof item !== 'object' || item === null)\n            return false;\n        const tag = item;\n        if (typeof tag.key !== 'string' || tag.key.trim().length === 0)\n            return false;\n        if (typeof tag.name !== 'string' || tag.name.trim().length === 0)\n            return false;\n        if (typeof tag.color !== 'string' || !/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/.test(tag.color))\n            return false;\n        // prompt is optional\n    }\n    return true;\n}\n/**\n * Validates and sanitizes a partial AppConfig from storage\n * @param result - Storage result to validate\n * @returns Validated Partial<AppConfig> with fallback values for invalid fields\n */\nexport function validateAppConfig(result) {\n    const validated = {};\n    // Validate provider (string, must be valid provider)\n    if (typeof result.provider === 'string') {\n        if (Object.values(Provider).includes(result.provider)) {\n            validated.provider = result.provider;\n        }\n    }\n    // Validate boolean fields\n    if (typeof result.enableNotifications === 'boolean') {\n        validated.enableNotifications = result.enableNotifications;\n    }\n    if (typeof result.enableLogging === 'boolean') {\n        validated.enableLogging = result.enableLogging;\n    }\n    // Validate API key fields (strings)\n    if (typeof result.openaiApiKey === 'string') {\n        validated.openaiApiKey = result.openaiApiKey;\n    }\n    if (typeof result.geminiApiKey === 'string') {\n        validated.geminiApiKey = result.geminiApiKey;\n    }\n    if (typeof result.claudeApiKey === 'string') {\n        validated.claudeApiKey = result.claudeApiKey;\n    }\n    if (typeof result.mistralApiKey === 'string') {\n        validated.mistralApiKey = result.mistralApiKey;\n    }\n    if (typeof result.deepseekApiKey === 'string') {\n        validated.deepseekApiKey = result.deepseekApiKey;\n    }\n    if (typeof result.zaiPaasApiKey === 'string') {\n        validated.zaiPaasApiKey = result.zaiPaasApiKey;\n    }\n    if (typeof result.zaiCodingApiKey === 'string') {\n        validated.zaiCodingApiKey = result.zaiCodingApiKey;\n    }\n    if (typeof result.ollamaApiUrl === 'string') {\n        validated.ollamaApiUrl = result.ollamaApiUrl;\n    }\n    if (typeof result.ollamaModel === 'string') {\n        validated.ollamaModel = result.ollamaModel;\n    }\n    if (typeof result.zaiPaasModel === 'string') {\n        validated.zaiPaasModel = result.zaiPaasModel;\n    }\n    if (typeof result.zaiCodingModel === 'string') {\n        validated.zaiCodingModel = result.zaiCodingModel;\n    }\n    // Validate customTags (array of Tag objects)\n    if (isCustomTags(result.customTags)) {\n        validated.customTags = result.customTags;\n    }\n    return validated;\n}\n/**\n * Validates customTags storage result\n * @param result - Storage result containing customTags\n * @returns Validated customTags or default if invalid\n */\nexport function validateCustomTagsResult(result) {\n    if (isCustomTags(result.customTags)) {\n        return { customTags: result.customTags };\n    }\n    return { customTags: DEFAULT_CUSTOM_TAGS };\n}\n// ============================================================================\n// REQUEST BODY VALIDATION\n// ============================================================================\n/**\n * Validates that a value is a valid RequestBody (non-null object)\n * @param payload - Payload to validate\n * @returns Validated RequestBody\n * @throws {Error} If payload is invalid\n */\nexport function validateRequestBody(payload) {\n    if (typeof payload !== 'object' || payload === null) {\n        throw new Error('RequestBody must be a non-null object');\n    }\n    return payload;\n}\n// ============================================================================\n// DEBOUNCE UTILITY\n// ============================================================================\n/**\n * Creates a debounced version of a function that delays invoking func until after wait milliseconds\n * have elapsed since the last time the debounced function was invoked.\n *\n * @template T - Function type to debounce\n * @param func - Function to debounce\n * @param wait - Delay in milliseconds\n * @returns Debounced function\n *\n * @example\n * const debouncedSearch = debounce((query: string) => searchAPI(query), 500);\n * inputElement.addEventListener('input', () => debouncedSearch(inputElement.value));\n */\nexport function debounce(func, wait) {\n    let timeout = null;\n    return function (...args) {\n        if (timeout !== null) {\n            clearTimeout(timeout);\n        }\n        timeout = window.setTimeout(() => func.apply(this, args), wait);\n    };\n}\n// ============================================================================\n// TYPE GUARDS FOR COMMON TYPES\n// ============================================================================\n/**\n * Type guard for BatchAnalysisProgress\n * @param value - Value to check\n * @returns True if value is a valid BatchAnalysisProgress\n */\nexport function isBatchAnalysisProgress(value) {\n    if (typeof value !== 'object' || value === null)\n        return false;\n    const obj = value;\n    const validStatuses = ['idle', 'running', 'completed', 'cancelled', 'error'];\n    return (typeof obj.status === 'string' &&\n        validStatuses.includes(obj.status) &&\n        typeof obj.total === 'number' &&\n        typeof obj.processed === 'number' &&\n        typeof obj.successful === 'number' &&\n        typeof obj.failed === 'number' &&\n        typeof obj.startTime === 'number');\n}\n","import { buildPrompt } from '../../../core/analysis';\nimport { retryWithBackoff, validateLLMResponse, logger, maskApiKey, } from './ProviderUtils';\n// ============================================================================\n// DEFAULT CONFIGURATION\n// ============================================================================\nconst DEFAULT_TIMEOUT = 300000;\nconst DEFAULT_RETRY_CONFIG = {\n    maxRetries: 3,\n    baseDelay: 1000,\n    factor: 2,\n    jitter: 0.5,\n};\n// ============================================================================\n// HELPER FUNCTIONS\n// ============================================================================\n/**\n * Fetches a URL with timeout support using AbortController\n * @param url - The URL to fetch\n * @param options - Fetch options\n * @param timeout - Timeout in milliseconds\n * @returns Promise resolving to the fetch response\n * @throws {Error} If the fetch fails or times out\n */\nasync function fetchWithTimeout(url, options = {}, timeout = DEFAULT_TIMEOUT, externalSignal) {\n    const controller = new AbortController();\n    const timeoutId = setTimeout(() => controller.abort(), timeout);\n    if (externalSignal) {\n        externalSignal.addEventListener('abort', () => {\n            clearTimeout(timeoutId);\n            controller.abort();\n        });\n    }\n    try {\n        const response = await fetch(url, {\n            ...options,\n            signal: controller.signal,\n        });\n        clearTimeout(timeoutId);\n        return response;\n    }\n    catch (error) {\n        clearTimeout(timeoutId);\n        throw error;\n    }\n}\n/**\n * Checks if an HTTP response is OK (status 200-299)\n * @param response - The fetch response\n * @returns True if the response is OK\n */\nfunction isOkResponse(response) {\n    return response.ok;\n}\n// ============================================================================\n// ABSTRACT BASE PROVIDER CLASS\n// ============================================================================\n/**\n * Abstract base class for all AI providers\n * Implements common functionality for email analysis with retry logic,\n * error handling, and response validation\n */\nexport class BaseProvider {\n    constructor(timeout = DEFAULT_TIMEOUT) {\n        this.timeout = timeout;\n        this.retryConfig = DEFAULT_RETRY_CONFIG;\n    }\n    // ========================================================================\n    // TEMPLATE METHODS (can be overridden by subclasses)\n    // ========================================================================\n    /**\n     * Extracts the API key from provider settings\n     * Default implementation uses settings.apiKey\n     * Override for providers with custom key names (e.g., openaiApiKey, zaiApiKey)\n     * @param settings - Provider settings\n     * @returns API key or undefined\n     */\n    getApiKey(settings) {\n        return settings.apiKey;\n    }\n    /**\n     * Returns the HTTP header key for authentication\n     * Default implementation returns 'Authorization'\n     * Override for providers with different auth header (e.g., Claude uses 'x-api-key')\n     * @returns Header key string\n     */\n    getAuthHeaderKey() {\n        return 'Authorization';\n    }\n    /**\n     * Formats the API key for the authentication header\n     * Default implementation uses Bearer token format\n     * Override for providers with different auth schemes\n     * @param apiKey - The API key to format\n     * @returns Formatted header value\n     */\n    formatAuthHeader(apiKey) {\n        return `Bearer ${apiKey}`;\n    }\n    /**\n     * Returns additional provider-specific headers\n     * Override to add custom headers (e.g., Claude's version headers)\n     * @param settings - Provider settings\n     * @returns Additional headers object\n     */\n    getAdditionalHeaders(_settings) {\n        return {};\n    }\n    // ========================================================================\n    // COMMON UTILITY METHODS\n    // ========================================================================\n    /**\n     * Builds the analysis prompt from structured email data\n     * @param structuredData - Email data including headers, body, and attachments\n     * @param customTags - Custom tag configurations\n     * @returns Analysis prompt string\n     */\n    buildPrompt(structuredData, customTags) {\n        const result = buildPrompt(structuredData, customTags);\n        return result.prompt;\n    }\n    /**\n     * Validates the LLM response against the Tag schema\n     * @param response - Raw LLM response (string or object)\n     * @returns Validated tag response with fallback values\n     */\n    validateResponse(response) {\n        return validateLLMResponse(response);\n    }\n    /**\n     * Logs an error message with API key masking\n     * @param message - Error message\n     * @param context - Additional context (apiKey will be masked if present)\n     */\n    logError(message, context = {}) {\n        const sanitizedContext = { ...context };\n        if (sanitizedContext.apiKey) {\n            sanitizedContext.apiKey = this.maskApiKey(sanitizedContext.apiKey);\n        }\n        logger.error(message, sanitizedContext);\n    }\n    /**\n     * Logs an info message\n     * @param message - Info message\n     * @param context - Additional context\n     */\n    logInfo(message, context = {}) {\n        logger.info(message, context);\n    }\n    /**\n     * Logs a debug message\n     * @param message - Debug message\n     * @param context - Additional context\n     */\n    logDebug(message, context = {}) {\n        logger.debug(message, context);\n    }\n    /**\n     * Masks an API key for logging purposes\n     * Shows first 7 and last 3 characters with ellipsis in between\n     * @param key - The API key to mask\n     * @returns Masked key string\n     */\n    maskApiKey(key) {\n        return maskApiKey(key);\n    }\n    /**\n     * Gets the API headers for the request\n     * Uses template methods for provider-specific authentication\n     * @param settings - Provider settings\n     * @returns HTTP headers object\n     */\n    getHeaders(settings) {\n        const headers = {\n            'Content-Type': 'application/json',\n        };\n        // Add authentication header using template methods\n        const apiKey = this.getApiKey(settings);\n        if (apiKey) {\n            headers[this.getAuthHeaderKey()] = this.formatAuthHeader(apiKey);\n        }\n        // Add provider-specific headers\n        const additionalHeaders = this.getAdditionalHeaders(settings);\n        Object.assign(headers, additionalHeaders);\n        return headers;\n    }\n    // ========================================================================\n    // REQUEST EXECUTION\n    // ========================================================================\n    /**\n     * Executes the API request with retry logic and timeout handling\n     * @param settings - Provider settings\n     * @param requestBody - Request body to send\n     * @returns Promise resolving to the API response\n     * @throws {Error} If the request fails after all retries\n     */\n    async executeRequest(settings, requestBody, externalSignal) {\n        const apiUrl = this.getApiUrl();\n        const headers = this.getHeaders(settings);\n        this.logDebug('Executing API request', {\n            url: apiUrl,\n            hasApiKey: !!this.getApiKey(settings),\n            model: settings.model,\n        });\n        try {\n            const response = await retryWithBackoff(async () => {\n                const res = await fetchWithTimeout(apiUrl, {\n                    method: 'POST',\n                    headers,\n                    body: JSON.stringify(requestBody),\n                }, this.timeout, externalSignal);\n                if (!isOkResponse(res)) {\n                    const errorText = await res.text().catch(() => 'Could not read error response');\n                    this.logError('API request failed', {\n                        status: res.status,\n                        statusText: res.statusText,\n                        error: errorText,\n                    });\n                    throw new Error(`API request failed: ${res.status} ${res.statusText}`);\n                }\n                return res;\n            }, this.retryConfig);\n            return response;\n        }\n        catch (error) {\n            this.logError('Request execution failed', {\n                error: error instanceof Error ? error.message : String(error),\n                url: apiUrl,\n            });\n            throw error;\n        }\n    }\n    // ========================================================================\n    // PUBLIC ENTRY POINT\n    // ========================================================================\n    /**\n     * Analyzes an email using the AI provider\n     * This is the main entry point for email analysis\n     * @param input - Analysis input parameters\n     * @returns Promise resolving to validated tag response, or null on error\n     */\n    async analyze(input) {\n        const { settings, structuredData, customTags, signal } = input;\n        try {\n            this.logInfo('Starting email analysis', {\n                hasBody: !!structuredData.body,\n                attachmentCount: structuredData.attachments.length,\n                tagCount: customTags.length,\n                model: settings.model,\n            });\n            if (!this.validateSettings(settings)) {\n                this.logError('Invalid provider settings', { settings });\n                throw new Error('Invalid provider settings: Missing required API key or model');\n            }\n            const prompt = this.buildPrompt(structuredData, customTags);\n            this.logDebug('Built analysis prompt', { promptLength: prompt.length });\n            const requestBody = this.buildRequestBody(settings, prompt, structuredData, customTags);\n            this.logDebug('Built request body');\n            const response = await this.executeRequest(settings, requestBody, signal);\n            const responseData = await response.json();\n            this.logDebug('Parsing provider response');\n            const parsedResponse = this.parseResponse(responseData);\n            const validatedResponse = this.validateResponse(parsedResponse);\n            this.logInfo('Email analysis completed', {\n                tagCount: validatedResponse.tags.length,\n                confidence: validatedResponse.confidence,\n            });\n            return validatedResponse;\n        }\n        catch (error) {\n            this.logError('Email analysis failed', {\n                error: error instanceof Error ? error.message : String(error),\n                stack: error instanceof Error ? error.stack : undefined,\n            });\n            // Re-throw the error with context\n            if (error instanceof Error) {\n                throw error;\n            }\n            throw new Error(String(error));\n        }\n    }\n}\n","import { htmlToText } from 'html-to-text';\nimport { PROMPT_BASE, HARDCODED_TAGS } from './config';\nimport { logger } from '../src/infrastructure/providers/ProviderUtils';\n// ============================================================================\n// Type Guards\n// ============================================================================\n/**\n * Type guard to check if a part has nested parts\n */\nfunction hasNestedParts(part) {\n    return part.parts !== undefined && part.parts.length > 0;\n}\n/**\n * Type guard to check if a part is a plain text body\n */\nfunction isPlainTextBody(part) {\n    return part.contentType === 'text/plain' && !part.isAttachment;\n}\n/**\n * Type guard to check if a part is an HTML body\n */\nfunction isHtmlBody(part) {\n    return part.contentType === 'text/html' && !part.isAttachment;\n}\n/**\n * Type guard to check if a part is an attachment\n */\nfunction isAttachment(part) {\n    return part.isAttachment || part.name !== undefined;\n}\n// ============================================================================\n// Email Parsing Functions\n// ============================================================================\n/**\n * Recursively parses email parts to extract text content and attachments\n * @param parts - Array of email parts to parse\n * @returns Parsed email with body and attachments\n */\nexport function findEmailParts(parts) {\n    let textBody = '';\n    let htmlBody = '';\n    const attachments = [];\n    logger.debug('Parsing email parts...');\n    /**\n     * Recursively processes nested email parts\n     */\n    function recurse(part) {\n        if (hasNestedParts(part)) {\n            part.parts.forEach(recurse);\n            return;\n        }\n        if (isPlainTextBody(part)) {\n            textBody = part.body;\n        }\n        else if (isHtmlBody(part)) {\n            htmlBody = part.body;\n        }\n        else if (isAttachment(part) && part.name) {\n            attachments.push({\n                name: part.name,\n                mimeType: part.contentType,\n                size: part.size || 0,\n            });\n        }\n    }\n    parts.forEach(recurse);\n    // Convert HTML to plain text if available, otherwise use text body\n    const finalBody = htmlBody ? convertHtmlToText(htmlBody) : textBody;\n    return { body: finalBody, attachments };\n}\n/**\n * Converts HTML content to plain text\n * @param html - HTML string to convert\n * @returns Plain text representation of the HTML\n */\nfunction convertHtmlToText(html) {\n    return htmlToText(html, { wordwrap: 130 });\n}\n// ============================================================================\n// Prompt Building Functions\n// ============================================================================\n/**\n * Builds a prompt for AI analysis with proper context limit handling\n * @param structuredData - Structured email data including headers, body, and attachments\n * @param customTags - Array of custom tag configurations\n * @returns Object containing constructed prompt and all tags description\n */\nexport function buildPrompt(structuredData, customTags) {\n    // 1. Alle Tags sammeln und mergen\n    const hardcodedTagsAsArray = Object.values(HARDCODED_TAGS);\n    const allTags = [...hardcodedTagsAsArray, ...customTags];\n    // 2. Tag-Definitionen als Text-Format generieren (NICHT als JSON!)\n    const tagNamesList = allTags.map((tag) => tag.key).join(', ');\n    const instructionsText = `\n\n=== AVAILABLE TAGS ===\nThe following tags are available: ${tagNamesList}\n\n=== TAG DEFINITIONS ===\n${allTags.map((tag) => `${tag.key}: ${tag.prompt || 'custom tag'}`).join('\\n')}\n\n### INSTRUCTIONS\nBased on the data above, return a JSON object with:\n- tags: array of tag keys where the check is true\n- confidence: number (0.0-1.0)\n- reasoning: brief explanation\n\nIMPORTANT: Return ONLY the JSON object, not the individual tag values!\n`;\n    // 3. Headers und Attachments JSON\n    const headersJSON = JSON.stringify(structuredData.headers, null, 2);\n    const attachmentsJSON = JSON.stringify(structuredData.attachments, null, 2);\n    // 4. Platzhalter ersetzen\n    const finalPrompt = `${PROMPT_BASE}\\n${instructionsText}`\n        .replace('{headers}', headersJSON)\n        .replace('{body}', structuredData.body)\n        .replace('{attachments}', attachmentsJSON);\n    // 5. Debug-Log hinzufgen\n    logger.debug('[DEBUG-PROMPT] Generated prompt:', {\n        tagDefinitionsCount: allTags.length,\n        promptLength: finalPrompt.length,\n    });\n    return {\n        prompt: finalPrompt,\n        allTagsDescription: tagNamesList,\n    };\n}\n/**\n * Truncates text to specified length\n * @param text - Text to truncate\n * @param maxLength - Maximum length of the output text\n * @returns Truncated text\n */\nexport function truncateText(text, maxLength) {\n    if (text.length <= maxLength) {\n        return text;\n    }\n    return text.substring(0, maxLength);\n}\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { BaseProvider } from '../BaseProvider';\nfunction isOpenAIChatCompletionResponse(response) {\n    return (typeof response === 'object' &&\n        response !== null &&\n        'choices' in response &&\n        Array.isArray(response.choices) &&\n        response.choices.length > 0 &&\n        typeof response.choices[0] === 'object' &&\n        response.choices[0] !== null &&\n        'message' in response.choices[0]);\n}\nfunction isOpenAIErrorResponse(response) {\n    return (typeof response === 'object' &&\n        response !== null &&\n        'error' in response &&\n        typeof response.error === 'object' &&\n        response.error !== null);\n}\nfunction isRecord(value) {\n    return typeof value === 'object' && value !== null;\n}\nconst OPENAI_API_URL = 'https://api.openai.com/v1/chat/completions';\nconst OPENAI_MODEL = 'gpt-4o';\nconst ANALYSIS_SYSTEM_PROMPT = 'You are an AI email analysis assistant that analyzes emails and assigns tags.';\nlet OpenAIProvider = class OpenAIProvider extends BaseProvider {\n    constructor(logger) {\n        super();\n        this.logger = logger;\n        this.providerId = 'openai';\n        this.logger.debug('OpenAIProvider initialized');\n    }\n    getApiUrl() {\n        return OPENAI_API_URL;\n    }\n    buildRequestBody(_settings, _prompt, _structuredData, _customTags) {\n        return {\n            model: OPENAI_MODEL,\n            messages: [\n                { role: 'system', content: ANALYSIS_SYSTEM_PROMPT },\n                { role: 'user', content: _prompt },\n            ],\n            response_format: { type: 'json_object' },\n        };\n    }\n    parseResponse(response) {\n        if (!isOpenAIChatCompletionResponse(response)) {\n            if (isOpenAIErrorResponse(response)) {\n                this.logger.error('OpenAI API returned an error response', {\n                    error: response.error.message,\n                    type: response.error.type,\n                });\n            }\n            throw new Error('Invalid response format from OpenAI API');\n        }\n        const content = response.choices[0]?.message?.content;\n        if (!content || typeof content !== 'string') {\n            throw new Error('Invalid response format: missing content');\n        }\n        const parsedResponse = JSON.parse(content);\n        if (!isRecord(parsedResponse)) {\n            throw new Error('Invalid response format: parsed response is not an object');\n        }\n        return this.validateResponse(parsedResponse);\n    }\n    validateSettings(settings) {\n        const isValid = typeof settings.apiKey === 'string' && settings.apiKey.length > 0;\n        if (!isValid) {\n            this.logger.error('OpenAI Error: API key is not set.');\n        }\n        return isValid;\n    }\n    /**\n     * Fetches available models from OpenAI API\n     * @param settings - Provider settings containing API key\n     * @returns Promise resolving to an array of available model IDs\n     */\n    async listModels(settings) {\n        try {\n            const apiKey = settings.apiKey;\n            if (!apiKey) {\n                this.logger.error('OpenAI listModels: API key is missing');\n                return [];\n            }\n            const response = await fetch('https://api.openai.com/v1/models', {\n                headers: {\n                    Authorization: `Bearer ${apiKey}`,\n                },\n            });\n            if (!response.ok) {\n                this.logger.error('OpenAI listModels: API request failed', { status: response.status });\n                return [];\n            }\n            const data = await response.json();\n            if (typeof data === 'object' && data !== null && 'data' in data && Array.isArray(data.data)) {\n                const models = data.data.map((model) => {\n                    if (typeof model === 'object' && model !== null && 'id' in model) {\n                        return model.id;\n                    }\n                    return '';\n                });\n                return models.filter(Boolean);\n            }\n            return [];\n        }\n        catch (error) {\n            this.logger.error('OpenAI listModels: Failed to fetch models', {\n                error: error instanceof Error ? error.message : String(error),\n            });\n            return [];\n        }\n    }\n};\nOpenAIProvider = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], OpenAIProvider);\nexport { OpenAIProvider };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { BaseProvider } from '../BaseProvider';\nfunction isClaudeApiResponse(value) {\n    return (typeof value === 'object' &&\n        value !== null &&\n        'content' in value &&\n        Array.isArray(value.content) &&\n        'model' in value &&\n        typeof value.model === 'string');\n}\nconst CLAUDE_API_URL = 'https://api.anthropic.com/v1/messages';\nconst CLAUDE_MODEL = 'claude-sonnet-4-0';\nconst CLAUDE_API_VERSION = '2023-06-01';\nconst ANALYSIS_SYSTEM_PROMPT = 'You are an AI email analysis assistant that analyzes emails and assigns tags.';\nlet ClaudeProvider = class ClaudeProvider extends BaseProvider {\n    constructor(logger) {\n        super();\n        this.logger = logger;\n        this.providerId = 'claude';\n        this.logger.debug('ClaudeProvider initialized');\n    }\n    getApiUrl() {\n        return CLAUDE_API_URL;\n    }\n    buildRequestBody(_settings, prompt, _structuredData, _customTags) {\n        return {\n            model: CLAUDE_MODEL,\n            max_tokens: 4096,\n            system: ANALYSIS_SYSTEM_PROMPT,\n            messages: [{ role: 'user', content: prompt }],\n        };\n    }\n    parseResponse(response) {\n        if (!isClaudeApiResponse(response)) {\n            this.logger.error('Claude API returned invalid response structure', {\n                result: JSON.stringify(response).substring(0, 200),\n            });\n            throw new Error('Invalid Claude API response structure');\n        }\n        const rawText = response.content[0]?.text;\n        if (!rawText) {\n            throw new Error('Claude API response missing content text');\n        }\n        return this.validateResponse(rawText);\n    }\n    validateSettings(settings) {\n        const isValid = typeof settings.apiKey === 'string' && settings.apiKey.length > 0;\n        if (!isValid) {\n            this.logger.error('Claude Error: API key is not set.');\n        }\n        return isValid;\n    }\n    getAuthHeaderKey() {\n        return 'x-api-key';\n    }\n    formatAuthHeader(apiKey) {\n        return apiKey;\n    }\n    getAdditionalHeaders(_settings) {\n        return {\n            'anthropic-dangerous-direct-browser-access': 'true',\n            'anthropic-version': CLAUDE_API_VERSION,\n        };\n    }\n    /**\n     * Fetches available models from Anthropic API\n     * @param settings - Provider settings containing API key\n     * @returns Promise resolving to an array of available model IDs\n     */\n    async listModels(settings) {\n        try {\n            const apiKey = settings.apiKey;\n            if (!apiKey) {\n                this.logger.error('Claude listModels: API key is missing');\n                return [];\n            }\n            const response = await fetch('https://api.anthropic.com/v1/models', {\n                headers: {\n                    'x-api-key': apiKey,\n                    'anthropic-version': CLAUDE_API_VERSION,\n                },\n            });\n            if (!response.ok) {\n                this.logger.error('Claude listModels: API request failed', { status: response.status });\n                return [];\n            }\n            const data = await response.json();\n            if (typeof data === 'object' && data !== null && 'data' in data && Array.isArray(data.data)) {\n                const models = data.data.map((model) => {\n                    if (typeof model === 'object' && model !== null && 'id' in model) {\n                        return model.id;\n                    }\n                    return '';\n                });\n                return models.filter(Boolean);\n            }\n            return [];\n        }\n        catch (error) {\n            this.logger.error('Claude listModels: Failed to fetch models', {\n                error: error instanceof Error ? error.message : String(error),\n            });\n            return [];\n        }\n    }\n};\nClaudeProvider = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], ClaudeProvider);\nexport { ClaudeProvider };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { BaseProvider } from '../BaseProvider';\nconst GEMINI_MODEL = 'gemini-1.5-flash-latest';\nfunction isGeminiResponse(value) {\n    return typeof value === 'object' && value !== null && 'candidates' in value;\n}\nfunction hasValidText(candidate) {\n    return (candidate.content !== undefined &&\n        candidate.content.parts !== undefined &&\n        candidate.content.parts.length > 0 &&\n        'text' in candidate.content.parts[0] &&\n        typeof candidate.content.parts[0].text === 'string');\n}\nfunction isErrorResponse(value) {\n    return (typeof value === 'object' &&\n        value !== null &&\n        'error' in value &&\n        typeof value.error === 'object' &&\n        value.error !== null);\n}\nlet GeminiProvider = class GeminiProvider extends BaseProvider {\n    constructor(logger) {\n        super();\n        this.logger = logger;\n        this.providerId = 'gemini';\n        this.logger.debug('GeminiProvider initialized');\n    }\n    getApiUrl() {\n        if (!this.geminiApiKey) {\n            throw new Error('Gemini API key is not set');\n        }\n        return `https://generativelanguage.googleapis.com/v1beta/models/${GEMINI_MODEL}:generateContent?key=${this.geminiApiKey}`;\n    }\n    buildRequestBody(_settings, prompt, _structuredData, _customTags) {\n        return {\n            contents: [{ parts: [{ text: prompt }] }],\n            generationConfig: { response_mime_type: 'application/json' },\n        };\n    }\n    parseResponse(response) {\n        if (isErrorResponse(response)) {\n            throw new Error(`Gemini API Error: ${response.error.message} (code: ${response.error.code}, status: ${response.error.status})`);\n        }\n        if (!isGeminiResponse(response)) {\n            throw new Error('Invalid response format: missing candidates field');\n        }\n        const candidate = response.candidates?.[0];\n        if (!candidate) {\n            throw new Error('Invalid response format: no candidates returned');\n        }\n        if (!hasValidText(candidate)) {\n            throw new Error('Invalid response format: missing text content');\n        }\n        const text = candidate.content.parts[0].text;\n        return this.validateResponse(text);\n    }\n    validateSettings(settings) {\n        const isValid = typeof settings.apiKey === 'string' && settings.apiKey.length > 0;\n        if (isValid) {\n            this.geminiApiKey = settings.apiKey;\n        }\n        else {\n            this.logger.error('Gemini Error: API key is not set.');\n        }\n        return isValid;\n    }\n    getHeaders(_settings) {\n        return { 'Content-Type': 'application/json' };\n    }\n    /**\n     * Fetches available models from Google Gemini API\n     * Filters to only generative models (models that can generate text)\n     * @param settings - Provider settings containing API key\n     * @returns Promise resolving to an array of available model IDs\n     */\n    async listModels(settings) {\n        try {\n            const apiKey = settings.apiKey;\n            if (!apiKey) {\n                this.logger.error('Gemini listModels: API key is missing');\n                return [];\n            }\n            const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models?key=${apiKey}`);\n            if (!response.ok) {\n                this.logger.error('Gemini listModels: API request failed', { status: response.status });\n                return [];\n            }\n            const data = await response.json();\n            if (typeof data === 'object' &&\n                data !== null &&\n                'models' in data &&\n                Array.isArray(data.models)) {\n                const models = data.models\n                    .filter((model) => {\n                    if (typeof model === 'object' && model !== null && 'name' in model) {\n                        const name = model.name;\n                        return name.includes('generate');\n                    }\n                    return false;\n                })\n                    .map((model) => {\n                    if (typeof model === 'object' && model !== null && 'name' in model) {\n                        return model.name.replace('models/', '');\n                    }\n                    return '';\n                });\n                return models.filter(Boolean);\n            }\n            return [];\n        }\n        catch (error) {\n            this.logger.error('Gemini listModels: Failed to fetch models', {\n                error: error instanceof Error ? error.message : String(error),\n            });\n            return [];\n        }\n    }\n};\nGeminiProvider = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], GeminiProvider);\nexport { GeminiProvider };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { BaseProvider } from '../BaseProvider';\nfunction isMistralApiResponse(value) {\n    return (typeof value === 'object' &&\n        value !== null &&\n        'choices' in value &&\n        Array.isArray(value.choices) &&\n        value.choices.length > 0 &&\n        'message' in value.choices[0] &&\n        'content' in value.choices[0].message);\n}\nfunction isMistralErrorResponse(value) {\n    return typeof value === 'object' && value !== null && 'message' in value && 'type' in value;\n}\nconst MISTRAL_API_URL = 'https://api.mistral.ai/v1/chat/completions';\nconst MISTRAL_MODEL = 'mistral-large-latest';\nconst ANALYSIS_SYSTEM_PROMPT = 'You are an AI email analysis assistant that analyzes emails and assigns tags.';\nlet MistralProvider = class MistralProvider extends BaseProvider {\n    constructor(logger) {\n        super();\n        this.logger = logger;\n        this.providerId = 'mistral';\n        this.logger.debug('MistralProvider initialized');\n    }\n    getApiUrl() {\n        return MISTRAL_API_URL;\n    }\n    buildRequestBody(_settings, _prompt, _structuredData, _customTags) {\n        return {\n            model: MISTRAL_MODEL,\n            messages: [\n                { role: 'system', content: ANALYSIS_SYSTEM_PROMPT },\n                { role: 'user', content: _prompt },\n            ],\n            response_format: { type: 'json_object' },\n        };\n    }\n    parseResponse(response) {\n        if (!isMistralApiResponse(response)) {\n            if (isMistralErrorResponse(response)) {\n                throw new Error(`Mistral API error: ${response.message}`);\n            }\n            throw new Error('Invalid response structure from Mistral API');\n        }\n        const rawText = response.choices[0].message.content;\n        return this.validateResponse(rawText);\n    }\n    validateSettings(settings) {\n        const isValid = typeof settings.apiKey === 'string' && settings.apiKey.length > 0;\n        if (!isValid) {\n            this.logger.error('Mistral Error: API key is not set.');\n        }\n        return isValid;\n    }\n    /**\n     * Fetches available models from Mistral AI API\n     * @param settings - Provider settings containing API key\n     * @returns Promise resolving to an array of available model IDs\n     */\n    async listModels(settings) {\n        try {\n            const apiKey = settings.apiKey;\n            if (!apiKey) {\n                this.logger.error('Mistral listModels: API key is missing');\n                return [];\n            }\n            const response = await fetch('https://api.mistral.ai/v1/models', {\n                headers: {\n                    Authorization: `Bearer ${apiKey}`,\n                },\n            });\n            if (!response.ok) {\n                this.logger.error('Mistral listModels: API request failed', { status: response.status });\n                return [];\n            }\n            const data = await response.json();\n            if (typeof data === 'object' && data !== null && 'data' in data && Array.isArray(data.data)) {\n                const models = data.data.map((model) => {\n                    if (typeof model === 'object' && model !== null && 'id' in model) {\n                        return model.id;\n                    }\n                    return '';\n                });\n                return models.filter(Boolean);\n            }\n            return [];\n        }\n        catch (error) {\n            this.logger.error('Mistral listModels: Failed to fetch models', {\n                error: error instanceof Error ? error.message : String(error),\n            });\n            return [];\n        }\n    }\n};\nMistralProvider = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], MistralProvider);\nexport { MistralProvider };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { BaseProvider } from '../BaseProvider';\nfunction isOllamaGenerateResponse(data) {\n    return (typeof data === 'object' &&\n        data !== null &&\n        'response' in data &&\n        'done' in data &&\n        typeof data.response === 'string' &&\n        typeof data.done === 'boolean');\n}\nfunction isOllamaErrorResponse(data) {\n    return (typeof data === 'object' &&\n        data !== null &&\n        'error' in data &&\n        typeof data.error === 'string');\n}\nconst DEFAULT_OLLAMA_URL = 'http://localhost:11434/api/generate';\nconst DEFAULT_OLLAMA_MODEL = 'gemma3:27b';\nlet OllamaProvider = class OllamaProvider extends BaseProvider {\n    constructor(logger) {\n        super();\n        this.logger = logger;\n        this.providerId = 'ollama';\n        this.logger.debug('OllamaProvider initialized');\n    }\n    getApiUrl() {\n        return this.ollamaApiUrl ?? DEFAULT_OLLAMA_URL;\n    }\n    buildRequestBody(_settings, prompt, _structuredData, _customTags) {\n        return {\n            model: this.ollamaModel ?? DEFAULT_OLLAMA_MODEL,\n            prompt,\n            format: 'json',\n            stream: false,\n        };\n    }\n    parseResponse(response) {\n        if (isOllamaErrorResponse(response)) {\n            throw new Error(`Ollama API error: ${response.error}`);\n        }\n        if (!isOllamaGenerateResponse(response)) {\n            throw new Error('Invalid response structure from Ollama API');\n        }\n        const rawText = response.response;\n        const validatedResponse = this.validateResponse(rawText);\n        this.logger.info('Ollama analysis completed successfully', {\n            url: this.ollamaApiUrl,\n            model: this.ollamaModel,\n            tags: validatedResponse.tags,\n            confidence: validatedResponse.confidence,\n        });\n        return validatedResponse;\n    }\n    validateSettings(settings) {\n        const isValid = typeof settings.apiUrl === 'string' &&\n            settings.apiUrl.length > 0 &&\n            typeof settings.model === 'string' &&\n            settings.model.length > 0;\n        if (isValid) {\n            this.ollamaApiUrl = settings.apiUrl;\n            this.ollamaModel = settings.model;\n        }\n        else {\n            this.logger.error('Ollama Error: Invalid settings provided');\n        }\n        return isValid;\n    }\n    getHeaders(_settings) {\n        return { 'Content-Type': 'application/json' };\n    }\n    /**\n     * Fetches available models from Ollama API\n     * @param settings - Provider settings containing API URL\n     * @returns Promise resolving to an array of available model names\n     */\n    async listModels(settings) {\n        try {\n            const baseUrl = settings.apiUrl || DEFAULT_OLLAMA_URL.replace('/api/generate', '');\n            const tagsUrl = `${baseUrl}/api/tags`;\n            const response = await fetch(tagsUrl, {\n                headers: {\n                    'Content-Type': 'application/json',\n                },\n            });\n            if (!response.ok) {\n                this.logger.error('Ollama listModels: API request failed', { status: response.status });\n                return [];\n            }\n            const data = await response.json();\n            if (typeof data === 'object' &&\n                data !== null &&\n                'models' in data &&\n                Array.isArray(data.models)) {\n                const models = data.models.map((model) => {\n                    if (typeof model === 'object' && model !== null && 'name' in model) {\n                        return model.name;\n                    }\n                    return '';\n                });\n                return models.filter(Boolean);\n            }\n            return [];\n        }\n        catch (error) {\n            this.logger.error('Ollama listModels: Failed to fetch models', {\n                error: error instanceof Error ? error.message : String(error),\n            });\n            return [];\n        }\n    }\n};\nOllamaProvider = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], OllamaProvider);\nexport { OllamaProvider };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { BaseProvider } from '../BaseProvider';\nfunction isDeepSeekApiResponse(data) {\n    return (typeof data === 'object' &&\n        data !== null &&\n        'id' in data &&\n        typeof data.id === 'string' &&\n        'object' in data &&\n        typeof data.object === 'string' &&\n        'created' in data &&\n        typeof data.created === 'number' &&\n        'model' in data &&\n        typeof data.model === 'string' &&\n        'choices' in data &&\n        Array.isArray(data.choices) &&\n        data.choices.length > 0 &&\n        typeof data.choices[0] === 'object' &&\n        data.choices[0] !== null &&\n        'message' in data.choices[0] &&\n        typeof data.choices[0].message === 'object' &&\n        data.choices[0].message !== null &&\n        'content' in data.choices[0].message &&\n        typeof data.choices[0].message.content === 'string' &&\n        'usage' in data &&\n        typeof data.usage === 'object' &&\n        data.usage !== null &&\n        'total_tokens' in data.usage &&\n        typeof data.usage.total_tokens === 'number');\n}\nconst DEEPSEEK_API_URL = 'https://api.deepseek.com/chat/completions';\nconst DEEPSEEK_MODEL = 'deepseek-chat';\nconst ANALYSIS_SYSTEM_PROMPT = 'You are an AI email analysis assistant that analyzes emails and assigns tags.';\nlet DeepseekProvider = class DeepseekProvider extends BaseProvider {\n    constructor(logger) {\n        super();\n        this.logger = logger;\n        this.providerId = 'deepseek';\n        this.logger.debug('DeepseekProvider initialized');\n    }\n    getApiUrl() {\n        return DEEPSEEK_API_URL;\n    }\n    buildRequestBody(_settings, _prompt, _structuredData, _customTags) {\n        return {\n            model: DEEPSEEK_MODEL,\n            messages: [\n                { role: 'system', content: ANALYSIS_SYSTEM_PROMPT },\n                { role: 'user', content: _prompt },\n            ],\n            stream: false,\n        };\n    }\n    parseResponse(response) {\n        if (!isDeepSeekApiResponse(response)) {\n            this.logger.error('DeepSeek API returned invalid response structure');\n            throw new Error('Invalid API response structure');\n        }\n        const rawText = response.choices[0]?.message?.content;\n        if (!rawText) {\n            throw new Error('Invalid response format: missing content');\n        }\n        return this.validateResponse(rawText);\n    }\n    validateSettings(settings) {\n        const isValid = typeof settings.apiKey === 'string' && settings.apiKey.length > 0;\n        if (!isValid) {\n            this.logger.error('DeepSeek Error: API key is not set.');\n        }\n        return isValid;\n    }\n    /**\n     * Fetches available models from DeepSeek API\n     * @param settings - Provider settings containing API key\n     * @returns Promise resolving to an array of available model IDs\n     */\n    async listModels(settings) {\n        try {\n            const apiKey = settings.apiKey;\n            if (!apiKey) {\n                this.logger.error('Deepseek listModels: API key is missing');\n                return [];\n            }\n            const response = await fetch('https://api.deepseek.com/v1/models', {\n                headers: {\n                    Authorization: `Bearer ${apiKey}`,\n                },\n            });\n            if (!response.ok) {\n                this.logger.error('Deepseek listModels: API request failed', { status: response.status });\n                return [];\n            }\n            const data = await response.json();\n            if (typeof data === 'object' && data !== null && 'data' in data && Array.isArray(data.data)) {\n                const models = data.data.map((model) => {\n                    if (typeof model === 'object' && model !== null && 'id' in model) {\n                        return model.id;\n                    }\n                    return '';\n                });\n                return models.filter(Boolean);\n            }\n            return [];\n        }\n        catch (error) {\n            this.logger.error('Deepseek listModels: Failed to fetch models', {\n                error: error instanceof Error ? error.message : String(error),\n            });\n            return [];\n        }\n    }\n};\nDeepseekProvider = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], DeepseekProvider);\nexport { DeepseekProvider };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { BaseProvider } from '../BaseProvider';\nimport { extractJson } from '../ProviderUtils';\n// ============================================================================\n// Zai API Types\n// ============================================================================\nconst ZAI_PAAS_API_URL = 'https://api.z.ai/api/paas/v4/chat/completions';\nconst DEFAULT_MODEL = 'glm-4.5';\n// ============================================================================\n// Zai PaaS Provider Implementation\n// ============================================================================\nconst ANALYSIS_SYSTEM_PROMPT_ZAI = 'You are an AI email analysis assistant that analyzes emails and assigns tags.';\n/**\n * Zai PaaS Provider for Z.ai API (General Purpose AI Models).\n *\n * Provider for accessing Z.ai's general-purpose AI models through the PaaS API.\n * Supports models like glm-4.5, glm-4-plus, etc.\n */\nlet ZaiPaaSProvider = class ZaiPaaSProvider extends BaseProvider {\n    constructor(logger) {\n        super();\n        this.logger = logger;\n        this.providerId = 'zai-paas';\n        this.zaiModel = DEFAULT_MODEL;\n        this.logger.debug('ZaiPaaSProvider initialized');\n    }\n    getApiUrl() {\n        return this.zaiBaseUrl ?? ZAI_PAAS_API_URL;\n    }\n    buildRequestBody(_settings, _prompt, _structuredData, _customTags) {\n        return {\n            model: this.zaiModel,\n            messages: [\n                { role: 'system', content: ANALYSIS_SYSTEM_PROMPT_ZAI },\n                { role: 'user', content: _prompt },\n            ],\n            thinking: { type: 'enabled' },\n            temperature: 0.3,\n            max_tokens: 4000,\n        };\n    }\n    parseResponse(response) {\n        if (!this.isZaiChatCompletionResponse(response)) {\n            if (this.isZaiErrorResponse(response)) {\n                this.logger.error('Z.ai API returned an error response', {\n                    error: response.error.message,\n                    type: response.error.type,\n                    param: response.error.param,\n                    code: response.error.code,\n                });\n            }\n            throw new Error('Invalid response format from Z.ai API');\n        }\n        const content = response.choices[0]?.message?.content;\n        if (!this.isNonEmptyString(content)) {\n            throw new Error('Invalid response format: missing content');\n        }\n        const jsonText = extractJson(content);\n        const parsedResponse = JSON.parse(jsonText);\n        if (!this.isRecord(parsedResponse)) {\n            throw new Error('Invalid response format: parsed response is not an object');\n        }\n        this.logger.info('Z.ai PaaS analysis completed successfully', {\n            model: response.model,\n            usage: response.usage,\n        });\n        return this.validateResponse(parsedResponse);\n    }\n    validateSettings(settings) {\n        const isValid = typeof settings.apiKey === 'string' && settings.apiKey.length > 0;\n        if (isValid) {\n            if (settings.model && typeof settings.model === 'string') {\n                this.zaiModel = settings.model;\n            }\n            if (settings.apiUrl && typeof settings.apiUrl === 'string') {\n                this.zaiBaseUrl = settings.apiUrl;\n            }\n        }\n        else {\n            this.logger.error('Z.ai PaaS Error: API key is not set.');\n        }\n        return isValid;\n    }\n    // ==========================================================================\n    // IProvider Implementation\n    // ==========================================================================\n    /**\n     * Lists available models from Z.ai PaaS API.\n     *\n     * Fetches the list of available models from the Z.ai PaaS API endpoint.\n     * No caching is used - models are fetched fresh each time.\n     *\n     * @param settings - Provider settings containing the API key\n     * @returns Promise resolving to an array of available model names\n     */\n    async listModels(settings) {\n        if (!settings.apiKey || typeof settings.apiKey !== 'string') {\n            throw new Error('API key is required to list models');\n        }\n        const modelsEndpoint = 'https://api.z.ai/api/paas/v4/models';\n        try {\n            const response = await fetch(modelsEndpoint, {\n                method: 'GET',\n                headers: {\n                    Authorization: `Bearer ${settings.apiKey}`,\n                },\n            });\n            if (!response.ok) {\n                throw new Error(`Failed to fetch Z.ai PaaS models: ${response.status} ${response.statusText}`);\n            }\n            const data = await response.json();\n            if (!this.isZaiModelsResponse(data)) {\n                throw new Error('Invalid response format from Z.ai PaaS models endpoint');\n            }\n            const models = data.data.map((model) => model.id);\n            return models;\n        }\n        catch (error) {\n            this.logger.error('Failed to fetch Z.ai PaaS models', {\n                error: error instanceof Error ? error.message : String(error),\n            });\n            const FALLBACK_MODELS = [\n                'glm-4.5',\n                'glm-4.5-air',\n                'glm-4-plus',\n                'glm-4.5-airx',\n                'glm-4.5-flash',\n            ];\n            return FALLBACK_MODELS;\n        }\n    }\n    // ==========================================================================\n    // Type Guards\n    // ==========================================================================\n    isZaiChatCompletionResponse(response) {\n        return (typeof response === 'object' &&\n            response !== null &&\n            'choices' in response &&\n            Array.isArray(response.choices) &&\n            response.choices.length > 0 &&\n            typeof response.choices[0] === 'object' &&\n            response.choices[0] !== null &&\n            'message' in response.choices[0]);\n    }\n    isZaiErrorResponse(response) {\n        return (typeof response === 'object' &&\n            response !== null &&\n            'error' in response &&\n            typeof response.error === 'object' &&\n            response.error !== null);\n    }\n    isRecord(value) {\n        return typeof value === 'object' && value !== null;\n    }\n    isNonEmptyString(value) {\n        return typeof value === 'string' && value.length > 0;\n    }\n    isZaiModelsResponse(response) {\n        return (typeof response === 'object' &&\n            response !== null &&\n            'data' in response &&\n            Array.isArray(response.data) &&\n            response.data.every((item) => typeof item === 'object' &&\n                item !== null &&\n                'id' in item &&\n                typeof item.id === 'string'));\n    }\n};\nZaiPaaSProvider = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], ZaiPaaSProvider);\nexport { ZaiPaaSProvider };\n","var __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { BaseProvider } from '../BaseProvider';\nimport { extractJson } from '../ProviderUtils';\n// ============================================================================\n// Zai API Types\n// ============================================================================\nconst ZAI_CODING_API_URL = 'https://api.z.ai/api/paas/v4/chat/completions';\nconst DEFAULT_MODEL = 'glm-4.7';\n// ============================================================================\n// Zai Coding Provider Implementation\n// ============================================================================\nconst ANALYSIS_SYSTEM_PROMPT_ZAI = 'You are an AI email analysis assistant that analyzes emails and assigns tags.';\n/**\n * Zai Coding Provider for Z.ai API (Coding-Specific AI Models).\n *\n * Provider for accessing Z.ai's coding-specific AI models through the Coding API.\n * Supports models like glm-4.7 and other coding-optimized models.\n */\nlet ZaiCodingProvider = class ZaiCodingProvider extends BaseProvider {\n    constructor(logger) {\n        super();\n        this.logger = logger;\n        this.providerId = 'zai-coding';\n        this.zaiModel = DEFAULT_MODEL;\n        this.logger.debug('ZaiCodingProvider initialized');\n    }\n    getApiUrl() {\n        return this.zaiBaseUrl ?? ZAI_CODING_API_URL;\n    }\n    buildRequestBody(_settings, _prompt, _structuredData, _customTags) {\n        return {\n            model: this.zaiModel,\n            messages: [\n                { role: 'system', content: ANALYSIS_SYSTEM_PROMPT_ZAI },\n                { role: 'user', content: _prompt },\n            ],\n            thinking: { type: 'enabled' },\n            temperature: 0.3,\n            max_tokens: 4000,\n        };\n    }\n    parseResponse(response) {\n        if (!this.isZaiChatCompletionResponse(response)) {\n            if (this.isZaiErrorResponse(response)) {\n                this.logger.error('Z.ai API returned an error response', {\n                    error: response.error.message,\n                    type: response.error.type,\n                    param: response.error.param,\n                    code: response.error.code,\n                });\n            }\n            throw new Error('Invalid response format from Z.ai API');\n        }\n        const content = response.choices[0]?.message?.content;\n        if (!this.isNonEmptyString(content)) {\n            throw new Error('Invalid response format: missing content');\n        }\n        const jsonText = extractJson(content);\n        const parsedResponse = JSON.parse(jsonText);\n        if (!this.isRecord(parsedResponse)) {\n            throw new Error('Invalid response format: parsed response is not an object');\n        }\n        this.logger.info('Z.ai Coding analysis completed successfully', {\n            model: response.model,\n            usage: response.usage,\n        });\n        return this.validateResponse(parsedResponse);\n    }\n    validateSettings(settings) {\n        const isValid = typeof settings.apiKey === 'string' && settings.apiKey.length > 0;\n        if (isValid) {\n            if (settings.model && typeof settings.model === 'string') {\n                this.zaiModel = settings.model;\n            }\n            if (settings.apiUrl && typeof settings.apiUrl === 'string') {\n                this.zaiBaseUrl = settings.apiUrl;\n            }\n        }\n        else {\n            this.logger.error('Z.ai Coding Error: API key is not set.');\n        }\n        return isValid;\n    }\n    // ==========================================================================\n    // IProvider Implementation\n    // ==========================================================================\n    /**\n     * Lists available models from Z.ai Coding API.\n     *\n     * Fetches the list of available models from the Z.ai Coding API endpoint.\n     * No caching is used - models are fetched fresh each time.\n     *\n     * @param settings - Provider settings containing the API key\n     * @returns Promise resolving to an array of available model names\n     */\n    async listModels(settings) {\n        if (!settings.apiKey || typeof settings.apiKey !== 'string') {\n            throw new Error('API key is required to list models');\n        }\n        const modelsEndpoint = 'https://api.z.ai/api/paas/v4/models';\n        try {\n            const response = await fetch(modelsEndpoint, {\n                method: 'GET',\n                headers: {\n                    Authorization: `Bearer ${settings.apiKey}`,\n                },\n            });\n            if (!response.ok) {\n                throw new Error(`Failed to fetch Z.ai Coding models: ${response.status} ${response.statusText}`);\n            }\n            const data = await response.json();\n            if (!this.isZaiModelsResponse(data)) {\n                throw new Error('Invalid response format from Z.ai Coding models endpoint');\n            }\n            const models = data.data.map((model) => model.id);\n            return models;\n        }\n        catch (error) {\n            this.logger.error('Failed to fetch Z.ai Coding models', {\n                error: error instanceof Error ? error.message : String(error),\n            });\n            const FALLBACK_MODELS = ['glm-4.7'];\n            return FALLBACK_MODELS;\n        }\n    }\n    // ==========================================================================\n    // Type Guards\n    // ==========================================================================\n    isZaiChatCompletionResponse(response) {\n        return (typeof response === 'object' &&\n            response !== null &&\n            'choices' in response &&\n            Array.isArray(response.choices) &&\n            response.choices.length > 0 &&\n            typeof response.choices[0] === 'object' &&\n            response.choices[0] !== null &&\n            'message' in response.choices[0]);\n    }\n    isZaiErrorResponse(response) {\n        return (typeof response === 'object' &&\n            response !== null &&\n            'error' in response &&\n            typeof response.error === 'object' &&\n            response.error !== null);\n    }\n    isRecord(value) {\n        return typeof value === 'object' && value !== null;\n    }\n    isNonEmptyString(value) {\n        return typeof value === 'string' && value.length > 0;\n    }\n    isZaiModelsResponse(response) {\n        return (typeof response === 'object' &&\n            response !== null &&\n            'data' in response &&\n            Array.isArray(response.data) &&\n            response.data.every((item) => typeof item === 'object' &&\n                item !== null &&\n                'id' in item &&\n                typeof item.id === 'string'));\n    }\n};\nZaiCodingProvider = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], ZaiCodingProvider);\nexport { ZaiCodingProvider };\n","/**\n * ProviderFactory - Factory class for managing AI Provider instances using TSyringe DI container.\n *\n * This factory registers and resolves provider instances, wrapping legacy BaseProvider\n * implementations with BaseProviderAdapter for dependency injection compatibility.\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, container, inject } from 'tsyringe';\nimport { BaseProviderAdapter } from './BaseProviderAdapter';\nimport { OpenAIProvider } from './impl/OpenAIProvider';\nimport { ClaudeProvider } from './impl/ClaudeProvider';\nimport { GeminiProvider } from './impl/GeminiProvider';\nimport { MistralProvider } from './impl/MistralProvider';\nimport { OllamaProvider } from './impl/OllamaProvider';\nimport { DeepseekProvider } from './impl/DeepseekProvider';\nimport { ZaiPaaSProvider } from './impl/ZaiPaaSProvider';\nimport { ZaiCodingProvider } from './impl/ZaiCodingProvider';\nimport 'reflect-metadata';\n// ============================================================================\n// TOKEN DEFINITIONS\n// ============================================================================\n/**\n * Provider registration tokens for dependency injection.\n * Each provider has a unique token for registration in the DI container.\n */\nexport const ProviderTokens = {\n    LOGGER: 'ILogger',\n    OPENAI_PROVIDER: 'provider:openai',\n    CLAUDE_PROVIDER: 'provider:claude',\n    GEMINI_PROVIDER: 'provider:gemini',\n    MISTRAL_PROVIDER: 'provider:mistral',\n    OLLAMA_PROVIDER: 'provider:ollama',\n    DEEPSEEK_PROVIDER: 'provider:deepseek',\n    ZAI_PAAS_PROVIDER: 'provider:zai-paas',\n    ZAI_CODING_PROVIDER: 'provider:zai-coding',\n};\n/**\n * Provider ID to token mapping\n */\nconst PROVIDER_ID_TO_TOKEN = new Map([\n    ['openai', ProviderTokens.OPENAI_PROVIDER],\n    ['claude', ProviderTokens.CLAUDE_PROVIDER],\n    ['gemini', ProviderTokens.GEMINI_PROVIDER],\n    ['mistral', ProviderTokens.MISTRAL_PROVIDER],\n    ['ollama', ProviderTokens.OLLAMA_PROVIDER],\n    ['deepseek', ProviderTokens.DEEPSEEK_PROVIDER],\n    ['zai-paas', ProviderTokens.ZAI_PAAS_PROVIDER],\n    ['zai-coding', ProviderTokens.ZAI_CODING_PROVIDER],\n]);\n/**\n * Provider ID to class mapping\n * Maps provider IDs to their implementation classes\n */\nconst PROVIDER_ID_TO_CLASS = new Map([\n    ['openai', OpenAIProvider],\n    ['claude', ClaudeProvider],\n    ['gemini', GeminiProvider],\n    ['mistral', MistralProvider],\n    ['ollama', OllamaProvider],\n    ['deepseek', DeepseekProvider],\n    ['zai-paas', ZaiPaaSProvider],\n    ['zai-coding', ZaiCodingProvider],\n]);\n// ============================================================================\n// TYPE GUARDS\n// ============================================================================\n/**\n * Type guard to check if a value implements IProvider interface\n */\nfunction isIProvider(value) {\n    return (typeof value === 'object' &&\n        value !== null &&\n        'providerId' in value &&\n        'analyze' in value &&\n        'validateSettings' in value);\n}\n// ============================================================================\n// PROVIDER FACTORY CLASS\n// ============================================================================\n/**\n * ProviderFactory manages the lifecycle and registration of AI Provider instances.\n *\n * This factory is responsible for:\n * - Registering providers as singletons in the TSyringe DI container\n * - Wrapping legacy BaseProvider implementations with BaseProviderAdapter\n * - Resolving provider instances on demand\n * - Maintaining a registry of available providers\n *\n * @example\n * ```typescript\n * // Use via DI container\n * const providerFactory = container.resolve<ProviderFactory>(ProviderFactory);\n *\n * // Get a specific provider\n * const provider = providerFactory.getProvider('openai');\n * const result = await provider.analyze({...});\n *\n * // List available providers\n * const providers = providerFactory.getAvailableProviders();\n * console.log(providers); // ['openai', 'claude', ...]\n * ```\n */\nlet ProviderFactory = class ProviderFactory {\n    // ========================================================================\n    // CONSTRUCTOR\n    // ========================================================================\n    constructor(logger) {\n        this.registeredProviders = new Map();\n        this.initialized = false;\n        this.logger = logger;\n        this.initialize();\n    }\n    // ========================================================================\n    // INITIALIZATION\n    // ========================================================================\n    /**\n     * Initializes the ProviderFactory and registers core services.\n     *\n     * This method is called by the constructor. It registers the provider\n     * adapters for all known providers.\n     *\n     * @remarks\n     * This method is idempotent - calling it multiple times has no effect.\n     */\n    initialize() {\n        if (this.initialized) {\n            this.logger.debug('ProviderFactory already initialized');\n            return;\n        }\n        this.logger.info('Initializing ProviderFactory');\n        // Register provider adapters for known providers\n        this.registerAdapterTokens();\n        this.initialized = true;\n        this.logger.info('ProviderFactory initialized successfully');\n    }\n    /**\n     * Registers adapter tokens for all known providers.\n     *\n     * This registers the IProvider implementations (BaseProviderAdapter) for\n     * each provider token. The actual BaseProvider implementations will be\n     * lazily instantiated when needed.\n     *\n     * @private\n     */\n    registerAdapterTokens() {\n        const providerIds = Array.from(PROVIDER_ID_TO_TOKEN.keys());\n        providerIds.forEach((providerId) => {\n            const token = PROVIDER_ID_TO_TOKEN.get(providerId);\n            if (!token) {\n                this.logger.warn('Failed to get token for provider', { providerId });\n                return;\n            }\n            // Register BaseProviderAdapter as a factory\n            container.register(token, {\n                useFactory: () => {\n                    this.logger.debug('Creating adapter for provider', { providerId });\n                    // Get the provider class from mapping\n                    const ProviderClass = PROVIDER_ID_TO_CLASS.get(providerId);\n                    if (!ProviderClass) {\n                        this.logger.error('Provider class not found', { providerId });\n                        throw new Error(`Provider class not found for provider: ${providerId}`);\n                    }\n                    // Instantiate the provider with logger\n                    // Type assertion: all provider classes extend BaseProvider\n                    const providerInstance = new ProviderClass(this.logger);\n                    this.logger.debug('Provider instantiated', { providerId });\n                    // Create adapter with the provider instance\n                    return new BaseProviderAdapter(providerId, providerInstance, this.logger);\n                },\n            });\n            // Store using providerId as the key, token as the value\n            this.registeredProviders.set(providerId, token);\n            this.logger.debug('Registered provider adapter', { providerId });\n        });\n    }\n    // ========================================================================\n    // PROVIDER RESOLUTION\n    // ========================================================================\n    /**\n     * Gets a provider instance by its provider ID.\n     *\n     * @param providerId - The unique identifier for the provider (e.g., 'openai', 'claude')\n     * @returns The IProvider instance\n     * @throws {Error} If provider is not registered\n     *\n     * @example\n     * ```typescript\n     * const provider = providerFactory.getProvider('openai');\n     * const isValid = await provider.validateSettings({ apiKey: 'sk-...' });\n     * ```\n     */\n    getProvider(providerId) {\n        const token = PROVIDER_ID_TO_TOKEN.get(providerId);\n        if (!token) {\n            const available = this.getAvailableProviders();\n            this.logger.error('Provider not found', {\n                providerId,\n                availableProviders: available,\n            });\n            throw new Error(`Provider '${providerId}' is not registered. Available providers: ${available.join(', ')}`);\n        }\n        try {\n            this.logger.debug('Resolving provider', { providerId });\n            const provider = container.resolve(token);\n            if (!isIProvider(provider)) {\n                this.logger.error('Resolved object is not an IProvider', { providerId });\n                throw new Error(`Resolved object is not a valid IProvider: ${providerId}`);\n            }\n            this.logger.debug('Provider resolved successfully', {\n                providerId,\n                resolvedProviderId: provider.providerId,\n            });\n            return provider;\n        }\n        catch (error) {\n            this.logger.error('Failed to resolve provider', {\n                providerId,\n                error: error instanceof Error ? error.message : String(error),\n            });\n            throw error;\n        }\n    }\n    // ========================================================================\n    // PROVIDER REGISTRATION\n    // ========================================================================\n    /**\n     * Registers a custom provider with the factory.\n     *\n     * This method allows registration of custom or dynamically created providers.\n     * The provider is registered as a singleton in the DI container.\n     *\n     * @param providerId - Unique identifier for the provider\n     * @param provider - The provider implementation (any type, will be wrapped in adapter if needed)\n     * @throws {Error} If providerId is empty or provider is null/undefined\n     *\n     * @example\n     * ```typescript\n     * providerFactory.registerProvider('custom', new CustomProvider());\n     * const provider = providerFactory.getProvider('custom');\n     * ```\n     */\n    registerProvider(providerId, provider) {\n        if (!providerId || typeof providerId !== 'string') {\n            throw new Error('Provider ID must be a non-empty string');\n        }\n        if (provider === null || provider === undefined) {\n            throw new Error('Provider cannot be null or undefined');\n        }\n        this.logger.info('Registering custom provider', { providerId });\n        const token = `provider:${providerId}`;\n        // If provider already implements IProvider, register it directly\n        if (isIProvider(provider)) {\n            container.registerInstance(token, provider);\n            this.logger.debug('Registered provider as IProvider implementation', { providerId });\n        }\n        else {\n            // Otherwise, wrap it in a BaseProviderAdapter\n            const adapter = new BaseProviderAdapter(providerId, provider, this.logger);\n            container.registerInstance(token, adapter);\n            this.logger.debug('Registered provider with BaseProviderAdapter', { providerId });\n        }\n        this.registeredProviders.set(providerId, token);\n        this.logger.info('Custom provider registered', { providerId });\n    }\n    // ========================================================================\n    // PROVIDER DISCOVERY\n    // ========================================================================\n    /**\n     * Returns a list of all registered provider IDs.\n     *\n     * @returns Array of provider ID strings\n     *\n     * @example\n     * ```typescript\n     * const providers = providerFactory.getAvailableProviders();\n     * console.log(providers); // ['openai', 'claude', 'ollama', ...]\n     * ```\n     */\n    getAvailableProviders() {\n        return Array.from(this.registeredProviders.keys()).sort();\n    }\n    /**\n     * Checks if a provider is registered.\n     *\n     * @param providerId - The provider ID to check\n     * @returns True if the provider is registered, false otherwise\n     *\n     * @example\n     * ```typescript\n     * if (providerFactory.hasProvider('openai')) {\n     *   const provider = providerFactory.getProvider('openai');\n     * }\n     * ```\n     */\n    hasProvider(providerId) {\n        return this.registeredProviders.has(providerId);\n    }\n    // ========================================================================\n    // CONTAINER ACCESS\n    // ========================================================================\n    /**\n     * Gets the TSyringe DI container instance.\n     *\n     * This provides access to the underlying container for advanced scenarios\n     * where custom registrations or resolutions are needed.\n     *\n     * @returns The TSyringe DependencyInjectionContainer instance\n     */\n    getContainer() {\n        return container;\n    }\n    /**\n     * Clears all registrations from the DI container.\n     *\n     * This method is primarily useful for testing and should not be called\n     * in production code.\n     *\n     * @remarks\n     * After calling this method, the factory needs to be re-initialized.\n     */\n    reset() {\n        this.logger.warn('Resetting ProviderFactory');\n        container.clearInstances();\n        container.reset();\n        this.registeredProviders.clear();\n        this.initialized = false;\n    }\n};\nProviderFactory = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], ProviderFactory);\nexport { ProviderFactory };\n","/**\n * Event Bus\n *\n * Central event bus for publishing and subscribing to domain events.\n * Implements the Publish/Subscribe pattern for loose coupling.\n *\n * Features:\n * - Type-safe event handling with TypeScript generics\n * - Support for both synchronous and asynchronous handlers\n * - Memory leak prevention through unsubscribe functionality\n * - Comprehensive error handling with logging\n * - DI container integration via tsyringe\n *\n * @module domain/events/EventBus\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\n// ============================================================================\n// Event Bus Implementation\n// ============================================================================\n/**\n * Event Bus\n *\n * Central hub for publishing and subscribing to domain events.\n * Provides type-safe event handling with comprehensive error handling.\n *\n * The event bus is designed as a singleton in the DI container.\n * All components that need to publish or subscribe to events\n * should inject it via tsyringe.\n *\n * @example\n * ```typescript\n * // Subscribe to events\n * const unsubscribe = eventBus.subscribe<EmailAnalyzedEvent>(\n *   'EmailAnalyzed',\n *   async (event) => {\n *     console.log(`Email analyzed: ${event.messageId}`);\n *   }\n * );\n *\n * // Publish events\n * await eventBus.publish(emailAnalyzedEvent);\n *\n * // Unsubscribe when done\n * unsubscribe();\n * ```\n */\nlet EventBus = class EventBus {\n    // ==========================================================================\n    // Constructor\n    // ==========================================================================\n    /**\n     * Creates a new EventBus instance.\n     *\n     * @param logger - Logger instance for logging operations\n     */\n    constructor(logger) {\n        // ==========================================================================\n        // Private Fields\n        // ==========================================================================\n        /** Map of event type to registered handlers */\n        this.handlers = new Map();\n        /** Event bus state */\n        this.state = {\n            totalHandlers: 0,\n            totalEventsPublished: 0,\n            totalHandlerErrors: 0,\n        };\n        /** Counter for generating unique handler IDs */\n        this.handlerIdCounter = 0;\n        this.logger = logger;\n        this.logger.debug('EventBus initialized');\n    }\n    // ==========================================================================\n    // Public Methods\n    // ==========================================================================\n    /**\n     * Publishes an event to all registered handlers.\n     *\n     * All handlers are called asynchronously. Errors in individual handlers\n     * are caught and logged, but do not prevent other handlers from executing.\n     *\n     * @template T - Type of event to publish\n     * @param event - Event to publish\n     * @returns Promise resolving when all handlers have been called\n     *\n     * @example\n     * ```typescript\n     * await eventBus.publish({\n     *   eventType: 'EmailAnalyzed',\n     *   timestamp: new Date().toISOString(),\n     *   messageId: '12345',\n     *   // ... other properties\n     * });\n     * ```\n     */\n    async publish(event) {\n        const eventType = event.eventType;\n        this.logger.debug('Publishing event', { eventType });\n        // Get all handlers for this event type\n        const handlers = this.handlers.get(eventType) ?? [];\n        if (handlers.length === 0) {\n            this.logger.debug('No handlers registered for event', { eventType });\n            return;\n        }\n        this.state.totalEventsPublished++;\n        // Execute all handlers asynchronously\n        const promises = handlers.map(async (registeredHandler) => {\n            try {\n                // Call handler (sync or async)\n                await registeredHandler.handler(event);\n            }\n            catch (error) {\n                this.state.totalHandlerErrors++;\n                const errorMessage = error instanceof Error ? error.message : String(error);\n                this.logger.error('Event handler error', {\n                    eventType,\n                    handlerId: registeredHandler.id,\n                    error: errorMessage,\n                });\n                // Continue executing other handlers despite errors\n            }\n        });\n        // Wait for all handlers to complete\n        await Promise.all(promises);\n        this.logger.debug('Event published', {\n            eventType,\n            handlersCalled: handlers.length,\n        });\n    }\n    /**\n     * Subscribes a handler to an event type.\n     *\n     * The handler will be called every time an event of the specified type\n     * is published. The handler can be synchronous or asynchronous.\n     *\n     * @template T - Type of event to subscribe to\n     * @param eventType - Event type to subscribe to\n     * @param handler - Handler function to call when event is published\n     * @returns Unsubscribe function to remove the handler\n     *\n     * @example\n     * ```typescript\n     * const unsubscribe = eventBus.subscribe<EmailAnalyzedEvent>(\n     *   'EmailAnalyzed',\n     *   (event) => {\n     *     console.log(`Email analyzed: ${event.messageId}`);\n     *   }\n     * );\n     *\n     * // Later, unsubscribe\n     * unsubscribe();\n     * ```\n     */\n    subscribe(eventType, handler) {\n        const handlerId = this.generateHandlerId();\n        this.logger.debug('Subscribing to event', {\n            eventType,\n            handlerId,\n        });\n        // Create registered handler\n        const registeredHandler = {\n            id: handlerId,\n            handler: handler,\n            registeredAt: Date.now(),\n        };\n        // Register handler\n        if (!this.handlers.has(eventType)) {\n            this.handlers.set(eventType, []);\n        }\n        this.handlers.get(eventType).push(registeredHandler);\n        this.state.totalHandlers++;\n        // Return unsubscribe function\n        return () => {\n            this.unsubscribe(eventType, handlerId);\n        };\n    }\n    /**\n     * Unsubscribes a handler from an event type.\n     *\n     * Removes the handler with the specified ID from the event type.\n     * Does nothing if the handler is not found.\n     *\n     * @param eventType - Event type to unsubscribe from\n     * @param handlerId - ID of handler to remove\n     *\n     * @example\n     * ```typescript\n     * const unsubscribe = eventBus.subscribe('EmailAnalyzed', handler);\n     * // Later\n     * unsubscribe(); // Calls this.unsubscribe(eventType, handlerId)\n     * ```\n     */\n    unsubscribe(eventType, handlerId) {\n        this.logger.debug('Unsubscribing from event', {\n            eventType,\n            handlerId,\n        });\n        const handlers = this.handlers.get(eventType);\n        if (!handlers) {\n            this.logger.debug('No handlers found for event', { eventType });\n            return;\n        }\n        // Find and remove handler\n        const index = handlers.findIndex((h) => h.id === handlerId);\n        if (index === -1) {\n            this.logger.debug('Handler not found', { eventType, handlerId });\n            return;\n        }\n        handlers.splice(index, 1);\n        // Clean up empty handler arrays\n        if (handlers.length === 0) {\n            this.handlers.delete(eventType);\n        }\n        this.logger.debug('Handler unsubscribed', {\n            eventType,\n            handlerId,\n        });\n    }\n    /**\n     * Gets the current state of the event bus.\n     *\n     * @returns Event bus state\n     */\n    getState() {\n        return { ...this.state };\n    }\n    /**\n     * Clears all handlers for a specific event type.\n     *\n     * @param eventType - Event type to clear handlers for\n     */\n    clearHandlers(eventType) {\n        this.logger.info('Clearing handlers for event', { eventType });\n        const handlers = this.handlers.get(eventType);\n        if (handlers) {\n            this.state.totalHandlers -= handlers.length;\n            this.handlers.delete(eventType);\n            this.logger.debug('Handlers cleared', { eventType, count: handlers.length });\n        }\n    }\n    /**\n     * Clears all handlers for all event types.\n     *\n     * Useful for testing or cleanup scenarios.\n     */\n    clearAllHandlers() {\n        this.logger.info('Clearing all event handlers');\n        const totalHandlers = this.state.totalHandlers;\n        this.handlers.clear();\n        this.state.totalHandlers = 0;\n        this.logger.debug('All handlers cleared', { count: totalHandlers });\n    }\n    // ==========================================================================\n    // Private Methods\n    // ==========================================================================\n    /**\n     * Generates a unique handler ID.\n     *\n     * @returns Unique handler ID\n     */\n    generateHandlerId() {\n        const id = `handler-${Date.now()}-${this.handlerIdCounter++}`;\n        return id;\n    }\n};\nEventBus = __decorate([\n    injectable(),\n    __param(0, inject('ILogger')),\n    __metadata(\"design:paramtypes\", [Object])\n], EventBus);\nexport { EventBus };\n","/**\n * Email Analyzed Event\n *\n * Published when an email has been successfully analyzed by an AI provider.\n *\n * @module domain/events\n */\n/**\n * Creates a new EmailAnalyzedEvent.\n *\n * @param messageId - Message ID that was analyzed\n * @param providerId - Provider that performed the analysis\n * @param model - Model used for analysis\n * @param result - Analysis result\n * @param options - Optional event metadata\n * @returns EmailAnalyzedEvent instance\n *\n * @example\n * ```typescript\n * const event = createEmailAnalyzedEvent(messageId, 'openai', 'gpt-4', result, {\n *   fromCache: false,\n *   duration: 1234\n * });\n * await eventBus.publish(event);\n * ```\n */\nexport function createEmailAnalyzedEvent(messageId, providerId, model, result, options = {}) {\n    return {\n        eventType: 'EmailAnalyzed',\n        timestamp: new Date().toISOString(),\n        messageId,\n        providerId,\n        model,\n        result,\n        fromCache: options.fromCache ?? false,\n        cacheKey: options.cacheKey,\n        duration: options.duration,\n    };\n}\n","/**\n * Provider Error Event\n *\n * Published when an AI provider encounters an error during analysis.\n *\n * @module domain/events\n */\n/**\n * Creates a new ProviderErrorEvent.\n *\n * @param providerId - Provider that encountered the error\n * @param model - Model being used\n * @param errorMessage - Error message\n * @param options - Optional event metadata\n * @returns ProviderErrorEvent instance\n *\n * @example\n * ```typescript\n * const event = createProviderErrorEvent('openai', 'gpt-4', 'API rate limit exceeded', {\n *   messageId: '12345',\n *   errorType: 'rate_limit'\n * });\n * await eventBus.publish(event);\n * ```\n */\nexport function createProviderErrorEvent(providerId, model, errorMessage, options = {}) {\n    return {\n        eventType: 'ProviderError',\n        timestamp: new Date().toISOString(),\n        providerId,\n        model,\n        errorMessage,\n        error: options.error,\n        messageId: options.messageId,\n        errorType: options.errorType ?? 'unknown',\n    };\n}\n","/**\n * AnalyzeEmail Use Case\n *\n * Orchestrates email analysis by coordinating email retrieval, content extraction,\n * AI provider analysis, caching, and tag application.\n *\n * This use case implements the complete email analysis workflow:\n * 1. Retrieves email from Thunderbird via IMailReader\n * 2. Extracts structured content via EmailContentExtractor\n * 3. Checks cache for cached analysis results\n * 4. Performs AI analysis via Provider (if cache miss)\n * 5. Caches the analysis result\n * 6. Applies tags to the message via ITagManager\n *\n * @module application/use-cases/AnalyzeEmail\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { EmailContentExtractor } from '@/domain/services/EmailContentExtractor';\nimport { ProviderFactory } from '@/infrastructure/providers/ProviderFactory';\nimport { EventBus } from '@/domain/events/EventBus';\nimport { createEmailAnalyzedEvent } from '@/domain/events/EmailAnalyzedEvent';\nimport { createProviderErrorEvent } from '@/domain/events/ProviderErrorEvent';\n// ============================================================================\n// Browser-compatible Crypto Utilities\n// ============================================================================\n/**\n * SHA-256 hash function using Web Crypto API (browser-compatible).\n *\n * @param message - String to hash\n * @returns Promise resolving to hex-encoded SHA-256 hash\n * @throws {Error} If Web Crypto API is not available\n */\nasync function sha256(message) {\n    // Get crypto.subtle from global window or self (for Web Workers)\n    const subtleCrypto = (typeof window !== 'undefined' && window.crypto?.subtle) ||\n        (typeof self !== 'undefined' && self.crypto?.subtle);\n    if (!subtleCrypto) {\n        throw new Error('Web Crypto API (crypto.subtle) is not available in this environment');\n    }\n    const msgBuffer = new TextEncoder().encode(message);\n    const hashBuffer = await subtleCrypto.digest('SHA-256', msgBuffer);\n    const hashArray = Array.from(new Uint8Array(hashBuffer));\n    return hashArray.map((b) => b.toString(16).padStart(2, '0')).join('');\n}\n// ============================================================================\n// Use Case Implementation\n// ============================================================================\n/**\n * AnalyzeEmail Use Case\n *\n * Orchestrates the complete email analysis workflow.\n * Uses dependency injection for all dependencies.\n *\n * @example\n * ```typescript\n * const useCase = container.resolve<AnalyzeEmail>(AnalyzeEmail);\n * const result = await useCase.execute('12345', {\n *   apiKey: 'sk-...',\n *   provider: 'openai',\n *   model: 'gpt-4'\n * });\n * console.log(`Analyzed email, tags: ${result.tags.join(', ')}`);\n * ```\n */\nlet AnalyzeEmail = class AnalyzeEmail {\n    // ==========================================================================\n    // Constructor\n    // ==========================================================================\n    constructor(mailReader, tagManager, providerFactory, cache, logger, contentExtractor, eventBus, configRepository, queue) {\n        this.mailReader = mailReader;\n        this.tagManager = tagManager;\n        this.providerFactory = providerFactory;\n        this.cache = cache;\n        this.logger = logger;\n        this.contentExtractor = contentExtractor;\n        this.eventBus = eventBus;\n        this.configRepository = configRepository;\n        this.queue = queue;\n        this.logger.debug(' AnalyzeEmail use case initialized');\n    }\n    // ==========================================================================\n    // Public Methods\n    // ==========================================================================\n    /**\n     * Executes email analysis for a single message.\n     *\n     * @param messageId - Thunderbird message ID (as string for flexibility)\n     * @param providerSettings - Provider configuration (including providerId)\n     * @param config - Optional analysis configuration\n     * @returns Promise resolving to analysis result with tags\n     *\n     * @throws {Error} If message cannot be retrieved\n     * @throws {Error} If content extraction fails\n     * @throws {Error} If provider analysis fails\n     * @throws {Error} If tag application fails\n     *\n     * @example\n     * ```typescript\n     * const result = await analyzeEmail.execute('12345', {\n     *   provider: 'openai',\n     *   apiKey: 'sk-...',\n     *   model: 'gpt-4'\n     * }, { applyTags: true });\n     * ```\n     */\n    async execute(messageId, providerSettings, config = {}) {\n        const { cacheTtl = 24 * 60 * 60 * 1000, // 24 hours default\n        forceReanalyze = false, applyTags = true, customTags, } = config;\n        const providerId = providerSettings.provider ?? 'unknown';\n        this.logger.info(' Starting email analysis', {\n            messageId,\n            providerId,\n            config: { forceReanalyze, applyTags },\n        });\n        const startTime = Date.now();\n        this.logger.debug(' Analysis configuration', {\n            cacheTtl: `${cacheTtl / 1000 / 60 / 60}h`,\n            forceReanalyze,\n            applyTags,\n            hasCustomTags: customTags !== undefined,\n            customTagsCount: customTags?.length ?? 0,\n        });\n        try {\n            // Step 1: Retrieve email from Thunderbird\n            this.logger.debug('  Step 1: Retrieving email from Thunderbird');\n            const email = await this.retrieveEmail(messageId);\n            this.logger.debug(' Step 1 complete: Email retrieved');\n            // Step 2: Extract structured content\n            this.logger.debug('  Step 2: Extracting structured content');\n            const structuredData = this.extractEmailContent(email);\n            this.logger.debug(' Step 2 complete: Content extracted', {\n                bodyLength: structuredData.body.length,\n                attachmentCount: structuredData.attachments.length,\n            });\n            // Step 3: Load custom tags from ConfigRepository if not provided\n            this.logger.debug('  Step 3: Loading custom tags', {\n                hasCustomTags: customTags !== undefined,\n            });\n            const tagsToUse = customTags ?? (await this.loadCustomTags());\n            this.logger.debug(' Step 3 complete: Tags loaded', { tagCount: tagsToUse.length });\n            // Step 4: Generate cache key\n            this.logger.debug('  Step 4: Generating cache key');\n            const cacheKey = await this.generateCacheKey(email, providerSettings);\n            this.logger.debug(' Step 4 complete: Cache key generated', {\n                cacheKey: cacheKey.substring(0, 16) + '...',\n            });\n            // Step 5: Check cache (unless force re-analysis)\n            if (!forceReanalyze) {\n                this.logger.debug('  Step 5: Checking cache');\n                const cachedResult = await this.checkCache(cacheKey);\n                if (cachedResult) {\n                    this.logger.info(' Cache HIT - Retrieved analysis from cache', { cacheKey });\n                    if (applyTags) {\n                        this.logger.debug('  Applying cached tags to email');\n                        await this.applyTagsToEmail(messageId, cachedResult.tags);\n                        this.logger.debug(' Cached tags applied');\n                    }\n                    // Publish EmailAnalyzedEvent (from cache)\n                    this.logger.debug('  Publishing EmailAnalyzedEvent (from cache)');\n                    await this.eventBus.publish(createEmailAnalyzedEvent(messageId, providerSettings.provider, providerSettings.model, cachedResult, {\n                        fromCache: true,\n                        cacheKey,\n                        duration: Date.now() - startTime,\n                    }));\n                    this.logger.info(' Analysis completed from cache', {\n                        duration: `${Date.now() - startTime}ms`,\n                        tagsFound: cachedResult.tags.length,\n                    });\n                    return cachedResult;\n                }\n                this.logger.debug('  Cache MISS - No cached result found');\n            }\n            else {\n                this.logger.debug('  Skipping cache check (forceReanalyze=true)');\n            }\n            // Step 6: Get provider from factory (if providerId is specified)\n            this.logger.debug('  Step 6: Getting provider from factory');\n            const provider = this.getProvider(providerSettings);\n            this.logger.debug(' Step 6 complete: Provider retrieved');\n            // Step 7: Perform AI analysis\n            this.logger.debug('  Step 7: Performing AI analysis');\n            const analysisResult = await this.analyzeWithProvider(structuredData, providerSettings, tagsToUse, provider);\n            this.logger.debug(' Step 7 complete: AI analysis finished', {\n                tagsFound: analysisResult.tags.length,\n                confidence: analysisResult.confidence,\n            });\n            // Step 8: Cache the result\n            this.logger.debug('  Step 8: Caching result');\n            await this.cacheResult(cacheKey, analysisResult, cacheTtl);\n            this.logger.debug(' Step 8 complete: Result cached');\n            // Step 9: Apply tags to the message\n            if (applyTags) {\n                this.logger.debug('  Step 9: Applying tags to message');\n                await this.applyTagsToEmail(messageId, analysisResult.tags);\n                this.logger.debug(' Step 9 complete: Tags applied');\n            }\n            else {\n                this.logger.debug('  Skipping tag application (applyTags=false)');\n            }\n            // Publish EmailAnalyzedEvent\n            this.logger.debug('  Publishing EmailAnalyzedEvent (new analysis)');\n            await this.eventBus.publish(createEmailAnalyzedEvent(messageId, providerSettings.provider, providerSettings.model, analysisResult, {\n                fromCache: false,\n                cacheKey,\n                duration: Date.now() - startTime,\n            }));\n            this.logger.info(' Email analysis completed successfully', {\n                messageId,\n                tags: analysisResult.tags,\n                confidence: analysisResult.confidence,\n                duration: `${Date.now() - startTime}ms`,\n            });\n            return analysisResult;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error(' Email analysis failed', { messageId, error: errorMessage });\n            // Publish ProviderErrorEvent\n            await this.eventBus.publish(createProviderErrorEvent(providerSettings.provider, providerSettings.model, errorMessage, {\n                messageId,\n                error: error instanceof Error ? error : undefined,\n                errorType: 'api_error',\n            }));\n            throw new Error(`Failed to analyze email ${messageId}: ${errorMessage}`);\n        }\n    }\n    // ==========================================================================\n    // Private Methods\n    // ==========================================================================\n    /**\n     * Loads custom tags from ConfigRepository.\n     *\n     * @returns Array of custom tags for analysis\n     */\n    async loadCustomTags() {\n        this.logger.debug(' Loading custom tags from ConfigRepository');\n        try {\n            const customTags = await this.configRepository.getCustomTags();\n            const mappedTags = customTags.map((tag) => ({\n                key: tag.key,\n                name: tag.name,\n                description: tag.prompt ?? '',\n            }));\n            this.logger.debug(' Custom tags loaded from ConfigRepository', {\n                count: mappedTags.length,\n            });\n            return mappedTags;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.warn('  Failed to load custom tags from ConfigRepository, using empty array', {\n                error: errorMessage,\n            });\n            return [];\n        }\n    }\n    /**\n     * Retrieves email from Thunderbird.\n     *\n     * @param messageId - Message ID to retrieve\n     * @returns Complete email message\n     * @throws {Error} If message cannot be retrieved\n     */\n    async retrieveEmail(messageId) {\n        this.logger.debug(' Retrieving email from Thunderbird', { messageId });\n        try {\n            const messageIdNum = parseInt(messageId, 10);\n            if (isNaN(messageIdNum)) {\n                throw new Error(`Invalid message ID: ${messageId}`);\n            }\n            const email = await this.mailReader.getFullMessage(messageIdNum);\n            if (!email) {\n                throw new Error(`Email not found: ${messageId}`);\n            }\n            this.logger.debug(' Email retrieved successfully', {\n                messageId,\n                subject: email.subject,\n                from: email.from,\n            });\n            return email;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error(' Failed to retrieve email', { messageId, error: errorMessage });\n            throw error;\n        }\n    }\n    /**\n     * Extracts structured content from email.\n     *\n     * @param email - Email message to extract from\n     * @returns Structured email data for AI analysis\n     * @throws {Error} If content extraction fails\n     */\n    extractEmailContent(email) {\n        this.logger.debug(' Extracting email content', { messageId: email.id });\n        try {\n            // Parse email parts if available\n            let body = email.body || '';\n            const attachments = [];\n            if (email.parts && email.parts.length > 0) {\n                this.logger.debug(' Processing email parts', { partCount: email.parts.length });\n                const parsed = this.contentExtractor.findEmailParts(email.parts);\n                body = parsed.body;\n                parsed.attachments.forEach((att) => {\n                    attachments.push({\n                        name: att.name,\n                        mimeType: att.mimeType,\n                        size: att.size,\n                    });\n                });\n                this.logger.debug(' Email parts processed', {\n                    bodyLength: body.length,\n                    attachmentCount: attachments.length,\n                });\n            }\n            // Also check direct attachments\n            if (email.attachments && email.attachments.length > 0) {\n                this.logger.debug(' Processing direct attachments', {\n                    attachmentCount: email.attachments.length,\n                });\n                email.attachments.forEach((att) => {\n                    if (!attachments.some((a) => a.name === att.name)) {\n                        attachments.push({\n                            name: att.name,\n                            mimeType: att.mimeType,\n                            size: att.size,\n                        });\n                    }\n                });\n            }\n            const structuredData = {\n                headers: email.headers || {},\n                body,\n                attachments,\n            };\n            this.logger.debug(' Email content extracted', {\n                bodyLength: body.length,\n                attachmentsCount: attachments.length,\n            });\n            return structuredData;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error(' Failed to extract email content', {\n                messageId: email.id,\n                error: errorMessage,\n            });\n            throw error;\n        }\n    }\n    /**\n     * Generates cache key from email content and provider settings.\n     *\n     * Uses SHA-256 hash of email headers + body + provider ID + model.\n     *\n     * @param email - Email message\n     * @param providerSettings - Provider settings\n     * @returns Promise resolving to SHA-256 hash as cache key\n     */\n    async generateCacheKey(email, providerSettings) {\n        const keyData = JSON.stringify({\n            subject: email.subject,\n            from: email.from,\n            to: email.to,\n            body: email.body,\n            providerId: providerSettings.provider,\n            model: providerSettings.model,\n        });\n        const hash = await sha256(keyData);\n        this.logger.debug(' Generated cache key', { hash: hash.substring(0, 16) + '...' });\n        return hash;\n    }\n    /**\n     * Checks cache for existing analysis result.\n     *\n     * @param cacheKey - Cache key to check\n     * @returns Cached result or null if not found\n     */\n    async checkCache(cacheKey) {\n        this.logger.debug(' Checking cache', { cacheKey: cacheKey.substring(0, 16) + '...' });\n        try {\n            const cached = await this.cache.get(cacheKey);\n            if (cached) {\n                this.logger.debug(' Cache HIT', { cacheKey: cacheKey.substring(0, 16) + '...' });\n                return cached;\n            }\n            this.logger.debug('  Cache MISS', { cacheKey: cacheKey.substring(0, 16) + '...' });\n            return null;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.warn('  Failed to check cache', {\n                cacheKey: cacheKey.substring(0, 16) + '...',\n                error: errorMessage,\n            });\n            return null;\n        }\n    }\n    /**\n     * Gets provider instance from factory.\n     *\n     * @param providerSettings - Provider settings with providerId\n     * @returns Provider instance\n     * @throws {Error} If provider cannot be resolved\n     */\n    getProvider(providerSettings) {\n        const providerId = providerSettings.provider;\n        if (!providerId) {\n            throw new Error('Provider ID not specified in provider settings');\n        }\n        this.logger.debug(' Getting provider from factory', { providerId });\n        try {\n            return this.providerFactory.getProvider(providerId);\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error(' Failed to get provider', { providerId, error: errorMessage });\n            throw error;\n        }\n    }\n    /**\n     * Performs AI analysis with provider.\n     *\n     * @param structuredData - Structured email data\n     * @param providerSettings - Provider settings\n     * @param customTags - Custom tag definitions\n     * @param provider - Provider instance\n     * @returns Analysis result with tags\n     * @throws {Error} If analysis fails\n     */\n    async analyzeWithProvider(structuredData, providerSettings, customTags, provider) {\n        this.logger.debug(' Starting provider analysis', {\n            providerId: provider.providerId,\n            tagCount: customTags.length,\n        });\n        try {\n            // Validate provider settings\n            const isValid = await provider.validateSettings(providerSettings);\n            if (!isValid) {\n                throw new Error(`Invalid provider settings for ${provider.providerId}`);\n            }\n            this.logger.debug(' Provider settings validated');\n            // Build analysis input\n            const analysisInput = {\n                settings: providerSettings,\n                data: structuredData,\n                tags: customTags.map((tag) => ({\n                    key: tag.key,\n                    name: tag.name,\n                    description: tag.description,\n                })),\n            };\n            this.logger.debug('  Calling provider.analyze() with input', {\n                bodyLength: structuredData.body.length,\n                tags: customTags.map((t) => t.key),\n            });\n            // Perform analysis\n            const result = await provider.analyze(analysisInput);\n            this.logger.debug(' Provider analysis completed', {\n                providerId: provider.providerId,\n                tags: result.tags,\n                confidence: result.confidence,\n            });\n            return result;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error(' Provider analysis failed', {\n                providerId: provider.providerId,\n                error: errorMessage,\n            });\n            throw error;\n        }\n    }\n    /**\n     * Caches analysis result.\n     *\n     * @param cacheKey - Cache key\n     * @param result - Analysis result to cache\n     * @param ttl - Time-to-live in milliseconds\n     */\n    async cacheResult(cacheKey, result, ttl) {\n        this.logger.debug(' Caching analysis result', {\n            cacheKey: cacheKey.substring(0, 16) + '...',\n            ttl: `${ttl / 1000 / 60}min`,\n        });\n        try {\n            await this.cache.set(cacheKey, result, ttl);\n            this.logger.debug(' Analysis result cached', {\n                cacheKey: cacheKey.substring(0, 16) + '...',\n            });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.warn('  Failed to cache result', {\n                cacheKey: cacheKey.substring(0, 16) + '...',\n                error: errorMessage,\n            });\n            // Non-fatal error, continue execution\n        }\n    }\n    /**\n     * Applies tags to email message.\n     *\n     * @param messageId - Message ID to apply tags to\n     * @param tagKeys - Tag keys to apply\n     * @throws {Error} If tag application fails\n     */\n    async applyTagsToEmail(messageId, tagKeys) {\n        this.logger.debug('  Applying tags to email', { messageId, tagKeys });\n        try {\n            const messageIdNum = parseInt(messageId, 10);\n            if (isNaN(messageIdNum)) {\n                throw new Error(`Invalid message ID: ${messageId}`);\n            }\n            await this.tagManager.setTagsOnMessage(messageIdNum, tagKeys);\n            this.logger.debug(' Tags applied successfully', { messageId, count: tagKeys.length });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error(' Failed to apply tags', { messageId, tagKeys, error: errorMessage });\n            throw error;\n        }\n    }\n};\nAnalyzeEmail = __decorate([\n    injectable(),\n    __param(0, inject('IMailReader')),\n    __param(1, inject('ITagManager')),\n    __param(2, inject('ProviderFactory')),\n    __param(3, inject('ICache')),\n    __param(4, inject('ILogger')),\n    __param(5, inject(EmailContentExtractor)),\n    __param(6, inject(EventBus)),\n    __param(7, inject('IConfigRepository')),\n    __param(8, inject('IQueue')),\n    __metadata(\"design:paramtypes\", [Object, Object, ProviderFactory, Object, Object, EmailContentExtractor,\n        EventBus, Object, Object])\n], AnalyzeEmail);\nexport { AnalyzeEmail };\n","/**\n * Tag Created Event\n *\n * Published when a new tag is created in the system.\n *\n * @module domain/events\n */\n/**\n * Creates a new TagCreatedEvent.\n *\n * @param tagKey - Tag key\n * @param tagName - Tag display name\n * @param tagColor - Tag color (hex code)\n * @param tagDescription - Optional tag description\n * @returns TagCreatedEvent instance\n *\n * @example\n * ```typescript\n * const event = createTagCreatedEvent('is_business', 'Business', '#FF5733', 'Business emails');\n * await eventBus.publish(event);\n * ```\n */\nexport function createTagCreatedEvent(tagKey, tagName, tagColor, tagDescription) {\n    return {\n        eventType: 'TagCreated',\n        timestamp: new Date().toISOString(),\n        tagKey,\n        tagName,\n        tagColor,\n        tagDescription,\n    };\n}\n","/**\n * ApplyTagsToEmail Use Case\n *\n * Manages tag application to email messages.\n * Ensures tags exist before applying them and handles tag validation.\n *\n * This use case provides a clean interface for applying tags to messages:\n * 1. Validates and ensures all specified tags exist\n * 2. Applies tags to specified message via ITagManager\n *\n * @module application/use-cases/ApplyTagsToEmail\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { EventBus } from '@/domain/events/EventBus';\nimport { createTagAppliedEvent } from '@/domain/events/TagAppliedEvent';\nimport { createTagCreatedEvent } from '@/domain/events/TagCreatedEvent';\nimport { HARDCODED_TAGS } from '../../../core/config';\n// ============================================================================\n// Use Case Implementation\n// ============================================================================\n/**\n * ApplyTagsToEmail Use Case\n *\n * Provides functionality for applying tags to email messages.\n * Handles tag validation and automatic creation if configured.\n *\n * @example\n * ```typescript\n * const useCase = container.resolve<ApplyTagsToEmail>(ApplyTagsToEmail);\n * const result = await useCase.execute('12345', ['is_business', 'is_important']);\n * console.log(`Applied ${result.appliedTags.length} tags`);\n * ```\n */\nlet ApplyTagsToEmail = class ApplyTagsToEmail {\n    // ==========================================================================\n    // Constructor\n    // ==========================================================================\n    constructor(tagManager, logger, eventBus, configRepository) {\n        this.tagManager = tagManager;\n        this.logger = logger;\n        this.eventBus = eventBus;\n        this.configRepository = configRepository;\n        // ==========================================================================\n        // Private Fields\n        // ==========================================================================\n        /** Flag to track if hardcoded tags have been ensured */\n        this.hardcodedTagsEnsured = false;\n        this.logger.debug(' ApplyTagsToEmail use case initialized');\n    }\n    // ==========================================================================\n    // Public Methods\n    // ==========================================================================\n    /**\n     * Applies tags to an email message.\n     *\n     * @param messageId - Thunderbird message ID (as string for flexibility)\n     * @param tagKeys - Tag keys to apply\n     * @param config - Optional configuration for tag application\n     * @returns Promise resolving to tag application result\n     *\n     * @throws {Error} If message ID is invalid\n     * @throws {Error} If tag application fails\n     *\n     * @example\n     * ```typescript\n     * const result = await applyTagsToEmail.execute('12345', ['is_business']);\n     * console.log(`Applied: ${result.appliedTags.join(', ')}`);\n     * ```\n     */\n    async execute(messageId, tagKeys, config = {}) {\n        // Hardcoded Tags beim ersten Mal erstellen\n        if (!this.hardcodedTagsEnsured) {\n            await this.ensureHardcodedTagsExist();\n            this.hardcodedTagsEnsured = true;\n            this.logger.info(' Hardcoded tags ensured on first execution');\n        }\n        const { createMissingTags = false, replaceTags = false, defaultColor = '#9E9E9E' } = config;\n        this.logger.info('  Applying tags to email', {\n            messageId,\n            tagKeys,\n            config: { createMissingTags, replaceTags },\n        });\n        try {\n            // Validate message ID\n            const messageIdNum = parseInt(messageId, 10);\n            if (isNaN(messageIdNum)) {\n                throw new Error(`Invalid message ID: ${messageId}`);\n            }\n            // Validate and filter tags\n            const { validTags, invalidTags, warnings } = await this.validateAndFilterTags(tagKeys);\n            // Log warnings for invalid tags\n            if (warnings.length > 0) {\n                warnings.forEach((warning) => this.logger.warn(warning));\n            }\n            // Ensure all valid tags exist\n            this.logger.debug('  Ensuring tags exist', { tagKeys: validTags, createMissingTags });\n            const { applied: ensuredTags, created: createdTags } = await this.ensureTagsExist(validTags, createMissingTags, defaultColor);\n            this.logger.debug(' Tags ensured', { ensuredTags, createdTags });\n            // Apply tags to message\n            this.logger.debug('  Applying tags to message');\n            await this.applyTagsToMessage(messageIdNum, ensuredTags, replaceTags);\n            this.logger.debug(' Tags applied to message');\n            this.logger.info(' Tags applied successfully', {\n                messageId,\n                appliedTags: ensuredTags,\n                createdTags,\n            });\n            // Publish TagAppliedEvent\n            this.logger.debug('  Publishing TagAppliedEvent');\n            await this.eventBus.publish(createTagAppliedEvent(messageId, ensuredTags, {\n                skippedTags: invalidTags,\n                createdTags,\n                replaceTags,\n            }));\n            return {\n                messageId,\n                appliedTags: ensuredTags,\n                skippedTags: invalidTags,\n                createdTags,\n            };\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error(' Failed to apply tags', { messageId, tagKeys, error: errorMessage });\n            throw new Error(`Failed to apply tags to message ${messageId}: ${errorMessage}`);\n        }\n    }\n    /**\n     * Ensures tags exist in Thunderbird.\n     *\n     * Validates that all specified tags exist and optionally creates missing ones.\n     *\n     * @param tagKeys - Tag keys to ensure exist\n     * @param createMissing - Whether to create missing tags (default: false)\n     * @param defaultColor - Default color for auto-created tags\n     * @returns Promise resolving to ensured tags and created tags\n     *\n     * @throws {Error} If a required tag does not exist and createMissing is false\n     *\n     * @example\n     * ```typescript\n     * const { applied, created } = await applyTagsToEmail.ensureTagsExist(\n     *   ['is_business', 'is_personal'],\n     *   true,\n     *   '#FF0000'\n     * );\n     * console.log(`Created ${created.length} new tags`);\n     * ```\n     */\n    async ensureTagsExist(tagKeys, createMissing = false, defaultColor = '#9E9E9E') {\n        this.logger.debug(' Ensuring tags exist', { tagKeys, createMissing, defaultColor });\n        const applied = [];\n        const created = [];\n        for (const tagKey of tagKeys) {\n            try {\n                this.logger.debug('  Checking tag existence', { tagKey });\n                const existingTag = await this.tagManager.getTag(tagKey);\n                if (existingTag) {\n                    // Tag already exists\n                    this.logger.debug(' Tag already exists', { tagKey });\n                    applied.push(tagKey);\n                }\n                else if (createMissing) {\n                    // Create missing tag\n                    this.logger.info(' Creating missing tag', { tagKey, color: defaultColor });\n                    // Generate a readable tag name from key\n                    const tagName = this.keyToTagName(tagKey);\n                    await this.tagManager.ensureTagExists(tagKey, tagName, defaultColor);\n                    created.push(tagKey);\n                    applied.push(tagKey);\n                    // Publish TagCreatedEvent\n                    this.logger.debug('  Publishing TagCreatedEvent');\n                    await this.eventBus.publish(createTagCreatedEvent(tagKey, tagName, defaultColor));\n                    this.logger.debug(' TagCreatedEvent published');\n                }\n                else {\n                    // Tag does not exist and creation is disabled\n                    this.logger.warn('  Tag does not exist and creation is disabled', { tagKey });\n                    throw new Error(`Tag '${tagKey}' does not exist. Set createMissingTags=true to create it automatically.`);\n                }\n            }\n            catch (error) {\n                const errorMessage = error instanceof Error ? error.message : String(error);\n                this.logger.error(' Failed to ensure tag exists', { tagKey, error: errorMessage });\n                throw error;\n            }\n        }\n        this.logger.debug(' Tags ensured', { applied: applied.length, created: created.length });\n        return { applied, created };\n    }\n    /**\n     * Removes tags from an email message.\n     *\n     * @param messageId - Thunderbird message ID\n     * @param tagKeys - Tag keys to remove\n     * @returns Promise resolving when tags are removed\n     *\n     * @throws {Error} If message ID is invalid\n     * @throws {Error} If tag removal fails\n     *\n     * @example\n     * ```typescript\n     * await applyTagsToEmail.removeTags('12345', ['is_business', 'is_personal']);\n     * ```\n     */\n    async removeTags(messageId, tagKeys) {\n        this.logger.info('  Removing tags from email', { messageId, tagKeys });\n        try {\n            const messageIdNum = parseInt(messageId, 10);\n            if (isNaN(messageIdNum)) {\n                throw new Error(`Invalid message ID: ${messageId}`);\n            }\n            // Get current tags on message\n            this.logger.debug('  Getting current tags on message');\n            const currentTags = await this.getCurrentTags(messageIdNum);\n            const keysToRemove = tagKeys.filter((k) => currentTags.includes(k));\n            this.logger.debug(' Current tags retrieved', { currentTags, keysToRemove });\n            if (keysToRemove.length === 0) {\n                this.logger.debug('  No tags to remove', { messageId, tagKeys });\n                return;\n            }\n            // Calculate remaining tags\n            const remainingTags = currentTags.filter((k) => !keysToRemove.includes(k));\n            this.logger.debug('  Setting remaining tags', { remainingTags });\n            // Set remaining tags\n            await this.tagManager.setTagsOnMessage(messageIdNum, remainingTags);\n            this.logger.info(' Tags removed successfully', {\n                messageId,\n                removedTags: keysToRemove,\n                remainingTags: remainingTags.length,\n            });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error(' Failed to remove tags', { messageId, tagKeys, error: errorMessage });\n            throw new Error(`Failed to remove tags from message ${messageId}: ${errorMessage}`);\n        }\n    }\n    /**\n     * Clears all tags from an email message.\n     *\n     * @param messageId - Thunderbird message ID\n     * @returns Promise resolving when all tags are cleared\n     *\n     * @throws {Error} If message ID is invalid\n     * @throws {Error} If tag clearing fails\n     *\n     * @example\n     * ```typescript\n     * await applyTagsToEmail.clearTags('12345');\n     * ```\n     */\n    async clearTags(messageId) {\n        this.logger.info(' Clearing all tags from email', { messageId });\n        try {\n            const messageIdNum = parseInt(messageId, 10);\n            if (isNaN(messageIdNum)) {\n                throw new Error(`Invalid message ID: ${messageId}`);\n            }\n            this.logger.debug('  Setting empty tag array');\n            await this.tagManager.setTagsOnMessage(messageIdNum, []);\n            this.logger.info(' All tags cleared', { messageId });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error(' Failed to clear tags', { messageId, error: errorMessage });\n            throw new Error(`Failed to clear tags from message ${messageId}: ${errorMessage}`);\n        }\n    }\n    // ==========================================================================\n    // Private Methods\n    // ==========================================================================\n    /**\n     * Ensures all hardcoded tags exist in Thunderbird.\n     *\n     * Automatically creates all tags defined in HARDCODED_TAGS if they don't exist.\n     * This is called once on the first execution to ensure the system has all\n     * required tags available.\n     *\n     * @private\n     */\n    async ensureHardcodedTagsExist() {\n        for (const [key, tagConfig] of Object.entries(HARDCODED_TAGS)) {\n            try {\n                await this.tagManager.ensureTagExists(key, tagConfig.name, tagConfig.color);\n                this.logger.debug('Hardcoded tag ensured', { key, name: tagConfig.name });\n            }\n            catch (error) {\n                this.logger.warn('Failed to ensure hardcoded tag', { key, error: String(error) });\n            }\n        }\n    }\n    /**\n     * Validates and filters tags against defined tags.\n     *\n     * Checks each tag key against hardcoded tags and custom tags.\n     * Returns valid tags that are defined and invalid tags that should be discarded.\n     *\n     * @param tagKeys - Tag keys to validate\n     * @returns Promise resolving to valid tags, invalid tags, and warning messages\n     */\n    async validateAndFilterTags(tagKeys) {\n        this.logger.debug(`[DEBUG-TagValidation] Validating ${tagKeys.length} tags from LLM`);\n        const validTags = [];\n        const invalidTags = [];\n        const warnings = [];\n        // Get custom tags from config repository\n        const customTags = await this.configRepository.getCustomTags();\n        // Build a set of all defined tag keys\n        const hardcodedTagKeys = new Set(Object.keys(HARDCODED_TAGS));\n        const customTagKeys = new Set(customTags.map((tag) => tag.key));\n        for (const tagKey of tagKeys) {\n            if (hardcodedTagKeys.has(tagKey)) {\n                // Tag is in HARDCODED_TAGS\n                validTags.push(tagKey);\n            }\n            else if (customTagKeys.has(tagKey)) {\n                // Tag is in Custom Tags\n                validTags.push(tagKey);\n            }\n            else {\n                // Tag is not defined\n                invalidTags.push(tagKey);\n                warnings.push(`[DEBUG-TagValidation] Invalid tag '${tagKey}' - not defined in HARDCODED_TAGS or custom tags`);\n            }\n        }\n        this.logger.debug(`[DEBUG-TagValidation] Found ${validTags.length} valid, ${invalidTags.length} invalid tags`);\n        if (invalidTags.length > 0) {\n            this.logger.debug(`[DEBUG-TagValidation] Invalid tags: ${invalidTags.join(', ')}`);\n            this.logger.warn(`[WARN-TagValidation] Skipping ${invalidTags.length} undefined tags`);\n        }\n        return { validTags, invalidTags, warnings };\n    }\n    /**\n     * Applies tags to a message.\n     *\n     * @param messageId - Message ID (as number)\n     * @param tagKeys - Tag keys to apply\n     * @param replaceTags - Whether to replace existing tags\n     * @throws {Error} If tag application fails\n     */\n    async applyTagsToMessage(messageId, tagKeys, replaceTags) {\n        this.logger.debug(' Applying tags to message', { messageId, tagKeys, replaceTags });\n        try {\n            if (replaceTags) {\n                // Replace all tags\n                this.logger.debug('  Replacing all tags');\n                await this.tagManager.setTagsOnMessage(messageId, tagKeys);\n            }\n            else {\n                // Append tags to existing ones\n                this.logger.debug('  Appending tags to existing ones');\n                const currentTags = await this.getCurrentTags(messageId);\n                const newTags = [...new Set([...currentTags, ...tagKeys])];\n                this.logger.debug(' Combined tags', { current: currentTags.length, new: newTags.length });\n                await this.tagManager.setTagsOnMessage(messageId, newTags);\n            }\n            this.logger.debug(' Tags applied to message', { messageId, count: tagKeys.length });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error(' Failed to apply tags to message', { messageId, error: errorMessage });\n            throw error;\n        }\n    }\n    /**\n     * Gets current tags on a message.\n     *\n     * Note: This is a simplified implementation. In a real implementation,\n     * you would retrieve the current tags from Thunderbird via IMailReader\n     * or a dedicated method in ITagManager.\n     *\n     * @param messageId - Message ID\n     * @returns Array of tag keys currently on the message\n     */\n    async getCurrentTags(messageId) {\n        // Simplified implementation - in real code, you would:\n        // 1. Call messenger.messages.get(messageId) to get message object\n        // 2. Extract tags from message.tags property\n        // 3. Return tag keys\n        this.logger.debug(' Getting current tags for message', { messageId });\n        // Placeholder implementation\n        // This should be replaced with actual Thunderbird API call\n        return [];\n    }\n    /**\n     * Converts a tag key to a readable tag name.\n     *\n     * @param key - Tag key (e.g., 'is_business')\n     * @returns Tag name (e.g., 'Business')\n     */\n    keyToTagName(key) {\n        return key\n            .split(/[_\\s]+/)\n            .map((word) => word.charAt(0).toUpperCase() + word.slice(1).toLowerCase())\n            .join(' ');\n    }\n};\nApplyTagsToEmail = __decorate([\n    injectable(),\n    __param(0, inject('ITagManager')),\n    __param(1, inject('ILogger')),\n    __param(2, inject(EventBus)),\n    __param(3, inject('IConfigRepository')),\n    __metadata(\"design:paramtypes\", [Object, Object, EventBus, Object])\n], ApplyTagsToEmail);\nexport { ApplyTagsToEmail };\n","/**\n * Tag Applied Event\n *\n * Published when tags are successfully applied to an email message.\n *\n * @module domain/events\n */\n/**\n * Creates a new TagAppliedEvent.\n *\n * @param messageId - Message ID that tags were applied to\n * @param appliedTags - Tags that were successfully applied\n * @param options - Optional event metadata\n * @returns TagAppliedEvent instance\n *\n * @example\n * ```typescript\n * const event = createTagAppliedEvent(messageId, ['is_business'], {\n *   skippedTags: [],\n *   createdTags: [],\n *   replaceTags: false\n * });\n * await eventBus.publish(event);\n * ```\n */\nexport function createTagAppliedEvent(messageId, appliedTags, options = {}) {\n    return {\n        eventType: 'TagApplied',\n        timestamp: new Date().toISOString(),\n        messageId,\n        appliedTags,\n        skippedTags: options.skippedTags ?? [],\n        createdTags: options.createdTags ?? [],\n        replaceTags: options.replaceTags ?? false,\n    };\n}\n","/**\n * AnalyzeBatchEmails Use Case\n *\n * Orchestrates batch analysis of multiple email messages.\n * Uses priority queue for managing concurrent analysis tasks.\n *\n * This use case provides:\n * 1. Queue-based batch processing with priority support\n * 2. Progress tracking for batch operations\n * 3. Cancellation support for long-running batches\n * 4. Concurrent analysis with configurable concurrency limits\n *\n * @module application/use-cases/AnalyzeBatchEmails\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { AnalyzeEmail } from './AnalyzeEmail';\n/**\n * Default batch configuration values.\n */\nconst DEFAULT_BATCH_CONFIG = {\n    DEFAULT_CONCURRENCY: 3,\n    DEFAULT_PRIORITY: 1,\n    DEFAULT_DELAY_BETWEEN_ANALYSES: 0,\n    DEFAULT_CONTINUE_ON_ERROR: true,\n};\n// ============================================================================\n// Use Case Implementation\n// ============================================================================\n/**\n * AnalyzeBatchEmails Use Case\n *\n * Manages batch email analysis with queue-based processing.\n * Provides progress tracking and cancellation support.\n *\n * @example\n * ```typescript\n * const useCase = container.resolve<AnalyzeBatchEmails>(AnalyzeBatchEmails);\n *\n * // Start batch analysis\n * await useCase.execute(['12345', '12346', '12347'], {\n *   providerSettings: { provider: 'openai', apiKey: 'sk-...' },\n *   priority: 1,\n *   concurrency: 3\n * });\n *\n * // Monitor progress\n * const progress = await useCase.getProgress();\n * console.log(`Progress: ${progress.percentage}%`);\n *\n * // Cancel if needed\n * await useCase.cancel();\n * ```\n */\nlet AnalyzeBatchEmails = class AnalyzeBatchEmails {\n    // ==========================================================================\n    // Constructor\n    // ==========================================================================\n    constructor(analyzeEmail, queue, logger, configRepository) {\n        // Batch state\n        this.isProcessing = false;\n        this.isCancelled = false;\n        this.processedCount = 0;\n        this.failedCount = 0;\n        this.totalCount = 0;\n        this.processedMessageIds = [];\n        this.failedMessageIds = [];\n        this.analysisResults = [];\n        this.resolvePromise = null;\n        this.activeWorkers = [];\n        this.analyzeEmail = analyzeEmail;\n        this.queue = queue;\n        this.logger = logger;\n        this.configRepository = configRepository;\n        this.logger.debug('AnalyzeBatchEmails use case initialized');\n    }\n    // ==========================================================================\n    // Public Methods\n    // ==========================================================================\n    /**\n     * Executes batch email analysis.\n     *\n     * @param messageIds - Array of message IDs to analyze\n     * @param config - Batch analysis configuration\n     * @returns Promise resolving to batch analysis result\n     *\n     * @throws {Error} If a batch is already running\n     *\n     * @example\n     * ```typescript\n     * const result = await analyzeBatchEmails.execute(\n     *   ['12345', '12346', '12347'],\n     *   { providerSettings: { provider: 'openai', apiKey: 'sk-...' } }\n     * );\n     * console.log(`Success: ${result.successCount}, Failed: ${result.failureCount}`);\n     * ```\n     */\n    async execute(messageIds, config) {\n        this.logger.info(' Starting batch email analysis', {\n            messageCount: messageIds.length,\n            provider: config.providerSettings.provider,\n            config: {\n                priority: config.priority,\n                concurrency: config.concurrency,\n                delayBetweenAnalyses: config.delayBetweenAnalyses,\n                continueOnError: config.continueOnError,\n            },\n        });\n        // Load batch settings from AppConfig with fallback to defaults\n        this.logger.debug('  Loading app config for concurrency limits');\n        const appConfig = await this.loadAppConfig();\n        const concurrency = config.concurrency ?? this.getConcurrencyLimit(appConfig, config.providerSettings);\n        const priority = config.priority ?? DEFAULT_BATCH_CONFIG.DEFAULT_PRIORITY;\n        const delayBetweenAnalyses = config.delayBetweenAnalyses ?? DEFAULT_BATCH_CONFIG.DEFAULT_DELAY_BETWEEN_ANALYSES;\n        const continueOnError = config.continueOnError ?? DEFAULT_BATCH_CONFIG.DEFAULT_CONTINUE_ON_ERROR;\n        this.logger.debug(' Batch configuration loaded', {\n            concurrency,\n            priority,\n            delayBetweenAnalyses,\n            continueOnError,\n        });\n        if (this.isProcessing) {\n            this.logger.error(' Batch analysis already running');\n            throw new Error('Batch analysis is already running. Wait for current batch to complete.');\n        }\n        this.logger.info(' Starting batch processing', {\n            count: messageIds.length,\n            priority,\n            concurrency,\n        });\n        const startTime = Date.now();\n        try {\n            // Initialize batch state\n            this.logger.debug('  Initializing batch state');\n            this.isProcessing = true;\n            this.isCancelled = false;\n            this.processedCount = 0;\n            this.failedCount = 0;\n            this.totalCount = messageIds.length;\n            this.processedMessageIds = [];\n            this.failedMessageIds = [];\n            this.analysisResults = [];\n            this.logger.debug(' Batch state initialized');\n            new Promise((resolve) => {\n                this.resolvePromise = resolve;\n            });\n            // Enqueue all messages\n            this.logger.debug('  Enqueuing messages', { count: messageIds.length });\n            for (const messageId of messageIds) {\n                const queueItem = {\n                    messageId,\n                    providerSettings: config.providerSettings,\n                };\n                await this.queue.enqueue(queueItem, priority);\n            }\n            this.logger.debug(' All messages enqueued', { count: messageIds.length });\n            // Start worker processes\n            this.logger.debug('  Starting worker processes', { workerCount: concurrency });\n            for (let i = 0; i < concurrency; i++) {\n                this.activeWorkers.push(this.startWorker(delayBetweenAnalyses, continueOnError));\n            }\n            this.logger.debug(' Workers started');\n            // Wait for all workers to complete\n            this.logger.debug(' Waiting for all workers to complete');\n            await Promise.all(this.activeWorkers);\n            this.logger.debug(' All workers completed');\n            // Resolve the batch promise\n            const result = {\n                total: this.totalCount,\n                successCount: this.processedCount,\n                failureCount: this.failedCount,\n                results: this.analysisResults,\n                cancelled: this.isCancelled,\n            };\n            if (this.resolvePromise) {\n                this.resolvePromise(result);\n            }\n            this.logger.info(' Batch analysis completed', {\n                total: result.total,\n                success: result.successCount,\n                failed: result.failureCount,\n                cancelled: result.cancelled,\n                duration: `${Date.now() - startTime}ms`,\n            });\n            this.resetState();\n            return result;\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error(' Batch analysis failed', { error: errorMessage });\n            // Reset state on error\n            this.resetState();\n            throw new Error(`Batch analysis failed: ${errorMessage}`);\n        }\n    }\n    /**\n     * Gets current progress of the batch analysis.\n     *\n     * @returns Promise resolving to progress information\n     *\n     * @example\n     * ```typescript\n     * const progress = await analyzeBatchEmails.getProgress();\n     * console.log(`Progress: ${progress.percentage}%`);\n     * ```\n     */\n    async getProgress() {\n        const percentage = this.totalCount > 0\n            ? Math.round(((this.processedCount + this.failedCount) / this.totalCount) * 100)\n            : 0;\n        return {\n            total: this.totalCount,\n            processed: this.processedCount,\n            failed: this.failedCount,\n            percentage,\n            isRunning: this.isProcessing,\n            isCancelled: this.isCancelled,\n            processedMessageIds: [...this.processedMessageIds],\n            failedMessageIds: [...this.failedMessageIds],\n        };\n    }\n    /**\n     * Cancels the current batch analysis.\n     *\n     * @returns Promise resolving when cancellation is complete\n     *\n     * @example\n     * ```typescript\n     * await analyzeBatchEmails.cancel();\n     * console.log('Batch cancelled');\n     * ```\n     */\n    async cancel() {\n        if (!this.isProcessing) {\n            this.logger.debug('  No batch processing to cancel');\n            return;\n        }\n        this.logger.info(' Cancelling batch analysis');\n        this.isCancelled = true;\n        this.isProcessing = false;\n        // Clear remaining items from queue\n        this.logger.debug('  Clearing queue');\n        const clearedCount = await this.queue.clear(false);\n        this.logger.debug(' Queue cleared', { clearedCount });\n        // Resolve the batch promise with partial results\n        if (this.resolvePromise) {\n            const result = {\n                total: this.totalCount,\n                successCount: this.processedCount,\n                failureCount: this.failedCount,\n                results: this.analysisResults,\n                cancelled: true,\n            };\n            this.resolvePromise(result);\n        }\n        this.logger.info(' Batch analysis cancelled', {\n            processed: this.processedCount,\n            failed: this.failedCount,\n            remaining: clearedCount,\n        });\n    }\n    /**\n     * Checks if a batch is currently running.\n     *\n     * @returns True if a batch is running, false otherwise\n     *\n     * @example\n     * ```typescript\n     * if (await analyzeBatchEmails.isRunning()) {\n     *   console.log('Batch is in progress');\n     * }\n     * ```\n     */\n    async isRunning() {\n        return this.isProcessing;\n    }\n    // ==========================================================================\n    // Private Methods\n    // ==========================================================================\n    /**\n     * Loads application configuration from ConfigRepository.\n     *\n     * @returns Application config with fallback to defaults\n     */\n    async loadAppConfig() {\n        try {\n            const appConfig = await this.configRepository.getAppConfig();\n            return {\n                defaultProvider: appConfig.defaultProvider,\n                modelConcurrencyLimits: appConfig.modelConcurrencyLimits,\n            };\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.warn('Failed to load app config from ConfigRepository, using defaults', {\n                error: errorMessage,\n            });\n            return {\n                defaultProvider: 'openai',\n                modelConcurrencyLimits: undefined,\n            };\n        }\n    }\n    /**\n     * Gets concurrency limit from AppConfig or defaults.\n     *\n     * @param appConfig - Application configuration\n     * @param providerSettings - Provider settings\n     * @returns Concurrency limit\n     */\n    getConcurrencyLimit(appConfig, providerSettings) {\n        const providerId = providerSettings.provider ?? appConfig.defaultProvider;\n        const model = providerSettings.model ?? '';\n        // Check model-specific concurrency\n        if (appConfig.modelConcurrencyLimits) {\n            const modelConfig = appConfig.modelConcurrencyLimits.find((c) => c.provider === providerId && c.model === model);\n            if (modelConfig && modelConfig.concurrency > 0) {\n                return modelConfig.concurrency;\n            }\n            // Check provider-specific concurrency\n            const providerConfig = appConfig.modelConcurrencyLimits.find((c) => c.provider === providerId && !c.model);\n            if (providerConfig && providerConfig.concurrency > 0) {\n                return providerConfig.concurrency;\n            }\n        }\n        // Return default concurrency\n        return DEFAULT_BATCH_CONFIG.DEFAULT_CONCURRENCY;\n    }\n    /**\n     * Starts a worker process for processing queue items.\n     *\n     * @param delayBetweenAnalyses - Delay in milliseconds between analyses\n     * @param continueOnError - Whether to continue processing on error\n     * @returns Promise resolving when worker completes\n     */\n    async startWorker(delayBetweenAnalyses, continueOnError) {\n        this.logger.debug(' Starting worker process', { delayBetweenAnalyses, continueOnError });\n        try {\n            while (this.isProcessing && !this.isCancelled) {\n                // Dequeue next item\n                this.logger.debug('  Dequeueing next item');\n                const item = await this.queue.dequeue();\n                if (item === null) {\n                    // Queue is empty\n                    this.logger.debug('  Queue is empty, worker stopping');\n                    break;\n                }\n                this.logger.debug(' Item dequeued', { messageId: item.messageId });\n                // Process the item\n                await this.processQueueItem(item);\n                // Delay between analyses if configured\n                if (delayBetweenAnalyses > 0) {\n                    this.logger.debug(' Sleeping between analyses', { duration: delayBetweenAnalyses });\n                    await this.sleep(delayBetweenAnalyses);\n                }\n            }\n            this.logger.debug(' Worker process completed');\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error(' Worker process failed', { error: errorMessage });\n            if (!continueOnError) {\n                this.logger.debug('  Stopping all workers (continueOnError=false)');\n                this.isProcessing = false;\n                this.isCancelled = true;\n            }\n        }\n    }\n    /**\n     * Processes a single queue item.\n     *\n     * @param item - Queue item to process\n     * @returns Promise resolving when item is processed\n     */\n    async processQueueItem(item) {\n        const { messageId, providerSettings } = item;\n        this.logger.debug(' Processing queue item', {\n            messageId,\n            provider: providerSettings.provider,\n        });\n        try {\n            // Analyze the email\n            this.logger.debug('  Calling analyzeEmail.execute()');\n            const result = await this.analyzeEmail.execute(messageId, providerSettings);\n            // Record successful analysis\n            this.processedCount++;\n            this.processedMessageIds.push(messageId);\n            this.analysisResults.push({\n                messageId,\n                success: true,\n                tags: result.tags,\n            });\n            this.logger.debug(' Email analyzed successfully', {\n                messageId,\n                tags: result.tags,\n                confidence: result.confidence,\n                processed: `${this.processedCount}/${this.totalCount}`,\n            });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            // Record failed analysis\n            this.failedCount++;\n            this.failedMessageIds.push(messageId);\n            this.analysisResults.push({\n                messageId,\n                success: false,\n                error: errorMessage,\n            });\n            this.logger.error(' Failed to analyze email', {\n                messageId,\n                error: errorMessage,\n                failed: `${this.failedCount}/${this.totalCount}`,\n            });\n        }\n    }\n    /**\n     * Resets batch state.\n     */\n    resetState() {\n        this.isProcessing = false;\n        this.isCancelled = false;\n        this.processedCount = 0;\n        this.failedCount = 0;\n        this.totalCount = 0;\n        this.processedMessageIds = [];\n        this.failedMessageIds = [];\n        this.analysisResults = [];\n        this.resolvePromise = null;\n        this.activeWorkers = [];\n    }\n    /**\n     * Sleeps for the specified duration.\n     *\n     * @param ms - Duration in milliseconds\n     * @returns Promise resolving after the duration\n     */\n    sleep(ms) {\n        return new Promise((resolve) => setTimeout(resolve, ms));\n    }\n};\nAnalyzeBatchEmails = __decorate([\n    injectable(),\n    __param(0, inject(AnalyzeEmail)),\n    __param(1, inject('IQueue')),\n    __param(2, inject('ILogger')),\n    __param(3, inject('IConfigRepository')),\n    __metadata(\"design:paramtypes\", [AnalyzeEmail, Object, Object, Object])\n], AnalyzeBatchEmails);\nexport { AnalyzeBatchEmails };\n","/**\n * Email Received Event\n *\n * Published when a new email is received by Thunderbird.\n *\n * @module domain/events\n */\n/**\n * Creates a new EmailReceivedEvent.\n *\n * @param messageData - Message data from Thunderbird\n * @param folderData - Folder data from Thunderbird\n * @returns EmailReceivedEvent instance\n *\n * @example\n * ```typescript\n * const event = createEmailReceivedEvent(message, folder);\n * await eventBus.publish(event);\n * ```\n */\nexport function createEmailReceivedEvent(messageData, folderData) {\n    return {\n        eventType: 'EmailReceived',\n        timestamp: new Date().toISOString(),\n        messageId: String(messageData.id),\n        subject: messageData.subject,\n        from: messageData.from,\n        to: messageData.to,\n        folderName: folderData.name,\n        folderType: folderData.type,\n        folderPath: folderData.path,\n    };\n}\n","/**\n * Email Event Listener Service\n *\n * Handles Thunderbird email events and triggers analysis workflows.\n *\n * This service:\n * - Listens for new mail received events\n * - Automatically triggers email analysis for new messages\n * - Manages event listener registration/deregistration\n * - Coordinates with mail reader and analysis use cases\n *\n * @module interfaces/background/EmailEventListener\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { AnalyzeEmail } from '@/application/use-cases/AnalyzeEmail';\nimport { AnalyzeBatchEmails } from '@/application/use-cases/AnalyzeBatchEmails';\nimport { EventBus } from '@/domain/events/EventBus';\nimport { createEmailReceivedEvent } from '@/domain/events/EmailReceivedEvent';\n// ============================================================================\n// Service Implementation\n// ============================================================================\n/**\n * Email Event Listener Service\n *\n * Listens for Thunderbird email events and triggers analysis.\n * Manages automatic email processing workflows.\n *\n * @example\n * ```typescript\n * const service = container.resolve<EmailEventListener>(EmailEventListener);\n *\n * // Start listening for new mail events\n * service.start();\n *\n * // Later, stop listening\n * service.stop();\n * ```\n */\nlet EmailEventListener = class EmailEventListener {\n    // ==========================================================================\n    // Constructor\n    // ==========================================================================\n    /**\n     * Creates a new EmailEventListener instance.\n     *\n     * @param _mailReader - Mail reader for accessing email messages (reserved for future use)\n     * @param _analyzeEmail - Single email analysis use case (reserved for future use)\n     * @param analyzeBatch - Batch email analysis use case\n     * @param logger - Logger instance for logging operations\n     */\n    constructor(_mailReader, _analyzeEmail, analyzeBatch, logger, eventBus) {\n        this.eventBus = eventBus;\n        this.listenerState = {\n            isRegistered: false,\n            messagesProcessed: 0,\n            errorsEncountered: 0,\n        };\n        // Cached function references for proper listener removal\n        this.onNewMailReceivedHandler = null;\n        this.analyzeBatch = analyzeBatch;\n        this.logger = logger;\n        this.logger.debug('EmailEventListener service initialized');\n    }\n    // ==========================================================================\n    // Public Methods\n    // ==========================================================================\n    /**\n     * Registers email event listeners.\n     *\n     * Sets up handlers for new mail events and other Thunderbird\n     * email-related events.\n     */\n    registerListeners() {\n        if (this.listenerState.isRegistered) {\n            this.logger.warn('Event listeners already registered');\n            return;\n        }\n        this.logger.info('Registering email event listeners');\n        // Register new mail received handler\n        this.onNewMailReceivedHandler = this.onNewMailReceived.bind(this);\n        // Access global messenger object (Thunderbird WebExtension API)\n        if (typeof messenger !== 'undefined' && messenger.messages?.onNewMailReceived) {\n            messenger.messages.onNewMailReceived.addListener(this.onNewMailReceivedHandler);\n            this.listenerState.isRegistered = true;\n            this.logger.info('New mail event listener registered');\n        }\n        else {\n            this.logger.warn('Thunderbird messenger API not available');\n        }\n    }\n    /**\n     * Unregisters email event listeners.\n     *\n     * Removes all registered event handlers.\n     */\n    unregisterListeners() {\n        if (!this.listenerState.isRegistered) {\n            this.logger.debug('Event listeners not registered');\n            return;\n        }\n        this.logger.info('Unregistering email event listeners');\n        // Unregister new mail received handler\n        if (this.onNewMailReceivedHandler) {\n            if (typeof messenger !== 'undefined' && messenger.messages?.onNewMailReceived) {\n                messenger.messages.onNewMailReceived.removeListener(this.onNewMailReceivedHandler);\n                this.logger.info('New mail event listener unregistered');\n            }\n            this.onNewMailReceivedHandler = null;\n        }\n        this.listenerState.isRegistered = false;\n        this.logger.info('Email event listeners unregistered');\n    }\n    /**\n     * Starts the event listener service.\n     *\n     * Registers all event listeners and begins monitoring for email events.\n     */\n    start() {\n        this.logger.info('Starting email event listener service');\n        this.registerListeners();\n    }\n    /**\n     * Stops the event listener service.\n     *\n     * Unregisters all event listeners and stops monitoring for email events.\n     */\n    stop() {\n        this.logger.info('Stopping email event listener service');\n        this.unregisterListeners();\n    }\n    /**\n     * Gets current listener state.\n     *\n     * @returns Current state of event listeners\n     */\n    getState() {\n        return { ...this.listenerState };\n    }\n    // ==========================================================================\n    // Private Methods\n    // ==========================================================================\n    /**\n     * Handler for new mail received events.\n     *\n     * Processes incoming messages through batch analysis and applies tags.\n     *\n     * @param folder - Folder information\n     * @param messages - New mail messages\n     */\n    async onNewMailReceived(folder, messages) {\n        this.logger.info('New mail event received', {\n            messageCount: messages.messages.length,\n            folderName: folder.name,\n            folderPath: folder.path,\n            folderType: folder.type,\n        });\n        try {\n            // Convert message IDs to strings for use case compatibility\n            const messageIds = messages.messages.map((m) => String(m.id));\n            // Get provider settings from storage (simplified for this service)\n            // In a real implementation, you would read from app config\n            const providerSettings = await this.getProviderSettings();\n            if (!providerSettings.provider) {\n                this.logger.warn('No provider configured, skipping email analysis');\n                return;\n            }\n            // Publish EmailReceivedEvent for each message\n            for (const message of messages.messages) {\n                try {\n                    // Get message details\n                    const messageDetails = await messenger.messages.getFull(message.id);\n                    await this.eventBus.publish(createEmailReceivedEvent({\n                        id: message.id,\n                        subject: messageDetails.subject || '',\n                        from: messageDetails.author || '',\n                        to: messageDetails.recipients?.map((r) => r.email) || [],\n                    }, {\n                        name: folder.name,\n                        type: folder.type,\n                        path: folder.path,\n                    }));\n                }\n                catch (error) {\n                    const errorMessage = error instanceof Error ? error.message : String(error);\n                    this.logger.warn('Failed to publish EmailReceivedEvent', {\n                        messageId: message.id,\n                        error: errorMessage,\n                    });\n                }\n            }\n            // Start batch analysis for new messages\n            const result = await this.analyzeBatch.execute(messageIds, {\n                providerSettings,\n                priority: 2, // Higher priority for new mail\n                concurrency: 3,\n            });\n            this.logger.info('New mail processing completed', {\n                total: result.total,\n                successCount: result.successCount,\n                failureCount: result.failureCount,\n            });\n            // Update listener state\n            this.listenerState.messagesProcessed += result.total;\n            // If there were failures, log warnings\n            if (result.failureCount > 0) {\n                this.logger.warn('Some new mail messages failed to process', {\n                    failed: result.failureCount,\n                    failedIds: result.results.filter((r) => !r.success).map((r) => r.messageId),\n                });\n            }\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to process new mail event', {\n                folderName: folder.name,\n                messageCount: messages.messages.length,\n                error: errorMessage,\n            });\n            this.listenerState.errorsEncountered++;\n        }\n    }\n    /**\n     * Gets provider settings from storage.\n     *\n     * Reads application configuration and returns provider settings.\n     *\n     * @returns Provider settings\n     */\n    async getProviderSettings() {\n        try {\n            if (typeof messenger === 'undefined' || !messenger.storage) {\n                return { provider: '' };\n            }\n            const result = await messenger.storage.local.get({\n                provider: '',\n                apiKey: '',\n                model: '',\n            });\n            return {\n                provider: result.provider,\n                apiKey: result.apiKey,\n                model: result.model,\n            };\n        }\n        catch (error) {\n            this.logger.error('Failed to get provider settings', {\n                error: error instanceof Error ? error.message : String(error),\n            });\n            return { provider: '' };\n        }\n    }\n};\nEmailEventListener = __decorate([\n    injectable(),\n    __param(0, inject('IMailReader')),\n    __param(1, inject(AnalyzeEmail)),\n    __param(2, inject(AnalyzeBatchEmails)),\n    __param(3, inject('ILogger')),\n    __param(4, inject(EventBus)),\n    __metadata(\"design:paramtypes\", [Object, AnalyzeEmail,\n        AnalyzeBatchEmails, Object, EventBus])\n], EmailEventListener);\nexport { EmailEventListener };\n","/**\n * Message Handler Service\n *\n * Handles Thunderbird runtime messaging API for communication between\n * extension components (background, options page, content scripts).\n *\n * This service:\n * - Registers message handlers for runtime.onMessage events\n * - Processes incoming messages from other extension components\n * - Coordinates with use cases for batch analysis, queue management, and caching\n * - Handles error cases and provides meaningful responses\n *\n * @module interfaces/background/MessageHandler\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nvar __param = (this && this.__param) || function (paramIndex, decorator) {\n    return function (target, key) { decorator(target, key, paramIndex); }\n};\nimport { injectable, inject } from 'tsyringe';\nimport { AnalyzeEmail } from '@/application/use-cases/AnalyzeEmail';\nimport { AnalyzeBatchEmails } from '@/application/use-cases/AnalyzeBatchEmails';\nimport { ApplyTagsToEmail } from '@/application/use-cases/ApplyTagsToEmail';\nimport { AppConfigService } from '@/infrastructure/config/AppConfig';\nimport { EventBus } from '@/domain/events/EventBus';\nimport { createProviderErrorEvent } from '@/domain/events/ProviderErrorEvent';\n// ============================================================================\n// Type Guards\n// ============================================================================\n/**\n * Type guard for StartBatchAnalysisMessage.\n */\nfunction isStartBatchAnalysisMessage(message) {\n    return (typeof message === 'object' &&\n        message !== null &&\n        'action' in message &&\n        message.action === 'startBatchAnalysis');\n}\n/**\n * Type guard for GetBatchProgressMessage.\n */\nfunction isGetBatchProgressMessage(message) {\n    return (typeof message === 'object' &&\n        message !== null &&\n        'action' in message &&\n        message.action === 'getBatchProgress');\n}\n/**\n * Type guard for CancelBatchAnalysisMessage.\n */\nfunction isCancelBatchAnalysisMessage(message) {\n    return (typeof message === 'object' &&\n        message !== null &&\n        'action' in message &&\n        message.action === 'cancelBatchAnalysis');\n}\n/**\n * Type guard for AnalyzeSingleMessageMessage.\n */\nfunction isAnalyzeSingleMessageMessage(message) {\n    return (typeof message === 'object' &&\n        message !== null &&\n        'action' in message &&\n        message.action === 'analyzeSingleMessage');\n}\n/**\n * Type guard for ClearQueueMessage.\n */\nfunction isClearQueueMessage(message) {\n    return (typeof message === 'object' &&\n        message !== null &&\n        'action' in message &&\n        message.action === 'clearQueue');\n}\n/**\n * Type guard for ClearCacheMessage.\n */\nfunction isClearCacheMessage(message) {\n    return (typeof message === 'object' &&\n        message !== null &&\n        'action' in message &&\n        message.action === 'clearCache');\n}\n/**\n * Type guard for GetCacheStatsMessage.\n */\nfunction isGetCacheStatsMessage(message) {\n    return (typeof message === 'object' &&\n        message !== null &&\n        'action' in message &&\n        message.action === 'getCacheStats');\n}\n// ============================================================================\n// Service Implementation\n// ============================================================================\n/**\n * Message Handler Service\n *\n * Handles runtime messaging for extension components.\n * Coordinates with use cases to process incoming messages.\n *\n * @example\n * ```typescript\n * const service = container.resolve<MessageHandler>(MessageHandler);\n *\n * // Start handling messages\n * service.start();\n *\n * // Later, stop handling messages\n * service.stop();\n * ```\n */\nlet MessageHandler = class MessageHandler {\n    // ==========================================================================\n    // Constructor\n    // ==========================================================================\n    /**\n     * Creates a new MessageHandler instance.\n     *\n     * @param analyzeEmail - Single email analysis use case\n     * @param analyzeBatch - Batch email analysis use case\n     * @param _applyTags - Tag application use case (reserved for future use)\n     * @param logger - Logger instance for logging operations\n     * @param eventBus - Event bus for publishing events\n     * @param appConfigService - App config service for loading provider settings\n     */\n    constructor(analyzeEmail, analyzeBatch, _applyTags, logger, eventBus, appConfigService) {\n        this.eventBus = eventBus;\n        this.handlerState = {\n            isRegistered: false,\n            messagesHandled: 0,\n            errorsEncountered: 0,\n        };\n        // Cached function reference for proper listener removal\n        this.handleMessageHandler = null;\n        // Batch progress tracking (simplified for this service)\n        this.batchProgress = {\n            status: 'idle',\n            total: 0,\n            processed: 0,\n            successful: 0,\n            failed: 0,\n            startTime: 0,\n        };\n        this.analyzeEmail = analyzeEmail;\n        this.analyzeBatch = analyzeBatch;\n        this.logger = logger;\n        this.appConfigService = appConfigService;\n        this.logger.debug('MessageHandler service initialized');\n    }\n    // ==========================================================================\n    // Public Methods\n    // ==========================================================================\n    /**\n     * Registers message handlers.\n     *\n     * Sets up handler for browser.runtime.onMessage events.\n     */\n    registerMessageHandlers() {\n        if (this.handlerState.isRegistered) {\n            this.logger.warn('Message handlers already registered');\n            return;\n        }\n        this.logger.info('[DEBUG-MessageHandler] Registering runtime message handlers');\n        this.handleMessageHandler = this.handleMessage.bind(this);\n        if (typeof browser !== 'undefined' && browser.runtime?.onMessage) {\n            browser.runtime.onMessage.addListener(this.handleMessageHandler);\n            this.handlerState.isRegistered = true;\n            this.logger.info('[DEBUG-MessageHandler] Runtime message handler registered via browser API');\n        }\n        else {\n            if (typeof messenger !== 'undefined' && messenger.runtime?.onMessage) {\n                messenger.runtime.onMessage.addListener(this.handleMessageHandler);\n                this.handlerState.isRegistered = true;\n                this.logger.info('[DEBUG-MessageHandler] Runtime message handler registered via messenger API');\n            }\n            else {\n                this.logger.error('[DEBUG-MessageHandler] Runtime messaging API not available - THIS IS A PROBLEM!');\n            }\n        }\n    }\n    /**\n     * Unregisters message handlers.\n     *\n     * Removes all registered message handlers.\n     */\n    unregisterMessageHandlers() {\n        if (!this.handlerState.isRegistered) {\n            this.logger.debug('Message handlers not registered');\n            return;\n        }\n        this.logger.info('Unregistering runtime message handlers');\n        if (this.handleMessageHandler) {\n            if (typeof browser !== 'undefined' && browser.runtime?.onMessage) {\n                browser.runtime.onMessage.removeListener(this.handleMessageHandler);\n                this.logger.info('Runtime message handler unregistered');\n            }\n            else {\n                if (typeof messenger !== 'undefined' && messenger.runtime?.onMessage) {\n                    messenger.runtime.onMessage.removeListener(this.handleMessageHandler);\n                    this.logger.info('Runtime message handler unregistered (messenger API)');\n                }\n            }\n            this.handleMessageHandler = null;\n        }\n        this.handlerState.isRegistered = false;\n        this.logger.info('Runtime message handlers unregistered');\n    }\n    /**\n     * Starts the message handler service.\n     *\n     * Registers all message handlers and begins processing messages.\n     */\n    start() {\n        this.logger.info('Starting message handler service');\n        this.registerMessageHandlers();\n    }\n    /**\n     * Stops the message handler service.\n     *\n     * Unregisters all message handlers and stops processing messages.\n     */\n    stop() {\n        this.logger.info('Stopping message handler service');\n        this.unregisterMessageHandlers();\n    }\n    /**\n     * Gets current handler state.\n     *\n     * @returns Current state of message handlers\n     */\n    getState() {\n        return { ...this.handlerState };\n    }\n    // ==========================================================================\n    // Private Methods\n    // ==========================================================================\n    /**\n     * Handles incoming runtime messages.\n     *\n     * Routes messages to appropriate handlers based on action type.\n     *\n     * @param message - The received message\n     * @param sender - Message sender information\n     * @param sendResponse - Function to send response back\n     * @returns true if response is sent asynchronously, false otherwise\n     */\n    handleMessage(message, _sender, sendResponse) {\n        this.logger.info('[DEBUG-MessageHandler] handleMessage() CALLED - RECEIVED MESSAGE', {\n            messageType: typeof message,\n            message: JSON.stringify(message),\n            hasAction: typeof message === 'object' && message !== null && 'action' in message,\n            action: typeof message === 'object' && message !== null && 'action' in message\n                ? message.action\n                : 'N/A',\n            messagesHandledSoFar: this.handlerState.messagesHandled,\n        });\n        this.handlerState.messagesHandled++;\n        // Handle messages asynchronously\n        (async () => {\n            try {\n                // Route message to appropriate handler\n                if (isStartBatchAnalysisMessage(message)) {\n                    this.logger.info('[DEBUG-MessageHandler] Routing to handleStartBatchAnalysis');\n                    const result = await this.handleStartBatchAnalysis(message);\n                    sendResponse(result);\n                    return;\n                }\n                if (isGetBatchProgressMessage(message)) {\n                    this.logger.info('[DEBUG-MessageHandler] Routing to handleGetBatchProgress');\n                    const result = this.handleGetBatchProgress();\n                    sendResponse(result);\n                    return;\n                }\n                if (isCancelBatchAnalysisMessage(message)) {\n                    this.logger.info('[DEBUG-MessageHandler] Routing to handleCancelBatchAnalysis');\n                    const result = await this.handleCancelBatchAnalysis();\n                    sendResponse(result);\n                    return;\n                }\n                if (isAnalyzeSingleMessageMessage(message)) {\n                    this.logger.info('[DEBUG-MessageHandler] Routing to handleAnalyzeSingleMessage');\n                    const result = await this.handleAnalyzeSingleMessage(message);\n                    sendResponse(result);\n                    return;\n                }\n                if (isClearQueueMessage(message)) {\n                    this.logger.info('[DEBUG-MessageHandler] Routing to handleClearQueue');\n                    const result = this.handleClearQueue(message);\n                    sendResponse(result);\n                    return;\n                }\n                if (isClearCacheMessage(message)) {\n                    this.logger.info('[DEBUG-MessageHandler] Routing to handleClearCache');\n                    const result = await this.handleClearCache();\n                    sendResponse(result);\n                    return;\n                }\n                if (isGetCacheStatsMessage(message)) {\n                    this.logger.info('[DEBUG-MessageHandler] Routing to handleGetCacheStats');\n                    const result = await this.handleGetCacheStats();\n                    sendResponse(result);\n                    return;\n                }\n                this.logger.warn('[DEBUG-MessageHandler] Unknown runtime message received', { message });\n                sendResponse({ success: false, message: 'Unknown message type' });\n            }\n            catch (error) {\n                this.handlerState.errorsEncountered++;\n                const errorMessage = error instanceof Error ? error.message : String(error);\n                this.logger.error('[DEBUG-MessageHandler] Internal error processing message', {\n                    message,\n                    error: errorMessage,\n                });\n                this.eventBus\n                    .publish(createProviderErrorEvent('message-handler', 'unknown', errorMessage, {\n                    error: error instanceof Error ? error : undefined,\n                    errorType: 'unknown',\n                }))\n                    .catch((publishError) => {\n                    this.logger.error('[DEBUG-MessageHandler] Failed to publish ProviderErrorEvent', {\n                        error: publishError instanceof Error ? publishError.message : String(publishError),\n                    });\n                });\n                sendResponse({ success: false, message: 'Internal error processing message' });\n            }\n        })();\n        return true;\n    }\n    /**\n     * Handles start batch analysis message.\n     *\n     * @param message - Start batch analysis message\n     * @returns Start batch analysis result\n     */\n    async handleStartBatchAnalysis(message) {\n        this.logger.info('Handling startBatchAnalysis message', { folderId: message.folderId });\n        try {\n            // Check if another batch is already running\n            if (this.batchProgress.status === 'running') {\n                return {\n                    success: false,\n                    error: 'Batch analysis is already running. Cancel the current batch first.',\n                };\n            }\n            // Get provider settings\n            this.logger.info('Batch Step 1: Getting provider settings...');\n            const providerSettings = await this.getProviderSettings();\n            this.logger.info('Batch Step 2: Provider settings retrieved', {\n                provider: providerSettings.provider,\n                hasApiKey: !!providerSettings.apiKey,\n            });\n            if (!providerSettings.provider) {\n                return {\n                    success: false,\n                    error: 'No provider configured. Please check your settings.',\n                };\n            }\n            // Get messages to analyze\n            const messageIds = await this.getMessagesToAnalyze(message.folderId);\n            if (messageIds.length === 0) {\n                return {\n                    success: false,\n                    error: 'No messages found to analyze.',\n                };\n            }\n            // Initialize batch progress\n            this.batchProgress = {\n                status: 'running',\n                total: messageIds.length,\n                processed: 0,\n                successful: 0,\n                failed: 0,\n                startTime: Date.now(),\n            };\n            // Execute batch analysis and wait for completion\n            try {\n                const result = await this.analyzeBatch.execute(messageIds, {\n                    providerSettings,\n                    priority: 1,\n                    concurrency: 3,\n                });\n                this.batchProgress = {\n                    ...this.batchProgress,\n                    status: 'completed',\n                    processed: result.total,\n                    successful: result.successCount,\n                    failed: result.failureCount,\n                    endTime: Date.now(),\n                };\n                this.logger.info('Batch analysis completed', result);\n                return {\n                    success: true,\n                    messageCount: messageIds.length,\n                };\n            }\n            catch (error) {\n                const errorMessage = error instanceof Error ? error.message : String(error);\n                this.batchProgress = {\n                    ...this.batchProgress,\n                    status: 'error',\n                    endTime: Date.now(),\n                    errorMessage,\n                };\n                this.logger.error('Batch analysis failed', { error: errorMessage });\n                return {\n                    success: false,\n                    error: `Batch analysis failed: ${errorMessage}`,\n                };\n            }\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to start batch analysis', { error: errorMessage });\n            return {\n                success: false,\n                error: `Failed to start batch analysis: ${errorMessage}`,\n            };\n        }\n    }\n    /**\n     * Handles get batch progress message.\n     *\n     * @returns Current batch progress\n     */\n    handleGetBatchProgress() {\n        return { ...this.batchProgress };\n    }\n    /**\n     * Handles cancel batch analysis message.\n     *\n     * @returns Cancel result\n     */\n    async handleCancelBatchAnalysis() {\n        this.logger.info('Handling cancelBatchAnalysis message');\n        if (this.batchProgress.status !== 'running') {\n            return {\n                success: false,\n                message: 'No batch analysis is currently running.',\n            };\n        }\n        try {\n            await this.analyzeBatch.cancel();\n            this.batchProgress = {\n                ...this.batchProgress,\n                status: 'cancelled',\n                endTime: Date.now(),\n            };\n            this.logger.info('Batch analysis cancelled');\n            return {\n                success: true,\n                message: 'Batch analysis cancelled successfully.',\n            };\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger.error('Failed to cancel batch analysis', { error: errorMessage });\n            return {\n                success: false,\n                message: `Failed to cancel batch analysis: ${errorMessage}`,\n            };\n        }\n    }\n    /**\n     * Handles analyze single message message.\n     *\n     * @param message - Analyze single message message\n     * @returns Analyze single message result\n     */\n    async handleAnalyzeSingleMessage(message) {\n        this.logger.info('[DEBUG-MessageHandler] handleAnalyzeSingleMessage() ENTERED', {\n            messageId: message.messageId,\n        });\n        try {\n            this.logger.info('Step 1: Getting provider settings...');\n            const providerSettings = await this.getProviderSettings();\n            this.logger.info('Step 2: Provider settings retrieved', {\n                provider: providerSettings.provider,\n                hasApiKey: !!providerSettings.apiKey,\n            });\n            if (!providerSettings.provider) {\n                return {\n                    success: false,\n                    message: 'No provider configured. Please check your settings.',\n                };\n            }\n            this.logger.info('Step 3: Calling analyzeEmail.execute()...');\n            const result = await this.analyzeEmail.execute(message.messageId, providerSettings);\n            return {\n                success: true,\n                message: 'Message analyzed successfully',\n                tags: result.tags,\n            };\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            const errorStack = error instanceof Error ? error.stack : undefined;\n            this.logger.error('Failed to analyze single message', {\n                messageId: message.messageId,\n                error: errorMessage,\n                stack: errorStack,\n            });\n            return {\n                success: false,\n                message: `Analysis failed: ${errorMessage}`,\n            };\n        }\n    }\n    /**\n     * Handles clear queue message.\n     *\n     * @param message - Clear queue message\n     * @returns Clear queue result\n     */\n    handleClearQueue(message) {\n        this.logger.info('Handling clearQueue message', { cancelRunning: message.cancelRunning });\n        // Simplified implementation - in real code, you would integrate with RateLimiter\n        return {\n            success: true,\n            clearedTasks: 0,\n            cancelledProviders: [],\n            providers: {},\n        };\n    }\n    /**\n     * Handles clear cache message.\n     *\n     * @returns Clear cache result\n     */\n    async handleClearCache() {\n        this.logger.info('Handling clearCache message');\n        // Simplified implementation - in real code, you would integrate with ICache\n        return {\n            success: true,\n            message: 'Cache cleared successfully',\n        };\n    }\n    /**\n     * Handles get cache stats message.\n     *\n     * @returns Cache stats\n     */\n    async handleGetCacheStats() {\n        this.logger.info('Handling getCacheStats message');\n        // Simplified implementation - in real code, you would integrate with ICache\n        return {\n            success: true,\n            totalEntries: 0,\n            hitRate: 0,\n        };\n    }\n    /**\n     * Gets provider settings from ConfigRepository.\n     *\n     * @returns Provider settings\n     */\n    async getProviderSettings() {\n        try {\n            this.logger.info('Attempting to get app config...');\n            const appConfig = await this.appConfigService.getAppConfig();\n            const defaultProvider = appConfig.defaultProvider;\n            this.logger.info('App config retrieved', { defaultProvider });\n            this.logger.info(`Attempting to get provider settings for: ${defaultProvider}`);\n            const providerSettings = await this.appConfigService.getProviderSettings(defaultProvider);\n            this.logger.info('Provider settings retrieved', {\n                apiKey: providerSettings.apiKey ? '***' : 'missing',\n            });\n            return {\n                provider: defaultProvider,\n                apiKey: providerSettings.apiKey,\n                model: providerSettings.model,\n                apiUrl: providerSettings.apiUrl,\n                additionalConfig: providerSettings.additionalConfig,\n            };\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            const errorStack = error instanceof Error ? error.stack : undefined;\n            this.logger.error('Failed to get provider settings', {\n                error: errorMessage,\n                stack: errorStack,\n            });\n            this.logger.error('Returning empty provider settings - THIS WILL CAUSE ANALYSIS TO FAIL');\n            return { provider: '' };\n        }\n    }\n    /**\n     * Gets messages to analyze.\n     *\n     * @param folderId - Optional folder ID to filter messages\n     * @returns Array of message IDs to analyze\n     */\n    async getMessagesToAnalyze(folderId) {\n        try {\n            if (typeof messenger === 'undefined' || !messenger.messages) {\n                return [];\n            }\n            const result = await messenger.messages.list(folderId);\n            if (!result.messages || result.messages.length === 0) {\n                return [];\n            }\n            return result.messages.map((m) => String(m.id));\n        }\n        catch (error) {\n            this.logger.error('Failed to get messages', {\n                folderId,\n                error: error instanceof Error ? error.message : String(error),\n            });\n            return [];\n        }\n    }\n};\nMessageHandler = __decorate([\n    injectable(),\n    __param(0, inject(AnalyzeEmail)),\n    __param(1, inject(AnalyzeBatchEmails)),\n    __param(2, inject(ApplyTagsToEmail)),\n    __param(3, inject('ILogger')),\n    __param(4, inject(EventBus)),\n    __param(5, inject(AppConfigService)),\n    __metadata(\"design:paramtypes\", [AnalyzeEmail,\n        AnalyzeBatchEmails,\n        ApplyTagsToEmail, Object, EventBus,\n        AppConfigService])\n], MessageHandler);\nexport { MessageHandler };\n","/**\n * Thunderbird Email AI Assistant - Background Script\n *\n * Thin delegator that sets up Dependency Injection and delegates to\n * EmailEventListener and MessageHandler services.\n *\n * @module background\n */\nvar __decorate = (this && this.__decorate) || function (decorators, target, key, desc) {\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\n};\nvar __metadata = (this && this.__metadata) || function (k, v) {\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(k, v);\n};\nimport 'reflect-metadata';\nimport { container, injectable } from 'tsyringe';\n// ============================================================================\n// Core Implementations\n// ============================================================================\nimport { ConsoleLogger } from './src/infrastructure/logger/ConsoleLogger';\nimport { MemoryCache } from './src/infrastructure/cache/MemoryCache';\nimport { PriorityQueue } from './src/application/services/PriorityQueue';\nimport { ThunderbirdMailReader } from './src/interfaces/adapters/ThunderbirdMailReader';\nimport { ThunderbirdTagManager } from './src/interfaces/adapters/ThunderbirdTagManager';\nimport { IndexedDBConfigRepository } from './src/infrastructure/repositories/IndexedDBConfigRepository';\n// ============================================================================\n// Services\n// ============================================================================\nimport { EmailContentExtractor } from './src/domain/services/EmailContentExtractor';\nimport { TagService } from './src/domain/services/TagService';\nimport { AppConfigService } from './src/infrastructure/config/AppConfig';\nimport { RateLimiterService } from './src/application/services/RateLimiterService';\nimport { ProviderFactory } from './src/infrastructure/providers/ProviderFactory';\n// ============================================================================\n// Use Cases\n// ============================================================================\nimport { AnalyzeEmail } from './src/application/use-cases/AnalyzeEmail';\nimport { ApplyTagsToEmail } from './src/application/use-cases/ApplyTagsToEmail';\nimport { AnalyzeBatchEmails } from './src/application/use-cases/AnalyzeBatchEmails';\n// ============================================================================\n// Background Services\n// ============================================================================\nimport { EmailEventListener } from './src/interfaces/background/EmailEventListener';\nimport { MessageHandler } from './src/interfaces/background/MessageHandler';\n// ============================================================================\n// Logger Wrapper (for startup before DI container)\n// ============================================================================\n/**\n * Simple console logger for startup before DI container is ready.\n */\nconst startupLogger = {\n    info: (message, meta) => {\n        console.log(`[Background Startup] ${message}`, meta || '');\n    },\n    warn: (message, meta) => {\n        console.warn(`[Background Startup] ${message}`, meta || '');\n    },\n    error: (message, error) => {\n        console.error(`[Background Startup] ${message}`, error || '');\n    },\n};\n// ============================================================================\n// Background Script Main Class\n// ============================================================================\n/**\n * Background Script Main Class\n *\n * @class BackgroundScript\n */\nlet BackgroundScript = class BackgroundScript {\n    // ==========================================================================\n    // Constructor\n    // ==========================================================================\n    constructor() {\n        // ==========================================================================\n        // Private Fields\n        // ==========================================================================\n        this.eventListener = null;\n        this.messageHandler = null;\n        this.logger = null;\n        this.analyzeEmail = null;\n        this.analyzeBatch = null;\n        this.appConfigService = null;\n        this.isInitialized = false;\n        startupLogger.info('BackgroundScript class instantiated');\n    }\n    // ==========================================================================\n    // Public Methods\n    // ==========================================================================\n    /**\n     * Initializes the background script.\n     */\n    async initialize() {\n        if (this.isInitialized) {\n            startupLogger.warn('Background script already initialized');\n            return;\n        }\n        startupLogger.info('Initializing background script...');\n        try {\n            // Step 1: Setup DI container\n            this.setupDIContainer();\n            // Step 2: Resolve logger\n            this.logger = container.resolve('ILogger');\n            this.logger.info('Background script initialization started');\n            // Step 3: Resolve background services\n            this.eventListener = container.resolve(EmailEventListener);\n            this.messageHandler = container.resolve(MessageHandler);\n            // Step 3.5: Resolve use cases and config service for context menu handlers\n            this.analyzeEmail = container.resolve(AnalyzeEmail);\n            this.analyzeBatch = container.resolve(AnalyzeBatchEmails);\n            this.appConfigService = container.resolve(AppConfigService);\n            // Step 4: Start background services\n            this.eventListener.start();\n            this.messageHandler.start();\n            // Step 5: Register context menus\n            this.registerContextMenus();\n            // Step 6: Register toolbar button\n            this.registerToolbarButton();\n            // Step 7: Register onInstalled handler\n            this.registerInstallHandler();\n            // Step 8: Register shutdown handler\n            this.registerShutdownHandler();\n            this.isInitialized = true;\n            this.logger.info('Background script initialization completed successfully');\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            startupLogger.error('Failed to initialize background script', error);\n            throw new Error(`Background script initialization failed: ${errorMessage}`);\n        }\n    }\n    /**\n     * Shutdowns the background script.\n     */\n    async shutdown() {\n        if (!this.isInitialized) {\n            startupLogger.warn('Background script not initialized, nothing to shutdown');\n            return;\n        }\n        startupLogger.info('Shutting down background script...');\n        try {\n            if (this.eventListener) {\n                this.eventListener.stop();\n                this.logger?.info('EmailEventListener stopped');\n            }\n            if (this.messageHandler) {\n                this.messageHandler.stop();\n                this.logger?.info('MessageHandler stopped');\n            }\n            this.isInitialized = false;\n            this.logger?.info('Background script shutdown completed successfully');\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            startupLogger.error('Failed to shutdown background script', error);\n            throw new Error(`Background script shutdown failed: ${errorMessage}`);\n        }\n    }\n    // ==========================================================================\n    // Private Methods - DI Container Setup\n    // ==========================================================================\n    /**\n     * Sets up TSyringe DI container.\n     */\n    setupDIContainer() {\n        startupLogger.info('Setting up DI container...');\n        // ------------------------------------------------------------------------\n        // Register Core Interfaces\n        // ------------------------------------------------------------------------\n        container.registerSingleton('ILogger', ConsoleLogger);\n        container.registerSingleton('ICache', MemoryCache);\n        container.registerSingleton('IQueue', PriorityQueue);\n        container.registerSingleton('IMailReader', ThunderbirdMailReader);\n        container.registerSingleton('ITagManager', ThunderbirdTagManager);\n        container.registerSingleton('IConfigRepository', IndexedDBConfigRepository);\n        startupLogger.info('Core interfaces registered');\n        // ------------------------------------------------------------------------\n        // Register Services\n        // ------------------------------------------------------------------------\n        container.registerSingleton('ProviderFactory', ProviderFactory);\n        container.registerSingleton('EmailContentExtractor', EmailContentExtractor);\n        container.registerSingleton('TagService', TagService);\n        container.registerSingleton('AppConfigService', AppConfigService);\n        container.registerSingleton('RateLimiterService', RateLimiterService);\n        startupLogger.info('Services registered');\n        // ------------------------------------------------------------------------\n        // Register Use Cases\n        // ------------------------------------------------------------------------\n        container.registerSingleton('AnalyzeEmail', AnalyzeEmail);\n        container.registerSingleton('ApplyTagsToEmail', ApplyTagsToEmail);\n        container.registerSingleton('AnalyzeBatchEmails', AnalyzeBatchEmails);\n        startupLogger.info('Use cases registered');\n        // ------------------------------------------------------------------------\n        // Register Background Services\n        // ------------------------------------------------------------------------\n        container.registerSingleton('EmailEventListener', EmailEventListener);\n        container.registerSingleton('MessageHandler', MessageHandler);\n        startupLogger.info('Background services registered');\n        startupLogger.info('DI container setup completed');\n    }\n    // ==========================================================================\n    // Private Methods - Context Menus\n    // ==========================================================================\n    /**\n     * Registers Thunderbird context menus.\n     */\n    registerContextMenus() {\n        this.logger?.info('Registering context menus...');\n        try {\n            // Folder context menu: \"Analysiere diesen Ordner\"\n            messenger.menus.create({\n                id: 'batch-analyze-folder',\n                title: 'Analysiere diesen Ordner',\n                contexts: ['folder_pane'],\n                visible: true,\n            }, () => {\n                if (browser.runtime && browser.runtime.lastError) {\n                    this.logger?.error('Failed to create folder context menu', browser.runtime.lastError);\n                }\n                else {\n                    this.logger?.info('Folder context menu registered');\n                }\n            });\n            // Message list context menu: \"AI-Analyse\"\n            messenger.menus.create({\n                id: 'analyze-single-message-list',\n                title: 'AI-Analyse',\n                contexts: ['message_list'],\n                visible: true,\n            }, () => {\n                if (browser.runtime && browser.runtime.lastError) {\n                    this.logger?.error('Failed to create message list context menu', browser.runtime.lastError);\n                }\n                else {\n                    this.logger?.info('Message list context menu registered');\n                }\n            });\n            // Message display context menu: \"AI-Analyse\"\n            messenger.menus.create({\n                id: 'analyze-single-message-display',\n                title: 'AI-Analyse',\n                contexts: ['message_display_action_menu'],\n                visible: true,\n            }, () => {\n                if (browser.runtime && browser.runtime.lastError) {\n                    this.logger?.error('Failed to create message display context menu', browser.runtime.lastError);\n                }\n                else {\n                    this.logger?.info('Message display context menu registered');\n                }\n            });\n            // Register context menu click handler\n            messenger.menus.onClicked.addListener(this.handleContextMenuClick.bind(this));\n            this.logger?.info('All context menus registered successfully');\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger?.error('Failed to register context menus', { error: errorMessage });\n        }\n    }\n    /**\n     * Handles context menu clicks.\n     */\n    async handleContextMenuClick(info, _tab) {\n        // Extract message data for proper access to messages array\n        const messageData = info.selectedMessages;\n        // Detailed debug logging before any conditions\n        this.logger?.info('Context menu clicked', {\n            menuItemId: info.menuItemId,\n            menuItemIdType: typeof info.menuItemId,\n            hasSelectedMessages: messageData !== undefined,\n            hasMessagesProperty: messageData?.messages !== undefined,\n            messageCount: messageData?.messages?.length ?? 0,\n            hasSelectedFolders: info.selectedFolders !== undefined,\n            folderCount: info.selectedFolders?.length ?? 0,\n            fullInfo: info,\n        });\n        try {\n            if (typeof info.menuItemId !== 'string') {\n                this.logger?.warn('Invalid menuItemId type', { menuItemId: info.menuItemId });\n                return;\n            }\n            const menuItemId = info.menuItemId;\n            // Handle folder batch analysis\n            if (menuItemId === 'batch-analyze-folder') {\n                if (!info.selectedFolders) {\n                    this.logger?.warn('Folder batch analysis requested but no folders selected', {\n                        menuItemId,\n                    });\n                    return;\n                }\n                const folders = info.selectedFolders;\n                if (folders.length === 0) {\n                    this.logger?.warn('Folder batch analysis requested but folder list is empty', {\n                        menuItemId,\n                        folderCount: 0,\n                    });\n                    return;\n                }\n                const folder = folders[0];\n                this.logger?.info('Starting batch analysis for folder', {\n                    folderId: folder.id,\n                    folderName: folder.name,\n                });\n                // Show notification\n                await messenger.notifications.create({\n                    type: 'basic',\n                    iconUrl: 'icon.png',\n                    title: 'Batch-Analysis gestartet',\n                    message: `Batch-Analysis fr Ordner \"${folder.name}\" gestartet`,\n                });\n                try {\n                    this.logger?.info('Batch Step 1: Getting provider settings...');\n                    const providerSettings = await this.getProviderSettings();\n                    this.logger?.info('Batch Step 2: Provider settings retrieved', {\n                        provider: providerSettings.provider,\n                        hasApiKey: !!providerSettings.apiKey,\n                    });\n                    if (!providerSettings.provider) {\n                        await messenger.notifications.create({\n                            type: 'basic',\n                            iconUrl: 'icon.png',\n                            title: 'Fehler',\n                            message: 'Kein Provider konfiguriert. Bitte berprfen Sie Ihre Einstellungen.',\n                        });\n                        return;\n                    }\n                    // Get messages to analyze\n                    const messageIds = await this.getMessagesToAnalyze(folder.id);\n                    if (messageIds.length === 0) {\n                        await messenger.notifications.create({\n                            type: 'basic',\n                            iconUrl: 'icon.png',\n                            title: 'Keine Nachrichten',\n                            message: `Keine Nachrichten in Ordner \"${folder.name}\" gefunden.`,\n                        });\n                        return;\n                    }\n                    this.logger?.info('Batch Step 3: Starting batch analysis', {\n                        messageCount: messageIds.length,\n                    });\n                    // Direct use case call\n                    const result = await this.analyzeBatch.execute(messageIds, {\n                        providerSettings,\n                        priority: 1,\n                        concurrency: 3,\n                    });\n                    this.logger?.info('Batch analysis completed successfully', {\n                        total: result.total,\n                        successful: result.successCount,\n                        failed: result.failureCount,\n                    });\n                    await messenger.notifications.create({\n                        type: 'basic',\n                        iconUrl: 'icon.png',\n                        title: 'Batch-Analysis abgeschlossen',\n                        message: `Analyzed ${result.successCount}/${result.total} messages successfully.`,\n                    });\n                }\n                catch (error) {\n                    const errorMessage = error instanceof Error ? error.message : String(error);\n                    const errorStack = error instanceof Error ? error.stack : undefined;\n                    this.logger?.error('Failed to execute batch analysis', {\n                        error: errorMessage,\n                        stack: errorStack,\n                    });\n                    await messenger.notifications.create({\n                        type: 'basic',\n                        iconUrl: 'icon.png',\n                        title: 'Fehler',\n                        message: `Batch-Analyse fehlgeschlagen: ${errorMessage}`,\n                    });\n                }\n                return;\n            }\n            // Handle single message analysis\n            if (menuItemId === 'analyze-single-message-list' ||\n                menuItemId === 'analyze-single-message-display') {\n                if (!messageData) {\n                    this.logger?.warn('Single message analysis requested but no messages selected', {\n                        menuItemId,\n                    });\n                    return;\n                }\n                const messages = messageData.messages || [];\n                if (messages.length === 0) {\n                    this.logger?.warn('Single message analysis requested but message list is empty', {\n                        menuItemId,\n                        messageCount: 0,\n                    });\n                    return;\n                }\n                const messageId = messages[0].id;\n                this.logger?.info('Starting single message analysis', { messageId });\n                // Show notification\n                await messenger.notifications.create({\n                    type: 'basic',\n                    iconUrl: 'icon.png',\n                    title: 'Analyse gestartet',\n                    message: `Analyse fr Nachricht ${messageId} gestartet`,\n                });\n                try {\n                    this.logger?.info('Step 1: Getting provider settings...');\n                    const providerSettings = await this.getProviderSettings();\n                    this.logger?.info('Step 2: Provider settings retrieved', {\n                        provider: providerSettings.provider,\n                        hasApiKey: !!providerSettings.apiKey,\n                    });\n                    if (!providerSettings.provider) {\n                        await messenger.notifications.create({\n                            type: 'basic',\n                            iconUrl: 'icon.png',\n                            title: 'Fehler',\n                            message: 'Kein Provider konfiguriert. Bitte berprfen Sie Ihre Einstellungen.',\n                        });\n                        return;\n                    }\n                    this.logger?.info('Step 3: Calling analyzeEmail.execute()...');\n                    const result = await this.analyzeEmail.execute(String(messageId), providerSettings);\n                    this.logger?.info('Single message analysis completed successfully', {\n                        messageId,\n                        tags: result.tags,\n                    });\n                }\n                catch (error) {\n                    const errorMessage = error instanceof Error ? error.message : String(error);\n                    const errorStack = error instanceof Error ? error.stack : undefined;\n                    this.logger?.error('Failed to analyze single message', {\n                        messageId,\n                        error: errorMessage,\n                        stack: errorStack,\n                    });\n                    await messenger.notifications.create({\n                        type: 'basic',\n                        iconUrl: 'icon.png',\n                        title: 'Fehler',\n                        message: `Analyse fehlgeschlagen: ${errorMessage}`,\n                    });\n                }\n                return;\n            }\n            this.logger?.warn('Unknown context menu item', {\n                menuItemId,\n                hasSelectedMessages: messageData !== undefined,\n                hasSelectedFolders: info.selectedFolders !== undefined,\n            });\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            const errorStack = error instanceof Error ? error.stack : undefined;\n            this.logger?.error('[DEBUG-background] Failed to handle context menu click', {\n                error: errorMessage,\n                stack: errorStack,\n            });\n        }\n    }\n    // ==========================================================================\n    // Private Methods - Toolbar Button\n    // ==========================================================================\n    /**\n     * Registers toolbar button click handler.\n     */\n    registerToolbarButton() {\n        this.logger?.info('Registering toolbar button...');\n        const browserAction = messenger.browserAction || messenger.action;\n        if (browserAction && browserAction.onClicked) {\n            browserAction.onClicked.addListener(async (tab) => {\n                this.logger?.info('Toolbar button clicked', { tabId: tab.id });\n                try {\n                    const displayedMessage = await messenger.messageDisplay.getDisplayedMessage(tab.id);\n                    if (!displayedMessage) {\n                        await messenger.notifications.create({\n                            type: 'basic',\n                            iconUrl: 'icon.png',\n                            title: 'Keine Nachricht',\n                            message: 'Keine Nachricht in diesem Tab angezeigt',\n                        });\n                        return;\n                    }\n                    const messageId = displayedMessage.id;\n                    this.logger?.info('Toolbar button: Starting single message analysis', { messageId });\n                    await messenger.notifications.create({\n                        type: 'basic',\n                        iconUrl: 'icon.png',\n                        title: 'Analyse gestartet',\n                        message: `Analyse fr Nachricht ${messageId} gestartet`,\n                    });\n                }\n                catch (error) {\n                    const errorMessage = error instanceof Error ? error.message : String(error);\n                    this.logger?.error('Failed to handle toolbar button click', { error: errorMessage });\n                }\n            });\n            this.logger?.info('Toolbar button registered successfully');\n        }\n        else {\n            this.logger?.warn('Browser action API not available for toolbar button');\n        }\n    }\n    // ==========================================================================\n    // Private Methods - Install Handler\n    // ==========================================================================\n    /**\n     * Registers onInstalled handler for extension install/update.\n     */\n    registerInstallHandler() {\n        this.logger?.info('Registering onInstalled handler...');\n        if (messenger.runtime && messenger.runtime.onInstalled) {\n            messenger.runtime.onInstalled.addListener(async (details) => {\n                if (details.reason === 'install') {\n                    this.logger?.info('Extension installed, initializing default settings...');\n                    try {\n                        const configRepository = container.resolve('IConfigRepository');\n                        try {\n                            await configRepository.getAppConfig();\n                            this.logger?.info('App config already exists, skipping defaults');\n                        }\n                        catch {\n                            this.logger?.info('Setting default app config');\n                            await configRepository.setAppConfig({\n                                defaultProvider: 'ollama',\n                                enableNotifications: true,\n                                enableLogging: false,\n                                modelConcurrencyLimits: undefined,\n                            });\n                        }\n                        try {\n                            await configRepository.getProviderSettings('ollama');\n                            this.logger?.info('Ollama provider settings already exist, skipping defaults');\n                        }\n                        catch {\n                            this.logger?.info('Setting default ollama provider settings');\n                            await configRepository.setProviderSettings('ollama', {\n                                apiKey: '',\n                                model: 'gemma3:27b',\n                                apiUrl: 'http://localhost:11434/api/generate',\n                            });\n                        }\n                        this.logger?.info('Default configuration initialized successfully');\n                    }\n                    catch (error) {\n                        const errorMessage = error instanceof Error ? error.message : String(error);\n                        this.logger?.error('Failed to initialize default configuration', {\n                            error: errorMessage,\n                        });\n                    }\n                }\n            });\n        }\n        else {\n            this.logger?.warn('Runtime onInstalled handler not available');\n        }\n        this.logger?.info('Install handler registered');\n    }\n    // ==========================================================================\n    // Private Methods - Shutdown Handler\n    // ==========================================================================\n    /**\n     * Registers shutdown handler for extension cleanup.\n     */\n    registerShutdownHandler() {\n        this.logger?.info('Registering shutdown handler...');\n        if (messenger.runtime && messenger.runtime.onSuspend) {\n            messenger.runtime.onSuspend.addListener(async () => {\n                this.logger?.info('Extension suspending, cleaning up...');\n                await this.shutdown();\n            });\n        }\n        else {\n            this.logger?.warn('Runtime suspend handler not available');\n        }\n        this.logger?.info('Shutdown handler registered');\n    }\n    // ==========================================================================\n    // Private Methods - Helper for Context Menu Handlers\n    // ==========================================================================\n    /**\n     * Gets provider settings from app config.\n     *\n     * @returns Provider settings\n     */\n    async getProviderSettings() {\n        if (!this.appConfigService) {\n            throw new Error('AppConfigService not initialized');\n        }\n        try {\n            this.logger?.info('Attempting to get app config...');\n            const appConfig = await this.appConfigService.getAppConfig();\n            const defaultProvider = appConfig.defaultProvider;\n            this.logger?.info('App config retrieved', { defaultProvider });\n            this.logger?.info(`Attempting to get provider settings for: ${defaultProvider}`);\n            const providerSettings = await this.appConfigService.getProviderSettings(defaultProvider);\n            this.logger?.info('Provider settings retrieved', {\n                apiKey: providerSettings.apiKey ? '***' : 'missing',\n            });\n            return {\n                provider: defaultProvider,\n                apiKey: providerSettings.apiKey,\n                model: providerSettings.model,\n                apiUrl: providerSettings.apiUrl,\n                additionalConfig: providerSettings.additionalConfig,\n            };\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            const errorStack = error instanceof Error ? error.stack : undefined;\n            this.logger?.error('Failed to get provider settings', {\n                error: errorMessage,\n                stack: errorStack,\n            });\n            this.logger?.error('Returning empty provider settings - THIS WILL CAUSE ANALYSIS TO FAIL');\n            return { provider: '' };\n        }\n    }\n    /**\n     * Gets messages to analyze from folder.\n     *\n     * @param folderId - Folder ID\n     * @returns Array of message IDs\n     */\n    async getMessagesToAnalyze(folderId) {\n        try {\n            const messages = await messenger.messages.list(folderId);\n            return messages.messages.map((message) => String(message.id));\n        }\n        catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            this.logger?.error('Failed to get messages from folder', { folderId, error: errorMessage });\n            return [];\n        }\n    }\n};\nBackgroundScript = __decorate([\n    injectable(),\n    __metadata(\"design:paramtypes\", [])\n], BackgroundScript);\n// ============================================================================\n// Extension Entry Point\n// ============================================================================\n/**\n * Main extension entry point.\n */\n(async function main() {\n    startupLogger.info('Thunderbird Email AI Assistant - Background Script Loading');\n    try {\n        const backgroundScript = new BackgroundScript();\n        await backgroundScript.initialize();\n        startupLogger.info('Thunderbird Email AI Assistant - Ready');\n    }\n    catch (error) {\n        startupLogger.error('Failed to start extension', error);\n        try {\n            if (typeof messenger !== 'undefined' && messenger.notifications) {\n                await messenger.notifications.create({\n                    type: 'basic',\n                    iconUrl: 'icon.png',\n                    title: 'Fehler beim Starten',\n                    message: 'Die Erweiterung konnte nicht gestartet werden. Bitte berprfen Sie die Konsole.',\n                });\n            }\n        }\n        catch {\n            // Ignore notification errors during startup\n        }\n        throw error;\n    }\n})();\n// ============================================================================\n// Export for Testing\n// ============================================================================\nexport { BackgroundScript };\n"],"names":["Reflect","root","globalThis","g","self","this","Function","_","functionThis","eval","indirectEvalThis","exporter","makeExporter","target","previous","key","value","Object","defineProperty","configurable","writable","hasOwn","prototype","hasOwnProperty","supportsSymbol","Symbol","toPrimitiveSymbol","toPrimitive","iteratorSymbol","iterator","supportsCreate","create","supportsProto","__proto__","Array","downLevel","HashMap","MakeDictionary","has","map","call","get","undefined","functionPrototype","getPrototypeOf","_Map","Map","entries","cacheSentinel","arraySentinel","MapIterator","keys","values","selector","_index","_keys","_values","_selector","next","index","length","result","done","throw","error","return","_cacheKey","_cacheIndex","enumerable","_find","set","delete","size","i","SameValueZero","clear","getKey","getValue","getEntry","insert","push","CreateMapPolyfill","_Set","Set","_map","add","_WeakMap","WeakMap","rootKey","CreateUniqueKey","_key","table","GetOrCreateWeakMapTable","CreateUUID","FillRandomBytes","buffer","Math","random","data","Uint8Array","array","crypto","getRandomValues","msCrypto","GenRandomBytes","offset","byte","toString","toLowerCase","CreateWeakMapPolyfill","registrySymbol","for","metadataRegistry","IsUndefined","IsObject","isExtensible","fallback","first","second","rest","defineMetadata","reflect","hasOwnMetadata","getOwnMetadata","getOwnMetadataKeys","deleteMetadata","metadataOwner","isProviderFor","O","P","metadataPropertySet","OrdinaryDefineOwnMetadata","OrdinaryHasOwnMetadata","OrdinaryGetOwnMetadata","OrdinaryOwnMetadataKeys","OrdinaryDeleteMetadata","CreateFallbackProvider","targetProviderMap","registry","registerProvider","getProvider","setProvider","provider","Error","getProviderNoCache","GetIterator","IteratorStep","IteratorValue","IteratorClose","providerMap","hasProvider","TypeError","existingProvider","CreateMetadataRegistry","GetOrCreateMetadataRegistry","metadataProvider","metadata","targetMetadata","MetadataKey","MetadataValue","GetOrCreateMetadataMap","metadataMap","ToBoolean","k","nextValue","e","Create","createdTargetMetadata","CreateMetadataProvider","OrdinaryHasMetadata","parent","OrdinaryGetPrototypeOf","IsNull","GetMetadataProvider","OrdinaryGetMetadata","OrdinaryMetadataKeys","ownKeys","parentKeys","_i","ownKeys_1","_a","parentKeys_1","Type","x","ToPrimitive","input","PreferredType","hint","exoticToPrim","GetMethod","toString_1","IsCallable","valueOf","toString_2","OrdinaryToPrimitive","argument","ToPropertyKey","ToString","IsArray","isArray","IsConstructor","y","V","func","obj","method","iterResult","f","proto","prototypeProto","constructor","registeredProvider","__","decorators","propertyKey","attributes","decorated","decorator","DecorateConstructor","descriptor","DecorateProperty","metadataKey","metadataValue","IsPropertyKey","factory","isMergeableObject","isNonNullObject","stringValue","$$typeof","REACT_ELEMENT_TYPE","isReactElement","isSpecial","cloneUnlessOtherwiseSpecified","options","clone","deepmerge","val","defaultArrayMerge","source","concat","element","getKeys","getOwnPropertySymbols","filter","symbol","propertyIsEnumerable","getEnumerableOwnPropertySymbols","propertyIsOnObject","object","property","arrayMerge","sourceIsArray","destination","forEach","propertyIsUnsafe","customMerge","getMergeFunction","mergeObject","all","reduce","prev","deepmerge_1","module","exports","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","window","Lifecycle","extendStatics","d","b","setPrototypeOf","p","__values","o","s","m","__read","n","r","ar","arguments","isClassProvider","useClass","isFactoryProvider","useFactory","DelayedConstructor","wrap","reflectMethods","createProxy","createObject","_this","init","Proxy","createHandler","delayedObject","handler","name","args","apply","isNormalToken","token","isTokenProvider","useToken","isValueProvider","useValue","RegistryBase","_registryMap","getAll","ensure","setAll","_super","Registry","scopedResolutions","PreResolutionInterceptors","PostResolutionInterceptors","preResolution","postResolution","typeInfo","InternalDependencyContainer","_registry","interceptors","disposed","disposables","register","providerOrConstructor","lifecycle","Transient","ensureNotDisposed","isProvider","path","tokenProvider","currentToken","includes","join","registration","Singleton","ContainerScoped","ResolutionScoped","registerType","from","to","registerInstance","instance","registerSingleton","resolve","context","isOptional","getRegistration","executePreResolutionInterceptor","resolveRegistration","executePostResolutionInterceptor","isConstructorToken","construct","resolutionType","e_1","remainingInterceptors","_b","_c","interceptor","frequency","callback","e_1_1","e_2","e_2_1","resolved","isSingleton","isContainerScoped","returnInstance","resolveAll","registrations","getAllRegistrations","result_1","item","isRegistered","recursive","reset","clearInstances","e_3","_d","e_3_1","createChildContainer","e_4","childContainer","some","e_4_1","beforeResolution","afterResolution","dispose","thisArg","_arguments","generator","promises","body","t","label","sent","trys","ops","verb","v","op","pop","step","__generator","disposable","maybePromise","Promise","reject","fulfilled","rejected","then","ctor","paramInfo","params","resolveParams","bind","param","idx","multiple","transform","transformArgs","paramIdx","match","msg","indent","message","split","l","composeErrorMessage","trim","INJECTION_TOKEN_METADATA_KEY","_propertyKey","parameterIndex","descriptors","getMetadata","injectionTokens","ConsoleLogger","formatMessage","JSON","stringify","debug","console","info","warn","maskApiKey","slice","desc","c","getOwnPropertyDescriptor","decorate","DEFAULT_TTL","async","hashKey","dataBuffer","TextEncoder","encode","hashBuffer","subtle","digest","padStart","MemoryCache","cache","hitCount","missCount","hashedKey","entry","now","Date","timestamp","ttl","lastCleanup","cleanupExpired","cleanedCount","getStats","totalRequests","hitRate","totalEntries","round","PriorityQueue","queue","processing","waitTimes","enqueue","priority","queueItem","id","generateId","max","enqueuedAt","sort","a","dequeue","shift","waitTime","peek","isEmpty","cancelRunning","clearedWaiting","clearedProcessing","waiting","avgWaitTime","sum","time","substring","ThunderbirdMailReader","logger","getFullMessage","messageId","thunderbirdMessage","messenger","messages","getFull","messageDetails","parts","convertMessageParts","headers","folderId","accountId","folderAccountId","subject","cc","date","tags","attachments","extractAttachmentsFromParts","bodyPart","find","contentType","isAttachment","partsCount","attachmentsCount","errorMessage","String","getMessageHeaders","headersOnly","getRawMessage","raw","parseMessageParts","fullMessage","count","getPlainTextBody","plainTextPart","getHTMLTextBody","htmlPart","replace","getAttachments","getAttachmentContent","attachment","_decodeBase64","mimeType","content","encoding","getMessages","includeDeleted","list","queryMessages","query","filtered","subjectLower","fromLower","dateAfter","dateBefore","limit","total","parseEMLFile","fileContent","lines","inHeaders","line","convert","part","validDisposition","contentDisposition","converted","contentId","charset","extract","nested","Provider","paramIndex","TAG_KEY_PREFIX","HARDCODED_TAGS","is_scam","color","spf_fail","dkim_fail","tagged","email_ai_analyzed","PROMPT_BASE","OLLAMA","OPENAI","GEMINI","CLAUDE","MISTRAL","DEEPSEEK","ZAI_PAAS","ZAI_CODING","isThunderbirdTag","tag","test","ordinal","TAG_KEY_MAP","ThunderbirdTagManager","getAllTags","listTags","every","getTag","getTagById","createTag","sortKey","baseKey","internalKey","existingTag","tagColor","createdTag","returnedKey","returnedName","returnedColor","updateTag","updates","updateData","updatedTag","update","deleteTag","addTagToMessage","tagKey","tagExists","addTags","removeTagFromMessage","removeTags","setTagsOnMessage","tagKeys","internalTagKeys","originalKeys","internalKeys","allTags","existingKeys","invalidTags","clearTagsFromMessage","exists","ensureTagExists","existingKey","existingName","newTag","newKey","newName","addTagToMessages","messageIds","setTagsOnMessages","hasBrowserStorage","maybeStorage","storage","local","STORAGE_KEYS","IndexedDBConfigRepository","browserApi","browser","chromeApi","chrome","getProviderSettings","providerId","providerSettings","settings","hasApiKey","apiKey","model","setProviderSettings","getAllProviderSettings","getCustomTags","customTags","setCustomTags","tagCount","getAppConfig","appConfig","defaultProvider","enableNotifications","enableLogging","setAppConfig","config","clearAll","ElementType","Root","Text","Directive","Comment","Script","Style","Tag","CDATA","Doctype","Node","startIndex","endIndex","parentNode","previousSibling","nextSibling","cloneNode","DataNode","super","nodeValue","type","nodeType","ProcessingInstruction","NodeWithChildren","children","firstChild","lastChild","childNodes","Document","Element","attribs","tagName","namespace","prefix","node","elem","cloneChildren","child","isDocument","isDirective","instruction","sourceCodeLocation","childs","defaultOpts","withStartIndices","withEndIndices","xmlMode","elementCB","dom","tagStack","lastNode","parser","onparserinit","onreset","onend","handleCallback","onerror","onclosetag","onopentag","addNode","ontext","oncomment","oncommentend","oncdatastart","text","oncdataend","onprocessinginstruction","matchAll","unshift","ceil","low","high","column","lineNumbers","regex","lastIndex","exec","discard","RegExp","flags","state","len","tokens","complete","global","sticky","str","onToken","onEnd","position","matched","mapInner","mapOuter","mapper","j","def","choice","ps","otherwise","pa","pb","r1","many","success","takeWhile","ab","ma","vb","right","va","abc","pc","mb","vc","middle","ra","rb","leftAssoc2","pLeft","pOper","pRight","m1","chain","v0","acc","reducer","loop","acc1","pos","chainReduce","reduceLeft","nl","nonascii","unicode","nmchar","ident","string1","string2","lexSelector","lexEscapedString","sumSpec","a0","a1","a2","b0","b1","b2","sumAllSpec","ss","unicodeEscapedSequence_","fromCodePoint","parseInt","escapedSequence_","anyChar_","escapedString_","cs","escapedString","lexerResult","literal","whitespace_","optionalWhitespace_","optionallySpaced","identifier_","hashId_","string_","startsWith","namespace_","qualifiedName_","ns","uniSelector_","specificity","tagSelector_","classSelector_","fullstop","idSelector_","attrModifier_","attrValue_","mod","modifier","attrMatcher_","attrSelector_","lbr","matcher","typeSelector_","subclassSelector_","compoundSelector_","vs","flatMap","head","tail","combinatorSeparator_","complexSelector_","left","combinator","prettyPrintPosition","padEnd","repeat","parse1","parse_","serialize","_serNs","_serIdent","dq","bs","ctrl","_codePoint","char","codePointAt","d1","d2","hy","safe","other","normalize","_compareArrays","_getSelectorPriority","compareSpecificity","shorter","DecisionTree","branches","weave","results","selectorString","ast","preprocess","terminal","valueContainer","toAstTerminalPairs","build","builder","reduceSelectorVariants","newList","sel","items","topKind","findTopKey","getSelectorKind","matches","nonmatches","empty","breakByKind","branchOfKind","terminate","partition","cont","selectedKind","simpsels","kind","groups","spliceAndGroup","variants","group","tagNameBranch","matchers","oneSimpleSelector","predicate","getAttrPredicate","continuation","attrValueBranch","spliceSimpleSelector","attrPresenceBranch","combinatorBranch","expected","actual","endsWith","lower","leftItems","rightCont","leftAst","keyCallback","bestKey","bestKeyPredicate","hasBestKeyPredicate","partition1","splicedNode","firstIndex","candidates","candidates1","topCounter","src","Picker","pickAll","el","pick1","preferFirst","comparator","comparatorPreferFirst","comparatorPreferLast","diff","hp2Builder","nodes","handleArray","handleNode","variant","handleTagName","callbacks","attr","attrName","cb","handleAttrValueName","handleAttrPresenceName","leftElementGetter","getPrecedingElement","getParentElement","handlePushElementNode","handlePopElementNode","Uint16Array","charCodeAt","decodeMap","codePoint","output","fromCharCode","replaceCodePoint","CharCodes","BinTrieFlags","EntityDecoderState","DecodingMode","State","QuoteType","isNumber","code","ZERO","NINE","isHexadecimalCharacter","UPPER_A","UPPER_F","LOWER_A","LOWER_F","isEntityInAttributeInvalidEnd","EQUALS","UPPER_Z","LOWER_Z","isAsciiAlphaNumeric","EntityDecoder","decodeTree","emitCodePoint","errors","EntityStart","consumed","treeIndex","excess","decodeMode","Strict","startEntity","write","NUM","NumericStart","stateNumericStart","NamedEntity","stateNamedEntity","NumericDecimal","stateNumericDecimal","NumericHex","stateNumericHex","LOWER_X","addToNumericResult","start","end","base","digitCount","pow","substr","startIdx","emitNumericEntity","lastCp","expectedLength","absenceOfDigitsInNumericCharacterReference","SEMI","missingSemicolonAfterCharacterReference","validateNumericCharacterReference","current","valueLength","VALUE_LENGTH","determineBranch","Attribute","emitNotTerminatedNamedEntity","emitNamedEntityData","getDecoder","ret","decoder","indexOf","nodeIdx","branchCount","BRANCH_LENGTH","jumpOffset","JUMP_TABLE","lo","hi","mid","midVal","isWhitespace","Space","NewLine","Tab","FormFeed","CarriageReturn","isEndOfTagSection","Slash","Gt","Zero","Nine","Sequences","Cdata","CdataEnd","CommentEnd","ScriptEnd","StyleEnd","TitleEnd","Tokenizer","decodeEntities","cbs","sectionStart","baseState","running","currentSequence","sequenceIndex","trieIndex","trieCurrent","entityResult","entityExcess","entityTrie","chunk","parse","finish","pause","resume","getIndex","getSectionStart","stateText","Lt","fastForwardTo","BeforeTagName","Amp","BeforeEntity","stateSpecialStartSequence","isEnd","InTagName","stateInTagName","stateInSpecialTag","endOfText","actualIndex","stateInClosingTagName","Number","stateCDATASequence","InCommentLike","InDeclaration","stateInDeclaration","stateInCommentLike","oncdata","isTagStartChar","LowerA","LowerZ","UpperA","UpperZ","isASCIIAlpha","startSpecial","sequence","SpecialStartSequence","stateBeforeTagName","ExclamationMark","BeforeDeclaration","Questionmark","InProcessingInstruction","BeforeSpecialS","BeforeClosingTagName","onopentagname","BeforeAttributeName","stateBeforeAttributeName","stateBeforeClosingTagName","InClosingTagName","InSpecialComment","AfterClosingTagName","stateAfterClosingTagName","onopentagend","InSpecialTag","InSelfClosingTag","InAttributeName","stateInSelfClosingTag","onselfclosingtag","stateInAttributeName","Eq","onattribname","AfterAttributeName","stateAfterAttributeName","BeforeAttributeValue","onattribend","NoValue","stateBeforeAttributeValue","DoubleQuote","InAttributeValueDq","SingleQuote","InAttributeValueSq","InAttributeValueNq","stateInAttributeValueNoQuotes","handleInAttributeValue","quote","onattribdata","Double","Single","stateInAttributeValueDoubleQuotes","stateInAttributeValueSingleQuotes","Unquoted","stateBeforeDeclaration","OpeningSquareBracket","CDATASequence","Dash","BeforeComment","ondeclaration","stateInProcessingInstruction","stateBeforeComment","stateInSpecialComment","stateBeforeSpecialS","stateBeforeEntity","BeforeNumericEntity","InNamedEntity","stateInNamedEntity","emitNamedEntity","masked","allowLegacyEntity","Semi","entityStart","emitPartial","stateBeforeNumericEntity","LowerX","InHexEntity","InNumericEntity","stateInNumericEntity","strict","stateInHexEntity","UpperF","LowerF","isHexDigit","cleanup","shouldContinue","handleTrailingData","cp","onattribentity","ontextentity","formTags","pTag","tableSectionTags","ddtTags","rtpTags","openImpliesClose","voidElements","foreignContextElements","htmlIntegrationElements","reNameEnd","_e","openTagStart","tagname","attribname","attribvalue","stack","foreignContext","buffers","bufferOffset","writeIndex","ended","lowerCaseTagNames","lowerCaseTags","lowerCaseAttributeNames","tokenizer","getSlice","isVoidElement","emitOpenTag","impliesClose","endOpenTag","isImplied","_f","lastIndexOf","closeCurrentTag","recognizeSelfClosing","isOpenImplied","onattribute","getInstructionName","search","_g","_h","_j","_k","recognizeCDATA","parseComplete","shiftBuffer","parseChunk","restoreDiff","arr","xmlCodeMap","lastIdx","getEscaper","EntityLevel","EncodingMode","elementNames","attributeNames","unencodedElements","replaceQuotes","singleTag","render","renderNode","renderCdata","opts","foreignModeIntegrationPoints","foreignElements","encodeEntities","emptyAttrs","formatAttributes","selfClosingTags","renderTag","renderText","DocumentPosition","limitedDepthRecursive","f1","trimCharacter","mergeDuplicatesPreferLast","overwriteMerge$1","reverse","numberToLetterSequence","num","baseChar","digits","baseCode","I","numberToRoman","InlineTextBuilder","maxLineLength","nextLineWords","wordwrap","MAX_VALUE","nextLineAvailableChars","wrapCharacters","forceWrapOnLimit","stashedSpace","wordBreakOpportunity","pushWord","word","noWrap","startNewLine","isLineStart","cost","splitLongWord","popWord","lastWord","concatWord","words","firstLine","remainingChars","splitIndex","StackItem","getRoot","BlockStackItem","leadingLineBreaks","inlineTextBuilder","rawText","stashedLineBreaks","isPre","isNoWrap","ListStackItem","interRowLineBreaks","maxPrefixLength","prefixAlign","ListItemStackItem","TableStackItem","rows","TableRowStackItem","cells","TableCellStackItem","maxColumnWidth","TransformerStackItem","WhitespaceProcessor","whitespaceChars","whitespaceCharacters","whitespaceCodes","leadingWhitespaceRe","trailingWhitespaceRe","allWhitespaceOrEmptyRe","newlineOrNonWhitespaceRe","newlineOrNonNewlineStringRe","preserveNewlines","wordOrNewlineRe","shrinkWrapAdd","previouslyStashedSpace","anyMatch","testLeadingWhitespace","testTrailingWhitespace","wordRe","addLiteral","testContainsWords","countNewlinesNoWords","counter","BlockTextBuilder","picker","whitespaceProcessor","_stackItem","_wordTransformer","pushWordTransform","wordTransform","popWordTransform","startNoWrap","stopNoWrap","_getCombinedWordTransformer","wt","applyTransformer","ce","encodeCharacters","_popStackItem","addLineBreak","addWordBreakOpportunity","addInline","noWordTransform","newlinesNumber","openBlock","reservedLineLength","closeBlock","trailingLineBreaks","blockTransform","block","blockText","addText","openList","openListItem","prefixLength","closeListItem","listItem","spacing","closeList","openTable","openTableRow","openTableCell","closeTableCell","colspan","rowspan","cell","closeTableRow","row","closeTable","tableToString","stackItem","parentText","lineBreaks","transformer","compile$1","selectorsWithoutFormat","selectors","format","dict","replacer","cgs","findIndex","cg","makeReplacerFromDict","baseSelectorsPicker","baseElements","findBaseElements","limitedWalk","limits","maxDepth","walk","maxChildNodes","pickedSelectorIndex","selectorIndex","maxBaseElements","orderBy","returnDomByDefault","findBases","recursiveWalk","ellipsis","html","maxInputLength","document","parseDocument","bases","process","tagDefinition","formatters","renderOpenTag","attrs","renderCloseTag","genericFormatters","freeze","formatOptions","blockHtml","blockString","string","blockTag","inline","inlineHtml","inlineString","inlineSurround","suffix","inlineTag","skip","getRow","matrix","findFirstVacantIndex","putCellIntoLayout","layout","baseRow","baseCol","layoutRow","getOrInitOffset","offsets","updateOffset","span","withBrackets","brackets","pathRewrite","rewriter","baseUrl","modifiedPath","trimCharacterEnd","formatList","nextPrefixCallback","isNestedList","listItems","trimStart","formatDataTable","formatCell","cellNode","walkTable","formatHeaderCell","uppercaseHeaderCells","toUpperCase","childOfTr","tableRows","rowSpacing","colSpacing","colNumber","rowNumber","rowOffsets","cellHeight","maxSize","rowI","rowJ","temp","transposeInPlace","outputLines","colOffsets","rowsInThisColumn","min","rendered","cellWidth","lineOffset","textFormatters","anchor","href","ignoreHref","noAnchorUrl","getHref","hideLinkHrefIfSameAsText","linkBrackets","blockquote","trimEmptyLines","dataTable","heading","uppercase","horizontalLine","image","alt","lineBreak","orderedList","nextIndex","indexFunction","olType","getOrderedListIndexFunction","paragraph","pre","tables","classes","ids","splitClassesAndIds","attrClasses","attrIds","isDataTable","formatBlock","unorderedList","itemPrefix","wbr","DEFAULT_OPTIONS","longWordSplit","overwriteMerge","selectorsMerge","concatMerge","EmailContentExtractor","findEmailParts","textBody","htmlBody","recurse","hasNestedParts","isPlainTextBody","isHtmlBody","assign","tagDefinitions","definition","valueKey","baseElement","handleDeprecatedOptions","compile","buildPrompt","structuredData","promptTemplate","headersJSON","attachmentsJSON","customInstructions","prompt","allTagsDescription","truncateText","maxLength","TagService","tagManager","tagKeyPrefix","tagNamePrefix","hardcodedTags","defaultCustomTags","ensureTagsExist","tagsToEnsure","getAllTagConfigs","isThunderbirdTagArray","tagToCreate","checkTagExists","existingTags","tagToCheck","storageResult","isValidStorageCustomTags","findThunderbirdTag","tagConfig","AppConfigService","configRepository","DEFAULT_CACHE_TTL","defaults","ollamaApiUrl","ollamaModel","openaiApiKey","geminiApiKey","claudeApiKey","mistralApiKey","deepseekApiKey","zaiPaasApiKey","zaiPaasModel","zaiCodingApiKey","zaiCodingModel","modelConcurrencyLimits","cacheKey","cached","getFromCache","setInCache","getFallbackProviderSettings","invalidateCache","clearCache","getDefaults","getHardcodedTags","getDefaultCustomTags","getPromptTemplate","isValidProvider","isHardcodedTag","isValidColor","getConcurrencyLimit","PROVIDER_DEFAULT_CONCURRENCY","modelConfig","concurrency","providerConfig","validateConcurrencyConfig","providerStr","isInteger","openai","gemini","claude","mistral","deepseek","apiUrl","ollama","RateLimiterService","buckets","queues","modelSemaphores","modelConcurrencyConfig","configure","modelConcurrency","providers","lastRefill","acquire","requestFn","wrappedFn","acquireSemaphore","releaseSemaphore","fn","processQueue","tryAcquire","refillTokens","consumeToken","stats","totalQueued","bucket","semaphore","getFirstSemaphoreForProvider","queueLength","isProcessing","activeConcurrency","active","maxConcurrency","semaphoreKey","clearQueue","clearedTasks","cancelledProviders","isCurrentlyExecuting","task","getSemaphore","refillAmount","hasTokens","setTimeout","isIProviderSettings","BaseProviderAdapter","validateSettings","hasModel","baseSettings","convertSettings","analyze","hasBody","legacyInput","convertAnalyzeInput","legacyResponse","response","convertTagResponse","confidence","convertStructuredEmailData","convertCustomTags","description","reasoning","sender","sender_consistent","spf_pass","dkim_pass","LogLevel","ErrorSeverity","ErrorType","isError","TAG_RESPONSE_SCHEMA","itemType","required","default","validate","currentLogLevel","INFO","log","level","toISOString","levelName","sanitizedContext","sanitizeContext","depth","sanitized","keyPatterns","pattern","ctx","DEBUG","ERROR","isString","extractJson","firstBrace","braceCount","extracted","endIdx","preview","textLength","hasBrace","isTransientError","cause","isErrorWithCause","isRetryableStatus","status","hasStatus","logError","details","validateValue","schema","fieldName","received","numValue","isNaN","DEFAULT_RETRY_CONFIG","maxRetries","baseDelay","factor","jitter","BaseProvider","timeout","DEFAULT_TIMEOUT","retryConfig","getApiKey","getAuthHeaderKey","formatAuthHeader","getAdditionalHeaders","_settings","tagNamesList","instructionsText","finalPrompt","tagDefinitionsCount","promptLength","validateResponse","parsed","isNull","isUndefined","jsonText","hasTags","hasConfidence","tagsValue","confidenceValue","parseError","validated","validateLLMResponse","logInfo","logDebug","getHeaders","additionalHeaders","executeRequest","requestBody","externalSignal","getApiUrl","url","lastError","attempt","isTransient","exponentialDelay","delay","retryWithBackoff","res","controller","AbortController","timeoutId","abort","addEventListener","clearTimeout","fetch","signal","fetchWithTimeout","ok","isOkResponse","errorText","catch","statusText","attachmentCount","buildRequestBody","responseData","json","parsedResponse","parseResponse","validatedResponse","OpenAIProvider","_prompt","_structuredData","_customTags","role","response_format","choices","isOpenAIChatCompletionResponse","isOpenAIErrorResponse","isValid","listModels","Authorization","Boolean","CLAUDE_API_VERSION","ClaudeProvider","max_tokens","system","GeminiProvider","contents","generationConfig","response_mime_type","isGeminiResponse","candidate","hasValidText","models","MistralProvider","isMistralErrorResponse","DEFAULT_OLLAMA_URL","OllamaProvider","stream","isOllamaGenerateResponse","tagsUrl","DeepseekProvider","created","usage","total_tokens","ZaiPaaSProvider","zaiModel","zaiBaseUrl","thinking","temperature","isZaiChatCompletionResponse","isZaiErrorResponse","isNonEmptyString","isRecord","isZaiModelsResponse","ZaiCodingProvider","PROVIDER_ID_TO_TOKEN","PROVIDER_ID_TO_CLASS","isIProvider","ProviderFactory","registeredProviders","initialized","initialize","registerAdapterTokens","ProviderClass","providerInstance","available","getAvailableProviders","availableProviders","resolvedProviderId","adapter","getContainer","EventBus","handlers","totalHandlers","totalEventsPublished","totalHandlerErrors","handlerIdCounter","publish","event","eventType","registeredHandler","handlerId","handlersCalled","subscribe","generateHandlerId","registeredAt","unsubscribe","h","splice","getState","clearHandlers","clearAllHandlers","createEmailAnalyzedEvent","fromCache","duration","createProviderErrorEvent","errorType","AnalyzeEmail","mailReader","providerFactory","contentExtractor","eventBus","execute","cacheTtl","forceReanalyze","applyTags","startTime","hasCustomTags","customTagsCount","email","retrieveEmail","extractEmailContent","bodyLength","tagsToUse","loadCustomTags","generateCacheKey","cachedResult","checkCache","applyTagsToEmail","tagsFound","analysisResult","analyzeWithProvider","cacheResult","mappedTags","messageIdNum","partCount","att","keyData","hash","subtleCrypto","msgBuffer","sha256","analysisInput","createTagCreatedEvent","tagDescription","ApplyTagsToEmail","hardcodedTagsEnsured","ensureHardcodedTagsExist","createMissingTags","replaceTags","defaultColor","validTags","warnings","validateAndFilterTags","warning","applied","ensuredTags","createdTags","applyTagsToMessage","appliedTags","skippedTags","createTagAppliedEvent","createMissing","keyToTagName","currentTags","getCurrentTags","keysToRemove","remainingTags","removedTags","clearTags","hardcodedTagKeys","customTagKeys","newTags","new","charAt","AnalyzeBatchEmails","analyzeEmail","isCancelled","processedCount","failedCount","totalCount","processedMessageIds","failedMessageIds","analysisResults","resolvePromise","activeWorkers","messageCount","delayBetweenAnalyses","continueOnError","loadAppConfig","workerCount","startWorker","successCount","failureCount","cancelled","failed","resetState","getProgress","percentage","processed","isRunning","cancel","clearedCount","remaining","processQueueItem","sleep","ms","createEmailReceivedEvent","messageData","folderData","folderName","folderType","folderPath","EmailEventListener","_mailReader","_analyzeEmail","analyzeBatch","listenerState","messagesProcessed","errorsEncountered","onNewMailReceivedHandler","registerListeners","onNewMailReceived","addListener","unregisterListeners","removeListener","stop","folder","author","recipients","failedIds","MessageHandler","_applyTags","appConfigService","handlerState","messagesHandled","handleMessageHandler","batchProgress","successful","registerMessageHandlers","handleMessage","runtime","onMessage","unregisterMessageHandlers","_sender","sendResponse","messageType","hasAction","action","messagesHandledSoFar","isStartBatchAnalysisMessage","handleStartBatchAnalysis","isGetBatchProgressMessage","handleGetBatchProgress","isCancelBatchAnalysisMessage","handleCancelBatchAnalysis","isAnalyzeSingleMessageMessage","handleAnalyzeSingleMessage","isClearQueueMessage","handleClearQueue","isClearCacheMessage","handleClearCache","isGetCacheStatsMessage","handleGetCacheStats","publishError","getMessagesToAnalyze","endTime","errorStack","additionalConfig","startupLogger","meta","BackgroundScript","eventListener","messageHandler","isInitialized","setupDIContainer","registerContextMenus","registerToolbarButton","registerInstallHandler","registerShutdownHandler","shutdown","menus","title","contexts","visible","onClicked","handleContextMenuClick","_tab","selectedMessages","menuItemId","menuItemIdType","hasSelectedMessages","hasMessagesProperty","hasSelectedFolders","selectedFolders","folderCount","fullInfo","folders","notifications","iconUrl","browserAction","tab","tabId","displayedMessage","messageDisplay","getDisplayedMessage","onInstalled","reason","onSuspend","backgroundScript"],"sourceRoot":""}